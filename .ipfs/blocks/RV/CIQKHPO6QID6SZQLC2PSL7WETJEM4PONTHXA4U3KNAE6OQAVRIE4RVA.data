LavaPack.loadBundle([[184,{"@metamask/utils":2081,lodash:4071},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.migrate=async function(e){const t=(0,i.cloneDeep)(e);return t.meta.version=s,t.data=function(e){if((0,n.hasProperty)(e,"NetworkController")&&(0,n.isObject)(e.NetworkController)&&(0,n.hasProperty)(e.NetworkController,"providerConfig")&&(0,n.isObject)(e.NetworkController.providerConfig)){const{networkConfigurations:t,providerConfig:r}=e.NetworkController;if(!(0,n.isObject)(t))return e;if(r.id)return e;let i;for(const s of Object.keys(t)){const o=t[s];if(!(0,n.isObject)(o))return e;if(o.rpcUrl===r.rpcUrl){i=o.id;break}}return i?(e.NetworkController.providerConfig={...r,id:i},{...e,NetworkController:e.NetworkController}):e}var t,r;if((0,n.isObject)(e.NetworkController)){if(!(0,n.isObject)(e.NetworkController.providerConfig)){var i,s;null===(i=global.sentry)||void 0===i||null===(s=i.captureException)||void 0===s||s.call(i,new Error("typeof state.NetworkController.providerConfig is "+typeof e.NetworkController.providerConfig))}}else null===(t=global.sentry)||void 0===t||null===(r=t.captureException)||void 0===r||r.call(t,new Error("typeof state.NetworkController is "+typeof e.NetworkController));return e}(t.data),t},r.version=void 0;var n=e("@metamask/utils"),i=e("lodash");const s=r.version=89}}},{package:"$root$",file:"app/scripts/migrations/089.ts"}],[185,{"@metamask/utils":2081,lodash:4071,loglevel:4083},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.migrate=async function(e){const t=(0,i.cloneDeep)(e);return t.meta.version=a,t.data=function(e){if(!(0,s.hasProperty)(e,"PhishingController"))return o.default.warn("typeof state.PhishingController is undefined"),e;if(!(0,s.isObject)(e.PhishingController)){var t,r;return null===(t=global.sentry)||void 0===t||null===(r=t.captureException)||void 0===r||r.call(t,new Error("typeof state.PhishingController is "+typeof e.PhishingController)),e}if(!(0,s.hasProperty)(e.PhishingController,"listState"))return o.default.warn("typeof state.PhishingController.listState is "+typeof e.PhishingController),e;return delete e.PhishingController.listState,e}(t.data),t},r.version=void 0;var n,i=e("lodash"),s=e("@metamask/utils"),o=(n=e("loglevel"))&&n.__esModule?n:{default:n};const a=r.version=90}}},{package:"$root$",file:"app/scripts/migrations/090.ts"}],[186,{"@metamask/utils":2081,lodash:4071},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.migrate=async function(e){const t=(0,i.cloneDeep)(e);return t.meta.version=s,t.data=function(e){if((0,n.hasProperty)(e,"NetworkController")&&(0,n.isObject)(e.NetworkController)&&(0,n.hasProperty)(e.NetworkController,"networkConfigurations")&&(0,n.isObject)(e.NetworkController.networkConfigurations)){const{networkConfigurations:t}=e.NetworkController;for(const[e,r]of Object.entries(t))(0,n.isObject)(r)&&(r.chainId||delete t[e]);return e.NetworkController={...e.NetworkController,networkConfigurations:t},{...e,NetworkController:e.NetworkController}}var t,r;if((0,n.isObject)(e.NetworkController)){if(!(0,n.isObject)(e.NetworkController.networkConfigurations)){var i,s;null===(i=global.sentry)||void 0===i||null===(s=i.captureException)||void 0===s||s.call(i,new Error("typeof state.NetworkController.networkConfigurations is "+typeof e.NetworkController.networkConfigurations))}}else null===(t=global.sentry)||void 0===t||null===(r=t.captureException)||void 0===r||r.call(t,new Error("typeof state.NetworkController is "+typeof e.NetworkController));return e}(t.data),t},r.version=void 0;var n=e("@metamask/utils"),i=e("lodash");const s=r.version=91}}},{package:"$root$",file:"app/scripts/migrations/091.ts"}],[187,{"@metamask/utils":2081,lodash:4071,loglevel:4083},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.migrate=async function(e){const t=(0,i.cloneDeep)(e);return t.meta.version=a,t.data=function(e){if(!(0,s.hasProperty)(e,"TokenListController"))return o.default.warn("Skipping migration, TokenListController state is missing"),e;var t,r;if(!(0,s.isObject)(e.TokenListController))return null===(t=global.sentry)||void 0===t||null===(r=t.captureException)||void 0===r||r.call(t,new Error("typeof state.TokenListController is "+typeof e.TokenListController)),e;if(!(0,s.hasProperty)(e.TokenListController,"tokensChainsCache"))return o.default.warn("Skipping migration, TokenListController.tokensChainsCache state is missing"),e;e.TokenListController.tokensChainsCache===undefined&&delete e.TokenListController.tokensChainsCache;return e}(t.data),t},r.version=void 0;var n,i=e("lodash"),s=e("@metamask/utils"),o=(n=e("loglevel"))&&n.__esModule?n:{default:n};const a=r.version=92.1}}},{package:"$root$",file:"app/scripts/migrations/092.1.ts"}],[188,{"@metamask/utils":2081,"@sentry/browser":2179,lodash:4071},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.migrate=async function(e){const t=(0,s.cloneDeep)(e);return t.meta.version=o,t.data=function(e){return function(e){const t=["networkId","networkStatus","providerConfig","networkDetails","networkConfigurations"];if(!(0,n.hasProperty)(e,"NetworkController")||!(0,s.isObject)(e.NetworkController))return(0,i.captureException)(`Migration ${o}: Invalid NetworkController state: ${typeof e.NetworkController}`),e;const r=e.NetworkController,a=(0,s.pick)(r,t);return{...e,NetworkController:a}}(e)}(t.data),t},r.version=void 0;var n=e("@metamask/utils"),i=e("@sentry/browser"),s=e("lodash");const o=r.version=92.2}}},{package:"$root$",file:"app/scripts/migrations/092.2.ts"}],[189,{"@metamask/utils":2081,lodash:4071,loglevel:4083},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.migrate=async function(e){const t=(0,s.cloneDeep)(e);return t.meta.version=a,function(e){!function(e){if((0,i.isNullOrUndefined)(e.PreferencesController))return void o.default.warn(`Migration #${a}: preferences controller null or undefined, skipping migration`);if((0,i.hasProperty)(e,"AppStateController")&&(0,i.isObject)(e.AppStateController)&&(0,i.hasProperty)(e,"PreferencesController")&&(0,i.isObject)(e.PreferencesController)){var t;const r=null===(t=e.PreferencesController)||void 0===t?void 0:t.advancedGasFee,n=(0,i.isObject)(r)&&u(r);e.AppStateController.hadAdvancedGasFeesSetPriorToMigration92_3=n,(null===e.PreferencesController.advancedGasFee||(0,i.isObject)(e.PreferencesController.advancedGasFee)&&u(e.PreferencesController.advancedGasFee))&&(e.PreferencesController.advancedGasFee={})}else if(!1===(0,i.isObject)(e.AppStateController)){var r,n;null===(r=global.sentry)||void 0===r||null===(n=r.captureException)||void 0===n||n.call(r,new Error("typeof state.AppStateController is "+typeof e.AppStateController))}else if(!1===(0,i.isObject)(e.PreferencesController)){var s,c;null===(s=global.sentry)||void 0===s||null===(c=s.captureException)||void 0===c||c.call(s,new Error("typeof state.PreferencesController is "+typeof e.PreferencesController))}}(e)}(t.data),t},r.version=void 0;var n,i=e("@metamask/utils"),s=e("lodash"),o=(n=e("loglevel"))&&n.__esModule?n:{default:n};const a=r.version=92.3;function u(e){const t=Object.keys(e);return!(!t.includes("maxBaseFee")&&!t.includes("priorityFee"))}}}},{package:"$root$",file:"app/scripts/migrations/092.3.ts"}],[19,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.WALLET_PREFIX=r.NOTIFICATION_NAMES=r.LOG_METHOD_TYPES=r.LOG_LIMIT=r.LOG_IGNORE_METHODS=void 0;r.WALLET_PREFIX="wallet_",r.NOTIFICATION_NAMES={accountsChanged:"metamask_accountsChanged",unlockStateChanged:"metamask_unlockStateChanged",chainChanged:"metamask_chainChanged"},r.LOG_IGNORE_METHODS=["wallet_registerOnboarding","wallet_watchAsset"],r.LOG_METHOD_TYPES={restricted:"restricted",internal:"internal"},r.LOG_LIMIT=100}}},{package:"$root$",file:"app/scripts/controllers/permissions/enums.js"}],[190,{"@metamask/utils":2081,lodash:4071,loglevel:4083},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.migrate=async function(e){const t=(0,i.cloneDeep)(e);return t.meta.version=a,t.data=function(e){if((0,s.hasProperty)(e,"PhishingController")&&(0,s.isObject)(e.PhishingController))delete e.PhishingController.stalelistLastFetched,delete e.PhishingController.hotlistLastFetched;else if((0,s.hasProperty)(e,"PhishingController")){var t,r;null===(t=global.sentry)||void 0===t||null===(r=t.captureException)||void 0===r||r.call(t,new Error("typeof state.PhishingController is "+typeof e.PhishingController))}else o.default.warn("typeof state.PhishingController is undefined");return e}(t.data),t},r.version=void 0;var n,i=e("lodash"),s=e("@metamask/utils"),o=(n=e("loglevel"))&&n.__esModule?n:{default:n};const a=r.version=92}}},{package:"$root$",file:"app/scripts/migrations/092.ts"}],[191,{"@metamask/utils":2081,lodash:4071},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.migrate=async function(e){const t=(0,n.cloneDeep)(e);return t.meta.version=s,t.data=function(e){if((0,i.hasProperty)(e,"NetworkController")&&(0,i.isObject)(e.NetworkController)&&(0,i.hasProperty)(e.NetworkController,"providerConfig")&&(0,i.isObject)(e.NetworkController.providerConfig)){const{providerConfig:t}=e.NetworkController;return t.ticker?e:(e.NetworkController.providerConfig={ticker:"ETH",...t},{...e,NetworkController:e.NetworkController})}var t,r;if((0,i.isObject)(e.NetworkController)){if((0,i.isObject)(e.NetworkController)&&!(0,i.isObject)(e.NetworkController.providerConfig)){var n,s;null===(n=global.sentry)||void 0===n||null===(s=n.captureException)||void 0===s||s.call(n,new Error("typeof state.NetworkController.providerConfig is "+typeof e.NetworkController.providerConfig))}}else null===(t=global.sentry)||void 0===t||null===(r=t.captureException)||void 0===r||r.call(t,new Error("typeof state.NetworkController is "+typeof e.NetworkController));return e}(t.data),t},r.version=void 0;var n=e("lodash"),i=e("@metamask/utils");const s=r.version=93}}},{package:"$root$",file:"app/scripts/migrations/093.ts"}],[192,{"@metamask/controller-utils":1124,"@metamask/network-controller":1626,"@metamask/utils":2081,lodash:4071},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.migrate=async function(e){const t=(0,n.cloneDeep)(e);return t.meta.version=a,t.data=function(e){if((0,i.hasProperty)(e,"NetworkController")&&(0,i.isObject)(e.NetworkController)&&(0,i.hasProperty)(e.NetworkController,"providerConfig")&&(0,i.isObject)(e.NetworkController.providerConfig)&&((0,i.hasProperty)(e.NetworkController.providerConfig,"id")||(0,i.hasProperty)(e.NetworkController.providerConfig,"type")&&e.NetworkController.providerConfig.type!==o.NetworkType.rpc)){const t=e.NetworkController.providerConfig.id||e.NetworkController.providerConfig.type;if(!t||"string"!=typeof t)return e;const r={[t]:{EIPS:{},status:s.NetworkStatus.Unknown}};if((0,i.hasProperty)(e.NetworkController,"networkDetails")&&(0,i.isObject)(e.NetworkController.networkDetails)){const{networkDetails:n}=e.NetworkController;n.EIPS&&(0,i.isObject)(n.EIPS)&&(r[t].EIPS={...n.EIPS}),delete e.NetworkController.networkDetails}return(0,i.hasProperty)(e.NetworkController,"networkStatus")&&"string"==typeof e.NetworkController.networkStatus&&(r[t].status=e.NetworkController.networkStatus,delete e.NetworkController.networkStatus),{...e,NetworkController:{...e.NetworkController,networksMetadata:r,selectedNetworkClientId:t}}}var t,r;if((0,i.isObject)(e.NetworkController)){if((0,i.isObject)(e.NetworkController)&&!(0,i.isObject)(e.NetworkController.providerConfig)){var n,a;null===(n=global.sentry)||void 0===n||null===(a=n.captureException)||void 0===a||a.call(n,new Error("typeof state.NetworkController.providerConfig is "+typeof e.NetworkController.providerConfig))}else if((0,i.isObject)(e.NetworkController)&&(0,i.isObject)(e.NetworkController.providerConfig)){var u,c;null===(u=global.sentry)||void 0===u||null===(c=u.captureException)||void 0===c||c.call(u,new Error(`typeof state.NetworkController.providerConfig.id is ${typeof e.NetworkController.providerConfig.id} and state.NetworkController.providerConfig.type is ${e.NetworkController.providerConfig.type}`))}}else null===(t=global.sentry)||void 0===t||null===(r=t.captureException)||void 0===r||r.call(t,new Error("typeof state.NetworkController is "+typeof e.NetworkController));return e}(t.data),t},r.version=void 0;var n=e("lodash"),i=e("@metamask/utils"),s=e("@metamask/network-controller"),o=e("@metamask/controller-utils");const a=r.version=94}}},{package:"$root$",file:"app/scripts/migrations/094.ts"}],[193,{lodash:4071},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.migrate=async function(e){const t=(0,n.cloneDeep)(e);return t.meta.version=i,function(e){(function(e){var t,r;const n=(null===(t=e.IncomingTransactionsController)||void 0===t?void 0:t.incomingTransactions)||{};if(0===Object.keys(n).length)return;const i=(null===(r=e.TransactionController)||void 0===r?void 0:r.transactions)||{},s=Object.values(n).reduce(((e,t)=>(e[t.id]=t,e)),i);e.TransactionController={...e.TransactionController||{},transactions:s}})(e),function(e){var t;const r=(null===(t=e.IncomingTransactionsController)||void 0===t?void 0:t.incomingTransactions)||{};if(0===Object.keys(r).length)return;const n={};for(const e of Object.values(r)){if(!e.blockNumber||!e.chainId||!e.txParams.to)continue;const t=parseInt(e.blockNumber,10),r=`${e.chainId}#${e.txParams.to.toLowerCase()}`,i=n[r]||-1;n[r]=Math.max(i,t)}e.TransactionController={...e.TransactionController,lastFetchedBlockNumbers:n}}(e),function(e){delete e.IncomingTransactionsController}(e)}(t.data),t},r.version=void 0;var n=e("lodash");const i=r.version=95}}},{package:"$root$",file:"app/scripts/migrations/095.ts"}],[194,{"../../../shared/constants/network":4759,"@metamask/utils":2081,lodash:4071},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.migrate=async function(e){const t=(0,n.cloneDeep)(e);return t.meta.version=o,function(e){if(!((0,i.hasProperty)(e,"PreferencesController")&&(0,i.isObject)(e.PreferencesController)&&(0,i.isObject)(e.NetworkController)&&(0,i.hasProperty)(e.PreferencesController,"featureFlags")&&(0,i.hasProperty)(e.NetworkController,"networkConfigurations")))return e;const{PreferencesController:t,NetworkController:r}=e,{featureFlags:o}=t,{showIncomingTransactions:a}=o,{networkConfigurations:u}=r,c=Object.values(u).map((e=>e.chainId)),l=[s.CHAIN_IDS.MAINNET,s.CHAIN_IDS.LINEA_MAINNET],h=[s.CHAIN_IDS.GOERLI,s.CHAIN_IDS.SEPOLIA,s.CHAIN_IDS.LINEA_GOERLI],f=[...l,...c,...h],d=(0,n.fromPairs)((0,n.map)(f,(e=>[e,a])));(null==o?void 0:o.showIncomingTransactions)!==undefined&&delete o.showIncomingTransactions;e.PreferencesController.incomingTransactionsPreferences=d}(t.data),t},r.version=void 0;var n=e("lodash"),i=e("@metamask/utils"),s=e("../../../shared/constants/network");const o=r.version=96}}},{package:"$root$",file:"app/scripts/migrations/096.ts"}],[195,{lodash:4071},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.migrate=async function(e){const t=(0,n.cloneDeep)(e);return t.meta.version=i,function(e){const t=(null==e?void 0:e.TransactionController)||{},r=(null==t?void 0:t.transactions)||{};if((0,n.isEmpty)(r))return;const i=Object.keys(r).reduce(((e,t)=>{const n=r[t];return null!=n&&n.nonceDetails&&delete n.nonceDetails,{...e,[t]:n}}),{});e.TransactionController={...t,transactions:i}}(t.data),t},r.version=void 0;var n=e("lodash");const i=r.version=97}}},{package:"$root$",file:"app/scripts/migrations/097.ts"}],[196,{lodash:4071},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.migrate=async function(e){const t=(0,n.cloneDeep)(e);return t.meta.version=i,function(e){const t=(null==e?void 0:e.TransactionController)||{},r=(null==t?void 0:t.transactions)||{};if((0,n.isEmpty)(r))return;const i=Object.keys(r).reduce(((e,t)=>{const n=r[t];return n.verifiedOnBlockchain=Boolean(n.txReceipt),{...e,[t]:n}}),{});e.TransactionController={...t,transactions:i}}(t.data),t},r.version=void 0;var n=e("lodash");const i=r.version=98}}},{package:"$root$",file:"app/scripts/migrations/098.ts"}],[197,{lodash:4071,uuid:4695},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.migrate=async function(e){const t=(0,n.cloneDeep)(e);return t.meta.version=s,function(e){const t=(null==e?void 0:e.TransactionController)||{},r=(null==t?void 0:t.transactions)||{};if((0,n.isEmpty)(r))return;const s=Object.keys(r).reduce(((e,t)=>{const s=(0,n.cloneDeep)(r[t]),o=(0,i.v1)();return s.id=o,{...e,[o]:s}}),{});e.TransactionController={...t,transactions:s}}(t.data),t},r.version=void 0;var n=e("lodash"),i=e("uuid");const s=r.version=99}}},{package:"$root$",file:"app/scripts/migrations/099.ts"}],[198,{lodash:4071},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.migrate=async function(e){const t=(0,n.cloneDeep)(e);return t.meta.version=i,function(e){var t,r;const i=(null==e||null===(t=e.AddressBookController)||void 0===t?void 0:t.addressBook)??{},s=(null==e||null===(r=e.NameController)||void 0===r||null===(r=r.names)||void 0===r?void 0:r.ethereumAddress)??{};if((0,n.isEmpty)(Object.keys(i)))return;for(const e of Object.keys(i)){const t=i[e];for(const r of Object.keys(t)){var o,a;const n=t[r],i=r.toLowerCase(),u=s[i]??{};null!==(o=(u[e]??{}).name)&&void 0!==o&&o.length||null===(a=n.name)||void 0===a||!a.length||null==i||!i.length||(s[i]=u,u[e]={name:n.name,sourceId:n.isEns?"ens":null,proposedNames:{}})}}e.NameController={...e.NameController,names:{ethereumAddress:s}}}(t.data),t},r.version=void 0;var n=e("lodash");const i=r.version=100}}},{package:"$root$",file:"app/scripts/migrations/100.ts"}],[199,{"@metamask/utils":2081,lodash:4071},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.migrate=async function(e){const t=(0,i.cloneDeep)(e);return t.meta.version=s,function(e){if((0,n.hasProperty)(e,"NetworkController")&&(0,n.isObject)(e.NetworkController)&&(0,n.hasProperty)(e.NetworkController,"networkId")){const t=e.NetworkController;return delete t.networkId,{...e,NetworkController:t}}var t,r;(0,n.isObject)(e.NetworkController)||null===(t=global.sentry)||void 0===t||null===(r=t.captureException)||void 0===r||r.call(t,new Error("typeof state.NetworkController is "+typeof e.NetworkController))}(t.data),t},r.version=void 0;var n=e("@metamask/utils"),i=e("lodash");const s=r.version=101}}},{package:"$root$",file:"app/scripts/migrations/101.ts"}],[20,{"./background-api":17,"./caveat-mutators":18,"./enums":19,"./permission-log":21,"./selectors":22,"./snaps/snap-permissions":23,"./specifications":24},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n=e("./caveat-mutators");Object.keys(n).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in r&&r[e]===n[e]||Object.defineProperty(r,e,{enumerable:!0,get:function(){return n[e]}}))}));var i=e("./background-api");Object.keys(i).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in r&&r[e]===i[e]||Object.defineProperty(r,e,{enumerable:!0,get:function(){return i[e]}}))}));var s=e("./enums");Object.keys(s).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in r&&r[e]===s[e]||Object.defineProperty(r,e,{enumerable:!0,get:function(){return s[e]}}))}));var o=e("./permission-log");Object.keys(o).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in r&&r[e]===o[e]||Object.defineProperty(r,e,{enumerable:!0,get:function(){return o[e]}}))}));var a=e("./specifications");Object.keys(a).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in r&&r[e]===a[e]||Object.defineProperty(r,e,{enumerable:!0,get:function(){return a[e]}}))}));var u=e("./selectors");Object.keys(u).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in r&&r[e]===u[e]||Object.defineProperty(r,e,{enumerable:!0,get:function(){return u[e]}}))}));var c=e("./snaps/snap-permissions");Object.keys(c).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in r&&r[e]===c[e]||Object.defineProperty(r,e,{enumerable:!0,get:function(){return c[e]}}))}))}}},{package:"$root$",file:"app/scripts/controllers/permissions/index.js"}],[200,{lodash:4071},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.migrate=async function(e){const t=(0,n.cloneDeep)(e);return t.meta.version=i,function(e){const t=(null==e?void 0:e.TransactionController)||{},r=(null==t?void 0:t.transactions)||{};if((0,n.isEmpty)(r))return;const i=Object.keys(r).reduce(((e,t)=>{const i=(0,n.cloneDeep)(r[t]);return null!=i&&i.err&&(i.error=i.err,delete i.err),{...e,[t]:i}}),{});e.TransactionController={...t,transactions:i}}(t.data),t},r.version=void 0;var n=e("lodash");const i=r.version=102}}},{package:"$root$",file:"app/scripts/migrations/102.ts"}],[201,{"../../../shared/constants/transaction":4770,lodash:4071},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e,t,r){return function(s){const o=(0,n.cloneDeep)(s);o.meta.version=e;try{const e=function(e,t,r){const n=e,{TransactionController:s}=n;if(s&&s.transactions){const{transactions:e}=s;n.TransactionController.transactions=e.map((e=>t(e)?(e.status=i.TransactionStatus.failed,e.err={message:r,note:`Tx automatically failed by migration because ${r}`},e):e))}return n}(o.data,r,t);o.data=e}catch(t){console.warn(`MetaMask Migration #${e}${t.stack}`)}return Promise.resolve(o)}};var n=e("lodash"),i=e("../../../shared/constants/transaction")}}},{package:"$root$",file:"app/scripts/migrations/fail-tx.js"}],[202,{"./002":93,"./003":94,"./004":95,"./005":96,"./006":97,"./007":98,"./008":99,"./009":100,"./010":101,"./011":102,"./012":103,"./013":104,"./014":105,"./015":106,"./016":107,"./017":108,"./018":109,"./019":110,"./020":111,"./021":112,"./022":113,"./023":114,"./024":115,"./025":116,"./026":117,"./027":118,"./028":119,"./029":120,"./030":121,"./031":122,"./032":123,"./033":124,"./034":125,"./035":126,"./036":127,"./037":128,"./038":129,"./039":130,"./040":131,"./041":132,"./042":133,"./043":134,"./044":135,"./045":136,"./046":137,"./047":138,"./048":139,"./049":140,"./050":141,"./051":142,"./052":143,"./053":144,"./054":145,"./055":146,"./056":147,"./057":148,"./058":149,"./059":150,"./060":151,"./061":152,"./062":153,"./063":154,"./064":155,"./065":156,"./066":157,"./067":158,"./068":159,"./069":160,"./070":161,"./071":162,"./072":163,"./073":164,"./074":165,"./075":166,"./076":167,"./077":172,"./078":173,"./079":174,"./080":175,"./081":176,"./082":177,"./083":178,"./084":179,"./085":180,"./086":181,"./087":182,"./088":183,"./089":184,"./090":185,"./091":186,"./092":190,"./092.1":187,"./092.2":188,"./092.3":189,"./093":191,"./094":192,"./095":193,"./096":194,"./097":195,"./098":196,"./099":197,"./100":198,"./101":199,"./102":200},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=tt(e("./002")),i=tt(e("./003")),s=tt(e("./004")),o=tt(e("./005")),a=tt(e("./006")),u=tt(e("./007")),c=tt(e("./008")),l=tt(e("./009")),h=tt(e("./010")),f=tt(e("./011")),d=tt(e("./012")),p=tt(e("./013")),g=tt(e("./014")),m=tt(e("./015")),y=tt(e("./016")),b=tt(e("./017")),w=tt(e("./018")),v=tt(e("./019")),T=tt(e("./020")),_=tt(e("./021")),k=tt(e("./022")),E=tt(e("./023")),S=tt(e("./024")),N=tt(e("./025")),A=tt(e("./026")),I=tt(e("./027")),x=tt(e("./028")),P=tt(e("./029")),B=tt(e("./030")),O=tt(e("./031")),C=tt(e("./032")),z=tt(e("./033")),R=tt(e("./034")),L=tt(e("./035")),M=tt(e("./036")),j=tt(e("./037")),U=tt(e("./038")),F=tt(e("./039")),D=tt(e("./040")),V=tt(e("./041")),G=tt(e("./042")),H=tt(e("./043")),q=tt(e("./044")),$=tt(e("./045")),W=tt(e("./046")),Q=tt(e("./047")),K=tt(e("./048")),Y=tt(e("./049")),J=tt(e("./050")),Z=tt(e("./051")),X=tt(e("./052")),ee=tt(e("./053")),te=tt(e("./054")),re=tt(e("./055")),ne=tt(e("./056")),ie=tt(e("./057")),se=tt(e("./058")),oe=tt(e("./059")),ae=tt(e("./060")),ue=tt(e("./061")),ce=tt(e("./062")),le=tt(e("./063")),he=tt(e("./064")),fe=tt(e("./065")),de=tt(e("./066")),pe=tt(e("./067")),ge=tt(e("./068")),me=tt(e("./069")),ye=tt(e("./070")),be=tt(e("./071")),we=tt(e("./072")),ve=tt(e("./073")),Te=tt(e("./074")),_e=tt(e("./075")),ke=tt(e("./076")),Ee=tt(e("./077")),Se=et(e("./078")),Ne=tt(e("./079")),Ae=tt(e("./080")),Ie=et(e("./081")),xe=et(e("./082")),Pe=et(e("./083")),Be=et(e("./084")),Oe=et(e("./085")),Ce=et(e("./086")),ze=et(e("./087")),Re=et(e("./088")),Le=et(e("./089")),Me=et(e("./090")),je=et(e("./091")),Ue=et(e("./092")),Fe=et(e("./092.1")),De=et(e("./092.2")),Ve=et(e("./092.3")),Ge=et(e("./093")),He=et(e("./094")),qe=et(e("./095")),$e=et(e("./096")),We=et(e("./097")),Qe=et(e("./098")),Ke=et(e("./099")),Ye=et(e("./100")),Je=et(e("./101")),Ze=et(e("./102"));function Xe(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(Xe=function(e){return e?r:t})(e)}function et(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=Xe(t);if(r&&r.has(e))return r.get(e);var n={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var o=i?Object.getOwnPropertyDescriptor(e,s):null;o&&(o.get||o.set)?Object.defineProperty(n,s,o):n[s]=e[s]}return n.default=e,r&&r.set(e,n),n}function tt(e){return e&&e.__esModule?e:{default:e}}const rt=[n.default,i.default,s.default,o.default,a.default,u.default,c.default,l.default,h.default,f.default,d.default,p.default,g.default,m.default,y.default,b.default,w.default,v.default,T.default,_.default,k.default,E.default,S.default,N.default,A.default,I.default,x.default,P.default,B.default,O.default,C.default,z.default,R.default,L.default,M.default,j.default,U.default,F.default,D.default,V.default,G.default,H.default,q.default,$.default,W.default,Q.default,K.default,Y.default,J.default,Z.default,X.default,ee.default,te.default,re.default,ne.default,ie.default,se.default,oe.default,ae.default,ue.default,ce.default,le.default,he.default,fe.default,de.default,pe.default,ge.default,me.default,ye.default,be.default,we.default,ve.default,Te.default,_e.default,ke.default,Ee.default,Se,Ne.default,Ae.default,Ie,xe,Pe,Be,Oe,Ce,ze,Re,Le,Me,je,Ue,Fe,De,Ve,Ge,He,qe,$e,We,Qe,Ke,Ye,Je,Ze];r.default=rt}}},{package:"$root$",file:"app/scripts/migrations/index.js"}],[2069,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.createEventEmitterProxy=void 0;const n=()=>!0,i=["newListener","removeListener"],s=e=>!i.includes(e);r.createEventEmitterProxy=function(e,{eventFilter:t=n}={}){const r="skipInternal"===t?s:t;if("function"!=typeof r)throw new Error("createEventEmitterProxy - Invalid eventFilter");let i=e,o=e=>{const t=i;i=e,t.eventNames().filter(r).forEach((r=>{t.rawListeners(r).forEach((t=>{e.on(r,t)}))})),t.removeAllListeners()};return new Proxy(i,{get(e,t,r){if("setTarget"===t)return o;const n=i[t];return n instanceof Function?function(...e){return n.apply(this===r?i:this,e)}:n},set:(e,t,r)=>"setTarget"===t?(o=r,!0):(i[t]=r,!0)})}}}},{package:"@metamask/network-controller>@metamask/swappable-obj-proxy",file:"node_modules/@metamask/swappable-obj-proxy/dist/createEventEmitterProxy.js"}],[2070,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.createSwappableProxy=void 0,r.createSwappableProxy=function(e){let t=e,r=e=>{t=e};return new Proxy(t,{get(e,n,i){if("setTarget"===n)return r;const s=t[n];return s instanceof Function?function(...e){return s.apply(this===i?t:this,e)}:s},set:(e,n,i)=>"setTarget"===n?(r=i,!0):(t[n]=i,!0)})}}}},{package:"@metamask/network-controller>@metamask/swappable-obj-proxy",file:"node_modules/@metamask/swappable-obj-proxy/dist/createSwappableProxy.js"}],[2071,{"./createEventEmitterProxy":2069,"./createSwappableProxy":2070,"./types":2072},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),i(e("./createEventEmitterProxy"),r),i(e("./createSwappableProxy"),r),i(e("./types"),r)}}},{package:"@metamask/network-controller>@metamask/swappable-obj-proxy",file:"node_modules/@metamask/swappable-obj-proxy/dist/index.js"}],[2072,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0})}}},{package:"@metamask/network-controller>@metamask/swappable-obj-proxy",file:"node_modules/@metamask/swappable-obj-proxy/dist/types.js"}],[2091,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){t.exports=function(e){if(e.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),r=0;r<t.length;r++)t[r]=255;for(var n=0;n<e.length;n++){var i=e.charAt(n),s=i.charCodeAt(0);if(255!==t[s])throw new TypeError(i+" is ambiguous");t[s]=n}var o=e.length,a=e.charAt(0),u=Math.log(o)/Math.log(256),c=Math.log(256)/Math.log(o);function l(e){if("string"!=typeof e)throw new TypeError("Expected String");if(0===e.length)return new Uint8Array;var r=0;if(" "!==e[r]){for(var n=0,i=0;e[r]===a;)n++,r++;for(var s=(e.length-r)*u+1>>>0,c=new Uint8Array(s);e[r];){var l=t[e.charCodeAt(r)];if(255===l)return;for(var h=0,f=s-1;(0!==l||h<i)&&-1!==f;f--,h++)l+=o*c[f]>>>0,c[f]=l%256>>>0,l=l/256>>>0;if(0!==l)throw new Error("Non-zero carry");i=h,r++}if(" "!==e[r]){for(var d=s-i;d!==s&&0===c[d];)d++;for(var p=new Uint8Array(n+(s-d)),g=n;d!==s;)p[g++]=c[d++];return p}}}return{encode:function(t){if(t instanceof Uint8Array||(ArrayBuffer.isView(t)?t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):Array.isArray(t)&&(t=Uint8Array.from(t))),!(t instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(0===t.length)return"";for(var r=0,n=0,i=0,s=t.length;i!==s&&0===t[i];)i++,r++;for(var u=(s-i)*c+1>>>0,l=new Uint8Array(u);i!==s;){for(var h=t[i],f=0,d=u-1;(0!==h||f<n)&&-1!==d;d--,f++)h+=256*l[d]>>>0,l[d]=h%o>>>0,h=h/o>>>0;if(0!==h)throw new Error("Non-zero carry");n=f,i++}for(var p=u-n;p!==u&&0===l[p];)p++;for(var g=a.repeat(r);p<u;++p)g+=e.charAt(l[p]);return g},decodeUnsafe:l,decode:function(e){var t=l(e);if(t)return t;throw new Error("Non-base"+o+" character")}}}}}},{package:"@ensdomains/content-hash>cids>multibase>@multiformats/base-x",file:"node_modules/@multiformats/base-x/src/index.js"}],[21,{"../../../../shared/constants/permissions":4760,"./enums":19,"@metamask/obs-store":1659},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.PermissionLogController=void 0;var n=e("@metamask/obs-store"),i=e("../../../../shared/constants/permissions"),s=e("./enums");function o(e,t){return e.reduce(((e,r)=>({...e,[r]:t})),{})}r.PermissionLogController=class{constructor({restrictedMethods:e,initState:t}){this.restrictedMethods=e,this.store=new n.ObservableStore({permissionHistory:{},permissionActivityLog:[],...t})}getActivityLog(){return this.store.getState().permissionActivityLog}updateActivityLog(e){this.store.updateState({permissionActivityLog:e})}getHistory(){return this.store.getState().permissionHistory}updateHistory(e){this.store.updateState({permissionHistory:e})}updateAccountsHistory(e,t){if(0===t.length)return;const r=o(t,Date.now());this.commitNewHistory(e,{eth_accounts:{accounts:r}})}createMiddleware(){return(e,t,r,n)=>{let i,o;const{origin:a,method:u}=e,c=u.startsWith(s.WALLET_PREFIX);if(s.LOG_IGNORE_METHODS.includes(u)||!c&&!this.restrictedMethods.has(u)){if("eth_requestAccounts"!==u)return void r();i=this.logRequest(e,c),o=["eth_accounts"]}else i=this.logRequest(e,c),u===`${s.WALLET_PREFIX}requestPermissions`&&(o=this.getRequestedMethods(e));r((e=>{const r=Date.now();this.logResponse(i,t,r),o&&!t.error&&t.result&&this.logPermissionsHistory(o,a,t.result,r,"eth_requestAccounts"===u),e()}))}}logRequest(e,t){const r={id:e.id,method:e.method,methodType:t?s.LOG_METHOD_TYPES.internal:s.LOG_METHOD_TYPES.restricted,origin:e.origin,requestTime:Date.now(),responseTime:null,success:null};return this.commitNewActivity(r),r}logResponse(e,t,r){e&&t&&(e.success=Object.hasOwnProperty.call(t,"result"),e.responseTime=r)}commitNewActivity(e){const t=this.getActivityLog();t.push(e),t.length>s.LOG_LIMIT&&t.shift(),this.updateActivityLog(t)}logPermissionsHistory(e,t,r,n,i){let s,a;if(i){s=r;a={eth_accounts:{accounts:o(s,n),lastApproved:n}}}else a=r.map((e=>("eth_accounts"===e.parentCapability&&(s=this.getAccountsFromPermission(e)),e.parentCapability))).reduce(((t,r)=>{if(e.includes(r))if("eth_accounts"===r){const e=o(s,n);t[r]={lastApproved:n,accounts:e}}else t[r]={lastApproved:n};return t}),{});Object.keys(a).length>0&&this.commitNewHistory(t,a)}commitNewHistory(e,t){const r=this.getHistory(),n={...r[e],...t},i=r[e]&&r[e].eth_accounts,s=t.eth_accounts;if(i&&s){const e=s.lastApproved||i.lastApproved;n.eth_accounts={lastApproved:e,accounts:{...i.accounts,...s.accounts}}}r[e]=n,this.updateHistory(r)}getRequestedMethods(e){return e.params&&e.params[0]&&"object"==typeof e.params[0]&&!Array.isArray(e.params[0])?Object.keys(e.params[0]):null}getAccountsFromPermission(e){if("eth_accounts"!==e.parentCapability||!e.caveats)return[];const t=new Set;for(const r of e.caveats)if(r.type===i.CaveatTypes.restrictReturnedAccounts&&Array.isArray(r.value))for(const e of r.value)t.add(e);return[...t]}}}}},{package:"$root$",file:"app/scripts/controllers/permissions/permission-log.js"}],[2131,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){t.exports=function(e,t){var r=new Array(arguments.length-1),n=0,i=2,s=!0;for(;i<arguments.length;)r[n++]=arguments[i++];return new Promise((function(i,o){r[n]=function(e){if(s)if(s=!1,e)o(e);else{for(var t=new Array(arguments.length-1),r=0;r<t.length;)t[r++]=arguments[r];i.apply(null,t)}};try{e.apply(t||null,r)}catch(e){s&&(s=!1,o(e))}}))}}}},{package:"@metamask/eth-trezor-keyring>@trezor/connect-web>@trezor/connect>@trezor/transport>protobufjs>@protobufjs/aspromise",file:"node_modules/@protobufjs/aspromise/index.js"}],[2132,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=r;n.length=function(e){var t=e.length;if(!t)return 0;for(var r=0;--t%4>1&&"="===e.charAt(t);)++r;return Math.ceil(3*e.length)/4-r};for(var i=new Array(64),s=new Array(123),o=0;o<64;)s[i[o]=o<26?o+65:o<52?o+71:o<62?o-4:o-59|43]=o++;n.encode=function(e,t,r){for(var n,s=null,o=[],a=0,u=0;t<r;){var c=e[t++];switch(u){case 0:o[a++]=i[c>>2],n=(3&c)<<4,u=1;break;case 1:o[a++]=i[n|c>>4],n=(15&c)<<2,u=2;break;case 2:o[a++]=i[n|c>>6],o[a++]=i[63&c],u=0}a>8191&&((s||(s=[])).push(String.fromCharCode.apply(String,o)),a=0)}return u&&(o[a++]=i[n],o[a++]=61,1===u&&(o[a++]=61)),s?(a&&s.push(String.fromCharCode.apply(String,o.slice(0,a))),s.join("")):String.fromCharCode.apply(String,o.slice(0,a))};var a="invalid encoding";n.decode=function(e,t,r){for(var n,i=r,o=0,u=0;u<e.length;){var c=e.charCodeAt(u++);if(61===c&&o>1)break;if((c=s[c])===undefined)throw Error(a);switch(o){case 0:n=c,o=1;break;case 1:t[r++]=n<<2|(48&c)>>4,n=c,o=2;break;case 2:t[r++]=(15&n)<<4|(60&c)>>2,n=c,o=3;break;case 3:t[r++]=(3&n)<<6|c,o=0}}if(1===o)throw Error(a);return r-i},n.test=function(e){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(e)}}}},{package:"@metamask/eth-trezor-keyring>@trezor/connect-web>@trezor/connect>@trezor/transport>protobufjs>@protobufjs/base64",file:"node_modules/@protobufjs/base64/index.js"}],[2133,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){function n(e,t){"string"==typeof e&&(t=e,e=undefined);var r=[];function i(e){if("string"!=typeof e){var t=s();if(n.verbose&&console.log("codegen: "+t),t="return "+t,e){for(var o=Object.keys(e),a=new Array(o.length+1),u=new Array(o.length),c=0;c<o.length;)a[c]=o[c],u[c]=e[o[c++]];return a[c]=t,Function.apply(null,a).apply(null,u)}return Function(t)()}for(var l=new Array(arguments.length-1),h=0;h<l.length;)l[h]=arguments[++h];if(h=0,e=e.replace(/%([%dfijs])/g,(function(e,t){var r=l[h++];switch(t){case"d":case"f":return String(Number(r));case"i":return String(Math.floor(r));case"j":return JSON.stringify(r);case"s":return String(r)}return"%"})),h!==l.length)throw Error("parameter count mismatch");return r.push(e),i}function s(n){return"function "+(n||t||"")+"("+(e&&e.join(",")||"")+"){\n  "+r.join("\n  ")+"\n}"}return i.toString=s,i}t.exports=n,n.verbose=!1}}},{package:"@metamask/eth-trezor-keyring>@trezor/connect-web>@trezor/connect>@trezor/transport>protobufjs>@protobufjs/codegen",file:"node_modules/@protobufjs/codegen/index.js"}],[2134,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){function n(){this._listeners={}}t.exports=n,n.prototype.on=function(e,t,r){return(this._listeners[e]||(this._listeners[e]=[])).push({fn:t,ctx:r||this}),this},n.prototype.off=function(e,t){if(e===undefined)this._listeners={};else if(t===undefined)this._listeners[e]=[];else for(var r=this._listeners[e],n=0;n<r.length;)r[n].fn===t?r.splice(n,1):++n;return this},n.prototype.emit=function(e){var t=this._listeners[e];if(t){for(var r=[],n=1;n<arguments.length;)r.push(arguments[n++]);for(n=0;n<t.length;)t[n].fn.apply(t[n++].ctx,r)}return this}}}},{package:"@metamask/eth-trezor-keyring>@trezor/connect-web>@trezor/connect>@trezor/transport>protobufjs>@protobufjs/eventemitter",file:"node_modules/@protobufjs/eventemitter/index.js"}],[2135,{"@protobufjs/aspromise":2131,"@protobufjs/inquire":2137},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){t.exports=s;var n=e("@protobufjs/aspromise"),i=e("@protobufjs/inquire")("fs");function s(e,t,r){return"function"==typeof t?(r=t,t={}):t||(t={}),r?!t.xhr&&i&&i.readFile?i.readFile(e,(function(n,i){return n&&"undefined"!=typeof XMLHttpRequest?s.xhr(e,t,r):n?r(n):r(null,t.binary?i:i.toString("utf8"))})):s.xhr(e,t,r):n(s,this,e,t)}s.xhr=function(e,t,r){var n=new XMLHttpRequest;n.onreadystatechange=function(){if(4!==n.readyState)return undefined;if(0!==n.status&&200!==n.status)return r(Error("status "+n.status));if(t.binary){var e=n.response;if(!e){e=[];for(var i=0;i<n.responseText.length;++i)e.push(255&n.responseText.charCodeAt(i))}return r(null,"undefined"!=typeof Uint8Array?new Uint8Array(e):e)}return r(null,n.responseText)},t.binary&&("overrideMimeType"in n&&n.overrideMimeType("text/plain; charset=x-user-defined"),n.responseType="arraybuffer"),n.open("GET",e),n.send()}}}},{package:"@metamask/eth-trezor-keyring>@trezor/connect-web>@trezor/connect>@trezor/transport>protobufjs>@protobufjs/fetch",file:"node_modules/@protobufjs/fetch/index.js"}],[2136,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){function n(e){return"undefined"!=typeof Float32Array?function(){var t=new Float32Array([-0]),r=new Uint8Array(t.buffer),n=128===r[3];function i(e,n,i){t[0]=e,n[i]=r[0],n[i+1]=r[1],n[i+2]=r[2],n[i+3]=r[3]}function s(e,n,i){t[0]=e,n[i]=r[3],n[i+1]=r[2],n[i+2]=r[1],n[i+3]=r[0]}function o(e,n){return r[0]=e[n],r[1]=e[n+1],r[2]=e[n+2],r[3]=e[n+3],t[0]}function a(e,n){return r[3]=e[n],r[2]=e[n+1],r[1]=e[n+2],r[0]=e[n+3],t[0]}e.writeFloatLE=n?i:s,e.writeFloatBE=n?s:i,e.readFloatLE=n?o:a,e.readFloatBE=n?a:o}():function(){function t(e,t,r,n){var i=t<0?1:0;if(i&&(t=-t),0===t)e(1/t>0?0:2147483648,r,n);else if(isNaN(t))e(2143289344,r,n);else if(t>34028234663852886e22)e((i<<31|2139095040)>>>0,r,n);else if(t<11754943508222875e-54)e((i<<31|Math.round(t/1401298464324817e-60))>>>0,r,n);else{var s=Math.floor(Math.log(t)/Math.LN2);e((i<<31|s+127<<23|8388607&Math.round(t*Math.pow(2,-s)*8388608))>>>0,r,n)}}function r(e,t,r){var n=e(t,r),i=2*(n>>31)+1,s=n>>>23&255,o=8388607&n;return 255===s?o?NaN:i*Infinity:0===s?1401298464324817e-60*i*o:i*Math.pow(2,s-150)*(o+8388608)}e.writeFloatLE=t.bind(null,i),e.writeFloatBE=t.bind(null,s),e.readFloatLE=r.bind(null,o),e.readFloatBE=r.bind(null,a)}(),"undefined"!=typeof Float64Array?function(){var t=new Float64Array([-0]),r=new Uint8Array(t.buffer),n=128===r[7];function i(e,n,i){t[0]=e,n[i]=r[0],n[i+1]=r[1],n[i+2]=r[2],n[i+3]=r[3],n[i+4]=r[4],n[i+5]=r[5],n[i+6]=r[6],n[i+7]=r[7]}function s(e,n,i){t[0]=e,n[i]=r[7],n[i+1]=r[6],n[i+2]=r[5],n[i+3]=r[4],n[i+4]=r[3],n[i+5]=r[2],n[i+6]=r[1],n[i+7]=r[0]}function o(e,n){return r[0]=e[n],r[1]=e[n+1],r[2]=e[n+2],r[3]=e[n+3],r[4]=e[n+4],r[5]=e[n+5],r[6]=e[n+6],r[7]=e[n+7],t[0]}function a(e,n){return r[7]=e[n],r[6]=e[n+1],r[5]=e[n+2],r[4]=e[n+3],r[3]=e[n+4],r[2]=e[n+5],r[1]=e[n+6],r[0]=e[n+7],t[0]}e.writeDoubleLE=n?i:s,e.writeDoubleBE=n?s:i,e.readDoubleLE=n?o:a,e.readDoubleBE=n?a:o}():function(){function t(e,t,r,n,i,s){var o=n<0?1:0;if(o&&(n=-n),0===n)e(0,i,s+t),e(1/n>0?0:2147483648,i,s+r);else if(isNaN(n))e(0,i,s+t),e(2146959360,i,s+r);else if(n>17976931348623157e292)e(0,i,s+t),e((o<<31|2146435072)>>>0,i,s+r);else{var a;if(n<22250738585072014e-324)e((a=n/5e-324)>>>0,i,s+t),e((o<<31|a/4294967296)>>>0,i,s+r);else{var u=Math.floor(Math.log(n)/Math.LN2);1024===u&&(u=1023),e(4503599627370496*(a=n*Math.pow(2,-u))>>>0,i,s+t),e((o<<31|u+1023<<20|1048576*a&1048575)>>>0,i,s+r)}}}function r(e,t,r,n,i){var s=e(n,i+t),o=e(n,i+r),a=2*(o>>31)+1,u=o>>>20&2047,c=4294967296*(1048575&o)+s;return 2047===u?c?NaN:a*Infinity:0===u?5e-324*a*c:a*Math.pow(2,u-1075)*(c+4503599627370496)}e.writeDoubleLE=t.bind(null,i,0,4),e.writeDoubleBE=t.bind(null,s,4,0),e.readDoubleLE=r.bind(null,o,0,4),e.readDoubleBE=r.bind(null,a,4,0)}(),e}function i(e,t,r){t[r]=255&e,t[r+1]=e>>>8&255,t[r+2]=e>>>16&255,t[r+3]=e>>>24}function s(e,t,r){t[r]=e>>>24,t[r+1]=e>>>16&255,t[r+2]=e>>>8&255,t[r+3]=255&e}function o(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24)>>>0}function a(e,t){return(e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3])>>>0}t.exports=n(n)}}},{package:"@metamask/eth-trezor-keyring>@trezor/connect-web>@trezor/connect>@trezor/transport>protobufjs>@protobufjs/float",file:"node_modules/@protobufjs/float/index.js"}],[2137,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){t.exports=function(e){try{var t=(0,eval)("quire".replace(/^/,"re"))(e);if(t&&(t.length||Object.keys(t).length))return t}catch(e){}return null}}}},{package:"@metamask/eth-trezor-keyring>@trezor/connect-web>@trezor/connect>@trezor/transport>protobufjs>@protobufjs/inquire",file:"node_modules/@protobufjs/inquire/index.js"}],[2138,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=r,i=n.isAbsolute=function(e){return/^(?:\/|\w+:)/.test(e)},s=n.normalize=function(e){var t=(e=e.replace(/\\/g,"/").replace(/\/{2,}/g,"/")).split("/"),r=i(e),n="";r&&(n=t.shift()+"/");for(var s=0;s<t.length;)".."===t[s]?s>0&&".."!==t[s-1]?t.splice(--s,2):r?t.splice(s,1):++s:"."===t[s]?t.splice(s,1):++s;return n+t.join("/")};n.resolve=function(e,t,r){return r||(t=s(t)),i(t)?t:(r||(e=s(e)),(e=e.replace(/(?:\/|^)[^/]+$/,"")).length?s(e+"/"+t):t)}}}},{package:"@metamask/eth-trezor-keyring>@trezor/connect-web>@trezor/connect>@trezor/transport>protobufjs>@protobufjs/path",file:"node_modules/@protobufjs/path/index.js"}],[2139,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){t.exports=function(e,t,r){var n=r||8192,i=n>>>1,s=null,o=n;return function(r){if(r<1||r>i)return e(r);o+r>n&&(s=e(n),o=0);var a=t.call(s,o,o+=r);return 7&o&&(o=1+(7|o)),a}}}}},{package:"@metamask/eth-trezor-keyring>@trezor/connect-web>@trezor/connect>@trezor/transport>protobufjs>@protobufjs/pool",file:"node_modules/@protobufjs/pool/index.js"}],[2140,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=r;n.length=function(e){for(var t=0,r=0,n=0;n<e.length;++n)(r=e.charCodeAt(n))<128?t+=1:r<2048?t+=2:55296==(64512&r)&&56320==(64512&e.charCodeAt(n+1))?(++n,t+=4):t+=3;return t},n.read=function(e,t,r){if(r-t<1)return"";for(var n,i=null,s=[],o=0;t<r;)(n=e[t++])<128?s[o++]=n:n>191&&n<224?s[o++]=(31&n)<<6|63&e[t++]:n>239&&n<365?(n=((7&n)<<18|(63&e[t++])<<12|(63&e[t++])<<6|63&e[t++])-65536,s[o++]=55296+(n>>10),s[o++]=56320+(1023&n)):s[o++]=(15&n)<<12|(63&e[t++])<<6|63&e[t++],o>8191&&((i||(i=[])).push(String.fromCharCode.apply(String,s)),o=0);return i?(o&&i.push(String.fromCharCode.apply(String,s.slice(0,o))),i.join("")):String.fromCharCode.apply(String,s.slice(0,o))},n.write=function(e,t,r){for(var n,i,s=r,o=0;o<e.length;++o)(n=e.charCodeAt(o))<128?t[r++]=n:n<2048?(t[r++]=n>>6|192,t[r++]=63&n|128):55296==(64512&n)&&56320==(64512&(i=e.charCodeAt(o+1)))?(n=65536+((1023&n)<<10)+(1023&i),++o,t[r++]=n>>18|240,t[r++]=n>>12&63|128,t[r++]=n>>6&63|128,t[r++]=63&n|128):(t[r++]=n>>12|224,t[r++]=n>>6&63|128,t[r++]=63&n|128);return r-s}}}},{package:"@metamask/eth-trezor-keyring>@trezor/connect-web>@trezor/connect>@trezor/transport>protobufjs>@protobufjs/utf8",file:"node_modules/@protobufjs/utf8/index.js"}],[2146,{assert:2907,buffer:2913,"component-type":2977,"join-component":3858},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(r){(function(){var n=e("component-type"),i=e("join-component"),s=e("assert"),o=32768;t.exports=function(e,t){switch(u(e),t=t||e.type,s(t,"You must pass an event type."),t){case"track":return function(e){s(e.anonymousId||e.userId,'You must pass either an "anonymousId" or a "userId".'),s(e.event,'You must pass an "event".')}(e);case"group":return function(e){s(e.anonymousId||e.userId,'You must pass either an "anonymousId" or a "userId".'),s(e.groupId,'You must pass a "groupId".')}(e);case"identify":case"page":case"screen":return function(e){s(e.anonymousId||e.userId,'You must pass either an "anonymousId" or a "userId".')}(e);case"alias":return function(e){s(e.userId,'You must pass a "userId".'),s(e.previousId,'You must pass a "previousId".')}(e);default:s(0,'Invalid event type: "'+t+'"')}};var a={anonymousId:["string","number"],category:"string",context:"object",event:"string",groupId:["string","number"],integrations:"object",name:"string",previousId:["string","number"],timestamp:"date",userId:["string","number"],type:"string"};function u(e){s("object"===n(e),"You must pass a message object.");var t=JSON.stringify(e);for(var u in s(r.byteLength(t,"utf8")<o,"Your message must be < 32kb."),a){var c=e[u];if(c){var l=a[u];"array"!==n(l)&&(l=[l]);var h="object"===l[0]?"an":"a";s(l.some((function(e){return n(c)===e})),'"'+u+'" must be '+h+" "+i(l,"or")+".")}}}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@segment/loosely-validate-event",file:"node_modules/@segment/loosely-validate-event/index.js"}],[22,{"../../../../shared/constants/permissions":4760,reselect:4514},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.getPermittedAccountsByOrigin=r.getChangedAccounts=void 0;var n=e("reselect"),i=e("../../../../shared/constants/permissions");r.getPermittedAccountsByOrigin=(0,n.createSelector)((e=>e.subjects),(e=>Object.values(e).reduce(((e,t)=>{var r;const n=null===(r=t.permissions)||void 0===r||null===(r=r.eth_accounts)||void 0===r?void 0:r.caveats.find((({type:e})=>e===i.CaveatTypes.restrictReturnedAccounts));return n&&e.set(t.origin,n.value),e}),new Map)));r.getChangedAccounts=(e,t)=>{if(t===undefined)return e;const r=new Map;if(e===t)return r;const n=new Set([...e.keys()]);for(const i of t.keys()){const s=e.get(i)??[];t.get(i)!==s&&r.set(i,s),n.delete(i)}for(const t of n.keys())r.set(t,e.get(t));return r}}}},{package:"$root$",file:"app/scripts/controllers/permissions/selectors.js"}],[2291,{"@metamask/eth-sig-util":1264},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return i(t,e),t};Object.defineProperty(r,"__esModule",{value:!0}),r.transformTypedData=void 0;const o=s(e("@metamask/eth-sig-util"));function a(e){switch(Object.prototype.toString.call(e)){case"[object Object]":{const t=Object.keys(e).map((t=>[t,a(e[t])]));return Object.fromEntries(t)}case"[object Array]":return e.map((e=>a(e)));case"[object BigInt]":return e.toString();default:return e}}r.transformTypedData=(e,t)=>{if(!t)throw new Error("Trezor: Only version 4 of typed data signing is supported");const r=o.SignTypedDataVersion.V4,{types:n,primaryType:i,domain:s,message:u}=o.TypedDataUtils.sanitizeData(e),c=o.TypedDataUtils.hashStruct("EIP712Domain",a(s),n,r).toString("hex");let l=null;return"EIP712Domain"!==i&&(l=o.TypedDataUtils.hashStruct(i,a(u),n,r).toString("hex")),Object.assign({domain_separator_hash:c,message_hash:l},e)},r.default=r.transformTypedData}}},{package:"@metamask/eth-trezor-keyring>@trezor/connect-plugin-ethereum",file:"node_modules/@trezor/connect-plugin-ethereum/lib/index.js"}],[2292,{"./inlineStyles":2293,"@trezor/connect/lib/index":2319,"@trezor/connect/lib/utils/urlUtils":2337,"@trezor/utils":2376,tslib:4649},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.clearTimeout=r.postMessage=r.init=r.dispose=r.messagePromises=r.error=r.timeout=r.initPromise=r.origin=r.instance=void 0;const n=e("tslib"),i=e("@trezor/utils"),s=e("@trezor/connect/lib/index"),o=e("@trezor/connect/lib/utils/urlUtils"),a=n.__importDefault(e("./inlineStyles"));r.initPromise=(0,i.createDeferred)(),r.timeout=0;let u=0;r.messagePromises={};r.dispose=()=>{if(r.instance&&r.instance.parentNode)try{r.instance.parentNode.removeChild(r.instance)}catch(e){}r.instance=null,r.timeout=0};r.init=async e=>{var t;r.initPromise=(0,i.createDeferred)();const n=document.getElementById("trezorconnect");let u;if(n?r.instance=n:(r.instance=document.createElement("iframe"),r.instance.frameBorder="0",r.instance.width="0px",r.instance.height="0px",r.instance.style.position="absolute",r.instance.style.display="none",r.instance.style.border="0px",r.instance.style.width="0px",r.instance.style.height="0px",r.instance.id="trezorconnect"),"web"===e.env){const t=e.manifest?JSON.stringify(e.manifest):"undefined",r=`version=${e.version}&manifest=${encodeURIComponent(btoa(JSON.stringify(t)))}`;u=`${e.iframeSrc}?${r}`}else u=e.iframeSrc;r.instance.setAttribute("src",u),e.webusb&&console.warn('webusb option is deprecated. use `transports: ["WebUsbTransport"] instead`'),(e.webusb||(null===(t=e.transports)||void 0===t?void 0:t.includes("WebUsbTransport")))&&r.instance.setAttribute("allow","usb"),r.origin=(0,o.getOrigin)(r.instance.src),r.timeout=window.setTimeout((()=>{r.initPromise.reject(s.ERRORS.TypedError("Init_IframeTimeout"))}),1e4);const c=()=>{var t,n;if(!r.instance)return void r.initPromise.reject(s.ERRORS.TypedError("Init_IframeBlocked"));try{const e=null===(t=r.instance.contentWindow)||void 0===t?void 0:t.location.origin;if(!e||"null"===e)return window.clearTimeout(r.timeout),r.error=s.ERRORS.TypedError("Init_IframeBlocked"),(0,r.dispose)(),void r.initPromise.reject(r.error)}catch(e){}let i;"undefined"!=typeof chrome&&chrome.runtime&&void 0!==chrome.runtime.onConnect&&(chrome.runtime.onConnect.addListener((()=>{})),i=chrome.runtime.id),null===(n=r.instance.contentWindow)||void 0===n||n.postMessage({type:s.IFRAME.INIT,payload:{settings:e,extension:i}},r.origin),r.instance.onload=null};r.instance.attachEvent?r.instance.attachEvent("onload",c):r.instance.onload=c,document.body&&(document.body.appendChild(r.instance),(()=>{if(!r.instance)throw s.ERRORS.TypedError("Init_IframeBlocked");const e=r.instance.ownerDocument,t=e.head||e.getElementsByTagName("head")[0],n=document.createElement("style");n.setAttribute("type","text/css"),n.setAttribute("id","TrezorConnectStylesheet"),n.styleSheet?(n.styleSheet.cssText=a.default,t.appendChild(n)):(n.appendChild(document.createTextNode(a.default)),t.append(n))})());try{await r.initPromise.promise}catch(e){throw r.instance&&(r.instance.parentNode&&r.instance.parentNode.removeChild(r.instance),r.instance=null),e}finally{window.clearTimeout(r.timeout),r.timeout=0}};r.postMessage=(e,t=!0)=>{var n,o;if(!r.instance)throw s.ERRORS.TypedError("Init_IframeBlocked");if(t){u++,e.id=u,r.messagePromises[u]=(0,i.createDeferred)();const{promise:t}=r.messagePromises[u];return null===(n=r.instance.contentWindow)||void 0===n||n.postMessage(e,r.origin),t}return null===(o=r.instance.contentWindow)||void 0===o||o.postMessage(e,r.origin),null};r.clearTimeout=()=>{window.clearTimeout(r.timeout)}}}},{package:"@metamask/eth-trezor-keyring>@trezor/connect-web",file:"node_modules/@trezor/connect-web/lib/iframe/index.js"}],[2293,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});r.default='.trezorconnect-container{position:fixed!important;display:-webkit-box!important;display:-webkit-flex!important;display:-ms-flexbox!important;display:flex!important;-webkit-box-orient:vertical!important;-webkit-box-direction:normal!important;-webkit-flex-direction:column!important;-ms-flex-direction:column!important;flex-direction:column!important;-webkit-box-align:center!important;-webkit-align-items:center!important;-ms-flex-align:center!important;align-items:center!important;z-index:10000!important;width:100%!important;height:100%!important;top:0!important;left:0!important;background:rgba(0,0,0,.35)!important;overflow:auto!important;padding:20px!important;margin:0!important}.trezorconnect-container .trezorconnect-window{position:relative!important;display:block!important;width:370px!important;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,sans-serif!important;margin:auto!important;border-radius:3px!important;background-color:#fff!important;text-align:center!important;overflow:hidden!important}.trezorconnect-container .trezorconnect-window .trezorconnect-head{text-align:left;padding:12px 24px!important;display:-webkit-box!important;display:-webkit-flex!important;display:-ms-flexbox!important;display:flex!important;-webkit-box-align:center!important;-webkit-align-items:center!important;-ms-flex-align:center!important;align-items:center!important}.trezorconnect-container .trezorconnect-window .trezorconnect-head .trezorconnect-logo{-webkit-box-flex:1;-webkit-flex:1;-ms-flex:1;flex:1}.trezorconnect-container .trezorconnect-window .trezorconnect-head .trezorconnect-close{cursor:pointer!important;height:24px!important}.trezorconnect-container .trezorconnect-window .trezorconnect-head .trezorconnect-close svg{fill:#757575;-webkit-transition:fill .3s ease-in-out!important;transition:fill .3s ease-in-out!important}.trezorconnect-container .trezorconnect-window .trezorconnect-head .trezorconnect-close:hover svg{fill:#494949}.trezorconnect-container .trezorconnect-window .trezorconnect-body{padding:24px 24px 32px!important;background:#FBFBFB!important;border-top:1px solid #EBEBEB}.trezorconnect-container .trezorconnect-window .trezorconnect-body h3{color:#505050!important;font-size:16px!important;font-weight:500!important}.trezorconnect-container .trezorconnect-window .trezorconnect-body p{margin:8px 0 24px!important;font-weight:400!important;color:#A9A9A9!important;font-size:12px!important}.trezorconnect-container .trezorconnect-window .trezorconnect-body button{width:100%!important;padding:12px 24px!important;margin:0!important;border-radius:3px!important;font-size:14px!important;font-weight:300!important;cursor:pointer!important;background:#01B757!important;color:#fff!important;border:0!important;-webkit-transition:background-color .3s ease-in-out!important;transition:background-color .3s ease-in-out!important}.trezorconnect-container .trezorconnect-window .trezorconnect-body button:hover{background-color:#00AB51!important}.trezorconnect-container .trezorconnect-window .trezorconnect-body button:active{background-color:#009546!important}/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImlucHV0IiwiJHN0ZGluIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQWNBLHlCQUNJLFNBQUEsZ0JBQ0EsUUFBQSxzQkFDQSxRQUFBLHVCQUNBLFFBQUEsc0JBRUEsUUFBQSxlQUNBLG1CQUFBLG1CQUNBLHNCQUFBLGlCQUNBLHVCQUFBLGlCQUNBLG1CQUFBLGlCQUNBLGVBQUEsaUJBRUEsa0JBQUEsaUJBQ0Esb0JBQUEsaUJBQ0EsZUFBQSxpQkNmTSxZQUFhLGlCREFyQixRQUFTLGdCQWtCSCxNQUFBLGVBQ0EsT0FBQSxlQUNBLElBQUEsWUFDQSxLQUFBLFlBQ0EsV0FBQSwwQkFDQSxTQUFBLGVBQ0EsUUFBQSxlQUNBLE9BQUEsWUNkUiwrQ0RYRSxTQUFVLG1CQTZCQSxRQUFBLGdCQUNBLE1BQUEsZ0JBQ0EsWUFBQSxjQUFBLG1CQUFBLFdBQUEsT0FBQSxpQkFBQSxNQUFBLHFCQUNBLE9BQUEsZUNmVixjQUFlLGNEakJmLGlCQWlCRSxlQWtCWSxXQUFBLGlCQ2ZkLFNBQVUsaUJEbUJJLG1FQUNBLFdBQUEsS0NoQmQsUUFBUyxLQUFLLGVEeEJkLFFBQVMsc0JBMENTLFFBQUEsdUJBQ0EsUUFBQSxzQkNmbEIsUUFBUyxlRGlCSyxrQkE1QlosaUJBOEJvQixvQkFBQSxpQkNoQmxCLGVBQWdCLGlCRC9CWixZQWlCTixpQkFzQ1EsdUZBQ0EsaUJBQUEsRUNwQlYsYUFBYyxFRHBDVixTQUFVLEVBMkRBLEtBQUEsRUFFQSx3RkNwQmQsT0FBUSxrQkR6Q1IsT0FBUSxlQWlFTSw0RkFDQSxLQUFBLFFBQ0EsbUJBQUEsS0FBQSxJQUFBLHNCQ3BCZCxXQUFZLEtBQUssSUFBSyxzQkR3QlIsa0dBQ0EsS0FBQSxRQUVBLG1FQUNBLFFBQUEsS0FBQSxLQUFBLGVBQ0EsV0FBQSxrQkFDQSxXQUFBLElBQUEsTUFBQSxRQUVBLHNFQUNBLE1BQUEsa0JBQ0EsVUFBQSxlQ3JCZCxZQUFhLGNEd0JLLHFFQ3JCbEIsT0FBUSxJQUFJLEVBQUksZUR3QkYsWUFBQSxjQUNJLE1BQUEsa0JDdEJsQixVQUFXLGVBRWIsMEVBQ0UsTUFBTyxlQUNQLFFBQVMsS0FBSyxlQUNkLE9BQVEsWUFDUixjQUFlLGNBQ2YsVUFBVyxlQUNYLFlBQWEsY0FDYixPQUFRLGtCQUNSLFdBQVksa0JBQ1osTUFBTyxlQUNQLE9BQVEsWUFDUixtQkFBb0IsaUJBQWlCLElBQUssc0JBQzFDLFdBQVksaUJBQWlCLElBQUssc0JBRXBDLGdGQUNFLGlCQUFrQixrQkFFcEIsaUZBQ0UsaUJBQWtCIn0= */'}}},{package:"@metamask/eth-trezor-keyring>@trezor/connect-web",file:"node_modules/@trezor/connect-web/lib/iframe/inlineStyles.js"}],[2294,{"./iframe":2292,"./popup":2295,"./webusb/button":2297,"@trezor/connect/lib/data/config":2303,"@trezor/connect/lib/exports":2317,"@trezor/connect/lib/factory":2318,"@trezor/connect/lib/utils/debug":2336,events:3331,tslib:4649},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});const n=e("tslib"),i=n.__importDefault(e("events")),s=e("@trezor/connect/lib/exports"),o=e("@trezor/connect/lib/factory"),a=e("@trezor/connect/lib/utils/debug"),u=e("@trezor/connect/lib/data/config"),c=n.__importStar(e("./iframe")),l=n.__importStar(e("./popup")),h=n.__importDefault(e("./webusb/button")),f=new i.default,d=(0,a.initLog)("@trezor/connect");let p,g=(0,s.parseConnectSettings)();const m=()=>{const e=new l.PopupManager(g);return e.on(s.POPUP.CLOSED,(e=>{c.postMessage({type:s.POPUP.CLOSED,payload:e?{error:e}:null},!1)})),e},y=()=>(f.removeAllListeners(),c.dispose(),g=(0,s.parseConnectSettings)(),p&&p.close(),Promise.resolve(undefined)),b=e=>{if(e.origin!==c.origin)return;const t=(0,s.parseMessage)(e.data),r=t.id||0;switch(d.log("handleMessage",t),t.event){case s.RESPONSE_EVENT:c.messagePromises[r]?(c.messagePromises[r].resolve({id:r,success:t.success,payload:t.payload}),delete c.messagePromises[r]):d.warn(`Unknown message id ${r}`);break;case s.DEVICE_EVENT:case s.TRANSPORT_EVENT:case s.BLOCKCHAIN_EVENT:f.emit(t.event,t),f.emit(t.type,t.payload);break;case s.UI_EVENT:if(t.type===s.IFRAME.BOOTSTRAP){c.clearTimeout();break}t.type===s.IFRAME.LOADED&&c.initPromise.resolve(),t.type===s.IFRAME.ERROR&&c.initPromise.reject(t.payload.error),f.emit(t.event,t),f.emit(t.type,t.payload);break;default:d.log("Undefined message",t.event,e)}},w=async(e={})=>{var t;if(c.instance)throw s.ERRORS.TypedError("Init_AlreadyInitialized");if(g=(0,s.parseConnectSettings)(Object.assign(Object.assign({},g),e)),!g.manifest)throw s.ERRORS.TypedError("Init_ManifestMissing");(null===(t=g.transports)||void 0===t?void 0:t.length)||(g.transports=["BridgeTransport","WebUsbTransport"]),g.lazyLoad?g.lazyLoad=!1:(p||(p=m()),d.enabled=!!g.debug,window.addEventListener("message",b),window.addEventListener("unload",y),await c.init(g))},v=async e=>{if(!c.instance&&!c.timeout){if(g=(0,s.parseConnectSettings)(g),!g.manifest)return(0,s.createErrorMessage)(s.ERRORS.TypedError("Init_ManifestMissing"));p||(p=m()),p.request(!0);try{await w(g)}catch(e){return p&&(["Init_IframeBlocked","Init_IframeTimeout"].includes(e.code)?p.postMessage((0,s.createUiMessage)(s.UI.IFRAME_FAILURE)):p.close()),(0,s.createErrorMessage)(e)}}if(c.timeout)return(0,s.createErrorMessage)(s.ERRORS.TypedError("Init_ManifestMissing"));if(c.error)return(0,s.createErrorMessage)(c.error);g.popup&&p&&p.request();try{const t=await c.postMessage({type:s.IFRAME.CALL,payload:e});return t?(!t.success&&"Device_CallInProgress"!==t.payload.code&&p&&p.unlock(),t):(p&&p.unlock(),(0,s.createErrorMessage)(s.ERRORS.TypedError("Method_NoResponse")))}catch(e){return d.error("__call error",e),p&&p.close(),(0,s.createErrorMessage)(e)}},T=(0,o.factory)({eventEmitter:f,manifest:e=>{g=(0,s.parseConnectSettings)(Object.assign(Object.assign({},g),{manifest:e}))},init:w,call:v,requestLogin:async e=>{if("function"==typeof e.callback){const{callback:t}=e,r=async e=>{const{data:r}=e;if(r&&r.type===s.UI.LOGIN_CHALLENGE_REQUEST)try{const e=await t();c.postMessage({event:s.UI_EVENT,type:s.UI.LOGIN_CHALLENGE_RESPONSE,payload:e})}catch(e){c.postMessage({event:s.UI_EVENT,type:s.UI.LOGIN_CHALLENGE_RESPONSE,payload:e.message})}};window.addEventListener("message",r,!1);const n=await v(Object.assign(Object.assign({method:"requestLogin"},e),{asyncChallenge:!0,callback:null}));return window.removeEventListener("message",r),n}return v(Object.assign({method:"requestLogin"},e))},uiResponse:e=>{if(!c.instance)throw s.ERRORS.TypedError("Init_NotInitialized");const{type:t,payload:r}=e;c.postMessage({event:s.UI_EVENT,type:t,payload:r})},renderWebUSBButton:e=>{(0,h.default)(e,g.webusbSrc)},disableWebUSB:()=>{if(!c.instance)throw s.ERRORS.TypedError("Init_NotInitialized");c.postMessage({event:s.UI_EVENT,type:s.TRANSPORT.DISABLE_WEBUSB})},requestWebUSBDevice:async()=>{try{await window.navigator.usb.requestDevice({filters:u.config.webusb}),c.postMessage({event:s.UI_EVENT,type:s.TRANSPORT.REQUEST_DEVICE})}catch(e){}},cancel:e=>{p&&p.emit(s.POPUP.CLOSED,e)},dispose:y});r.default=T,n.__exportStar(e("@trezor/connect/lib/exports"),r)}}},{package:"@metamask/eth-trezor-keyring>@trezor/connect-web",file:"node_modules/@trezor/connect-web/lib/index.js"}],[2295,{"./showPopupRequest":2296,"@trezor/connect/lib/index":2319,"@trezor/connect/lib/utils/urlUtils":2337,"@trezor/utils":2376,events:3331,tslib:4649},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.PopupManager=void 0;const n=e("tslib").__importDefault(e("events")),i=e("@trezor/utils"),s=e("@trezor/connect/lib/index"),o=e("@trezor/connect/lib/utils/urlUtils"),a=e("./showPopupRequest");class u extends n.default{constructor(e){super(),this.locked=!1,this.requestTimeout=0,this.closeInterval=0,this.extensionTabId=0,this.settings=e,this.origin=(0,o.getOrigin)(e.popupSrc),this.handleMessage=this.handleMessage.bind(this),this.iframeHandshake=(0,i.createDeferred)(s.IFRAME.LOADED),"webextension"===this.settings.env&&(this.handleExtensionConnect=this.handleExtensionConnect.bind(this),this.handleExtensionMessage=this.handleExtensionMessage.bind(this),chrome.runtime.onConnect.addListener(this.handleExtensionConnect)),window.addEventListener("message",this.handleMessage,!1)}request(e=!1){if(this.locked)return void(this._window&&("webextension"===this.settings.env?chrome.tabs.update(this._window.id,{active:!0}):this._window.focus()));const t=this.open.bind(this);if(this.locked=!0,this.settings.supportedBrowser){const r=e||"webextension"===this.settings.env?1:850;this.requestTimeout=window.setTimeout((()=>{this.requestTimeout=0,t(e)}),r)}else t()}cancel(){this.close()}unlock(){this.locked=!1}open(e){const t=this.settings.popupSrc;this.settings.supportedBrowser?(this.popupPromise=(0,i.createDeferred)(s.POPUP.LOADED),this.openWrapper(e?`${t}#loading`:t),this.closeInterval=window.setInterval((()=>{this._window&&("webextension"===this.settings.env?chrome.tabs.get(this._window.id,(e=>{e||(this.close(),this.emit(s.POPUP.CLOSED))})):this._window.closed&&(this.close(),this.emit(s.POPUP.CLOSED)))}),500),this.openTimeout=setTimeout((()=>{this.close(),(0,a.showPopupRequest)(this.open.bind(this),(()=>{this.emit(s.POPUP.CLOSED)}))}),3e3)):this.openWrapper(`${t}#unsupported`)}openWrapper(e){"webextension"===this.settings.env?chrome.windows.getCurrent((t=>{"normal"!==t.type?chrome.windows.create({url:e},(e=>{chrome.tabs.query({windowId:null==e?void 0:e.id,active:!0},(e=>{this._window=e[0]}))})):chrome.tabs.query({currentWindow:!0,active:!0},(t=>{this.extensionTabId=t[0].id,chrome.tabs.create({url:e,index:t[0].index+1},(e=>{this._window=e}))}))})):"electron"===this.settings.env?this._window=window.open(e,"modal"):(this._window=window.open("","_blank"),this._window&&(this._window.location.href=e))}handleExtensionConnect(e){var t,r;"trezor-connect"===e.name&&(!this._window||this._window&&this._window.id!==(null===(r=null===(t=e.sender)||void 0===t?void 0:t.tab)||void 0===r?void 0:r.id)?e.disconnect():(this.openTimeout&&clearTimeout(this.openTimeout),this.extensionPort=e,this.extensionPort.onMessage.addListener(this.handleExtensionMessage)))}handleExtensionMessage(e){if(!this.extensionPort)return;const t=this.extensionPort,{data:r}=e;if(r&&"object"==typeof r)if(r.type===s.POPUP.ERROR){const e=r.payload&&"string"==typeof r.payload.error?r.payload.error:null;this.emit(s.POPUP.CLOSED,e?`Popup error: ${e}`:null),this.close()}else r.type===s.POPUP.LOADED?(this.popupPromise&&this.popupPromise.resolve(),this.iframeHandshake.promise.then((e=>{t.postMessage({type:s.POPUP.INIT,payload:{settings:this.settings,useBroadcastChannel:e}})}))):r.type===s.POPUP.EXTENSION_USB_PERMISSIONS?chrome.tabs.query({currentWindow:!0,active:!0},(e=>{chrome.tabs.create({url:"trezor-usb-permissions.html",index:e[0].index+1},(e=>{}))})):r.type===s.POPUP.CLOSE_WINDOW&&(this.emit(s.POPUP.CLOSED),this.close())}handleMessage(e){const{data:t}=e;if((0,o.getOrigin)(e.origin)===this.origin&&t&&"object"==typeof t)if(t.type===s.IFRAME.LOADED){const e=!(!t.payload||"boolean"!=typeof t.payload.useBroadcastChannel)&&t.payload.useBroadcastChannel;this.iframeHandshake.resolve(e)}else if(t.type===s.POPUP.BOOTSTRAP)this.openTimeout&&clearTimeout(this.openTimeout);else if(t.type===s.POPUP.ERROR&&this._window){const e=t.payload&&"string"==typeof t.payload.error?t.payload.error:null;this.emit(s.POPUP.CLOSED,e?`Popup error: ${e}`:null),this.close()}else t.type===s.POPUP.LOADED?(this.popupPromise&&this.popupPromise.resolve(),this.iframeHandshake.promise.then((e=>{this._window.postMessage({type:s.POPUP.INIT,payload:{settings:this.settings,useBroadcastChannel:e}},this.origin)}))):t.type!==s.POPUP.CANCEL_POPUP_REQUEST&&t.type!==s.UI.CLOSE_UI_WINDOW||this.close()}close(){if(this.locked=!1,this.popupPromise=undefined,this.requestTimeout&&(window.clearTimeout(this.requestTimeout),this.requestTimeout=0),this.openTimeout&&(clearTimeout(this.openTimeout),this.openTimeout=undefined),this.closeInterval&&(window.clearInterval(this.closeInterval),this.closeInterval=0),this.extensionPort&&(this.extensionPort.disconnect(),this.extensionPort=undefined),this.extensionTabId&&(chrome.tabs.update(this.extensionTabId,{active:!0}),this.extensionTabId=0),this._window){if("webextension"===this.settings.env){let e=chrome.runtime.lastError;chrome.tabs.remove(this._window.id,(()=>{e=chrome.runtime.lastError}))}else this._window.close();this._window=null}}async postMessage(e){if(!this._window&&e.type!==s.UI.REQUEST_UI_WINDOW&&this.openTimeout)return this.close(),void(0,a.showPopupRequest)(this.open.bind(this),(()=>{this.emit(s.POPUP.CLOSED)}));this.popupPromise&&await this.popupPromise.promise,this._window&&this._window.postMessage(e,this.origin)}}r.PopupManager=u}}},{package:"@metamask/eth-trezor-keyring>@trezor/connect-web",file:"node_modules/@trezor/connect-web/lib/popup/index.js"}],[2296,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.showPopupRequest=void 0;const n="TrezorConnectInteractionLayer",i=`\n    <div class="trezorconnect-container" id="${n}">\n        <div class="trezorconnect-window">\n            <div class="trezorconnect-head">\n                <svg class="trezorconnect-logo" x="0px" y="0px" viewBox="0 0 163.7 41.9" width="78px" height="20px" preserveAspectRatio="xMinYMin meet">\n                    <polygon points="101.1,12.8 118.2,12.8 118.2,17.3 108.9,29.9 118.2,29.9 118.2,35.2 101.1,35.2 101.1,30.7 110.4,18.1 101.1,18.1"/>\n                    <path d="M158.8,26.9c2.1-0.8,4.3-2.9,4.3-6.6c0-4.5-3.1-7.4-7.7-7.4h-10.5v22.3h5.8v-7.5h2.2l4.1,7.5h6.7L158.8,26.9z M154.7,22.5 h-4V18h4c1.5,0,2.5,0.9,2.5,2.2C157.2,21.6,156.2,22.5,154.7,22.5z"/>\n                    <path d="M130.8,12.5c-6.8,0-11.6,4.9-11.6,11.5s4.9,11.5,11.6,11.5s11.7-4.9,11.7-11.5S137.6,12.5,130.8,12.5z M130.8,30.3 c-3.4,0-5.7-2.6-5.7-6.3c0-3.8,2.3-6.3,5.7-6.3c3.4,0,5.8,2.6,5.8,6.3C136.6,27.7,134.2,30.3,130.8,30.3z"/>\n                    <polygon points="82.1,12.8 98.3,12.8 98.3,18 87.9,18 87.9,21.3 98,21.3 98,26.4 87.9,26.4 87.9,30 98.3,30 98.3,35.2 82.1,35.2 "/>\n                    <path d="M24.6,9.7C24.6,4.4,20,0,14.4,0S4.2,4.4,4.2,9.7v3.1H0v22.3h0l14.4,6.7l14.4-6.7h0V12.9h-4.2V9.7z M9.4,9.7 c0-2.5,2.2-4.5,5-4.5s5,2,5,4.5v3.1H9.4V9.7z M23,31.5l-8.6,4l-8.6-4V18.1H23V31.5z"/>\n                    <path d="M79.4,20.3c0-4.5-3.1-7.4-7.7-7.4H61.2v22.3H67v-7.5h2.2l4.1,7.5H80l-4.9-8.3C77.2,26.1,79.4,24,79.4,20.3z M71,22.5h-4V18 h4c1.5,0,2.5,0.9,2.5,2.2C73.5,21.6,72.5,22.5,71,22.5z"/>\n                    <polygon points="40.5,12.8 58.6,12.8 58.6,18.1 52.4,18.1 52.4,35.2 46.6,35.2 46.6,18.1 40.5,18.1 "/>\n                </svg>\n                <div class="trezorconnect-close">\n                    <svg x="0px" y="0px" viewBox="24 24 60 60" width="24px" height="24px" preserveAspectRatio="xMinYMin meet">\n                        <polygon class="st0" points="40,67.9 42.1,70 55,57.1 67.9,70 70,67.9 57.1,55 70,42.1 67.9,40 55,52.9 42.1,40 40,42.1 52.9,55 "/>\n                    </svg>\n                </div>\n            </div>\n            <div class="trezorconnect-body">\n                <h3>Popup was blocked</h3>\n                <p>Please click to "Continue" to open popup manually</p>\n                <button class="trezorconnect-open">Continue</button>\n            </div>\n        </div>\n    </div>\n`;r.showPopupRequest=(e,t)=>{if(document.getElementById(n))return;const r=document.createElement("div");r.id=n,r.className="trezorconnect-container",r.innerHTML=i,document.body&&document.body.appendChild(r);r.getElementsByClassName("trezorconnect-open")[0].onclick=()=>{e(),document.body&&document.body.removeChild(r)};r.getElementsByClassName("trezorconnect-close")[0].onclick=()=>{t(),document.body&&document.body.removeChild(r)}}}}},{package:"@metamask/eth-trezor-keyring>@trezor/connect-web",file:"node_modules/@trezor/connect-web/lib/popup/showPopupRequest.js"}],[2297,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});r.default=(e="",t)=>{const r=e||".trezor-webusb-button",n=document.querySelectorAll(r),i=`${t}?${Date.now()}`;n.forEach((e=>{if(e.getElementsByTagName("iframe").length<1){const t=e.getBoundingClientRect(),r=document.createElement("iframe");r.frameBorder="0",r.width=`${Math.round(t.width)}px`,r.height=`${Math.round(t.height)}px`,r.style.position="absolute",r.style.top="0px",r.style.left="0px",r.style.zIndex="1",r.setAttribute("allow","usb"),r.setAttribute("scrolling","no"),r.src=i,e.append(r)}}))}}}},{package:"@metamask/eth-trezor-keyring>@trezor/connect-web",file:"node_modules/@trezor/connect-web/lib/webusb/button.js"}],[2298,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.NETWORK_IDS=r.PROTOCOL_MAGICS=void 0,function(e){e[e.mainnet=764824073]="mainnet",e[e.testnet_preprod=1]="testnet_preprod",e[e.testnet_preview=2]="testnet_preview",e[e.testnet_legacy=1097911063]="testnet_legacy"}(r.PROTOCOL_MAGICS||(r.PROTOCOL_MAGICS={})),function(e){e[e.mainnet=1]="mainnet",e[e.testnet=0]="testnet"}(r.NETWORK_IDS||(r.NETWORK_IDS={}))}}},{package:"@metamask/eth-trezor-keyring>@trezor/connect-web>@trezor/connect",file:"node_modules/@trezor/connect/lib/constants/cardano.js"}],[2299,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.LIBUSB_ERROR_MESSAGE=r.WEBUSB_ERROR_MESSAGE=r.INVALID_PIN_ERROR_MESSAGE=r.WRONG_PREVIOUS_SESSION_ERROR_MESSAGE=r.serializeError=r.TypedError=r.TrezorError=r.ERROR_CODES=void 0,r.ERROR_CODES={Init_NotInitialized:"TrezorConnect not initialized",Init_AlreadyInitialized:"TrezorConnect has been already initialized",Init_IframeBlocked:"Iframe blocked",Init_IframeTimeout:"Iframe timeout",Init_ManifestMissing:"Manifest not set. Read more at https://github.com/trezor/trezor-suite/blob/develop/docs/packages/connect/index.md",Popup_ConnectionMissing:"Unable to establish connection with iframe",Transport_Missing:"Transport is missing",Transport_InvalidProtobuf:"",Method_InvalidPackage:"This package is not suitable to work with browser. Use @trezor/connect-web package instead",Method_InvalidParameter:"",Method_NotAllowed:"Method not allowed for this configuration",Method_PermissionsNotGranted:"Permissions not granted",Method_Cancel:"Cancelled",Method_Interrupted:"Popup closed",Method_UnknownCoin:"Coin not found",Method_AddressNotMatch:"Addresses do not match",Method_FirmwareUpdate_DownloadFailed:"Failed to download firmware binary",Method_Discovery_BundleException:"",Method_Override:"override",Method_NoResponse:"Call resolved without response",Backend_NotSupported:"BlockchainLink settings not found in coins.json",Backend_WorkerMissing:"",Backend_Disconnected:"Backend disconnected",Backend_Invalid:"Invalid backend",Backend_Error:"",Runtime:"",Device_NotFound:"Device not found",Device_InitializeFailed:"",Device_FwException:"",Device_ModeException:"",Device_Disconnected:"Device disconnected",Device_UsedElsewhere:"Device is used in another window",Device_InvalidState:"Passphrase is incorrect",Device_CallInProgress:"Device call in progress"};class n extends Error{constructor(e,t){super(t),this.code=e,this.message=t}}r.TrezorError=n;r.TypedError=(e,t)=>new n(e,t||r.ERROR_CODES[e]);r.serializeError=e=>e&&e.error instanceof Error?{error:e.error.message,code:e.error.code}:e,r.WRONG_PREVIOUS_SESSION_ERROR_MESSAGE="wrong previous session",r.INVALID_PIN_ERROR_MESSAGE="PIN invalid",r.WEBUSB_ERROR_MESSAGE="NetworkError: Unable to claim interface.",r.LIBUSB_ERROR_MESSAGE="LIBUSB_ERROR"}}},{package:"@metamask/eth-trezor-keyring>@trezor/connect-web>@trezor/connect",file:"node_modules/@trezor/connect/lib/constants/errors.js"}],[23,{"../../../../../shared/constants/permissions":4760,"@metamask/snaps-controllers":1828,"@metamask/snaps-rpc-methods":1953},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.buildSnapRestrictedMethodSpecifications=r.buildSnapEndowmentSpecifications=void 0;var n=e("@metamask/snaps-rpc-methods"),i=e("@metamask/snaps-controllers"),s=e("../../../../../shared/constants/permissions");r.buildSnapEndowmentSpecifications=()=>Object.values(i.endowmentPermissionBuilders).reduce(((e,{targetName:t,specificationBuilder:r})=>(Object.keys(s.ExcludedSnapEndowments).includes(t)||(e[t]=r()),e)),{});r.buildSnapRestrictedMethodSpecifications=e=>Object.values(n.restrictedMethodPermissionBuilders).reduce(((t,{targetName:r,specificationBuilder:i,methodHooks:o})=>(Object.keys(s.ExcludedSnapPermissions).includes(r)||(t[r]=i({methodHooks:(0,n.selectHooks)(e,o)})),t)),{})}}},{package:"$root$",file:"app/scripts/controllers/permissions/snaps/snap-permissions.js"}],[2300,{"./cardano":2298,"./errors":2299,"./nem":2301,"./network":2302,"@trezor/transport/lib/types/messages":2357,tslib:4649},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.PROTO=r.NEM=r.CARDANO=r.NETWORK=r.ERRORS=void 0;const n=e("tslib");r.ERRORS=n.__importStar(e("./errors")),r.NETWORK=n.__importStar(e("./network")),r.CARDANO=n.__importStar(e("./cardano")),r.NEM=n.__importStar(e("./nem")),r.PROTO=n.__importStar(e("@trezor/transport/lib/types/messages"))}}},{package:"@metamask/eth-trezor-keyring>@trezor/connect-web>@trezor/connect",file:"node_modules/@trezor/connect/lib/constants/index.js"}],[2301,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.TxVersion=r.TxType=r.Networks=void 0,function(e){e[e.mainnet=104]="mainnet",e[e.testnet=152]="testnet",e[e.mijin=96]="mijin"}(r.Networks||(r.Networks={})),function(e){e[e.TRANSFER=257]="TRANSFER",e[e.COSIGNING=258]="COSIGNING",e[e.IMPORTANCE_TRANSFER=2049]="IMPORTANCE_TRANSFER",e[e.AGGREGATE_MODIFICATION=4097]="AGGREGATE_MODIFICATION",e[e.MULTISIG_SIGNATURE=4098]="MULTISIG_SIGNATURE",e[e.MULTISIG=4100]="MULTISIG",e[e.PROVISION_NAMESPACE=8193]="PROVISION_NAMESPACE",e[e.MOSAIC_CREATION=16385]="MOSAIC_CREATION",e[e.SUPPLY_CHANGE=16386]="SUPPLY_CHANGE"}(r.TxType||(r.TxType={})),function(e){e[e.mainnet=1744830464]="mainnet",e[e.testnet=-1744830464]="testnet",e[e.mijin=1610612736]="mijin"}(r.TxVersion||(r.TxVersion={}))}}},{package:"@metamask/eth-trezor-keyring>@trezor/connect-web>@trezor/connect",file:"node_modules/@trezor/connect/lib/constants/nem.js"}],[2302,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.TYPES=void 0,r.TYPES={bitcoin:"Bitcoin",ethereum:"Ethereum",eos:"Eos",nem:"NEM",stellar:"Stellar",cardano:"Cardano",ripple:"Ripple",tezos:"Tezos",binance:"Binance"}}}},{package:"@metamask/eth-trezor-keyring>@trezor/connect-web>@trezor/connect",file:"node_modules/@trezor/connect/lib/constants/network.js"}],[2303,{"@trezor/transport":2343},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.config=void 0;const n=e("@trezor/transport");r.config={webusb:n.TREZOR_DESCS,whitelist:[{origin:"chrome-extension://imloifkgjagghnncjkhggdhalmcnfklk",priority:1},{origin:"chrome-extension://niebkpllfhmpfbffbfifagfgoamhpflf",priority:1},{origin:"file://",priority:2},{origin:"trezor.io",priority:0},{origin:"sldev.cz",priority:0},{origin:"localhost",priority:0},{origin:"trezoriovpjcahpzkrewelclulmszwbqpzmzgub37gbcjlvluxtruqad.onion",priority:0}],management:[{origin:"trezor.io"},{origin:"sldev.cz"},{origin:"localhost"}],knownHosts:[{origin:"imloifkgjagghnncjkhggdhalmcnfklk",label:"Trezor Password Manager (Develop)",icon:""},{origin:"niebkpllfhmpfbffbfifagfgoamhpflf",label:"Trezor Password Manager",icon:""},{origin:"trezor-connect@trezor.io",label:"Trezor Connect FF Extension",icon:""},{origin:"efbfhenfhihgdcmnfdkhaphjdnopihlf",label:"Trezor Connect Chrome Extension",icon:""},{origin:"mnpfhpndmjholfdlhpkjfmjkgppmodaf",label:"MetaMask",icon:""},{origin:"webextension@metamask.io",label:"MetaMask",icon:""},{origin:"file://",label:" ",icon:""}],onionDomains:{"trezor.io":"trezoriovpjcahpzkrewelclulmszwbqpzmzgub37gbcjlvluxtruqad.onion"},assets:[{name:"coins",url:"./data/coins.json"},{name:"bridge",url:"./data/bridge/releases.json"},{name:"firmware-t1",url:"./data/firmware/1/releases.json"},{name:"firmware-t2",url:"./data/firmware/2/releases.json"}],messages:"./data/messages/messages.json",supportedBrowsers:{chrome:{version:59,download:"https://www.google.com/chrome/",update:"https://support.google.com/chrome/answer/95414"},chromium:{version:59,download:"https://www.chromium.org/",update:"https://www.chromium.org/"},electron:{version:0,download:"https://www.electronjs.org/",update:"https://www.electronjs.org/"},firefox:{version:54,download:"https://www.mozilla.org/en-US/firefox/new/",update:"https://support.mozilla.org/en-US/kb/update-firefox-latest-version"}},supportedFirmware:[{coin:["xrp","txrp"],methods:["getAccountInfo"],min:["0","2.1.0"],max:undefined,comment:["Since firmware 2.1.0 there is a new protobuf field 'destination_tag' in RippleSignTx"]},{coin:["bnb"],min:["1.9.0","2.3.0"],comment:["There were protobuf backwards incompatible changes with introduction of 1.9.0/2.3.0 firmwares"]},{coin:["eth","trop","tgor"],min:["1.8.0","2.1.0"],comment:["There were protobuf backwards incompatible changes."]},{methods:["rippleGetAddress","rippleSignTransaction"],min:["0","2.1.0"],comment:["Since firmware 2.1.0 there is a new protobuf field 'destination_tag' in RippleSignTx"]},{methods:["cardanoGetAddress","cardanoGetPublicKey"],min:["0","2.3.2"],comment:["Shelley fork support since firmware 2.3.2"]},{methods:["cardanoSignTransaction"],min:["0","2.4.2"],comment:["Non-streamed signing no longer supported"]},{methods:["cardanoGetNativeScriptHash"],min:["0","2.4.3"],comment:["Cardano GetNativeScriptHash call added in 2.4.3"]},{methods:["tezosSignTransaction"],min:["0","2.1.8"],comment:["Since 2.1.8 there are new protobuf fields in tezos transaction (Babylon fork)"]},{methods:["stellarSignTransaction"],min:["1.9.0","2.3.0"],comment:["There were protobuf backwards incompatible changes with introduction of 1.9.0/2.3.0 firmwares"]},{capabilities:["replaceTransaction","amountUnit"],min:["1.9.4","2.3.5"],comment:["new sign tx process since 1.9.4/2.3.5"]},{capabilities:["decreaseOutput"],min:["1.10.0","2.4.0"],comment:["allow reduce output in RBF transaction since 1.10.0/2.4.0"]},{capabilities:["eip1559"],min:["1.10.4","2.4.2"],comment:["new eth transaction pricing mechanism (EIP1559) since 1.10.4/2.4.2"]},{capabilities:["taproot","signMessageNoScriptType"],min:["1.10.4","2.4.3"],comment:["new btc accounts taproot since 1.10.4/2.4.3 (BTC + TEST only)","SignMessage with no_script_type support"]},{coin:["dcr","tdcr"],methods:["signTransaction"],min:["1.10.1","2.4.0"],comment:[""]},{methods:["ethereumSignTypedData"],min:["1.10.5","2.4.3"],comment:["EIP-712 typed signing support added in 1.10.5/2.4.3"]},{capabilities:["eip712-domain-only"],min:["1.10.6","2.4.4"],comment:["EIP-712 domain-only signing, when primaryType=EIP712Domain"]},{capabilities:["coinjoin"],methods:["authorizeCoinjoin","getOwnershipId","getOwnershipProof"],min:["0","2.5.3"]}]}}}},{package:"@metamask/eth-trezor-keyring>@trezor/connect-web>@trezor/connect",file:"node_modules/@trezor/connect/lib/data/config.js"}],[2304,{"./version":2305},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.parseConnectSettings=r.corsValidator=r.getEnv=r.DEFAULT_PRIORITY=void 0;const n=e("./version");r.DEFAULT_PRIORITY=2;const i={configSrc:"./data/config.json",version:n.VERSION,debug:!1,priority:r.DEFAULT_PRIORITY,trustedHost:!1,connectSrc:n.DEFAULT_DOMAIN,iframeSrc:`${n.DEFAULT_DOMAIN}iframe.html`,popup:!0,popupSrc:`${n.DEFAULT_DOMAIN}popup.html`,webusbSrc:`${n.DEFAULT_DOMAIN}webusb.html`,transports:undefined,pendingTransportEvent:!0,supportedBrowser:"undefined"==typeof navigator||!/Trident|MSIE|Edge/.test(navigator.userAgent),env:"web",lazyLoad:!1,timestamp:(new Date).getTime(),interactionTimeout:600};r.getEnv=()=>{if("undefined"!=typeof chrome&&chrome.runtime&&void 0!==chrome.runtime.onConnect)return"webextension";if("undefined"!=typeof navigator){if("string"==typeof navigator.product&&"reactnative"===navigator.product.toLowerCase())return"react-native";if(navigator.userAgent.toLowerCase().indexOf(" electron/")>-1)return"electron"}return"web"};r.corsValidator=e=>{if("string"==typeof e)return e.match(/^https:\/\/([A-Za-z0-9\-_]+\.)*trezor\.io\//)||e.match(/^https?:\/\/localhost:[58][0-9]{3}\//)||e.match(/^https:\/\/([A-Za-z0-9\-_]+\.)*sldev\.cz\//)||e.match(/^https?:\/\/([A-Za-z0-9\-_]+\.)*trezoriovpjcahpzkrewelclulmszwbqpzmzgub37gbcjlvluxtruqad\.onion\//)?e:void 0};r.parseConnectSettings=(e={})=>{const t={...i};let s;if(Object.prototype.hasOwnProperty.call(e,"debug")&&(Array.isArray(e),"boolean"==typeof e.debug?t.debug=e.debug:"string"==typeof e.debug&&(t.debug="true"===e.debug)),"string"==typeof e.connectSrc&&(t.connectSrc=e.connectSrc),"undefined"!=typeof window?s=window.__TREZOR_CONNECT_SRC:"undefined"!=typeof global&&(s=global.__TREZOR_CONNECT_SRC),"string"==typeof s&&(t.connectSrc=(0,r.corsValidator)(s),t.debug=!0),"undefined"!=typeof window&&window.location&&"string"==typeof window.location.search){const e=window.location.search.split("&").find((e=>e.indexOf("trezor-connect-src")>=0));if(e){const[,n]=e.split("=");t.connectSrc=(0,r.corsValidator)(decodeURIComponent(n)),t.debug=!0}}const o=t.connectSrc||n.DEFAULT_DOMAIN;return t.iframeSrc=`${o}iframe.html`,t.popupSrc=`${o}popup.html`,t.webusbSrc=`${o}webusb.html`,"boolean"==typeof e.transportReconnect&&(t.transportReconnect=e.transportReconnect),"boolean"==typeof e.webusb&&(t.webusb=e.webusb),Array.isArray(e.transports)&&(t.transports=e.transports),"boolean"==typeof e.popup&&(t.popup=e.popup),"boolean"==typeof e.lazyLoad&&(t.lazyLoad=e.lazyLoad),"boolean"==typeof e.pendingTransportEvent&&(t.pendingTransportEvent=e.pendingTransportEvent),"undefined"!=typeof window&&window.location&&"file:"===window.location.protocol&&(t.origin=`file://${window.location.pathname}`,t.webusb=!1),"string"==typeof e.extension&&(t.extension=e.extension),"string"==typeof e.env?t.env=e.env:t.env=(0,r.getEnv)(),"number"==typeof e.timestamp&&(t.timestamp=e.timestamp),"number"==typeof e.interactionTimeout&&(t.interactionTimeout=e.interactionTimeout),"object"==typeof e.manifest&&(t.manifest=(e=>{if(e&&"string"==typeof e.email&&"string"==typeof e.appUrl)return{email:e.email,appUrl:e.appUrl}})(e.manifest)),t}}}},{package:"@metamask/eth-trezor-keyring>@trezor/connect-web>@trezor/connect",file:"node_modules/@trezor/connect/lib/data/connectSettings.js"}],[2305,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.DEFAULT_DOMAIN=r.VERSION=void 0,r.VERSION="9.0.7";const n=r.VERSION.split(".").map((e=>parseInt(e,10)));r.DEFAULT_DOMAIN=`https://connect.trezor.io/${n[0]}/`}}},{package:"@metamask/eth-trezor-keyring>@trezor/connect-web>@trezor/connect",file:"node_modules/@trezor/connect/lib/data/version.js"}],[2306,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.createBlockchainMessage=r.BLOCKCHAIN=r.BLOCKCHAIN_EVENT=void 0,r.BLOCKCHAIN_EVENT="BLOCKCHAIN_EVENT",r.BLOCKCHAIN={CONNECT:"blockchain-connect",ERROR:"blockchain-error",BLOCK:"blockchain-block",NOTIFICATION:"blockchain-notification",FIAT_RATES_UPDATE:"fiat-rates-update"};r.createBlockchainMessage=(e,t)=>({event:r.BLOCKCHAIN_EVENT,type:e,payload:t})}}},{package:"@metamask/eth-trezor-keyring>@trezor/connect-web>@trezor/connect",file:"node_modules/@trezor/connect/lib/events/blockchain.js"}],[2307,{"../constants/errors":2299},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.createResponseMessage=r.RESPONSE_EVENT=void 0;const n=e("../constants/errors");r.RESPONSE_EVENT="RESPONSE_EVENT";r.createResponseMessage=(e,t,i)=>({event:r.RESPONSE_EVENT,type:r.RESPONSE_EVENT,id:e,success:t,payload:t?i:(0,n.serializeError)(i)})}}},{package:"@metamask/eth-trezor-keyring>@trezor/connect-web>@trezor/connect",file:"node_modules/@trezor/connect/lib/events/call.js"}],[2308,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.createErrorMessage=r.parseMessage=r.CORE_EVENT=void 0,r.CORE_EVENT="CORE_EVENT";r.parseMessage=e=>{const t={event:e.event,type:e.type,payload:e.payload};return"number"==typeof e.id&&(t.id=e.id),"boolean"==typeof e.success&&(t.success=e.success),t};r.createErrorMessage=e=>({success:!1,payload:{error:e.message,code:e.code}})}}},{package:"@metamask/eth-trezor-keyring>@trezor/connect-web>@trezor/connect",file:"node_modules/@trezor/connect/lib/events/core.js"}],[2309,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.createDeviceMessage=r.DEVICE=r.DEVICE_EVENT=void 0,r.DEVICE_EVENT="DEVICE_EVENT",r.DEVICE={CONNECT:"device-connect",CONNECT_UNACQUIRED:"device-connect_unacquired",DISCONNECT:"device-disconnect",CHANGED:"device-changed",ACQUIRE:"device-acquire",RELEASE:"device-release",ACQUIRED:"device-acquired",RELEASED:"device-released",USED_ELSEWHERE:"device-used_elsewhere",LOADING:"device-loading",BUTTON:"button",PIN:"pin",PASSPHRASE:"passphrase",PASSPHRASE_ON_DEVICE:"passphrase_on_device",WORD:"word"};r.createDeviceMessage=(e,t)=>({event:r.DEVICE_EVENT,type:e,payload:t})}}},{package:"@metamask/eth-trezor-keyring>@trezor/connect-web>@trezor/connect",file:"node_modules/@trezor/connect/lib/events/device.js"}],[2310,{"./ui-request":2315},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.createIFrameMessage=r.IFRAME=void 0;const n=e("./ui-request");r.IFRAME={BOOTSTRAP:"iframe-bootstrap",LOADED:"iframe-loaded",INIT:"iframe-init",ERROR:"iframe-error",CALL:"iframe-call"};r.createIFrameMessage=(e,t)=>({event:n.UI_EVENT,type:e,payload:t})}}},{package:"@metamask/eth-trezor-keyring>@trezor/connect-web>@trezor/connect",file:"node_modules/@trezor/connect/lib/events/iframe.js"}],[2311,{"./blockchain":2306,"./call":2307,"./core":2308,"./device":2309,"./iframe":2310,"./popup":2312,"./transport":2313,"./ui-promise":2314,"./ui-request":2315,"./ui-response":2316,tslib:4649},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.UI=void 0;const n=e("tslib"),i=e("./ui-request"),s=e("./ui-response");n.__exportStar(e("./blockchain"),r),n.__exportStar(e("./call"),r),n.__exportStar(e("./core"),r),n.__exportStar(e("./device"),r),n.__exportStar(e("./iframe"),r),n.__exportStar(e("./popup"),r),n.__exportStar(e("./transport"),r),n.__exportStar(e("./ui-promise"),r),n.__exportStar(e("./ui-request"),r),n.__exportStar(e("./ui-response"),r),r.UI={...i.UI_REQUEST,...s.UI_RESPONSE}}}},{package:"@metamask/eth-trezor-keyring>@trezor/connect-web>@trezor/connect",file:"node_modules/@trezor/connect/lib/events/index.js"}],[2312,{"./ui-request":2315},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.createPopupMessage=r.POPUP=void 0;const n=e("./ui-request");r.POPUP={BOOTSTRAP:"popup-bootstrap",LOADED:"popup-loaded",INIT:"popup-init",ERROR:"popup-error",EXTENSION_USB_PERMISSIONS:"open-usb-permissions",HANDSHAKE:"popup-handshake",CLOSED:"popup-closed",CANCEL_POPUP_REQUEST:"ui-cancel-popup-request",CLOSE_WINDOW:"window.close"};r.createPopupMessage=(e,t)=>({event:n.UI_EVENT,type:e,payload:t})}}},{package:"@metamask/eth-trezor-keyring>@trezor/connect-web>@trezor/connect",file:"node_modules/@trezor/connect/lib/events/popup.js"}],[2313,{"../constants/errors":2299},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.createTransportMessage=r.TRANSPORT=r.TRANSPORT_EVENT=void 0;const n=e("../constants/errors");r.TRANSPORT_EVENT="TRANSPORT_EVENT",r.TRANSPORT={START:"transport-start",ERROR:"transport-error",UPDATE:"transport-update",STREAM:"transport-stream",REQUEST_DEVICE:"transport-request_device",DISABLE_WEBUSB:"transport-disable_webusb",START_PENDING:"transport-start_pending"};r.createTransportMessage=(e,t)=>({event:r.TRANSPORT_EVENT,type:e,payload:"error"in t?(0,n.serializeError)(t):t})}}},{package:"@metamask/eth-trezor-keyring>@trezor/connect-web>@trezor/connect",file:"node_modules/@trezor/connect/lib/events/transport.js"}],[2314,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0})}}},{package:"@metamask/eth-trezor-keyring>@trezor/connect-web>@trezor/connect",file:"node_modules/@trezor/connect/lib/events/ui-promise.js"}],[2315,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.createUiMessage=r.UI_REQUEST=r.UI_EVENT=void 0,r.UI_EVENT="UI_EVENT",r.UI_REQUEST={TRANSPORT:"ui-no_transport",BOOTLOADER:"ui-device_bootloader_mode",NOT_IN_BOOTLOADER:"ui-device_not_in_bootloader_mode",REQUIRE_MODE:"ui-device_require_mode",INITIALIZE:"ui-device_not_initialized",SEEDLESS:"ui-device_seedless",FIRMWARE_OLD:"ui-device_firmware_old",FIRMWARE_OUTDATED:"ui-device_firmware_outdated",FIRMWARE_NOT_SUPPORTED:"ui-device_firmware_unsupported",FIRMWARE_NOT_COMPATIBLE:"ui-device_firmware_not_compatible",FIRMWARE_NOT_INSTALLED:"ui-device_firmware_not_installed",FIRMWARE_PROGRESS:"ui-firmware-progress",DEVICE_NEEDS_BACKUP:"ui-device_needs_backup",REQUEST_UI_WINDOW:"ui-request_window",CLOSE_UI_WINDOW:"ui-close_window",REQUEST_PERMISSION:"ui-request_permission",REQUEST_CONFIRMATION:"ui-request_confirmation",REQUEST_PIN:"ui-request_pin",INVALID_PIN:"ui-invalid_pin",REQUEST_PASSPHRASE:"ui-request_passphrase",REQUEST_PASSPHRASE_ON_DEVICE:"ui-request_passphrase_on_device",INVALID_PASSPHRASE:"ui-invalid_passphrase",CONNECT:"ui-connect",LOADING:"ui-loading",SET_OPERATION:"ui-set_operation",SELECT_DEVICE:"ui-select_device",SELECT_ACCOUNT:"ui-select_account",SELECT_FEE:"ui-select_fee",UPDATE_CUSTOM_FEE:"ui-update_custom_fee",INSUFFICIENT_FUNDS:"ui-insufficient_funds",REQUEST_BUTTON:"ui-button",REQUEST_WORD:"ui-request_word",LOGIN_CHALLENGE_REQUEST:"ui-login_challenge_request",BUNDLE_PROGRESS:"ui-bundle_progress",ADDRESS_VALIDATION:"ui-address_validation",IFRAME_FAILURE:"ui-iframe_failure"};r.createUiMessage=(e,t)=>({event:r.UI_EVENT,type:e,payload:t})}}},{package:"@metamask/eth-trezor-keyring>@trezor/connect-web>@trezor/connect",file:"node_modules/@trezor/connect/lib/events/ui-request.js"}],[2316,{"./ui-request":2315},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.createUiResponse=r.UI_RESPONSE=void 0;const n=e("./ui-request");r.UI_RESPONSE={RECEIVE_PERMISSION:"ui-receive_permission",RECEIVE_CONFIRMATION:"ui-receive_confirmation",RECEIVE_PIN:"ui-receive_pin",RECEIVE_PASSPHRASE:"ui-receive_passphrase",RECEIVE_DEVICE:"ui-receive_device",RECEIVE_ACCOUNT:"ui-receive_account",RECEIVE_FEE:"ui-receive_fee",RECEIVE_WORD:"ui-receive_word",INVALID_PASSPHRASE_ACTION:"ui-invalid_passphrase_action",CHANGE_SETTINGS:"ui-change_settings",LOGIN_CHALLENGE_RESPONSE:"ui-login_challenge_response"};r.createUiResponse=(e,t)=>({event:n.UI_EVENT,type:e,payload:t})}}},{package:"@metamask/eth-trezor-keyring>@trezor/connect-web>@trezor/connect",file:"node_modules/@trezor/connect/lib/events/ui-response.js"}],[2317,{"./constants":2300,"./data/connectSettings":2304,"./events":2311,"./types":2333,tslib:4649},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.parseConnectSettings=void 0;const n=e("tslib");n.__exportStar(e("./constants"),r),n.__exportStar(e("./events"),r),n.__exportStar(e("./types"),r);var i=e("./data/connectSettings");Object.defineProperty(r,"parseConnectSettings",{enumerable:!0,get:function(){return i.parseConnectSettings}})}}},{package:"@metamask/eth-trezor-keyring>@trezor/connect-web>@trezor/connect",file:"node_modules/@trezor/connect/lib/exports.js"}],[2318,{"./events":2311},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.factory=void 0;const n=e("./events");r.factory=({eventEmitter:e,manifest:t,init:r,call:i,requestLogin:s,uiResponse:o,renderWebUSBButton:a,disableWebUSB:u,requestWebUSBDevice:c,cancel:l,dispose:h})=>({manifest:t,init:r,getSettings:()=>i({method:"getSettings"}),on:(t,r)=>{e.on(t,r)},off:(t,r)=>{e.removeListener(t,r)},removeAllListeners:t=>{"string"==typeof t?e.removeAllListeners(t):e.removeAllListeners()},uiResponse:o,blockchainGetAccountBalanceHistory:e=>i({...e,method:"blockchainGetAccountBalanceHistory"}),blockchainGetCurrentFiatRates:e=>i({...e,method:"blockchainGetCurrentFiatRates"}),blockchainGetFiatRatesForTimestamps:e=>i({...e,method:"blockchainGetFiatRatesForTimestamps"}),blockchainDisconnect:e=>i({...e,method:"blockchainDisconnect"}),blockchainEstimateFee:e=>i({...e,method:"blockchainEstimateFee"}),blockchainGetTransactions:e=>i({...e,method:"blockchainGetTransactions"}),blockchainSetCustomBackend:e=>i({...e,method:"blockchainSetCustomBackend"}),blockchainSubscribe:e=>i({...e,method:"blockchainSubscribe"}),blockchainSubscribeFiatRates:e=>i({...e,method:"blockchainSubscribeFiatRates"}),blockchainUnsubscribe:e=>i({...e,method:"blockchainUnsubscribe"}),blockchainUnsubscribeFiatRates:e=>i({...e,method:"blockchainUnsubscribeFiatRates"}),requestLogin:e=>s(e),cardanoGetAddress:t=>i({...t,method:"cardanoGetAddress",useEventListener:e.listenerCount(n.UI.ADDRESS_VALIDATION)>0}),cardanoGetNativeScriptHash:e=>i({...e,method:"cardanoGetNativeScriptHash"}),cardanoGetPublicKey:e=>i({...e,method:"cardanoGetPublicKey"}),cardanoSignTransaction:e=>i({...e,method:"cardanoSignTransaction"}),cipherKeyValue:e=>i({...e,method:"cipherKeyValue"}),composeTransaction:e=>i({...e,method:"composeTransaction"}),ethereumGetAddress:t=>i({...t,method:"ethereumGetAddress",useEventListener:e.listenerCount(n.UI.ADDRESS_VALIDATION)>0}),ethereumGetPublicKey:e=>i({...e,method:"ethereumGetPublicKey"}),ethereumSignMessage:e=>i({...e,method:"ethereumSignMessage"}),ethereumSignTransaction:e=>i({...e,method:"ethereumSignTransaction"}),ethereumSignTypedData:e=>i({...e,method:"ethereumSignTypedData"}),ethereumVerifyMessage:e=>i({...e,method:"ethereumVerifyMessage"}),getAccountInfo:e=>i({...e,method:"getAccountInfo"}),getAddress:t=>i({...t,method:"getAddress",useEventListener:e.listenerCount(n.UI.ADDRESS_VALIDATION)>0}),getDeviceState:e=>i({...e,method:"getDeviceState"}),getFeatures:e=>i({...e,method:"getFeatures"}),getFirmwareHash:e=>i({...e,method:"getFirmwareHash"}),getOwnershipId:e=>i({...e,method:"getOwnershipId"}),getOwnershipProof:e=>i({...e,method:"getOwnershipProof"}),getPublicKey:e=>i({...e,method:"getPublicKey"}),nemGetAddress:t=>i({...t,method:"nemGetAddress",useEventListener:e.listenerCount(n.UI.ADDRESS_VALIDATION)>0}),nemSignTransaction:e=>i({...e,method:"nemSignTransaction"}),pushTransaction:e=>i({...e,method:"pushTransaction"}),rippleGetAddress:t=>i({...t,method:"rippleGetAddress",useEventListener:e.listenerCount(n.UI.ADDRESS_VALIDATION)>0}),rippleSignTransaction:e=>i({...e,method:"rippleSignTransaction"}),signMessage:e=>i({...e,method:"signMessage"}),signTransaction:e=>i({...e,method:"signTransaction"}),stellarGetAddress:t=>i({...t,method:"stellarGetAddress",useEventListener:e.listenerCount(n.UI.ADDRESS_VALIDATION)>0}),stellarSignTransaction:e=>i({...e,method:"stellarSignTransaction"}),tezosGetAddress:t=>i({...t,method:"tezosGetAddress",useEventListener:e.listenerCount(n.UI.ADDRESS_VALIDATION)>0}),tezosGetPublicKey:e=>i({...e,method:"tezosGetPublicKey"}),tezosSignTransaction:e=>i({...e,method:"tezosSignTransaction"}),unlockPath:e=>i({...e,method:"unlockPath"}),eosGetPublicKey:e=>i({...e,method:"eosGetPublicKey"}),eosSignTransaction:e=>i({...e,method:"eosSignTransaction"}),binanceGetAddress:t=>i({...t,method:"binanceGetAddress",useEventListener:e.listenerCount(n.UI.ADDRESS_VALIDATION)>0}),binanceGetPublicKey:e=>i({...e,method:"binanceGetPublicKey"}),binanceSignTransaction:e=>i({...e,method:"binanceSignTransaction"}),verifyMessage:e=>i({...e,method:"verifyMessage"}),resetDevice:e=>i({...e,method:"resetDevice"}),wipeDevice:e=>i({...e,method:"wipeDevice"}),checkFirmwareAuthenticity:e=>i({...e,method:"checkFirmwareAuthenticity"}),applyFlags:e=>i({...e,method:"applyFlags"}),applySettings:e=>i({...e,method:"applySettings"}),authorizeCoinjoin:e=>i({...e,method:"authorizeCoinjoin"}),backupDevice:e=>i({...e,method:"backupDevice"}),changePin:e=>i({...e,method:"changePin"}),firmwareUpdate:e=>i({...e,method:"firmwareUpdate"}),recoveryDevice:e=>i({...e,method:"recoveryDevice"}),getCoinInfo:e=>i({...e,method:"getCoinInfo"}),rebootToBootloader:e=>i({...e,method:"rebootToBootloader"}),setBusy:e=>i({...e,method:"setBusy"}),setProxy:e=>i({...e,method:"setProxy"}),dispose:h,cancel:l,renderWebUSBButton:a,disableWebUSB:u,requestWebUSBDevice:c})}}},{package:"@metamask/eth-trezor-keyring>@trezor/connect-web>@trezor/connect",file:"node_modules/@trezor/connect/lib/factory.js"}],[2319,{"./constants/errors":2299,"./exports":2317,"./factory":2318,tslib:4649},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});const n=e("tslib"),i=e("./constants/errors"),s=()=>{throw(0,i.TypedError)("Method_InvalidPackage")},o=(0,e("./factory").factory)({eventEmitter:{on:s,off:s,removeAllListeners:s,listenerCount:s},manifest:s,init:s,call:s,requestLogin:s,requestWebUSBDevice:s,uiResponse:s,renderWebUSBButton:s,disableWebUSB:s,cancel:s,dispose:s});r.default=o,n.__exportStar(e("./exports"),r)}}},{package:"@metamask/eth-trezor-keyring>@trezor/connect-web>@trezor/connect",file:"node_modules/@trezor/connect/lib/index-browser.js"}],[2320,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0})}}},{package:"@metamask/eth-trezor-keyring>@trezor/connect-web>@trezor/connect",file:"node_modules/@trezor/connect/lib/types/account.js"}],[2321,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0})}}},{package:"@metamask/eth-trezor-keyring>@trezor/connect-web>@trezor/connect",file:"node_modules/@trezor/connect/lib/types/api/binance/index.js"}],[2322,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0})}}},{package:"@metamask/eth-trezor-keyring>@trezor/connect-web>@trezor/connect",file:"node_modules/@trezor/connect/lib/types/api/bitcoin/index.js"}],[2323,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0})}}},{package:"@metamask/eth-trezor-keyring>@trezor/connect-web>@trezor/connect",file:"node_modules/@trezor/connect/lib/types/api/cardano/index.js"}],[2324,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0})}}},{package:"@metamask/eth-trezor-keyring>@trezor/connect-web>@trezor/connect",file:"node_modules/@trezor/connect/lib/types/api/eos/index.js"}],[2325,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0})}}},{package:"@metamask/eth-trezor-keyring>@trezor/connect-web>@trezor/connect",file:"node_modules/@trezor/connect/lib/types/api/ethereum/index.js"}],[2326,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0})}}},{package:"@metamask/eth-trezor-keyring>@trezor/connect-web>@trezor/connect",file:"node_modules/@trezor/connect/lib/types/api/index.js"}],[2327,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0})}}},{package:"@metamask/eth-trezor-keyring>@trezor/connect-web>@trezor/connect",file:"node_modules/@trezor/connect/lib/types/api/ripple/index.js"}],[2328,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0})}}},{package:"@metamask/eth-trezor-keyring>@trezor/connect-web>@trezor/connect",file:"node_modules/@trezor/connect/lib/types/api/stellar/index.js"}],[2329,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0})}}},{package:"@metamask/eth-trezor-keyring>@trezor/connect-web>@trezor/connect",file:"node_modules/@trezor/connect/lib/types/api/tezos/index.js"}],[2330,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0})}}},{package:"@metamask/eth-trezor-keyring>@trezor/connect-web>@trezor/connect",file:"node_modules/@trezor/connect/lib/types/coinInfo.js"}],[2331,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0})}}},{package:"@metamask/eth-trezor-keyring>@trezor/connect-web>@trezor/connect",file:"node_modules/@trezor/connect/lib/types/device.js"}],[2332,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0})}}},{package:"@metamask/eth-trezor-keyring>@trezor/connect-web>@trezor/connect",file:"node_modules/@trezor/connect/lib/types/firmware.js"}],[2333,{"./account":2320,"./api":2326,"./api/binance":2321,"./api/bitcoin":2322,"./api/cardano":2323,"./api/eos":2324,"./api/ethereum":2325,"./api/ripple":2327,"./api/stellar":2328,"./api/tezos":2329,"./coinInfo":2330,"./device":2331,"./firmware":2332,"./params":2334,"./settings":2335,tslib:4649},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});const n=e("tslib");n.__exportStar(e("./api"),r),n.__exportStar(e("./account"),r),n.__exportStar(e("./coinInfo"),r),n.__exportStar(e("./device"),r),n.__exportStar(e("./firmware"),r),n.__exportStar(e("./params"),r),n.__exportStar(e("./settings"),r),n.__exportStar(e("./api/cardano"),r),n.__exportStar(e("./api/binance"),r),n.__exportStar(e("./api/bitcoin"),r),n.__exportStar(e("./api/eos"),r),n.__exportStar(e("./api/ripple"),r),n.__exportStar(e("./api/ethereum"),r),n.__exportStar(e("./api/stellar"),r),n.__exportStar(e("./api/tezos"),r)}}},{package:"@metamask/eth-trezor-keyring>@trezor/connect-web>@trezor/connect",file:"node_modules/@trezor/connect/lib/types/index.js"}],[2334,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0})}}},{package:"@metamask/eth-trezor-keyring>@trezor/connect-web>@trezor/connect",file:"node_modules/@trezor/connect/lib/types/params.js"}],[2335,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0})}}},{package:"@metamask/eth-trezor-keyring>@trezor/connect-web>@trezor/connect",file:"node_modules/@trezor/connect/lib/types/settings.js"}],[2336,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.getLog=r.enableLogByPrefix=r.enableLog=r.initLog=void 0;const n={"@trezor/connect":"color: #f4a742; background: #000;",IFrame:"color: #f4a742; background: #000;",Core:"color: #f4a742; background: #000;",DescriptorStream:"color: #77ab59; background: #000;",DeviceList:"color: #77ab59; background: #000;",Device:"color: #bada55; background: #000;",DeviceCommands:"color: #bada55; background: #000;"};class i{constructor(e,t){this.prefix=e,this.enabled=t,this.messages=[],this.css="undefined"!=typeof window&&n[e]?n[e]:""}addMessage(e,t,...r){this.messages.push({level:e,prefix:t,message:r,timestamp:(new Date).getTime()}),this.messages.length>100&&this.messages.shift()}log(...e){this.addMessage("log",this.prefix,...e),this.enabled&&console.log(this.prefix,...e)}error(...e){this.addMessage("error",this.prefix,...e),this.enabled&&console.error(this.prefix,...e)}warn(...e){this.addMessage("warn",this.prefix,...e),this.enabled&&console.warn(this.prefix,...e)}debug(...e){this.addMessage("debug",this.prefix,...e),this.enabled&&(this.css?console.log(`%c${this.prefix}`,this.css,...e):console.log(this.prefix,...e))}}const s={};r.initLog=(e,t)=>{const r=new i(e,!!t);return s[e]=r,r};r.enableLog=e=>{Object.keys(s).forEach((t=>{s[t].enabled=!!e}))};r.enableLogByPrefix=(e,t)=>{s[e]&&(s[e].enabled=t)};r.getLog=()=>{let e=[];return Object.keys(s).forEach((t=>{e=e.concat(s[t].messages)})),e.sort(((e,t)=>e.timestamp-t.timestamp)),e}}}},{package:"@metamask/eth-trezor-keyring>@trezor/connect-web>@trezor/connect",file:"node_modules/@trezor/connect/lib/utils/debug.js"}],[2337,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.getOnionDomain=r.getOrigin=void 0;r.getOrigin=e=>{if("string"!=typeof e)return"unknown";if(0===e.indexOf("file://"))return"file://";const t=e.match(/^.+\:\/\/[^\/]+/);return Array.isArray(t)&&t.length>0?t[0]:"unknown"};r.getOnionDomain=(e,t)=>{var n;if(Array.isArray(e))return e.map((e=>(0,r.getOnionDomain)(e,t)));if("string"==typeof e){const[,r,i,s,o]=null!==(n=e.match(/^(http|ws)s?:\/\/([^:/]+\.)?([^/.]+\.[^/.]+)(\/.*)?$/i))&&void 0!==n?n:[];return s&&t[s]?`${r}://${i||""}${t[s]}${o||""}`:e}return e}}}},{package:"@metamask/eth-trezor-keyring>@trezor/connect-web>@trezor/connect",file:"node_modules/@trezor/connect/lib/utils/urlUtils.js"}],[2338,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,s){function o(e){try{u(n.next(e))}catch(e){s(e)}}function a(e){try{u(n.throw(e))}catch(e){s(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,a)}u((n=n.apply(e,t||[])).next())}))};Object.defineProperty(r,"__esModule",{value:!0}),r.request=r.setFetch=void 0;let i="undefined"==typeof window?()=>Promise.reject():window.fetch,s=!1;function o(e){return"string"==typeof e?""===e?"text/plain":"application/octet-stream":"application/json"}function a(e){try{return JSON.parse(e)}catch(t){return e}}r.setFetch=function(e,t){i=e,s=!!t},r.request=function(e){return n(this,void 0,void 0,(function*(){const t={method:e.method,body:(r=e.body,"string"==typeof r?r:JSON.stringify(r)),credentials:"same-origin",headers:{}};var r;null!=e.skipContentTypeHeader&&!1!==e.skipContentTypeHeader||(t.headers=Object.assign(Object.assign({},t.headers),{"Content-Type":o(null==e.body?"":e.body)})),s&&(t.headers=Object.assign(Object.assign({},t.headers),{Origin:"https://node.trezor.io"}));const n=yield i(e.url,t),u=yield n.text();if(n.ok)return a(u);const c=a(u);throw"object"==typeof c&&null!=c&&null!=c.error?new Error(c.error):new Error(u)}))}}}},{package:"@metamask/eth-trezor-keyring>@trezor/connect-web>@trezor/connect>@trezor/transport",file:"node_modules/@trezor/transport/lib/bridge/http.js"}],[2339,{"../config":2340,"../lowlevel/protobuf/messages":2347,"../lowlevel/receive":2351,"../lowlevel/send":2352,"../utils/highlevel-checks":2359,"./http":2338,"@trezor/utils":2376},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,s){function o(e){try{u(n.next(e))}catch(e){s(e)}}function a(e){try{u(n.throw(e))}catch(e){s(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,a)}u((n=n.apply(e,t||[])).next())}))};Object.defineProperty(r,"__esModule",{value:!0});const i=e("@trezor/utils"),s=e("./http"),o=e("../utils/highlevel-checks"),a=e("../lowlevel/send"),u=e("../lowlevel/protobuf/messages"),c=e("../lowlevel/receive"),l=e("../config");r.default=class{constructor(e,t){this.configured=!1,this.debug=!1,this.name="BridgeTransport",this.requestNeeded=!1,this.stopped=!1,this.version="",this.url=null==e?l.DEFAULT_URL:e,this.newestVersionUrl=null==t?l.DEFAULT_VERSION_URL:t}_post(e){return this.stopped?Promise.reject("Transport stopped."):(0,s.request)(Object.assign(Object.assign({},e),{method:"POST",url:this.url+e.url,skipContentTypeHeader:!0}))}init(e){return n(this,void 0,void 0,(function*(){this.debug=!!e,yield this._silentInit()}))}_silentInit(){return n(this,void 0,void 0,(function*(){const e=yield(0,s.request)({url:this.url,method:"POST"}),t=o.info(e);this.version=t.version;const r="string"==typeof this.bridgeVersion?this.bridgeVersion:o.version(yield(0,s.request)({url:`${this.newestVersionUrl}?${Date.now()}`,method:"GET"}));this.isOutdated=i.versionUtils.isNewer(r,this.version)}))}configure(e){const t=(0,u.parseConfigure)(e);this.configured=!0,this._messages=t}listen(e){return n(this,void 0,void 0,(function*(){if(null==e)throw new Error("Bridge v2 does not support listen without previous.");const t=yield this._post({url:"/listen",body:e});return o.devices(t)}))}enumerate(){return n(this,void 0,void 0,(function*(){const e=yield this._post({url:"/enumerate"});return o.devices(e)}))}_acquireMixed(e,t){const r=null==e.previous?"null":e.previous,n=`${t?"/debug":""}/acquire/${e.path}/${r}`;return this._post({url:n})}acquire(e,t){return n(this,void 0,void 0,(function*(){const r=yield this._acquireMixed(e,t);return o.acquire(r)}))}release(e,t,r){return n(this,void 0,void 0,(function*(){const n=this._post({url:`${r?"/debug":""}/release/${e}`});t||(yield n)}))}call(e,t,r,i){return n(this,void 0,void 0,(function*(){if(null==this._messages)throw new Error("Transport not configured.");const n=this._messages,s=(0,a.buildOne)(n,t,r).toString("hex"),u=yield this._post({url:`${i?"/debug":""}/call/${e}`,body:s});if("string"!=typeof u)throw new Error("Returning data is not string.");const l=(0,c.receiveOne)(n,u);return o.call(l)}))}post(e,t,r,i){return n(this,void 0,void 0,(function*(){if(null==this._messages)throw new Error("Transport not configured.");const n=this._messages,s=(0,a.buildOne)(n,t,r).toString("hex");yield this._post({url:`${i?"/debug":""}/post/${e}`,body:s})}))}read(e,t){return n(this,void 0,void 0,(function*(){if(null==this._messages)throw new Error("Transport not configured.");const r=this._messages,n=yield this._post({url:`${t?"/debug":""}/read/${e}`});if("string"!=typeof n)throw new Error("Returning data is not string.");const i=(0,c.receiveOne)(r,n);return o.call(i)}))}static setFetch(e,t){(0,s.setFetch)(e,t)}requestDevice(){return Promise.reject()}setBridgeLatestUrl(e){this.newestVersionUrl=e}setBridgeLatestVersion(e){this.bridgeVersion=e}stop(){this.stopped=!0}}}}},{package:"@metamask/eth-trezor-keyring>@trezor/connect-web>@trezor/connect>@trezor/transport",file:"node_modules/@trezor/transport/lib/bridge/v2.js"}],[2340,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.BUFFER_SIZE=r.HEADER_SIZE=r.MESSAGE_HEADER_BYTE=r.DEFAULT_VERSION_URL=r.DEFAULT_URL=void 0,r.DEFAULT_URL="http://127.0.0.1:21325",r.DEFAULT_VERSION_URL="https://data.trezor.io/bridge/latest.txt",r.MESSAGE_HEADER_BYTE=35,r.HEADER_SIZE=8,r.BUFFER_SIZE=63}}},{package:"@metamask/eth-trezor-keyring>@trezor/connect-web>@trezor/connect>@trezor/transport",file:"node_modules/@trezor/transport/lib/config.js"}],[2341,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.TREZOR_DESCS=void 0,r.TREZOR_DESCS=[{vendorId:21324,productId:1},{vendorId:4617,productId:21440},{vendorId:4617,productId:21441}]}}},{package:"@metamask/eth-trezor-keyring>@trezor/connect-web>@trezor/connect>@trezor/transport",file:"node_modules/@trezor/transport/lib/constants.js"}],[2342,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,s){function o(e){try{u(n.next(e))}catch(e){s(e)}}function a(e){try{u(n.throw(e))}catch(e){s(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,a)}u((n=n.apply(e,t||[])).next())}))};Object.defineProperty(r,"__esModule",{value:!0});r.default=class{constructor(e){this._availableTransports=[],this.activeName="",this.configured=!1,this.debug=!1,this.isOutdated=!1,this.name="FallbackTransport",this.requestNeeded=!1,this.transports=[],this.version="",this.transports=e}_tryInitTransports(){return n(this,void 0,void 0,(function*(){const e=[];let t=null;for(const r of this.transports)try{yield r.init(this.debug),e.push(r)}catch(e){t=e}if(0===e.length)throw t||new Error("No transport could be initialized.");return e}))}_tryConfigureTransports(e){return n(this,void 0,void 0,(function*(){let t=null;for(const r of this._availableTransports)try{return yield r.configure(e),r}catch(e){t=e}throw t||new Error("No transport could be initialized.")}))}init(e){return n(this,void 0,void 0,(function*(){this.debug=!!e;const t=yield this._tryInitTransports();this._availableTransports=t,this.version=t[0].version,this.configured=!1}))}configure(e){return n(this,void 0,void 0,(function*(){const t=this._tryConfigureTransports(e);this.activeTransport=yield t,this.configured=this.activeTransport.configured,this.version=this.activeTransport.version,this.activeName=this.activeTransport.name,this.requestNeeded=this.activeTransport.requestNeeded,this.isOutdated=this.activeTransport.isOutdated}))}enumerate(){return this.activeTransport.enumerate()}listen(e){return this.activeTransport.listen(e)}acquire(e,t){return this.activeTransport.acquire(e,t)}release(e,t,r){return this.activeTransport.release(e,t,r)}call(e,t,r,n){return this.activeTransport.call(e,t,r,n)}post(e,t,r,n){return this.activeTransport.post(e,t,r,n)}read(e,t){return this.activeTransport.read(e,t)}requestDevice(){return this.activeTransport.requestDevice()}setBridgeLatestUrl(e){for(const t of this.transports)t.setBridgeLatestUrl(e)}setBridgeLatestVersion(e){for(const t of this.transports)t.setBridgeLatestVersion(e)}stop(){for(const e of this.transports)e.stop()}}}}},{package:"@metamask/eth-trezor-keyring>@trezor/connect-web>@trezor/connect>@trezor/transport",file:"node_modules/@trezor/transport/lib/fallback.js"}],[2343,{"./bridge/v2":2339,"./constants":2341,"./fallback":2342,"./lowlevel/webusb":2354,"./lowlevel/withSharedConnections":2355,"./types":2356,long:4084,"protobufjs/light":4241},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.Messages=r.TREZOR_DESCS=void 0;const n=e("./bridge/v2"),i=e("./lowlevel/withSharedConnections"),s=e("./fallback"),o=e("./lowlevel/webusb"),a=e("protobufjs/light"),u=e("long");a.util.Long=u,a.configure();var c=e("./constants");Object.defineProperty(r,"TREZOR_DESCS",{enumerable:!0,get:function(){return c.TREZOR_DESCS}});var l=e("./types");Object.defineProperty(r,"Messages",{enumerable:!0,get:function(){return l.Messages}}),r.default={BridgeV2:n.default,Fallback:s.default,Lowlevel:i.default,WebUsb:o.default}}}},{package:"@metamask/eth-trezor-keyring>@trezor/connect-web>@trezor/connect>@trezor/transport",file:"node_modules/@trezor/transport/lib/index.js"}],[2344,{"../../utils/protobuf":2360,bytebuffer:2922},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__rest||function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]])}return r};Object.defineProperty(r,"__esModule",{value:!0}),r.decode=void 0;const i=e("bytebuffer"),s=e("../../utils/protobuf"),o=(e,t)=>{if((0,s.isPrimitiveField)(e.type))return e.optional&&void 0===t?null:"bytes"===e.type?i.wrap(t).toString("hex"):e.long?Number.isSafeInteger(t.toNumber())?t.toNumber():t.toString():t;if("valuesById"in e.resolvedType)return e.resolvedType.valuesById[t];if(e.resolvedType.fields)return a(t,e.resolvedType.fields);throw new Error(`transport: decode: case not handled: ${e}`)};function a(e,t){const r=n(e,[]),i={};return Object.keys(t).forEach((e=>{const n=t[e],s=r[e];n.repeated?i[e]=s.map((e=>o(n,e))):i[e]=o(n,s)})),i}r.decode=(e,t)=>{const r=t.toBuffer(),n=new Uint8Array(r),i=e.decode(n);return a(i,i.$type.fields)}}}},{package:"@metamask/eth-trezor-keyring>@trezor/connect-web>@trezor/connect>@trezor/transport",file:"node_modules/@trezor/transport/lib/lowlevel/protobuf/decode.js"}],[2345,{"../../utils/protobuf":2360,buffer:2913,bytebuffer:2922},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){Object.defineProperty(r,"__esModule",{value:!0}),r.encode=r.patch=void 0;const n=e("bytebuffer"),i=e("../../utils/protobuf"),s=(e,r)=>{if("bytes"===e)return"string"!=typeof r||r?t.from(r,"hex"):r;if("number"==typeof r&&!Number.isSafeInteger(r))throw new RangeError("field value is not within safe integer range");return r};function o(e,t){const r={};return e.fields?(Object.keys(e.fields).forEach((n=>{const a=e.fields[n],u=t[n];if(void 0!==u)if((0,i.isPrimitiveField)(a.type))a.repeated?r[n]=u.map((e=>s(a.type,e))):r[n]=s(a.type,u);else if(a.repeated){const t=e.lookupTypeOrEnum(a.type);r[n]=u.map((e=>o(t,e)))}else if("object"==typeof u&&null!==u){const t=e.lookupType(a.type);r[n]=o(t,u)}else if("number"==typeof u){const t=e.lookupEnum(a.type);r[n]=t.values[u]}else r[n]=u})),r):r}r.patch=o;r.encode=(e,t)=>{const r=o(e,t),i=e.fromObject(r),s=e.encode(i).finish(),a=new n(s.byteLength);return a.append(s),a.reset(),a}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/eth-trezor-keyring>@trezor/connect-web>@trezor/connect>@trezor/transport",file:"node_modules/@trezor/transport/lib/lowlevel/protobuf/encode.js"}],[2346,{"./decode":2344,"./encode":2345},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),i(e("./decode"),r),i(e("./encode"),r)}}},{package:"@metamask/eth-trezor-keyring>@trezor/connect-web>@trezor/connect>@trezor/transport",file:"node_modules/@trezor/transport/lib/lowlevel/protobuf/index.js"}],[2347,{"protobufjs/light":4241},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.createMessageFromType=r.createMessageFromName=r.parseConfigure=void 0;const n=e("protobufjs/light");r.parseConfigure=function(e){return"string"==typeof e?n.Root.fromJSON(JSON.parse(e)):n.Root.fromJSON(e)};r.createMessageFromName=(e,t)=>{const r=e.lookupType(t);let n=e.lookupEnum("MessageType").values[`MessageType_${t}`];return!n&&r.options&&(n=r.options["(wire_type)"]),{Message:r,messageType:n}};r.createMessageFromType=(e,t)=>{const r=e.lookupEnum("MessageType").valuesById[t].replace("MessageType_","");return{Message:e.lookupType(r),messageName:r}}}}},{package:"@metamask/eth-trezor-keyring>@trezor/connect-web>@trezor/connect>@trezor/transport",file:"node_modules/@trezor/transport/lib/lowlevel/protobuf/messages.js"}],[2348,{"../../config":2340,bytebuffer:2922},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.decodeChunked=r.decode=void 0;const n=e("bytebuffer"),i=e("../../config");r.decode=e=>{const{typeId:t}={typeId:(r=e).readUint16(),length:r.readUint32()};var r;return{typeId:t,buffer:e}};r.decodeChunked=e=>{const t=n.wrap(e,undefined,undefined,!0),{sharp1:r,sharp2:s,typeId:o,length:a}={sharp1:(u=t).readByte(),sharp2:u.readByte(),typeId:u.readUint16(),length:u.readUint32()};var u;if(r!==i.MESSAGE_HEADER_BYTE||s!==i.MESSAGE_HEADER_BYTE)throw new Error("Didn't receive expected header signature.");return{length:a,typeId:o,restBuffer:t}}}}},{package:"@metamask/eth-trezor-keyring>@trezor/connect-web>@trezor/connect>@trezor/transport",file:"node_modules/@trezor/transport/lib/lowlevel/protocol/decode.js"}],[2349,{"../../config":2340,bytebuffer:2922},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.encode=void 0;const n=e("bytebuffer"),i=e("../../config");r.encode=function(e,t){const{addTrezorHeaders:r,chunked:s,messageType:o}=t,a=(r?i.HEADER_SIZE:i.HEADER_SIZE-2)+e.limit,u=new n(a);if(r&&(u.writeByte(i.MESSAGE_HEADER_BYTE),u.writeByte(i.MESSAGE_HEADER_BYTE)),u.writeUint16(o),u.writeUint32(e.limit),u.append(e.buffer),u.reset(),!1===s)return u;const c=[],l=i.BUFFER_SIZE,h=Math.floor((u.limit-1)/l)+1||1;for(let e=0;e<h;e++){const t=e*l,r=Math.min((e+1)*l,u.limit),n=u.slice(t,r);n.compact(),c.push(n.buffer)}return c}}}},{package:"@metamask/eth-trezor-keyring>@trezor/connect-web>@trezor/connect>@trezor/transport",file:"node_modules/@trezor/transport/lib/lowlevel/protocol/encode.js"}],[2350,{"./decode":2348,"./encode":2349},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),i(e("./decode"),r),i(e("./encode"),r)}}},{package:"@metamask/eth-trezor-keyring>@trezor/connect-web>@trezor/connect>@trezor/transport",file:"node_modules/@trezor/transport/lib/lowlevel/protocol/index.js"}],[2351,{"./protobuf/decode":2344,"./protobuf/messages":2347,"./protocol/decode":2348,bytebuffer:2922},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,s){function o(e){try{u(n.next(e))}catch(e){s(e)}}function a(e){try{u(n.throw(e))}catch(e){s(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,a)}u((n=n.apply(e,t||[])).next())}))};Object.defineProperty(r,"__esModule",{value:!0}),r.receiveAndParse=r.receiveOne=void 0;const i=e("bytebuffer"),s=e("./protobuf/decode"),o=e("./protocol/decode"),a=e("./protobuf/messages");function u(e,t,r){return n(this,void 0,void 0,(function*(){if(e.offset>=r)return;const n=yield t();if(null==n)throw new Error("Received no data.");return e.append(n),u(e,t,r)}))}function c(e){return n(this,void 0,void 0,(function*(){const t=yield e(),{length:r,typeId:n,restBuffer:s}=o.decodeChunked(t),a=new i(r);return r&&a.append(s),yield u(a,e,r),{received:a,typeId:n}}))}r.receiveOne=function(e,t){const r=i.wrap(t,"hex"),{typeId:n,buffer:u}=o.decode(r),{Message:c,messageName:l}=(0,a.createMessageFromType)(e,n);return{message:s.decode(c,u),type:l}},r.receiveAndParse=function(e,t){return n(this,void 0,void 0,(function*(){const{received:r,typeId:n}=yield c(t),{Message:i,messageName:o}=(0,a.createMessageFromType)(e,n);r.reset();return{message:s.decode(i,r),type:o}}))}}}},{package:"@metamask/eth-trezor-keyring>@trezor/connect-web>@trezor/connect>@trezor/transport",file:"node_modules/@trezor/transport/lib/lowlevel/receive.js"}],[2352,{"./protobuf":2346,"./protobuf/messages":2347,"./protocol":2350},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,s){function o(e){try{u(n.next(e))}catch(e){s(e)}}function a(e){try{u(n.throw(e))}catch(e){s(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,a)}u((n=n.apply(e,t||[])).next())}))};Object.defineProperty(r,"__esModule",{value:!0}),r.buildAndSend=r.buildBuffers=r.buildOne=void 0;const i=e("./protobuf"),s=e("./protocol"),o=e("./protobuf/messages");r.buildOne=function(e,t,r){const{Message:n,messageType:a}=(0,o.createMessageFromName)(e,t),u=(0,i.encode)(n,r);return(0,s.encode)(u,{addTrezorHeaders:!1,chunked:!1,messageType:a})};r.buildBuffers=(e,t,r)=>{const{Message:n,messageType:a}=(0,o.createMessageFromName)(e,t),u=(0,i.encode)(n,r);return(0,s.encode)(u,{addTrezorHeaders:!0,chunked:!0,messageType:a})},r.buildAndSend=function(e,t,i,s){return function(e,t){return n(this,void 0,void 0,(function*(){for(const r of t)yield e(r)}))}(t,(0,r.buildBuffers)(e,i,s))}}}},{package:"@metamask/eth-trezor-keyring>@trezor/connect-web>@trezor/connect>@trezor/transport",file:"node_modules/@trezor/transport/lib/lowlevel/send.js"}],[2353,{"../utils/defered":2358},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.postModuleMessage=void 0;const n=e("../utils/defered"),i={},s={};let o=null,a=Promise.resolve();function u(){const e=(0,n.create)();o=e,setTimeout((()=>e.reject(new Error("Timed out"))),1e4)}function c(e){null!=o&&o.resolve(e)}function l(){return null==o?Promise.reject(new Error("???")):o.promise}function h(e){const t=a.then((()=>e()));a=t.catch((()=>{}))}function f(e,t,r){r.postMessage({id:t,message:e})}function d(e){c({id:e})}function p(e,t,r){if(null!=r){const e={};r.forEach((t=>{e[t.path]=!0})),Object.keys(i).forEach((e=>{i[e]||delete i[e]})),Object.keys(s).forEach((e=>{s[e]||delete s[e]}))}return f({type:"sessions",debugSessions:s,normalSessions:i},e,t),Promise.resolve()}let g=0;function m({id:e,message:t},r){if("acquire-intent"===t.type){const{path:n}=t,{previous:o}=t,{debug:a}=t;h((()=>function(e,t,r,n,o){let a=!1;const c=o?s:i,h=o?i:s,d=c[e];return a=null==d?null!=n:n!==d,a?(f({type:"wrong-previous-session"},t,r),Promise.resolve()):(u(),f({type:"other-session",otherSession:h[e]},t,r),l().then((t=>{if(t.good){g++;let n=g.toString();o&&(n=`debug${n}`),c[e]=n,f({type:"session-number",number:n},t.id,r)}else f({type:"ok"},t.id,r)})))}(n,e,r,o,a)))}if("acquire-done"===t.type&&function(e){c({good:!0,id:e})}(e),"acquire-failed"===t.type&&function(e){c({good:!1,id:e})}(e),"get-sessions"===t.type&&h((()=>p(e,r))),"get-sessions-and-disconnect"===t.type){const{devices:n}=t;h((()=>p(e,r,n)))}if("release-onclose"===t.type){const{session:e}=t;h((()=>function(e){let t=null;if(Object.keys(i).forEach((r=>{i[r]===e&&(t=r)})),null==t)return Promise.resolve();const r=t;return delete i[r],delete s[r],Promise.resolve()}(e)))}if("release-intent"===t.type){const{session:n}=t,{debug:o}=t;h((()=>function(e,t,r,n){let o=null;const a=t?s:i,c=t?i:s;if(Object.keys(a).forEach((t=>{a[t]===e&&(o=t)})),null==o)return f({type:"double-release"},r,n),Promise.resolve();const h=o,d=c[h];return u(),f({type:"path",path:h,otherSession:d},r,n),l().then((e=>{delete a[h],f({type:"ok"},e.id,n)}))}(n,o,e,r)))}"release-done"===t.type&&d(e),"enumerate-intent"===t.type&&h((()=>function(e,t){return u(),f({type:"ok"},e,t),l().then((e=>{f({type:"ok"},e.id,t)}))}(e,r))),"enumerate-done"===t.type&&d(e)}"undefined"!=typeof onconnect&&(onconnect=function(e){const t=e.ports[0];t.onmessage=function(e){m(e.data,t)}}),r.postModuleMessage=function({id:e,message:t},r){m({id:e,message:t},{postMessage:r})}}}},{package:"@metamask/eth-trezor-keyring>@trezor/connect-web>@trezor/connect>@trezor/transport",file:"node_modules/@trezor/transport/lib/lowlevel/sharedConnectionWorker.js"}],[2354,{"../constants":2341,events:3331},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,s){function o(e){try{u(n.next(e))}catch(e){s(e)}}function a(e){try{u(n.throw(e))}catch(e){s(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,a)}u((n=n.apply(e,t||[])).next())}))};Object.defineProperty(r,"__esModule",{value:!0});const i=e("events"),s=e("../constants");r.default=class{constructor(){this.allowsWriteAndEnumerate=!0,this.configurationId=1,this.debug=!1,this.debugEndpointId=2,this.debugInterfaceId=1,this.name="WebUsbPlugin",this.normalEndpointId=1,this.normalInterfaceId=0,this.requestNeeded=!0,this.unreadableHidDevice=!1,this.unreadableHidDeviceChange=new i.EventEmitter,this.version="",this._lastDevices=[]}init(e){this.debug=!!e;const{usb:t}=navigator;if(!t)throw new Error("WebUSB is not available on this browser.");this.usb=t}_deviceHasDebugLink(e){try{const t=e.configurations[0].interfaces[1].alternates[0];return 255===t.interfaceClass&&2===t.endpoints[0].endpointNumber}catch(e){return!1}}_deviceIsHid(e){return 21324===e.vendorId}_listDevices(){return n(this,void 0,void 0,(function*(){let e=0;const t=(yield this.usb.getDevices()).filter((e=>s.TREZOR_DESCS.some((t=>e.vendorId===t.vendorId&&e.productId===t.productId)))),r=t.filter((e=>this._deviceIsHid(e))),n=t.filter((e=>!this._deviceIsHid(e)));this._lastDevices=n.map((t=>{const{serialNumber:r}=t;let n=null==r||""===r?"bootloader":r;"bootloader"===n&&(e++,n+=e);return{path:n,device:t,debug:this._deviceHasDebugLink(t)}}));const i=this.unreadableHidDevice;return this.unreadableHidDevice=r.length>0,i!==this.unreadableHidDevice&&this.unreadableHidDeviceChange.emit("change"),this._lastDevices}))}enumerate(){return n(this,void 0,void 0,(function*(){return(yield this._listDevices()).map((e=>({path:e.path,debug:e.debug})))}))}_findDevice(e){const t=this._lastDevices.find((t=>t.path===e));if(null==t)throw new Error("Action was interrupted.");return t.device}send(e,t,r){return n(this,void 0,void 0,(function*(){const n=yield this._findDevice(e),i=new Uint8Array(64);i[0]=63,i.set(new Uint8Array(t),1),n.opened||(yield this.connect(e,r,!1));const s=r?this.debugEndpointId:this.normalEndpointId;return n.transferOut(s,i).then((()=>{}))}))}receive(e,t){return n(this,void 0,void 0,(function*(){const r=yield this._findDevice(e),n=t?this.debugEndpointId:this.normalEndpointId;try{r.opened||(yield this.connect(e,t,!1));const i=yield r.transferIn(n,64);if(!i.data)throw new Error("no data");return 0===i.data.byteLength?this.receive(e,t):i.data.buffer.slice(1)}catch(e){throw"Device unavailable."===e.message?new Error("Action was interrupted."):e}}))}connect(e,t,r){return n(this,void 0,void 0,(function*(){for(let n=0;n<5;n++){n>0&&(yield new Promise((e=>setTimeout((()=>e(undefined)),200*n))));try{return yield this._connectIn(e,t,r)}catch(e){if(4===n)throw e}}}))}_connectIn(e,t,r){return n(this,void 0,void 0,(function*(){const n=yield this._findDevice(e);if(yield n.open(),r){yield n.selectConfiguration(this.configurationId);try{yield n.reset()}catch(e){}}const i=t?this.debugInterfaceId:this.normalInterfaceId;yield n.claimInterface(i)}))}disconnect(e,t,r){return n(this,void 0,void 0,(function*(){const n=yield this._findDevice(e),i=t?this.debugInterfaceId:this.normalInterfaceId;yield n.releaseInterface(i),r&&(yield n.close())}))}requestDevice(){return n(this,void 0,void 0,(function*(){yield this.usb.requestDevice({filters:s.TREZOR_DESCS})}))}}}}},{package:"@metamask/eth-trezor-keyring>@trezor/connect-web>@trezor/connect>@trezor/transport",file:"node_modules/@trezor/transport/lib/lowlevel/webusb.js"}],[2355,{"../utils/defered":2358,"./protobuf/messages":2347,"./receive":2351,"./send":2352,"./sharedConnectionWorker":2353,"json-stable-stringify":3874},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,s){function o(e){try{u(n.next(e))}catch(e){s(e)}}function a(e){try{u(n.throw(e))}catch(e){s(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,a)}u((n=n.apply(e,t||[])).next())}))};Object.defineProperty(r,"__esModule",{value:!0});const i=e("../utils/defered"),s=e("./protobuf/messages"),o=e("./send"),a=e("./receive"),u=e("./sharedConnectionWorker"),c=e("json-stable-stringify");function l(e){if(null==e)return"null";const t=e.map((e=>{const{path:t}=e;return{path:t,session:null==e.session?null:e.session}}));return c(t)}function h(e,t){return Number.isNaN(parseInt(e.path,10))?e.path<t.path?-1:e.path>t.path?1:0:parseInt(e.path,10)-parseInt(t.path,10)}r.default=class{constructor(e,t){if(this.configured=!1,this.debug=!1,this.deferedDebugOnRelease={},this.deferedNormalOnRelease={},this.defereds={},this.isOutdated=!1,this.latestId=0,this.name="WebUsbTransport",this.requestNeeded=!1,this.sharedWorker=null,this.stopped=!1,this._lastStringified="",this.plugin=e,this.version=e.version,this._sharedWorkerFactory=t,!this.plugin.allowsWriteAndEnumerate)throw new Error("Plugin with shared connections cannot disallow write and enumerate")}enumerate(){return this._silentEnumerate()}_silentEnumerate(){return n(this,void 0,void 0,(function*(){yield this.sendToWorker({type:"enumerate-intent"});let e=[];try{e=yield this.plugin.enumerate()}finally{yield this.sendToWorker({type:"enumerate-done"})}const t=yield this.sendToWorker({type:"get-sessions-and-disconnect",devices:e});if("sessions"!==t.type)throw new Error("Wrong reply");const{debugSessions:r}=t,{normalSessions:n}=t,i=e.map((e=>{const t=n[e.path],i=r[e.path];return{path:e.path,session:t,debug:e.debug,debugSession:i}}));return this._releaseDisconnected(i),i.sort(h)}))}_releaseDisconnected(e){const t={};e.forEach((e=>{null!=e.session&&(t[e.session]=!0)})),Object.keys(this.deferedDebugOnRelease).forEach((e=>{null==t[e]&&this._releaseCleanup(e,!0)})),Object.keys(this.deferedNormalOnRelease).forEach((e=>{null==t[e]&&this._releaseCleanup(e,!1)}))}listen(e){const t=l(e),r=null==e?this._lastStringified:t;return this._runIter(0,r)}_runIter(e,t){return n(this,void 0,void 0,(function*(){const r=yield this._silentEnumerate(),n=l(r);return n!==t||60===e?(this._lastStringified=n,r):(yield(0,i.resolveTimeoutPromise)(500,null),this._runIter(e+1,n))}))}acquire(e,t){return n(this,void 0,void 0,(function*(){const r=yield this.sendToWorker({type:"acquire-intent",path:e.path,previous:e.previous,debug:t});if("wrong-previous-session"===r.type)throw new Error("wrong previous session");if("other-session"!==r.type)throw new Error("Strange reply");const n=null==r.otherSession;try{yield this.plugin.connect(e.path,t,n)}catch(e){throw yield this.sendToWorker({type:"acquire-failed"}),e}const s=yield this.sendToWorker({type:"acquire-done"});if("session-number"!==s.type)throw new Error("Strange reply.");const o=s.number;return t?this.deferedDebugOnRelease[o]=(0,i.create)():this.deferedNormalOnRelease[o]=(0,i.create)(),o}))}release(e,t,r){return n(this,void 0,void 0,(function*(){if(t&&!r)return void this.sendToWorker({type:"release-onclose",session:e});const n=yield this.sendToWorker({type:"release-intent",session:e,debug:r});if("double-release"===n.type)throw new Error("Trying to double release.");if("path"!==n.type)throw new Error("Strange reply.");const{path:i}=n,{otherSession:s}=n,o=null==s;this._releaseCleanup(e,r);try{yield this.plugin.disconnect(i,r,o)}catch(e){}yield this.sendToWorker({type:"release-done"})}))}_releaseCleanup(e,t){const r=t?this.deferedDebugOnRelease:this.deferedNormalOnRelease;null!=r[e]&&(r[e].reject(new Error("Device released or disconnected")),delete r[e])}configure(e){const t=(0,s.parseConfigure)(e);this._messages=t,this.configured=!0}_sendLowlevel(e,t){return r=>this.plugin.send(e,r,t)}_receiveLowlevel(e,t){return()=>this.plugin.receive(e,t)}messages(){if(null==this._messages)throw new Error("Transport not configured.");return this._messages}doWithSession(e,t,r){return n(this,void 0,void 0,(function*(){const n=yield this.sendToWorker({type:"get-sessions"});if("sessions"!==n.type)throw new Error("Wrong reply");const i=t?n.debugSessions:n.normalSessions;let s=null;if(Object.keys(i).forEach((t=>{i[t]===e&&(s=t)})),null==s)throw new Error("Session not available.");const o=s,a=yield r(o),u=t?this.deferedDebugOnRelease[e]:this.deferedNormalOnRelease[e];return Promise.race([u.rejectingPromise,a])}))}call(e,t,r,i){return this.doWithSession(e,i,(e=>n(this,void 0,void 0,(function*(){const n=this.messages();yield(0,o.buildAndSend)(n,this._sendLowlevel(e,i),t,r);return yield(0,a.receiveAndParse)(n,this._receiveLowlevel(e,i))}))))}post(e,t,r,i){return this.doWithSession(e,i,(e=>n(this,void 0,void 0,(function*(){const n=this.messages();yield(0,o.buildAndSend)(n,this._sendLowlevel(e,i),t,r)}))))}read(e,t){return this.doWithSession(e,t,(e=>n(this,void 0,void 0,(function*(){const r=this.messages();return yield(0,a.receiveAndParse)(r,this._receiveLowlevel(e,t))}))))}init(e){return n(this,void 0,void 0,(function*(){this.debug=!!e,this.requestNeeded=this.plugin.requestNeeded,yield this.plugin.init(e),null!=this._sharedWorkerFactory&&(this.sharedWorker=this._sharedWorkerFactory(),null!=this.sharedWorker&&(this.sharedWorker.port.onmessage=e=>{this.receiveFromWorker(e.data)}))}))}requestDevice(){return this.plugin.requestDevice()}sendToWorker(e){if(this.stopped)return Promise.reject("Transport stopped.");this.latestId++;const t=this.latestId;return this.defereds[t]=(0,i.create)(),null!=this.sharedWorker?this.sharedWorker.port.postMessage({id:t,message:e}):(0,u.postModuleMessage)({id:t,message:e},(e=>this.receiveFromWorker(e))),this.defereds[t].promise}receiveFromWorker(e){this.defereds[e.id].resolve(e.message),delete this.defereds[e.id]}stop(){this.stopped=!0,this.sharedWorker=null}}}}},{package:"@metamask/eth-trezor-keyring>@trezor/connect-web>@trezor/connect>@trezor/transport",file:"node_modules/@trezor/transport/lib/lowlevel/withSharedConnections.js"}],[2356,{"./messages":2357},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.Messages=void 0,r.Messages=e("./messages")}}},{package:"@metamask/eth-trezor-keyring>@trezor/connect-web>@trezor/connect>@trezor/transport",file:"node_modules/@trezor/transport/lib/types/index.js"}],[2357,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.TezosBallotType=r.TezosContractType=r.StellarSignerType=r.StellarMemoType=r.StellarAssetType=r.NEMImportanceTransferMode=r.NEMModificationType=r.NEMSupplyChangeType=r.NEMMosaicLevy=r.MoneroNetworkType=r.Enum_WordRequestType=r.RecoveryDeviceType=r.SdProtectOperationType=r.Enum_Capability=r.Enum_SafetyCheckLevel=r.Enum_BackupType=r.EthereumDataType=r.DebugButton=r.Enum_PinMatrixRequestType=r.Enum_ButtonRequestType=r.FailureType=r.CardanoTxWitnessType=r.CardanoTxSigningMode=r.CardanoGovernanceRegistrationFormat=r.CardanoTxAuxiliaryDataSupplementType=r.CardanoPoolRelayType=r.CardanoCertificateType=r.CardanoTxOutputSerializationFormat=r.CardanoNativeScriptHashDisplayFormat=r.CardanoNativeScriptType=r.CardanoAddressType=r.CardanoDerivationType=r.Enum_RequestType=r.AmountUnit=r.DecredStakingSpendType=r.Enum_OutputScriptType=r.Enum_InputScriptType=r.BinanceTimeInForce=r.BinanceOrderSide=r.BinanceOrderType=void 0,function(e){e[e.OT_UNKNOWN=0]="OT_UNKNOWN",e[e.MARKET=1]="MARKET",e[e.LIMIT=2]="LIMIT",e[e.OT_RESERVED=3]="OT_RESERVED"}(r.BinanceOrderType||(r.BinanceOrderType={})),function(e){e[e.SIDE_UNKNOWN=0]="SIDE_UNKNOWN",e[e.BUY=1]="BUY",e[e.SELL=2]="SELL"}(r.BinanceOrderSide||(r.BinanceOrderSide={})),function(e){e[e.TIF_UNKNOWN=0]="TIF_UNKNOWN",e[e.GTE=1]="GTE",e[e.TIF_RESERVED=2]="TIF_RESERVED",e[e.IOC=3]="IOC"}(r.BinanceTimeInForce||(r.BinanceTimeInForce={})),function(e){e[e.SPENDADDRESS=0]="SPENDADDRESS",e[e.SPENDMULTISIG=1]="SPENDMULTISIG",e[e.EXTERNAL=2]="EXTERNAL",e[e.SPENDWITNESS=3]="SPENDWITNESS",e[e.SPENDP2SHWITNESS=4]="SPENDP2SHWITNESS",e[e.SPENDTAPROOT=5]="SPENDTAPROOT"}(r.Enum_InputScriptType||(r.Enum_InputScriptType={})),function(e){e[e.PAYTOADDRESS=0]="PAYTOADDRESS",e[e.PAYTOSCRIPTHASH=1]="PAYTOSCRIPTHASH",e[e.PAYTOMULTISIG=2]="PAYTOMULTISIG",e[e.PAYTOOPRETURN=3]="PAYTOOPRETURN",e[e.PAYTOWITNESS=4]="PAYTOWITNESS",e[e.PAYTOP2SHWITNESS=5]="PAYTOP2SHWITNESS",e[e.PAYTOTAPROOT=6]="PAYTOTAPROOT"}(r.Enum_OutputScriptType||(r.Enum_OutputScriptType={})),function(e){e[e.SSGen=0]="SSGen",e[e.SSRTX=1]="SSRTX"}(r.DecredStakingSpendType||(r.DecredStakingSpendType={})),function(e){e[e.BITCOIN=0]="BITCOIN",e[e.MILLIBITCOIN=1]="MILLIBITCOIN",e[e.MICROBITCOIN=2]="MICROBITCOIN",e[e.SATOSHI=3]="SATOSHI"}(r.AmountUnit||(r.AmountUnit={})),function(e){e[e.TXINPUT=0]="TXINPUT",e[e.TXOUTPUT=1]="TXOUTPUT",e[e.TXMETA=2]="TXMETA",e[e.TXFINISHED=3]="TXFINISHED",e[e.TXEXTRADATA=4]="TXEXTRADATA",e[e.TXORIGINPUT=5]="TXORIGINPUT",e[e.TXORIGOUTPUT=6]="TXORIGOUTPUT",e[e.TXPAYMENTREQ=7]="TXPAYMENTREQ"}(r.Enum_RequestType||(r.Enum_RequestType={})),function(e){e[e.LEDGER=0]="LEDGER",e[e.ICARUS=1]="ICARUS",e[e.ICARUS_TREZOR=2]="ICARUS_TREZOR"}(r.CardanoDerivationType||(r.CardanoDerivationType={})),function(e){e[e.BASE=0]="BASE",e[e.BASE_SCRIPT_KEY=1]="BASE_SCRIPT_KEY",e[e.BASE_KEY_SCRIPT=2]="BASE_KEY_SCRIPT",e[e.BASE_SCRIPT_SCRIPT=3]="BASE_SCRIPT_SCRIPT",e[e.POINTER=4]="POINTER",e[e.POINTER_SCRIPT=5]="POINTER_SCRIPT",e[e.ENTERPRISE=6]="ENTERPRISE",e[e.ENTERPRISE_SCRIPT=7]="ENTERPRISE_SCRIPT",e[e.BYRON=8]="BYRON",e[e.REWARD=14]="REWARD",e[e.REWARD_SCRIPT=15]="REWARD_SCRIPT"}(r.CardanoAddressType||(r.CardanoAddressType={})),function(e){e[e.PUB_KEY=0]="PUB_KEY",e[e.ALL=1]="ALL",e[e.ANY=2]="ANY",e[e.N_OF_K=3]="N_OF_K",e[e.INVALID_BEFORE=4]="INVALID_BEFORE",e[e.INVALID_HEREAFTER=5]="INVALID_HEREAFTER"}(r.CardanoNativeScriptType||(r.CardanoNativeScriptType={})),function(e){e[e.HIDE=0]="HIDE",e[e.BECH32=1]="BECH32",e[e.POLICY_ID=2]="POLICY_ID"}(r.CardanoNativeScriptHashDisplayFormat||(r.CardanoNativeScriptHashDisplayFormat={})),function(e){e[e.ARRAY_LEGACY=0]="ARRAY_LEGACY",e[e.MAP_BABBAGE=1]="MAP_BABBAGE"}(r.CardanoTxOutputSerializationFormat||(r.CardanoTxOutputSerializationFormat={})),function(e){e[e.STAKE_REGISTRATION=0]="STAKE_REGISTRATION",e[e.STAKE_DEREGISTRATION=1]="STAKE_DEREGISTRATION",e[e.STAKE_DELEGATION=2]="STAKE_DELEGATION",e[e.STAKE_POOL_REGISTRATION=3]="STAKE_POOL_REGISTRATION"}(r.CardanoCertificateType||(r.CardanoCertificateType={})),function(e){e[e.SINGLE_HOST_IP=0]="SINGLE_HOST_IP",e[e.SINGLE_HOST_NAME=1]="SINGLE_HOST_NAME",e[e.MULTIPLE_HOST_NAME=2]="MULTIPLE_HOST_NAME"}(r.CardanoPoolRelayType||(r.CardanoPoolRelayType={})),function(e){e[e.NONE=0]="NONE",e[e.GOVERNANCE_REGISTRATION_SIGNATURE=1]="GOVERNANCE_REGISTRATION_SIGNATURE"}(r.CardanoTxAuxiliaryDataSupplementType||(r.CardanoTxAuxiliaryDataSupplementType={})),function(e){e[e.CIP15=0]="CIP15",e[e.CIP36=1]="CIP36"}(r.CardanoGovernanceRegistrationFormat||(r.CardanoGovernanceRegistrationFormat={})),function(e){e[e.ORDINARY_TRANSACTION=0]="ORDINARY_TRANSACTION",e[e.POOL_REGISTRATION_AS_OWNER=1]="POOL_REGISTRATION_AS_OWNER",e[e.MULTISIG_TRANSACTION=2]="MULTISIG_TRANSACTION",e[e.PLUTUS_TRANSACTION=3]="PLUTUS_TRANSACTION"}(r.CardanoTxSigningMode||(r.CardanoTxSigningMode={})),function(e){e[e.BYRON_WITNESS=0]="BYRON_WITNESS",e[e.SHELLEY_WITNESS=1]="SHELLEY_WITNESS"}(r.CardanoTxWitnessType||(r.CardanoTxWitnessType={})),function(e){e[e.Failure_UnexpectedMessage=1]="Failure_UnexpectedMessage",e[e.Failure_ButtonExpected=2]="Failure_ButtonExpected",e[e.Failure_DataError=3]="Failure_DataError",e[e.Failure_ActionCancelled=4]="Failure_ActionCancelled",e[e.Failure_PinExpected=5]="Failure_PinExpected",e[e.Failure_PinCancelled=6]="Failure_PinCancelled",e[e.Failure_PinInvalid=7]="Failure_PinInvalid",e[e.Failure_InvalidSignature=8]="Failure_InvalidSignature",e[e.Failure_ProcessError=9]="Failure_ProcessError",e[e.Failure_NotEnoughFunds=10]="Failure_NotEnoughFunds",e[e.Failure_NotInitialized=11]="Failure_NotInitialized",e[e.Failure_PinMismatch=12]="Failure_PinMismatch",e[e.Failure_WipeCodeMismatch=13]="Failure_WipeCodeMismatch",e[e.Failure_InvalidSession=14]="Failure_InvalidSession",e[e.Failure_FirmwareError=99]="Failure_FirmwareError"}(r.FailureType||(r.FailureType={})),function(e){e[e.ButtonRequest_Other=1]="ButtonRequest_Other",e[e.ButtonRequest_FeeOverThreshold=2]="ButtonRequest_FeeOverThreshold",e[e.ButtonRequest_ConfirmOutput=3]="ButtonRequest_ConfirmOutput",e[e.ButtonRequest_ResetDevice=4]="ButtonRequest_ResetDevice",e[e.ButtonRequest_ConfirmWord=5]="ButtonRequest_ConfirmWord",e[e.ButtonRequest_WipeDevice=6]="ButtonRequest_WipeDevice",e[e.ButtonRequest_ProtectCall=7]="ButtonRequest_ProtectCall",e[e.ButtonRequest_SignTx=8]="ButtonRequest_SignTx",e[e.ButtonRequest_FirmwareCheck=9]="ButtonRequest_FirmwareCheck",e[e.ButtonRequest_Address=10]="ButtonRequest_Address",e[e.ButtonRequest_PublicKey=11]="ButtonRequest_PublicKey",e[e.ButtonRequest_MnemonicWordCount=12]="ButtonRequest_MnemonicWordCount",e[e.ButtonRequest_MnemonicInput=13]="ButtonRequest_MnemonicInput",e[e._Deprecated_ButtonRequest_PassphraseType=14]="_Deprecated_ButtonRequest_PassphraseType",e[e.ButtonRequest_UnknownDerivationPath=15]="ButtonRequest_UnknownDerivationPath",e[e.ButtonRequest_RecoveryHomepage=16]="ButtonRequest_RecoveryHomepage",e[e.ButtonRequest_Success=17]="ButtonRequest_Success",e[e.ButtonRequest_Warning=18]="ButtonRequest_Warning",e[e.ButtonRequest_PassphraseEntry=19]="ButtonRequest_PassphraseEntry",e[e.ButtonRequest_PinEntry=20]="ButtonRequest_PinEntry"}(r.Enum_ButtonRequestType||(r.Enum_ButtonRequestType={})),function(e){e[e.PinMatrixRequestType_Current=1]="PinMatrixRequestType_Current",e[e.PinMatrixRequestType_NewFirst=2]="PinMatrixRequestType_NewFirst",e[e.PinMatrixRequestType_NewSecond=3]="PinMatrixRequestType_NewSecond",e[e.PinMatrixRequestType_WipeCodeFirst=4]="PinMatrixRequestType_WipeCodeFirst",e[e.PinMatrixRequestType_WipeCodeSecond=5]="PinMatrixRequestType_WipeCodeSecond"}(r.Enum_PinMatrixRequestType||(r.Enum_PinMatrixRequestType={})),function(e){e[e.NO=0]="NO",e[e.YES=1]="YES",e[e.INFO=2]="INFO"}(r.DebugButton||(r.DebugButton={})),function(e){e[e.UINT=1]="UINT",e[e.INT=2]="INT",e[e.BYTES=3]="BYTES",e[e.STRING=4]="STRING",e[e.BOOL=5]="BOOL",e[e.ADDRESS=6]="ADDRESS",e[e.ARRAY=7]="ARRAY",e[e.STRUCT=8]="STRUCT"}(r.EthereumDataType||(r.EthereumDataType={})),function(e){e[e.Bip39=0]="Bip39",e[e.Slip39_Basic=1]="Slip39_Basic",e[e.Slip39_Advanced=2]="Slip39_Advanced"}(r.Enum_BackupType||(r.Enum_BackupType={})),function(e){e[e.Strict=0]="Strict",e[e.PromptAlways=1]="PromptAlways",e[e.PromptTemporarily=2]="PromptTemporarily"}(r.Enum_SafetyCheckLevel||(r.Enum_SafetyCheckLevel={})),function(e){e[e.Capability_Bitcoin=1]="Capability_Bitcoin",e[e.Capability_Bitcoin_like=2]="Capability_Bitcoin_like",e[e.Capability_Binance=3]="Capability_Binance",e[e.Capability_Cardano=4]="Capability_Cardano",e[e.Capability_Crypto=5]="Capability_Crypto",e[e.Capability_EOS=6]="Capability_EOS",e[e.Capability_Ethereum=7]="Capability_Ethereum",e[e.Capability_Lisk=8]="Capability_Lisk",e[e.Capability_Monero=9]="Capability_Monero",e[e.Capability_NEM=10]="Capability_NEM",e[e.Capability_Ripple=11]="Capability_Ripple",e[e.Capability_Stellar=12]="Capability_Stellar",e[e.Capability_Tezos=13]="Capability_Tezos",e[e.Capability_U2F=14]="Capability_U2F",e[e.Capability_Shamir=15]="Capability_Shamir",e[e.Capability_ShamirGroups=16]="Capability_ShamirGroups",e[e.Capability_PassphraseEntry=17]="Capability_PassphraseEntry"}(r.Enum_Capability||(r.Enum_Capability={})),function(e){e[e.DISABLE=0]="DISABLE",e[e.ENABLE=1]="ENABLE",e[e.REFRESH=2]="REFRESH"}(r.SdProtectOperationType||(r.SdProtectOperationType={})),function(e){e[e.RecoveryDeviceType_ScrambledWords=0]="RecoveryDeviceType_ScrambledWords",e[e.RecoveryDeviceType_Matrix=1]="RecoveryDeviceType_Matrix"}(r.RecoveryDeviceType||(r.RecoveryDeviceType={})),function(e){e[e.WordRequestType_Plain=0]="WordRequestType_Plain",e[e.WordRequestType_Matrix9=1]="WordRequestType_Matrix9",e[e.WordRequestType_Matrix6=2]="WordRequestType_Matrix6"}(r.Enum_WordRequestType||(r.Enum_WordRequestType={})),function(e){e[e.MAINNET=0]="MAINNET",e[e.TESTNET=1]="TESTNET",e[e.STAGENET=2]="STAGENET",e[e.FAKECHAIN=3]="FAKECHAIN"}(r.MoneroNetworkType||(r.MoneroNetworkType={})),function(e){e[e.MosaicLevy_Absolute=1]="MosaicLevy_Absolute",e[e.MosaicLevy_Percentile=2]="MosaicLevy_Percentile"}(r.NEMMosaicLevy||(r.NEMMosaicLevy={})),function(e){e[e.SupplyChange_Increase=1]="SupplyChange_Increase",e[e.SupplyChange_Decrease=2]="SupplyChange_Decrease"}(r.NEMSupplyChangeType||(r.NEMSupplyChangeType={})),function(e){e[e.CosignatoryModification_Add=1]="CosignatoryModification_Add",e[e.CosignatoryModification_Delete=2]="CosignatoryModification_Delete"}(r.NEMModificationType||(r.NEMModificationType={})),function(e){e[e.ImportanceTransfer_Activate=1]="ImportanceTransfer_Activate",e[e.ImportanceTransfer_Deactivate=2]="ImportanceTransfer_Deactivate"}(r.NEMImportanceTransferMode||(r.NEMImportanceTransferMode={})),function(e){e[e.NATIVE=0]="NATIVE",e[e.ALPHANUM4=1]="ALPHANUM4",e[e.ALPHANUM12=2]="ALPHANUM12"}(r.StellarAssetType||(r.StellarAssetType={})),function(e){e[e.NONE=0]="NONE",e[e.TEXT=1]="TEXT",e[e.ID=2]="ID",e[e.HASH=3]="HASH",e[e.RETURN=4]="RETURN"}(r.StellarMemoType||(r.StellarMemoType={})),function(e){e[e.ACCOUNT=0]="ACCOUNT",e[e.PRE_AUTH=1]="PRE_AUTH",e[e.HASH=2]="HASH"}(r.StellarSignerType||(r.StellarSignerType={})),function(e){e[e.Implicit=0]="Implicit",e[e.Originated=1]="Originated"}(r.TezosContractType||(r.TezosContractType={})),function(e){e[e.Yay=0]="Yay",e[e.Nay=1]="Nay",e[e.Pass=2]="Pass"}(r.TezosBallotType||(r.TezosBallotType={}))}}},{package:"@metamask/eth-trezor-keyring>@trezor/connect-web>@trezor/connect>@trezor/transport",file:"node_modules/@trezor/transport/lib/types/messages.js"}],[2358,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.resolveTimeoutPromise=r.create=void 0,r.create=function(){let e=()=>{},t=()=>{};const r=new Promise(((r,n)=>{e=r,t=n})),n=r.then((()=>{throw new Error("Promise is always rejecting")}));return n.catch((()=>{})),{resolve:e,reject:t,promise:r,rejectingPromise:n}},r.resolveTimeoutPromise=function(e,t){return new Promise((r=>{setTimeout((()=>{r(t)}),e)}))}}}},{package:"@metamask/eth-trezor-keyring>@trezor/connect-web>@trezor/connect>@trezor/transport",file:"node_modules/@trezor/transport/lib/utils/defered.js"}],[2359,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.call=r.acquire=r.devices=r.version=r.info=void 0;const n="Wrong result type.";function i(e){if(null==e)return null;if("string"!=typeof e)throw new Error(n);return e}r.info=function(e){if("object"!=typeof e||null==e)throw new Error("Wrong result type.");const{version:t}=e;if("string"!=typeof t)throw new Error(n);return{version:t,configured:!!e.configured}},r.version=function(e){if("string"!=typeof e)throw new Error(n);return e.trim()},r.devices=function(e){if("object"!=typeof e)throw new Error(n);if(!(e instanceof Array))throw new Error(n);return e.map((e=>{if("object"!=typeof e||null==e)throw new Error(n);const{path:t}=e;if("string"!=typeof t)throw new Error(n);return{path:t.toString(),session:i(e.session),debugSession:i(e.debugSession),product:e.product,vendor:e.vendor,debug:!!e.debug}}))},r.acquire=function(e){if("object"!=typeof e||null==e)throw new Error(n);const{session:t}=e;if("string"!=typeof t&&"number"!=typeof t)throw new Error(n);return t.toString()},r.call=function(e){if("object"!=typeof e||null==e)throw new Error(n);const{type:t}=e;if("string"!=typeof t)throw new Error(n);const{message:r}=e;if("object"!=typeof r||null==r)throw new Error(n);return{type:t,message:r}}}}},{package:"@metamask/eth-trezor-keyring>@trezor/connect-web>@trezor/connect>@trezor/transport",file:"node_modules/@trezor/transport/lib/utils/highlevel-checks.js"}],[2360,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.isPrimitiveField=void 0;const n=["bool","string","bytes","int32","int64","uint32","uint64","sint32","sint64","fixed32","fixed64","sfixed32","sfixed64","double","float"];r.isPrimitiveField=e=>n.includes(e)}}},{package:"@metamask/eth-trezor-keyring>@trezor/connect-web>@trezor/connect>@trezor/transport",file:"node_modules/@trezor/transport/lib/utils/protobuf.js"}],[2361,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.AbortablePromise=r.AbortError=void 0;class n extends Error{constructor(e="Aborted"){super(e),this.name="AbortError"}}r.AbortError=n;class i extends Promise{get abortReason(){return this._abortReason}constructor(e,t){const r=t||new AbortController,i=r.signal;super(((t,r)=>{i.addEventListener("abort",(()=>{r(new n(this.abortReason))})),e(t,r,i)})),this.abort=e=>{this._abortReason=e||"Aborted",r.abort()}}}r.AbortablePromise=i,i.from=e=>e instanceof i?e:new i(((t,r)=>{e.then(t).catch(r)}))}}},{package:"@metamask/eth-trezor-keyring>@trezor/connect-web>@trezor/utils",file:"node_modules/@trezor/utils/lib/abortablePromise.js"}],[2362,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.arrayDistinct=void 0;r.arrayDistinct=(e,t,r)=>r.indexOf(e)===t}}},{package:"@metamask/eth-trezor-keyring>@trezor/connect-web>@trezor/utils",file:"node_modules/@trezor/utils/lib/arrayDistinct.js"}],[2363,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.arrayPartition=void 0;r.arrayPartition=(e,t)=>e.reduce((([e,r],n)=>t(n)?[[...e,n],r]:[e,[...r,n]]),[[],[]])}}},{package:"@metamask/eth-trezor-keyring>@trezor/connect-web>@trezor/utils",file:"node_modules/@trezor/utils/lib/arrayPartition.js"}],[2364,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.arrayToDictionary=void 0;const n=e=>!!["string","number"].includes(typeof e);r.arrayToDictionary=(e,t,r)=>r?e.reduce(((e,r)=>{var i;const s=t(r);return n(s)?Object.assign(Object.assign({},e),{[s]:[...null!==(i=e[s])&&void 0!==i?i:[],r]}):e}),{}):e.reduce(((e,r)=>{const i=t(r);return n(i)?Object.assign(Object.assign({},e),{[i]:r}):e}),{})}}},{package:"@metamask/eth-trezor-keyring>@trezor/connect-web>@trezor/utils",file:"node_modules/@trezor/utils/lib/arrayToDictionary.js"}],[2365,{buffer:2913},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(e){(function(){Object.defineProperty(r,"__esModule",{value:!0}),r.reverseBuffer=void 0;r.reverseBuffer=t=>{if(t.length<1)return t;const r=e.alloc(t.length);let n=r.length-1;for(let e=0;e<r.length/2;e++)r[e]=t[n],r[n]=t[e],n--;return r}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/eth-trezor-keyring>@trezor/connect-web>@trezor/utils",file:"node_modules/@trezor/utils/lib/bufferUtils.js"}],[2366,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.bytesToHumanReadable=void 0;const n=["B","KB","MB","GB","TB"];r.bytesToHumanReadable=e=>{let t=Math.abs(e),r=0;for(;t>=1024||r>=n.length;)t/=1024,r++;return`${t.toFixed(1)} ${n[r]}`}}}},{package:"@metamask/eth-trezor-keyring>@trezor/connect-web>@trezor/utils",file:"node_modules/@trezor/utils/lib/bytesToHumanReadable.js"}],[2367,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.capitalizeFirstLetter=void 0;r.capitalizeFirstLetter=e=>e.charAt(0).toUpperCase()+e.slice(1)}}},{package:"@metamask/eth-trezor-keyring>@trezor/connect-web>@trezor/utils",file:"node_modules/@trezor/utils/lib/capitalizeFirstLetter.js"}],[2368,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.countBytesInString=void 0;r.countBytesInString=e=>encodeURI(e).split(/%..|./).length-1}}},{package:"@metamask/eth-trezor-keyring>@trezor/connect-web>@trezor/utils",file:"node_modules/@trezor/utils/lib/countBytesInString.js"}],[2369,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.createDeferred=void 0;r.createDeferred=e=>{let t=()=>{},r=()=>{};const n=new Promise(((e,n)=>{t=e,r=n}));return{id:e,resolve:t,reject:r,promise:n}}}}},{package:"@metamask/eth-trezor-keyring>@trezor/connect-web>@trezor/utils",file:"node_modules/@trezor/utils/lib/createDeferred.js"}],[2370,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.createTimeoutPromise=void 0;r.createTimeoutPromise=e=>new Promise((t=>setTimeout(t,e)))}}},{package:"@metamask/eth-trezor-keyring>@trezor/connect-web>@trezor/utils",file:"node_modules/@trezor/utils/lib/createTimeoutPromise.js"}],[2371,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.getValueByKey=r.getKeyByValue=void 0,r.getKeyByValue=function(e,t){return e&&Object.keys(e).find((r=>e[r]===t))},r.getValueByKey=function(e,t){const r=e&&Object.keys(e).find((e=>e===t));return r&&e[r]}}}},{package:"@metamask/eth-trezor-keyring>@trezor/connect-web>@trezor/utils",file:"node_modules/@trezor/utils/lib/enumUtils.js"}],[2372,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.getNumberFromPixelString=void 0;r.getNumberFromPixelString=e=>parseInt(e.replace("px",""),10)}}},{package:"@metamask/eth-trezor-keyring>@trezor/connect-web>@trezor/utils",file:"node_modules/@trezor/utils/lib/getNumberFromPixelString.js"}],[2373,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.getRandomNumberInRange=void 0;r.getRandomNumberInRange=(e,t)=>Math.floor(Math.random()*(t-e+1))+e}}},{package:"@metamask/eth-trezor-keyring>@trezor/connect-web>@trezor/utils",file:"node_modules/@trezor/utils/lib/getRandomNumberInRange.js"}],[2374,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.getWeakRandomId=void 0;r.getWeakRandomId=e=>{let t="";const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";for(let n=0;n<e;n++)t+=r.charAt(Math.floor(62*Math.random()));return t}}}},{package:"@metamask/eth-trezor-keyring>@trezor/connect-web>@trezor/utils",file:"node_modules/@trezor/utils/lib/getWeakRandomId.js"}],[2375,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.hasUppercaseLetter=void 0;const n=new RegExp("^(.*[A-Z].*)$");r.hasUppercaseLetter=e=>n.test(e)}}},{package:"@metamask/eth-trezor-keyring>@trezor/connect-web>@trezor/utils",file:"node_modules/@trezor/utils/lib/hasUppercaseLetter.js"}],[2376,{"./abortablePromise":2361,"./arrayDistinct":2362,"./arrayPartition":2363,"./arrayToDictionary":2364,"./bufferUtils":2365,"./bytesToHumanReadable":2366,"./capitalizeFirstLetter":2367,"./countBytesInString":2368,"./createDeferred":2369,"./createTimeoutPromise":2370,"./enumUtils":2371,"./getNumberFromPixelString":2372,"./getRandomNumberInRange":2373,"./getWeakRandomId":2374,"./hasUppercaseLetter":2375,"./isAscii":2377,"./isHex":2378,"./isNotUndefined":2379,"./isUrl":2380,"./mergeDeepObject":2381,"./objectPartition":2382,"./parseHostname":2383,"./promiseAllSequence":2384,"./redactUserPath":2385,"./resolveStaticPath":2386,"./scheduleAction":2387,"./throwError":2388,"./topologicalSort":2389,"./truncateMiddle":2390,"./versionUtils":2391,"./xssFilters":2392},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)},o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return i(t,e),t};Object.defineProperty(r,"__esModule",{value:!0}),r.xssFilters=r.versionUtils=r.enumUtils=r.bufferUtils=void 0,s(e("./abortablePromise"),r),s(e("./arrayDistinct"),r),s(e("./arrayPartition"),r),s(e("./arrayToDictionary"),r),r.bufferUtils=o(e("./bufferUtils")),s(e("./bytesToHumanReadable"),r),s(e("./capitalizeFirstLetter"),r),s(e("./countBytesInString"),r),s(e("./createDeferred"),r),s(e("./createTimeoutPromise"),r),r.enumUtils=o(e("./enumUtils")),s(e("./getNumberFromPixelString"),r),s(e("./getRandomNumberInRange"),r),s(e("./getWeakRandomId"),r),s(e("./hasUppercaseLetter"),r),s(e("./isAscii"),r),s(e("./isHex"),r),s(e("./isNotUndefined"),r),s(e("./isUrl"),r),s(e("./mergeDeepObject"),r),s(e("./objectPartition"),r),s(e("./parseHostname"),r),s(e("./promiseAllSequence"),r),s(e("./redactUserPath"),r),s(e("./resolveStaticPath"),r),s(e("./scheduleAction"),r),s(e("./throwError"),r),s(e("./truncateMiddle"),r),s(e("./topologicalSort"),r),r.versionUtils=o(e("./versionUtils")),r.xssFilters=o(e("./xssFilters"))}}},{package:"@metamask/eth-trezor-keyring>@trezor/connect-web>@trezor/utils",file:"node_modules/@trezor/utils/lib/index.js"}],[2377,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.isAscii=void 0,r.isAscii=function(e){return!e||/^[\x00-\x7F]*$/.test(e)}}}},{package:"@metamask/eth-trezor-keyring>@trezor/connect-web>@trezor/utils",file:"node_modules/@trezor/utils/lib/isAscii.js"}],[2378,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.isHex=void 0;r.isHex=e=>/^(0x|0X)?[0-9A-Fa-f]+$/g.test(e)}}},{package:"@metamask/eth-trezor-keyring>@trezor/connect-web>@trezor/utils",file:"node_modules/@trezor/utils/lib/isHex.js"}],[2379,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.isNotUndefined=void 0;r.isNotUndefined=e=>void 0!==e}}},{package:"@metamask/eth-trezor-keyring>@trezor/connect-web>@trezor/utils",file:"node_modules/@trezor/utils/lib/isNotUndefined.js"}],[2380,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.isUrl=void 0;const n=/^(http|ws)s?:\/\/[a-z0-9]([a-z0-9.-]+)?(:[0-9]{1,5})?((\/)?(([a-z0-9-_])+(\/)?)+)$/i;r.isUrl=e=>n.test(e)}}},{package:"@metamask/eth-trezor-keyring>@trezor/connect-web>@trezor/utils",file:"node_modules/@trezor/utils/lib/isUrl.js"}],[2381,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.mergeDeepObject=void 0;const n=e=>{if("object"==typeof e&&null!==e){if("function"==typeof Object.getPrototypeOf){const t=Object.getPrototypeOf(e);return t===Object.prototype||null===t}return"[object Object]"===Object.prototype.toString.call(e)}return!1};r.mergeDeepObject=(...e)=>e.reduce(((e,t)=>{if(Array.isArray(t))throw new TypeError("Arguments provided to ts-deepmerge must be objects, not arrays.");return Object.keys(t).forEach((i=>{["__proto__","constructor","prototype"].includes(i)||(Array.isArray(e[i])&&Array.isArray(t[i])?e[i]=r.mergeDeepObject.options.mergeArrays?Array.from(new Set(e[i].concat(t[i]))):t[i]:n(e[i])&&n(t[i])?e[i]=(0,r.mergeDeepObject)(e[i],t[i]):e[i]=t[i])})),e}),{});const i={mergeArrays:!0};r.mergeDeepObject.options=i,r.mergeDeepObject.withOptions=(e,...t)=>{r.mergeDeepObject.options=Object.assign({mergeArrays:!0},e);const n=(0,r.mergeDeepObject)(...t);return r.mergeDeepObject.options=i,n}}}},{package:"@metamask/eth-trezor-keyring>@trezor/connect-web>@trezor/utils",file:"node_modules/@trezor/utils/lib/mergeDeepObject.js"}],[2382,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__rest||function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]])}return r};Object.defineProperty(r,"__esModule",{value:!0}),r.objectPartition=void 0;r.objectPartition=(e,t)=>t.reduce((([e,t],r)=>{const i=t,s=r,o=i[s],a=n(i,["symbol"==typeof s?s:s+""]);return void 0!==o?[Object.assign(Object.assign({},e),{[r]:o}),a]:[e,t]}),[{},e])}}},{package:"@metamask/eth-trezor-keyring>@trezor/connect-web>@trezor/utils",file:"node_modules/@trezor/utils/lib/objectPartition.js"}],[2383,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.parseHostname=void 0;const n=/^([a-z0-9.+-]+:\/\/)?([a-z0-9.-]+)([:/][^:/]+)*\/?$/i;r.parseHostname=e=>{var t,r;return null===(r=null===(t=e.match(n))||void 0===t?void 0:t[2])||void 0===r?void 0:r.toLowerCase()}}}},{package:"@metamask/eth-trezor-keyring>@trezor/connect-web>@trezor/utils",file:"node_modules/@trezor/utils/lib/parseHostname.js"}],[2384,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,s){function o(e){try{u(n.next(e))}catch(e){s(e)}}function a(e){try{u(n.throw(e))}catch(e){s(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,a)}u((n=n.apply(e,t||[])).next())}))};Object.defineProperty(r,"__esModule",{value:!0}),r.promiseAllSequence=void 0;r.promiseAllSequence=e=>n(void 0,void 0,void 0,(function*(){const t=[];return yield e.reduce(((e,r)=>e.then(r).then((e=>(t.push(e),e)))),Promise.resolve()),t}))}}},{package:"@metamask/eth-trezor-keyring>@trezor/connect-web>@trezor/utils",file:"node_modules/@trezor/utils/lib/promiseAllSequence.js"}],[2385,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.redactUserPathFromString=r.startOfUserPathRegex=void 0,r.startOfUserPathRegex=/([/\\][Uu]sers[/\\]{1,4})([^"^'^[^\]^/^\\]*)/g;r.redactUserPathFromString=e=>e.replace(r.startOfUserPathRegex,"$1[*]")}}},{package:"@metamask/eth-trezor-keyring>@trezor/connect-web>@trezor/utils",file:"node_modules/@trezor/utils/lib/redactUserPath.js"}],[2386,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.resolveStaticPath=void 0;r.resolveStaticPath=(e,t=null)=>`${t||""}/static/${e.replace(/^\/+/,"")}`}}},{package:"@metamask/eth-trezor-keyring>@trezor/connect-web>@trezor/utils",file:"node_modules/@trezor/utils/lib/resolveStaticPath.js"}],[2387,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,s){function o(e){try{u(n.next(e))}catch(e){s(e)}}function a(e){try{u(n.throw(e))}catch(e){s(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,a)}u((n=n.apply(e,t||[])).next())}))};Object.defineProperty(r,"__esModule",{value:!0}),r.scheduleAction=void 0;const i=e=>Array.isArray(e),s=()=>new Error("Aborted by signal"),o=()=>new Error("Aborted by deadline"),a=()=>new Error("Aborted by timeout"),u=(e,t)=>new Promise(((r,n)=>{if(t.aborted)return n();if(e===undefined)return r();const i=setTimeout(r,e),s=()=>{clearTimeout(i),t.removeEventListener("abort",s),n()};t.addEventListener("abort",s)})),c=(e,t,r)=>new Promise(((n,i)=>{if(r.aborted)return i();const s=e!==undefined?setTimeout((()=>i(t())),e):undefined,o=()=>{clearTimeout(s),r.removeEventListener("abort",o),i()};r.addEventListener("abort",o)})),l=(e,t)=>new Promise(((r,n)=>{if(t.aborted)return n();if(null==e?void 0:e.aborted)return n(s());const i=()=>n(s());null==e||e.addEventListener("abort",i);const o=()=>{null==e||e.removeEventListener("abort",i),t.removeEventListener("abort",o),n()};t.addEventListener("abort",o)})),h=(e,t)=>n(void 0,void 0,void 0,(function*(){const r=new AbortController,n=()=>r.abort();t.aborted&&n(),t.addEventListener("abort",n);try{return yield new Promise((t=>t(e(r.signal))))}finally{t.removeEventListener("abort",n)}}));r.scheduleAction=(e,t)=>n(void 0,void 0,void 0,(function*(){const{signal:r,delay:s,attempts:f,timeout:d,deadline:p,gap:g}=t,m=p&&p-Date.now(),y=i(f)?f.length:null!=f?f:p?Infinity:1,b=new AbortController,w=b.signal,v=i(f)?e=>f[e]:()=>({timeout:d,gap:g});try{return yield Promise.race([l(r,w),c(m,o,w),u(s,w).then((()=>((e,t,r,i)=>n(void 0,void 0,void 0,(function*(){for(let n=0;n<e-1&&!i.aborted;n++){const e=new AbortController,s=()=>e.abort();i.addEventListener("abort",s);try{return yield t(n,e.signal)}catch(e){s(),yield r(n)}finally{i.removeEventListener("abort",s)}}return i.aborted?Promise.reject():t(e-1,i)})))(y,((t,r)=>Promise.race([c(v(t).timeout,a,w),h(e,r)])),(e=>{var t;return u(null!==(t=v(e).gap)&&void 0!==t?t:0,w)}),w)))])}finally{b.abort()}}))}}},{package:"@metamask/eth-trezor-keyring>@trezor/connect-web>@trezor/utils",file:"node_modules/@trezor/utils/lib/scheduleAction.js"}],[2388,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.throwError=void 0;r.throwError=e=>{throw new Error(e)}}}},{package:"@metamask/eth-trezor-keyring>@trezor/connect-web>@trezor/utils",file:"node_modules/@trezor/utils/lib/throwError.js"}],[2389,{"./arrayPartition":2363},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.topologicalSort=void 0;const n=e("./arrayPartition");r.topologicalSort=(e,t,r)=>{const i=[],s=e=>(0,n.arrayPartition)(e,(r=>!e.some((e=>t(e,r)))));let o=e;for(;o.length;){const[e,t]=s(o);if(!e.length)throw new Error("Cycle detected");i.push(...r?e.sort(r):e),o=t}return i}}}},{package:"@metamask/eth-trezor-keyring>@trezor/connect-web>@trezor/utils",file:"node_modules/@trezor/utils/lib/topologicalSort.js"}],[2390,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.truncateMiddle=void 0;r.truncateMiddle=(e,t,r)=>{if(e.length<=t+r)return e;return`${e.substring(0,t)}…${e.substring(e.length-r,e.length)}`}}}},{package:"@metamask/eth-trezor-keyring>@trezor/connect-web>@trezor/utils",file:"node_modules/@trezor/utils/lib/truncateMiddle.js"}],[2391,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.normalizeVersion=r.isNewerOrEqual=r.isEqual=r.isNewer=r.isVersionArray=void 0;const n=e=>({major:e[0],minor:e[1],patch:e[2]}),i=e=>{const t=e.split(".");if(3!==t.length)throw new Error("version string is in wrong format");return t},s=e=>`${e[0]}.${e[1]}.${e[2]}`;r.isVersionArray=e=>3===e.length;r.isNewer=(e,t)=>{const r=n("string"==typeof e?i(e):e),s=n("string"==typeof t?i(t):t);return r.major-s.major!=0?r.major>s.major:r.minor-s.minor!=0?r.minor>s.minor:r.patch-s.patch!=0&&r.patch>s.patch};r.isEqual=(e,t)=>("string"==typeof e?e:s(e))===("string"==typeof t?t:s(t));r.isNewerOrEqual=(e,t)=>(0,r.isNewer)(e,t)||(0,r.isEqual)(e,t);r.normalizeVersion=e=>e.replace(/\b0+(\d)/g,"$1")}}},{package:"@metamask/eth-trezor-keyring>@trezor/connect-web>@trezor/utils",file:"node_modules/@trezor/utils/lib/versionUtils.js"}],[2392,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.inDoubleQuotes=r.inSingleQuotes=r.inHTML=void 0;const n=/</g,i=/'/g,s=/"/g;r.inHTML=e=>e.replace(n,"&lt;");r.inSingleQuotes=e=>e.replace(i,"&#39;");r.inDoubleQuotes=e=>e.replace(s,"&quot;")}}},{package:"@metamask/eth-trezor-keyring>@trezor/connect-web>@trezor/utils",file:"node_modules/@trezor/utils/lib/xssFilters.js"}],[24,{"../../../../shared/constants/permissions":4760,"@metamask/permission-controller":1667,"@metamask/snaps-controllers":1828,"@metamask/snaps-rpc-methods":1953},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.unrestrictedMethods=r.getPermissionSpecifications=r.getCaveatSpecifications=void 0;var n=e("@metamask/permission-controller"),i=e("@metamask/snaps-controllers"),s=e("@metamask/snaps-rpc-methods"),o=e("../../../../shared/constants/permissions");const a=Object.freeze({...o.RestrictedMethods}),u=Object.freeze({[o.CaveatTypes.restrictReturnedAccounts]:e=>({type:o.CaveatTypes.restrictReturnedAccounts,value:e})});r.getCaveatSpecifications=({getIdentities:e})=>({[o.CaveatTypes.restrictReturnedAccounts]:{type:o.CaveatTypes.restrictReturnedAccounts,decorator:(e,t)=>async r=>(await e(r)).filter((e=>t.value.includes(e))),validator:(t,r,n)=>function(e,t){if(!Array.isArray(e)||0===e.length)throw new Error(`${a.eth_accounts} error: Expected non-empty array of Ethereum addresses.`);const r=t();e.forEach((e=>{if(!e||"string"!=typeof e)throw new Error(`${a.eth_accounts} error: Expected an array of Ethereum addresses. Received: "${e}".`);if(!r[e])throw new Error(`${a.eth_accounts} error: Received unrecognized address: "${e}".`)}))}(t.value,e)},...s.caveatSpecifications,...i.endowmentCaveatSpecifications});r.getPermissionSpecifications=({getAllAccounts:e,getIdentities:t,captureKeyringTypesWithMissingIdentities:r})=>({[a.eth_accounts]:{permissionType:n.PermissionType.RestrictedMethod,targetName:a.eth_accounts,allowedCaveats:[o.CaveatTypes.restrictReturnedAccounts],factory:(e,t)=>{if(Array.isArray(e.caveats))throw new Error(`${a.eth_accounts} error: Received unexpected caveats. Any permitted caveats will be added automatically.`);if(!t.approvedAccounts)throw new Error(`${a.eth_accounts} error: No approved accounts specified.`);return(0,n.constructPermission)({...e,caveats:[u[o.CaveatTypes.restrictReturnedAccounts](t.approvedAccounts)]})},methodImplementation:async n=>{const i=await e(),s=t();return i.sort(((e,t)=>{if(!s[e])throw r(s,i),new Error(`Missing identity for address: "${e}".`);if(!s[t])throw r(s,i),new Error(`Missing identity for address: "${t}".`);return s[e].lastSelected===s[t].lastSelected?0:s[e].lastSelected===undefined?1:s[t].lastSelected===undefined?-1:s[t].lastSelected-s[e].lastSelected}))},validator:(e,t,r)=>{const{caveats:n}=e;if(!n||1!==n.length||n[0].type!==o.CaveatTypes.restrictReturnedAccounts)throw new Error(`${a.eth_accounts} error: Invalid caveats. There must be a single caveat of type "${o.CaveatTypes.restrictReturnedAccounts}".`)}}});r.unrestrictedMethods=Object.freeze(["eth_blockNumber","eth_call","eth_chainId","eth_coinbase","eth_decrypt","eth_estimateGas","eth_feeHistory","eth_gasPrice","eth_getBalance","eth_getBlockByHash","eth_getBlockByNumber","eth_getBlockTransactionCountByHash","eth_getBlockTransactionCountByNumber","eth_getCode","eth_getEncryptionPublicKey","eth_getFilterChanges","eth_getFilterLogs","eth_getLogs","eth_getProof","eth_getStorageAt","eth_getTransactionByBlockHashAndIndex","eth_getTransactionByBlockNumberAndIndex","eth_getTransactionByHash","eth_getTransactionCount","eth_getTransactionReceipt","eth_getUncleByBlockHashAndIndex","eth_getUncleByBlockNumberAndIndex","eth_getUncleCountByBlockHash","eth_getUncleCountByBlockNumber","eth_getWork","eth_hashrate","eth_mining","eth_newBlockFilter","eth_newFilter","eth_newPendingTransactionFilter","eth_protocolVersion","eth_sendRawTransaction","eth_sendTransaction","eth_sign","eth_signTypedData","eth_signTypedData_v1","eth_signTypedData_v3","eth_signTypedData_v4","eth_submitHashrate","eth_submitWork","eth_syncing","eth_uninstallFilter","metamask_getProviderState","metamask_watchAsset","net_listening","net_peerCount","net_version","personal_ecRecover","personal_sign","wallet_watchAsset","web3_clientVersion","web3_sha3"])}}},{package:"$root$",file:"app/scripts/controllers/permissions/specifications.js"}],[240,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){function n(e,t){const r=BigInt(1)<<BigInt(e);if(t>=r)throw new Error(`index ${t} too large for depth ${e}`);return r|t}Object.defineProperty(r,"__esModule",{value:!0}),r.gindexChild=r.gindexParent=r.gindexSibling=r.concatGindices=r.getGindexBits=r.gindexIterator=r.getGindicesAtDepth=r.iterateAtDepth=r.countToDepth=r.convertGindexToBitstring=r.toGindexBitstring=r.toGindex=r.bitIndexBigInt=void 0,r.bitIndexBigInt=function(e){return e.toString(2).length-1},r.toGindex=n,r.toGindexBitstring=function(e,t){const r=t?Number(t).toString(2):"";if(r.length>e)throw new Error("index too large for depth");return"1"+r.padStart(e,"0")},r.convertGindexToBitstring=function(e){if("string"==typeof e){if(0===e.length)throw new Error(i);return e}if(e<1)throw new Error(i);return e.toString(2)},r.countToDepth=function(e){return e<=1?0:(e-BigInt(1)).toString(2).length},r.iterateAtDepth=function(e,t,r){if(t+r>BigInt(1)<<BigInt(e))throw new Error("Too large for depth");let i=n(e,t);const s=i+r;return{[Symbol.iterator]:()=>({next(){if(i<s){const e=i;return i++,{done:!1,value:e}}return{done:!0,value:undefined}}})}},r.getGindicesAtDepth=function(e,t,r){if(t+r>BigInt(1)<<BigInt(e))throw new Error("Too large for depth");let i=n(e,BigInt(t));const s=[];for(let e=0;e<r;e++)s.push(i++);return s};const i="Invalid gindex";r.gindexIterator=function(e){let t;if("string"==typeof e){if(!e.length)throw new Error(i);t=e}else{if(e<1)throw new Error(i);t=e.toString(2)}let r=1;const n=()=>{if(r===t.length)return{done:!0,value:undefined};const e=Number(t[r]);return r++,{done:!1,value:e}};return{[Symbol.iterator]:()=>({next:n}),remainingBitLength:()=>t.length-r}},r.getGindexBits=function(e){let t;if("string"==typeof e){if(!e.length)throw new Error(i);t=e}else{if(e<1)throw new Error(i);t=e.toString(2)}const r=[];for(let e=1;e<t.length;e++)r.push(Number(t[e]));return r},r.concatGindices=function(e){return BigInt(e.reduce(((e,t)=>e+t.toString(2).slice(1)),"0b1"))},r.gindexSibling=function(e){return e^BigInt(1)},r.gindexParent=function(e){return e/BigInt(2)},r.gindexChild=function(e,t){return e*BigInt(2)+BigInt(t)}}}},{package:"eth-lattice-keyring>@ethereumjs/tx>@chainsafe/ssz>@chainsafe/persistent-merkle-tree",file:"node_modules/@chainsafe/persistent-merkle-tree/lib/gindex.js"}],[241,{"@chainsafe/as-sha256":2906},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.isHashObject=r.uint8ArrayToHashObject=r.hashObjectToUint8Array=r.hashTwoObjects=r.hash=void 0;const n=e("@chainsafe/as-sha256"),i=new Uint8Array(64);r.hash=function(e,t){return i.set(e,0),i.set(t,32),n.digest64(i)},r.hashTwoObjects=function(e,t){return n.digest64HashObjects(e,t)},r.hashObjectToUint8Array=function(e){const t=new Uint8Array(32);return n.hashObjectToByteArray(e,t,0),t},r.uint8ArrayToHashObject=function(e){return n.byteArrayToHashObject(e)},r.isHashObject=function(e){return e.length===undefined}}}},{package:"eth-lattice-keyring>@ethereumjs/tx>@chainsafe/ssz>@chainsafe/persistent-merkle-tree",file:"node_modules/@chainsafe/persistent-merkle-tree/lib/hash.js"}],[242,{"./gindex":240,"./hash":241,"./node":243,"./packedNode":244,"./proof":245,"./subtree":250,"./tree":251,"./zeroNode":252},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),i(e("./gindex"),r),i(e("./hash"),r),i(e("./node"),r),i(e("./packedNode"),r),i(e("./proof"),r),i(e("./subtree"),r),i(e("./tree"),r),i(e("./zeroNode"),r)}}},{package:"eth-lattice-keyring>@ethereumjs/tx>@chainsafe/ssz>@chainsafe/persistent-merkle-tree",file:"node_modules/@chainsafe/persistent-merkle-tree/lib/index.js"}],[243,{"./hash":241},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.bitwiseOrNodeH=r.setNodeH=r.getNodeH=r.compose=r.identity=r.LeafNode=r.BranchNode=r.Node=void 0;const n=e("./hash"),i=2**32;class s{constructor(e,t,r,n,i,s,o,a){this.h0=e,this.h1=t,this.h2=r,this.h3=n,this.h4=i,this.h5=s,this.h6=o,this.h7=a}applyHash(e){this.h0=e.h0,this.h1=e.h1,this.h2=e.h2,this.h3=e.h3,this.h4=e.h4,this.h5=e.h5,this.h6=e.h6,this.h7=e.h7}}r.Node=s;r.BranchNode=class extends s{constructor(e,t){if(super(null,0,0,0,0,0,0,0),this._left=e,this._right=t,!e)throw new Error("Left node is undefined");if(!t)throw new Error("Right node is undefined")}get rootHashObject(){return null===this.h0&&super.applyHash(n.hashTwoObjects(this.left.rootHashObject,this.right.rootHashObject)),this}get root(){return n.hashObjectToUint8Array(this.rootHashObject)}isLeaf(){return!1}get left(){return this._left}get right(){return this._right}};class o extends s{static fromRoot(e){return this.fromHashObject(n.uint8ArrayToHashObject(e))}static fromHashObject(e){return new o(e.h0,e.h1,e.h2,e.h3,e.h4,e.h5,e.h6,e.h7)}static fromZero(){return new o(0,0,0,0,0,0,0,0)}static fromUint32(e){return new o(e,0,0,0,0,0,0,0)}clone(){return o.fromHashObject(this)}get rootHashObject(){return this}get root(){return n.hashObjectToUint8Array(this)}isLeaf(){return!0}get left(){throw Error("LeafNode has no left node")}get right(){throw Error("LeafNode has no right node")}writeToBytes(e,t,r){e.set(this.root.slice(0,r),t)}getUint(e,t,r){const n=Math.floor(t/4);if(e<4){const r=t%4*8,i=a(this,n);return 1===e?255&i>>r:65535&i>>r}if(4===e)return a(this,n)>>>0;if(8===e){const e=a(this,n),t=a(this,n+1);return 0===t?e>>>0:-1===t&&-1===e&&r?Infinity:(e>>>0)+(t>>>0)*i}throw Error("uintBytes > 8")}getUintBigint(e,t){const r=Math.floor(t/4);if(e<4){const n=t%4*8,i=a(this,r);return 1===e?BigInt(255&i>>n):BigInt(65535&i>>n)}if(4===e)return BigInt(a(this,r)>>>0);{const t=Math.ceil(e/4);let n=BigInt(0);for(let e=0;e<t;e++)n+=BigInt(a(this,r+e)>>>0)<<BigInt(32*e);return n}}setUint(e,t,r,n){const s=Math.floor(t/4);if(e<4){const n=t%4*8;let i=a(this,s);1===e?(i&=~(255<<n),i|=r<<n):(i&=~(65535<<n),i|=r<<n),u(this,s,i)}else if(4===e)u(this,s,r);else{if(8!==e)throw Error("uintBytes > 8");r===Infinity&&n?(u(this,s,-1),u(this,s+1,-1)):(u(this,s,4294967295&r),u(this,s+1,r/i&4294967295))}}setUintBigint(e,t,r){const n=Math.floor(t/4);if(e<4){const i=Number(r),s=t%4*8;let o=a(this,n);1===e?(o&=~(255<<s),o|=i<<s):(o&=~(65535<<s),o|=i<<s),u(this,n,o)}else if(4===e)u(this,n,Number(r));else{const t=n+Math.ceil(e/4);for(let e=n;e<t;e++)u(this,e,Number(r&BigInt(4294967295))),r>>=BigInt(32)}}bitwiseOrUint(e,t,r){const n=Math.floor(t/4);if(e<4){c(this,n,r<<t%4*8)}else if(4===e)c(this,n,r);else{const t=n+Math.ceil(e/4);for(let e=n;e<t;e++)c(this,e,4294967295&r),r>>=32}}}function a(e,t){if(0===t)return e.h0;if(1===t)return e.h1;if(2===t)return e.h2;if(3===t)return e.h3;if(4===t)return e.h4;if(5===t)return e.h5;if(6===t)return e.h6;if(7===t)return e.h7;throw Error("hIndex > 7")}function u(e,t,r){if(0===t)e.h0=r;else if(1===t)e.h1=r;else if(2===t)e.h2=r;else if(3===t)e.h3=r;else if(4===t)e.h4=r;else if(5===t)e.h5=r;else if(6===t)e.h6=r;else{if(7!==t)throw Error("hIndex > 7");e.h7=r}}function c(e,t,r){if(0===t)e.h0|=r;else if(1===t)e.h1|=r;else if(2===t)e.h2|=r;else if(3===t)e.h3|=r;else if(4===t)e.h4|=r;else if(5===t)e.h5|=r;else if(6===t)e.h6|=r;else{if(7!==t)throw Error("hIndex > 7");e.h7|=r}}r.LeafNode=o,r.identity=function(e){return e},r.compose=function(e,t){return function(r){return t(e(r))}},r.getNodeH=a,r.setNodeH=u,r.bitwiseOrNodeH=c}}},{package:"eth-lattice-keyring>@ethereumjs/tx>@chainsafe/ssz>@chainsafe/persistent-merkle-tree",file:"node_modules/@chainsafe/persistent-merkle-tree/lib/node.js"}],[244,{"./node":243,"./subtree":250},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.packedNodeRootsToBytes=r.packedRootsBytesToLeafNodes=r.packedRootsBytesToNode=void 0;const n=e("./subtree"),i=e("./node");function s(e,t,r){const n=r-t,s=Math.floor(n/32),o=new Array(Math.ceil(n/32));for(let r=0;r<s;r++){const n=t+32*r;o[r]=new i.LeafNode(e.getInt32(n+0,!0),e.getInt32(n+4,!0),e.getInt32(n+8,!0),e.getInt32(n+12,!0),e.getInt32(n+16,!0),e.getInt32(n+20,!0),e.getInt32(n+24,!0),e.getInt32(n+28,!0))}const a=n%32;if(a>0){const r=new i.LeafNode(0,0,0,0,0,0,0,0);o[s]=r;const u=Math.floor(a/4);for(let n=0;n<u;n++)i.setNodeH(r,n,e.getInt32(t+32*s+4*n,!0));const c=n%4;if(c>0){let s=0;for(let r=0;r<c;r++)s|=e.getUint8(t+n-c+r)<<8*r;i.setNodeH(r,u,s)}}return o}r.packedRootsBytesToNode=function(e,t,r,i){const o=s(t,r,i);return n.subtreeFillToContents(o,e)},r.packedRootsBytesToLeafNodes=s,r.packedNodeRootsToBytes=function(e,t,r,n){const s=r%32,o=Math.floor(r/32);for(let r=0;r<o;r++){const i=n[r],s=t+32*r;e.setInt32(s+0,i.h0,!0),e.setInt32(s+4,i.h1,!0),e.setInt32(s+8,i.h2,!0),e.setInt32(s+12,i.h3,!0),e.setInt32(s+16,i.h4,!0),e.setInt32(s+20,i.h5,!0),e.setInt32(s+24,i.h6,!0),e.setInt32(s+28,i.h7,!0)}if(s>0){const a=n[o],u=Math.floor(s/4);for(let r=0;r<u;r++)e.setInt32(t+32*o+4*r,i.getNodeH(a,r),!0);const c=r%4;if(c>0){const n=i.getNodeH(a,u);for(let i=0;i<c;i++)e.setUint8(t+r-c+i,n>>8*i&255)}}}}}},{package:"eth-lattice-keyring>@ethereumjs/tx>@chainsafe/ssz>@chainsafe/persistent-merkle-tree",file:"node_modules/@chainsafe/persistent-merkle-tree/lib/packedNode.js"}],[245,{"./multi":246,"./single":247,"./treeOffset":248},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.deserializeProof=r.serializeProof=r.createNodeFromProof=r.createProof=r.ProofTypeSerialized=r.ProofType=void 0;const n=e("./multi"),i=e("./single"),s=e("./treeOffset");var o;!function(e){e.single="single",e.treeOffset="treeOffset",e.multi="multi"}(o=r.ProofType||(r.ProofType={})),r.ProofTypeSerialized=[o.single,o.treeOffset,o.multi],r.createProof=function(e,t){switch(t.type){case o.single:{const[r,n]=i.createSingleProof(e,t.gindex);return{type:o.single,gindex:t.gindex,leaf:r,witnesses:n}}case o.treeOffset:{const[r,n]=s.createTreeOffsetProof(e,t.gindices);return{type:o.treeOffset,offsets:r,leaves:n}}case o.multi:{const[r,i,s]=n.createMultiProof(e,t.gindices);return{type:o.multi,leaves:r,witnesses:i,gindices:s}}default:throw new Error("Invalid proof type")}},r.createNodeFromProof=function(e){switch(e.type){case o.single:return i.createNodeFromSingleProof(e.gindex,e.leaf,e.witnesses);case o.treeOffset:return s.createNodeFromTreeOffsetProof(e.offsets,e.leaves);case o.multi:return n.createNodeFromMultiProof(e.leaves,e.witnesses,e.gindices);default:throw new Error("Invalid proof type")}},r.serializeProof=function(e){switch(e.type){case o.single:case o.multi:throw new Error("Not implemented");case o.treeOffset:{const t=new Uint8Array(1+s.computeTreeOffsetProofSerializedLength(e.offsets,e.leaves));return t[0]=r.ProofTypeSerialized.indexOf(o.treeOffset),s.serializeTreeOffsetProof(t,1,e.offsets,e.leaves),t}default:throw new Error("Invalid proof type")}},r.deserializeProof=function(e){const t=r.ProofTypeSerialized[e[0]];if(!t)throw new Error("Invalid proof type");switch(t){case o.single:case o.multi:throw new Error("Not implemented");case o.treeOffset:{const[t,r]=s.deserializeTreeOffsetProof(e,1);return{type:o.treeOffset,offsets:t,leaves:r}}default:throw new Error("Invalid proof type")}}}}},{package:"eth-lattice-keyring>@ethereumjs/tx>@chainsafe/ssz>@chainsafe/persistent-merkle-tree",file:"node_modules/@chainsafe/persistent-merkle-tree/lib/proof/index.js"}],[246,{"../node":243,"../tree":251,"./util":249},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.createNodeFromMultiProof=r.createMultiProof=void 0;const n=e("../node"),i=e("../tree"),s=e("./util");r.createMultiProof=function(e,t){const r=new i.Tree(e),n=s.computeMultiProofBitstrings(t.map((e=>e.toString(2))),!1,s.SortOrder.Decreasing),o=t.slice().sort(((e,t)=>e<t?1:-1));return[o.map((e=>r.getRoot(e))),n.map((e=>r.getRoot(e))),o]},r.createNodeFromMultiProof=function(e,t,r){if(e.length!==r.length)throw new Error("Leaves length should equal gindices length");const i=r.map((e=>e.toString(2))),o=s.computeMultiProofBitstrings(i,!1,s.SortOrder.Decreasing);if(o.length!==t.length)throw new Error("Witnesses length should equal witnesses gindices length");const a=Math.max(i[0]?.length??0,o[0]?.length??0),u=Object.fromEntries(Array.from({length:a},((e,t)=>[t+1,{}])));for(let t=0;t<i.length;t++){const r=i[t],s=e[t];u[r.length][r]=n.LeafNode.fromRoot(s)}for(let e=0;e<o.length;e++){const r=o[e],i=t[e];u[r.length][r]=n.LeafNode.fromRoot(i)}for(let e=a;e>1;e--){const t=u[e],r=u[e-1];for(const e of Object.keys(t)){const i=t[e];if(!i)continue;const s="0"===e[e.length-1],o=e.substring(0,e.length-1),a=o+(s?"1":"0"),u=t[a];if(!u)throw new Error(`Sibling not found: ${a}`);const c=s?new n.BranchNode(i,u):new n.BranchNode(u,i);r[o]=c,delete t[e],delete t[a]}}const c=u[1][1];if(!c)throw new Error("Internal consistency error: no root found");return c}}}},{package:"eth-lattice-keyring>@ethereumjs/tx>@chainsafe/ssz>@chainsafe/persistent-merkle-tree",file:"node_modules/@chainsafe/persistent-merkle-tree/lib/proof/multi.js"}],[247,{"../gindex":240,"../node":243},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.createNodeFromSingleProof=r.createSingleProof=r.ERR_INVALID_NAV=void 0;const n=e("../node"),i=e("../gindex");r.ERR_INVALID_NAV="Invalid tree navigation",r.createSingleProof=function(e,t){const n=[];let s=e;for(const e of i.gindexIterator(t))if(e){if(s.isLeaf())throw new Error(r.ERR_INVALID_NAV);n.push(s.left.root),s=s.right}else{if(s.isLeaf())throw new Error(r.ERR_INVALID_NAV);n.push(s.right.root),s=s.left}return[s.root,n.reverse()]},r.createNodeFromSingleProof=function(e,t,r){let i=n.LeafNode.fromRoot(t);const s=r.slice().reverse();for(;e>1;){const t=n.LeafNode.fromRoot(s.pop());i=e%BigInt(2)===BigInt(0)?new n.BranchNode(i,t):new n.BranchNode(t,i),e/=BigInt(2)}return i}}}},{package:"eth-lattice-keyring>@ethereumjs/tx>@chainsafe/ssz>@chainsafe/persistent-merkle-tree",file:"node_modules/@chainsafe/persistent-merkle-tree/lib/proof/single.js"}],[248,{"../node":243,"./util":249},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.deserializeTreeOffsetProof=r.serializeTreeOffsetProof=r.computeTreeOffsetProofSerializedLength=r.createNodeFromTreeOffsetProof=r.createTreeOffsetProof=r.treeOffsetProofToNode=r.nodeToTreeOffsetProof=void 0;const n=e("../node"),i=e("./util");function s(e,t,r){if(r.length&&r[0].startsWith(t)){if(t===r[0])return r.shift(),[[],[e.root]];{const[n,i]=s(e.left,t+"0",r),[o,a]=s(e.right,t+"1",r);return[[i.length].concat(n,o),i.concat(a)]}}return[[],[]]}function o(e,t){if(t.length){if(1===t.length)return n.LeafNode.fromRoot(t[0]);{const r=e[0];return new n.BranchNode(o(e.slice(1,r),t.slice(0,r)),o(e.slice(r),t.slice(r)))}}throw new Error("Proof must contain gt 0 leaves")}r.nodeToTreeOffsetProof=s,r.treeOffsetProofToNode=o,r.createTreeOffsetProof=function(e,t){return s(e,"1",i.computeMultiProofBitstrings(t.map((e=>e.toString(2)))))},r.createNodeFromTreeOffsetProof=function(e,t){return o(e,t)},r.computeTreeOffsetProofSerializedLength=function(e,t){return 2*(e.length+1)+32*t.length},r.serializeTreeOffsetProof=function(e,t,r,n){const i=new DataView(e.buffer,e.byteOffset,e.byteLength);i.setUint16(t,n.length,!0);const s=t+2;for(let e=0;e<r.length;e++)i.setUint16(2*e+s,r[e],!0);const o=s+2*r.length;for(let t=0;t<n.length;t++)e.set(n[t],32*t+o)},r.deserializeTreeOffsetProof=function(e,t){const r=new DataView(e.buffer,e.byteOffset,e.byteLength),n=r.getUint16(t,!0);if(e.length<2*(n-1)+32*n)throw new Error("Unable to deserialize tree offset proof: not enough bytes");const i=t+2,s=Array.from({length:n-1},((e,t)=>r.getUint16(2*t+i,!0))),o=i+2*s.length;return[s,Array.from({length:n},((t,r)=>e.subarray(32*r+o,32*(r+1)+o)))]}}}},{package:"eth-lattice-keyring>@ethereumjs/tx>@chainsafe/ssz>@chainsafe/persistent-merkle-tree",file:"node_modules/@chainsafe/persistent-merkle-tree/lib/proof/treeOffset.js"}],[249,{"../gindex":240},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.computeMultiProofBitstrings=r.SortOrder=r.filterParentBitstrings=r.sortDecreasingBitstrings=r.sortInOrderBitstrings=r.computeProofBitstrings=r.computeProofGindices=void 0;const n=e("../gindex");function i(e){const t=new Set,r=new Set;let n=e;for(;n.length>1;){t.add(n);const e=n[n.length-1],i=n.substring(0,n.length-1);r.add(i+(1^Number(e))),n=i}return{path:t,branch:r}}function s(e,t){return e.length?e.map((e=>e.padEnd(t))).sort().map((e=>e.trim())):[]}function o(e){return e.length?e.sort(((e,t)=>{if(e.length<t.length)return 1;if(t.length<e.length)return-1;let r=e.indexOf("0"),n=t.indexOf("0");for(;;){if(-1===r)return-1;if(-1===n)return 1;if(r<n)return 1;if(n<r)return-1;r=e.indexOf("0",r+1),n=t.indexOf("0",n+1)}})):[]}function a(e){const t=e.slice().sort(((e,t)=>e.length-t.length)),r=[];e:for(let e=0;e<t.length;e++){const n=t[e];for(let r=e+1;r<t.length;r++){if(t[r].startsWith(n))continue e}r.push(n)}return r}var u;r.computeProofGindices=function(e){const t=new Set,r=new Set;let i=e;for(;i>1;)t.add(i),r.add(n.gindexSibling(i)),i=n.gindexParent(i);return{path:t,branch:r}},r.computeProofBitstrings=i,r.sortInOrderBitstrings=s,r.sortDecreasingBitstrings=o,r.filterParentBitstrings=a,function(e){e[e.InOrder=0]="InOrder",e[e.Decreasing=1]="Decreasing",e[e.Unsorted=2]="Unsorted"}(u=r.SortOrder||(r.SortOrder={})),r.computeMultiProofBitstrings=function(e,t=!0,r=u.InOrder){const n=a(e),c=new Set(t?n:[]),l=new Set,h=new Set;let f=1;for(const e of n){e.length>f&&(f=e.length);const{path:t,branch:r}=i(e);t.forEach((e=>l.add(e))),r.forEach((e=>h.add(e)))}switch(l.forEach((e=>h.delete(e))),h.forEach((e=>c.add(e))),r){case u.InOrder:return s(Array.from(c),f);case u.Decreasing:return o(Array.from(c));case u.Unsorted:return Array.from(c)}}}}},{package:"eth-lattice-keyring>@ethereumjs/tx>@chainsafe/ssz>@chainsafe/persistent-merkle-tree",file:"node_modules/@chainsafe/persistent-merkle-tree/lib/proof/util.js"}],[25,{"../../../shared/constants/app":4749,"../../../shared/constants/hardware-wallets":4754,"../../../shared/constants/network":4759,"../../../shared/constants/preferences":4761,"../../../shared/modules/network.utils":4791,"@metamask/obs-store":1659,"eth-sig-util":3228},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("@metamask/obs-store"),i=e("eth-sig-util"),s=e("../../../shared/constants/network"),o=e("../../../shared/constants/hardware-wallets"),a=e("../../../shared/constants/preferences"),u=e("../../../shared/modules/network.utils"),c=e("../../../shared/constants/app");const l={[s.CHAIN_IDS.MAINNET]:!0,[s.CHAIN_IDS.LINEA_MAINNET]:!0},h={[s.CHAIN_IDS.GOERLI]:!0,[s.CHAIN_IDS.SEPOLIA]:!0,[s.CHAIN_IDS.LINEA_GOERLI]:!0};r.default=class{constructor(e={}){const t=Object.values(e.networkConfigurations).reduce(((e,t)=>(e[t.chainId]=!0,e)),{}),r={useBlockie:!1,useNonceField:!1,usePhishDetect:!0,dismissSeedBackUpReminder:!1,disabledRpcMethodPreferences:{eth_sign:!1},useMultiAccountBalanceChecker:!0,useSafeChainsListValidation:!0,useTokenDetection:!1,useNftDetection:!1,use4ByteResolution:!0,useCurrencyRateCheck:!0,openSeaEnabled:!1,securityAlertsEnabled:!1,addSnapAccountEnabled:!1,advancedGasFee:{},featureFlags:{},incomingTransactionsPreferences:{...l,...t,...h},knownMethodData:{},currentLocale:e.initLangCode,identities:{},lostIdentities:{},forgottenPassword:!1,preferences:{autoLockTimeLimit:undefined,showFiatInTestnets:!1,showTestNetworks:!1,useNativeCurrencyAsPrimaryCurrency:!0,hideZeroBalanceTokens:!1},ipfsGateway:s.IPFS_DEFAULT_GATEWAY_URL,useAddressBarEnsResolution:!0,ledgerTransportType:window.navigator.hid?o.LedgerTransportTypes.webhid:o.LedgerTransportTypes.u2f,snapRegistryList:{},transactionSecurityCheckEnabled:!1,theme:a.ThemeType.os,snapsAddSnapAccountModalDismissed:!1,isLineaMainnetReleased:!1,...e.initState};this.network=e.network,this.store=new n.ObservableStore(r),this.store.setMaxListeners(13),this.tokenListController=e.tokenListController,e.onAccountRemoved((e=>this.removeAddress(e))),global.setPreference=(e,t)=>this.setFeatureFlag(e,t),this._showShouldLineaMainnetNetwork()}setPasswordForgotten(e){this.store.updateState({forgottenPassword:e})}setUseBlockie(e){this.store.updateState({useBlockie:e})}setUseNonceField(e){this.store.updateState({useNonceField:e})}setUsePhishDetect(e){this.store.updateState({usePhishDetect:e})}setUseMultiAccountBalanceChecker(e){this.store.updateState({useMultiAccountBalanceChecker:e})}setUseSafeChainsListValidation(e){this.store.updateState({useSafeChainsListValidation:e})}setUseTokenDetection(e){this.store.updateState({useTokenDetection:e}),this.tokenListController.updatePreventPollingOnNetworkRestart(!e),e?this.tokenListController.start():(this.tokenListController.clearingTokenListData(),this.tokenListController.stop())}setUseNftDetection(e){this.store.updateState({useNftDetection:e})}setUse4ByteResolution(e){this.store.updateState({use4ByteResolution:e})}setUseCurrencyRateCheck(e){this.store.updateState({useCurrencyRateCheck:e})}setOpenSeaEnabled(e){this.store.updateState({openSeaEnabled:e})}setSecurityAlertsEnabled(e){this.store.updateState({securityAlertsEnabled:e})}setAddSnapAccountEnabled(e){this.store.updateState({addSnapAccountEnabled:e})}setAdvancedGasFee({chainId:e,gasFeePreferences:t}){const{advancedGasFee:r}=this.store.getState();this.store.updateState({advancedGasFee:{...r,[e]:t}})}setTheme(e){this.store.updateState({theme:e})}setTransactionSecurityCheckEnabled(e){this.store.updateState({transactionSecurityCheckEnabled:e})}addKnownMethodData(e,t){const{knownMethodData:r}=this.store.getState();r[e]=t,this.store.updateState({knownMethodData:r})}setCurrentLocale(e){const t=["ar","dv","fa","he","ku"].includes(e)?"rtl":"auto";return this.store.updateState({currentLocale:e,textDirection:t}),t}setAddresses(e){const t=this.store.getState().identities,r=e.reduce(((e,r,n)=>{const i=t[r]||{};return e[r]={name:`Account ${n+1}`,address:r,...i},e}),{});this.store.updateState({identities:r})}removeAddress(e){const{identities:t}=this.store.getState();if(!t[e])throw new Error(`${e} can't be deleted cause it was not found`);if(delete t[e],this.store.updateState({identities:t}),e===this.getSelectedAddress()){const[e]=Object.keys(t);this.setSelectedAddress(e)}return e}addAddresses(e){const{identities:t}=this.store.getState();e.forEach((e=>{if(t[e])return;const r=Object.keys(t).length;t[e]={name:`Account ${r+1}`,address:e}})),this.store.updateState({identities:t})}syncAddresses(e){if(!Array.isArray(e)||0===e.length)throw new Error("Expected non-empty array of addresses. Error #11201");const{identities:t,lostIdentities:r}=this.store.getState(),n={};Object.keys(t).forEach((r=>{e.includes(r)||(n[r]=t[r],delete t[r])})),Object.keys(n).length>0&&Object.keys(n).forEach((e=>{r[e]=n[e]})),this.store.updateState({identities:t,lostIdentities:r}),this.addAddresses(e);let i=this.getSelectedAddress();return e.includes(i)||([i]=e,this.setSelectedAddress(i)),i}setSelectedAddress(e){const t=(0,i.normalize)(e),{identities:r}=this.store.getState(),n=r[t];if(!n)throw new Error(`Identity for '${t} not found`);n.lastSelected=Date.now(),this.store.updateState({identities:r,selectedAddress:t})}getSelectedAddress(){return this.store.getState().selectedAddress}async setAccountLabel(e,t){if(!e)throw new Error(`setAccountLabel requires a valid address, got ${String(e)}`);const r=(0,i.normalize)(e),{identities:n}=this.store.getState();return n[r]=n[r]||{},n[r].name=t,this.store.updateState({identities:n}),t}async setFeatureFlag(e,t){const r={...this.store.getState().featureFlags,[e]:t};return this.store.updateState({featureFlags:r}),r}async setPreference(e,t){const r={...this.getPreferences(),[e]:t};return this.store.updateState({preferences:r}),r}getPreferences(){return this.store.getState().preferences}getIpfsGateway(){return this.store.getState().ipfsGateway}async setIpfsGateway(e){return this.store.updateState({ipfsGateway:e}),e}async setUseAddressBarEnsResolution(e){this.store.updateState({useAddressBarEnsResolution:e})}setLedgerTransportPreference(e){return this.store.updateState({ledgerTransportType:e}),e}getLedgerTransportPreference(){return this.store.getState().ledgerTransportType}async setDismissSeedBackUpReminder(e){await this.store.updateState({dismissSeedBackUpReminder:e})}async setDisabledRpcMethodPreference(e,t){const r={...this.store.getState().disabledRpcMethodPreferences,[e]:t};this.store.updateState({disabledRpcMethodPreferences:r})}setIncomingTransactionsPreferences(e,t){const r={...this.store.getState().incomingTransactionsPreferences,[e]:t};this.store.updateState({incomingTransactionsPreferences:r})}getRpcMethodPreferences(){return this.store.getState().disabledRpcMethodPreferences}setSnapsAddSnapAccountModalDismissed(e){this.store.updateState({snapsAddSnapAccountModalDismissed:e})}async updateSnapRegistry(){let e;try{const t=await fetch(c.KEYRING_SNAPS_REGISTRY_URL);e=await t.json()}catch(t){console.error("Failed to fetch registry: ",t),e={}}this.store.updateState({snapRegistryList:e})}_showShouldLineaMainnetNetwork(){const e=(0,u.shouldShowLineaMainnet)();this.store.updateState({isLineaMainnetReleased:e})}}}}},{package:"$root$",file:"app/scripts/controllers/preferences.js"}],[250,{"./node":243,"./zeroNode":252},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.subtreeFillToContents=r.subtreeFillToLength=r.subtreeFillToDepth=void 0;const n=e("./node"),i=e("./zeroNode");function s(e,t){let r=e;for(;t>0;)r=new n.BranchNode(r,r),t--;return r}r.subtreeFillToDepth=s,r.subtreeFillToLength=function e(t,r,o){const a=1<<r;if(o>a)throw new Error("ERR_TOO_MANY_NODES");if(o===a)return s(t,r);if(0===r){if(1===o)return t;throw new Error("ERR_NAVIGATION")}if(1===r)return new n.BranchNode(t,o>1?t:i.zeroNode(0));const u=a>>1;return o<=u?new n.BranchNode(e(t,r-1,o),i.zeroNode(r-1)):new n.BranchNode(s(t,r-1),e(t,r-1,o-u))},r.subtreeFillToContents=function(e,t){const r=2**t;if(e.length>r)throw new Error(`nodes.length ${e.length} over maxIndex at depth ${t}`);if(0===e.length)return i.zeroNode(t);if(0===t)return e[0];if(1===t)return e.length>1?new n.BranchNode(e[0],e[1]):new n.BranchNode(e[0],i.zeroNode(0));let s=e.length;for(let r=t;r>0;r--){const o=s%2,a=s-o;for(let t=0;t<a;t+=2)e[t/2]=new n.BranchNode(e[t],e[t+1]);o>0&&(e[a/2]=new n.BranchNode(e[a],i.zeroNode(t-r))),s=a/2+o}return e[0]}}}},{package:"eth-lattice-keyring>@ethereumjs/tx>@chainsafe/ssz>@chainsafe/persistent-merkle-tree",file:"node_modules/@chainsafe/persistent-merkle-tree/lib/subtree.js"}],[251,{"./gindex":240,"./node":243,"./proof":245,"./proof/single":247,"./zeroNode":252},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.treeZeroAfterIndex=r.iterateNodesAtDepth=r.getNodesAtDepth=r.setNodesAtDepth=r.setNodeAtDepth=r.getNodeAtDepth=r.setNodeWithFn=r.setNode=r.getNode=r.Tree=void 0;const n=e("./zeroNode"),i=e("./gindex"),s=e("./node"),o=e("./proof"),a=e("./proof/single");class u{constructor(e,t){this._rootNode=e,t&&("undefined"==typeof WeakRef?this.hook=t:this.hook=new WeakRef(t))}static createFromProof(e){return new u(o.createNodeFromProof(e))}get rootNode(){return this._rootNode}set rootNode(e){if(this._rootNode=e,this.hook)if("undefined"==typeof WeakRef)this.hook(e);else{const t=this.hook.deref();t?t(e):this.hook=undefined}}get root(){return this.rootNode.root}clone(){return new u(this.rootNode)}getSubtree(e){return new u(this.getNode(e),(t=>this.setNode(e,t)))}getNode(e){return c(this.rootNode,e)}getNodeAtDepth(e,t){return p(this.rootNode,e,t)}getRoot(e){return this.getNode(e).root}setNode(e,t){this.rootNode=l(this.rootNode,e,t)}setNodeWithFn(e,t){this.rootNode=h(this.rootNode,e,t)}setNodeAtDepth(e,t,r){this.rootNode=g(this.rootNode,e,t,r)}setRoot(e,t){this.setNode(e,s.LeafNode.fromRoot(t))}getNodesAtDepth(e,t,r){return y(this.rootNode,e,t,r)}iterateNodesAtDepth(e,t,r){return b(this.rootNode,e,t,r)}getSingleProof(e){return a.createSingleProof(this.rootNode,e)[1]}getProof(e){return o.createProof(this.rootNode,e)}}function c(e,t){const r=i.convertGindexToBitstring(t);let n=e;for(let e=1;e<r.length;e++){if(n.isLeaf())throw new Error(`Invalid tree - found leaf at depth ${e}`);n="1"===r[e]?n.right:n.left}return n}function l(e,t,r){const n=i.convertGindexToBitstring(t);return d(n,f(e,n),r)}function h(e,t,r){const n=i.convertGindexToBitstring(t),s=f(e,n),o=s[s.length-1];return d(n,s,r("1"===n[n.length-1]?o.right:o.left))}function f(e,t){let r=e;const n=[e];for(let e=1;e<t.length-1;e++)r="1"===t[e]?r.right:r.left,n.push(r);return n}function d(e,t,r){let n=r;for(let r=e.length-1;r>=1;r--)n="1"===e[r]?new s.BranchNode(t[r-1].left,n):new s.BranchNode(n,t[r-1].right);return n}function p(e,t,r){if(0===t)return e;if(1===t)return 0===r?e.left:e.right;let n=e;for(let e=t-1;e>=0;e--)n=w(e,r)?n.left:n.right;return n}function g(e,t,r,n){return m(e,t,[r],[n])}function m(e,t,r,n){if(0===t)return n.length>0?n[0]:e;const i=new Array(t),o=new Array(t),a=t-1;let u=a,c=e;i[a]=e;for(let e=0;e<r.length;e++){const t=r[e];for(let e=u;e>0;e--)c=w(e,t)?c.left:c.right,i[e-1]=c;u=0;1!=(1&t)?t+1===r[e+1]?(c=new s.BranchNode(n[e],n[e+1]),e++):c=new s.BranchNode(n[e],c.right):c=new s.BranchNode(c.left,n[e]);const f=e>=r.length-1,d=f?a:(l=t,h=r[e+1],Math.ceil(Math.log2(-~(l^h)))-1);for(let e=1;e<=d;e++)if(w(e,t))f||e!==d?c=new s.BranchNode(c,i[e].right):(o[e]=c,c=i[e]);else{const t=o[e];t!==undefined?(c=new s.BranchNode(t,c),o[e]=undefined):c=new s.BranchNode(i[e].left,c)}u=d}var l,h;return c}function y(e,t,r,n){if(0===t)return 0===r&&n>0?[e]:[];if(1===t)return 0===n?[]:1===n?0===r?[e.left]:[e.right]:[e.left,e.right];const i=t-1;let s=i,o=e;const a=new Array(t),u=new Array(t),c=new Array(n);a[i]=e;for(let e=0;e<n;e++){for(let t=s;t>=0;t--){t!==s&&(a[t]=o);const n=w(t,r+e);u[t]=n,o=n?o.left:o.right}c[e]=o;for(let e=0;e<=i;e++)if(!0===u[e]){s=e;break}o=a[s]}return c}function*b(e,t,r,n){const i=r+n,s=t-1;let o=s,a=e;const u=new Array(t),c=new Array(t);u[s]=e;for(let e=r;e<i;e++){for(let t=o;t>=0;t--){t!==o&&(u[t]=a);const r=w(t,e);c[t]=r,a=r?a.left:a.right}yield a;for(let e=0;e<=s;e++)if(!0===c[e]){o=e;break}a=u[o]}}function w(e,t){if(e>31){const r=1<<e-32;return(t/2**32>>>0&r)!==r}const r=1<<e;return(t&r)!==r}r.Tree=u,r.getNode=c,r.setNode=l,r.setNodeWithFn=h,r.getNodeAtDepth=p,r.setNodeAtDepth=g,r.setNodesAtDepth=m,r.getNodesAtDepth=y,r.iterateNodesAtDepth=b,r.treeZeroAfterIndex=function(e,t,r){if(r<0)return n.zeroNode(t);const i=new Array(t),o=t-1;let a=o,u=e;i[o]=e;for(let e=a;e>=0;e--)u=w(e,r)?u.left:u.right,i[e-1]=u;a=0;for(let e=0;e<=o;e++)u=w(e,r)?new s.BranchNode(u,n.zeroNode(e)):new s.BranchNode(i[e].left,u);return u}}}},{package:"eth-lattice-keyring>@ethereumjs/tx>@chainsafe/ssz>@chainsafe/persistent-merkle-tree",file:"node_modules/@chainsafe/persistent-merkle-tree/lib/tree.js"}],[252,{"./node":243},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.zeroNode=void 0;const n=e("./node"),i=[n.LeafNode.fromZero()];r.zeroNode=function(e){if(e>=i.length)for(let t=i.length;t<=e;t++)i[t]=new n.BranchNode(i[t-1],i[t-1]);return i[e]}}}},{package:"eth-lattice-keyring>@ethereumjs/tx>@chainsafe/ssz>@chainsafe/persistent-merkle-tree",file:"node_modules/@chainsafe/persistent-merkle-tree/lib/zeroNode.js"}],[253,{"@chainsafe/persistent-merkle-tree":242},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.BranchNodeStruct=void 0;const n=e("@chainsafe/persistent-merkle-tree");class i extends n.Node{constructor(e,t){super(null,0,0,0,0,0,0,0),this.valueToNode=e,this.value=t}get rootHashObject(){if(null===this.h0){const e=this.valueToNode(this.value);super.applyHash(e.rootHashObject)}return this}get root(){return n.hashObjectToUint8Array(this.rootHashObject)}isLeaf(){return!1}get left(){return this.valueToNode(this.value).left}get right(){return this.valueToNode(this.value).right}}r.BranchNodeStruct=i}}},{package:"eth-lattice-keyring>@ethereumjs/tx>@chainsafe/ssz",file:"node_modules/@chainsafe/ssz/lib/branchNodeStruct.js"}],[254,{"./type/abstract":255,"./type/array":256,"./type/basic":259,"./type/bitArray":260,"./type/bitList":261,"./type/bitVector":262,"./type/boolean":263,"./type/byteArray":264,"./type/byteList":265,"./type/byteVector":266,"./type/composite":267,"./type/container":268,"./type/containerNodeStruct":269,"./type/listBasic":270,"./type/listComposite":271,"./type/none":272,"./type/uint":273,"./type/union":274,"./type/vectorBasic":275,"./type/vectorComposite":276,"./util/byteArray":277,"./util/merkleize":278,"./value/bitArray":282,"./view/abstract":283,"./viewDU/abstract":291},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.hash64=r.byteArrayEquals=r.toHexString=r.fromHexString=r.getUint8ByteToBitBooleanArray=r.BitArray=r.TreeViewDU=r.TreeView=r.isCompositeType=r.CompositeType=r.isBasicType=r.BasicType=r.Type=r.ByteArrayType=r.BitArrayType=r.ArrayType=r.VectorCompositeType=r.VectorBasicType=r.UnionType=r.UintNumberType=r.UintBigintType=r.NoneType=r.ListCompositeType=r.ListBasicType=r.ContainerNodeStructType=r.ContainerType=r.ByteVectorType=r.ByteListType=r.BooleanType=r.BitVectorType=r.BitListType=void 0;var n=e("./type/bitList");Object.defineProperty(r,"BitListType",{enumerable:!0,get:function(){return n.BitListType}});var i=e("./type/bitVector");Object.defineProperty(r,"BitVectorType",{enumerable:!0,get:function(){return i.BitVectorType}});var s=e("./type/boolean");Object.defineProperty(r,"BooleanType",{enumerable:!0,get:function(){return s.BooleanType}});var o=e("./type/byteList");Object.defineProperty(r,"ByteListType",{enumerable:!0,get:function(){return o.ByteListType}});var a=e("./type/byteVector");Object.defineProperty(r,"ByteVectorType",{enumerable:!0,get:function(){return a.ByteVectorType}});var u=e("./type/container");Object.defineProperty(r,"ContainerType",{enumerable:!0,get:function(){return u.ContainerType}});var c=e("./type/containerNodeStruct");Object.defineProperty(r,"ContainerNodeStructType",{enumerable:!0,get:function(){return c.ContainerNodeStructType}});var l=e("./type/listBasic");Object.defineProperty(r,"ListBasicType",{enumerable:!0,get:function(){return l.ListBasicType}});var h=e("./type/listComposite");Object.defineProperty(r,"ListCompositeType",{enumerable:!0,get:function(){return h.ListCompositeType}});var f=e("./type/none");Object.defineProperty(r,"NoneType",{enumerable:!0,get:function(){return f.NoneType}});var d=e("./type/uint");Object.defineProperty(r,"UintBigintType",{enumerable:!0,get:function(){return d.UintBigintType}}),Object.defineProperty(r,"UintNumberType",{enumerable:!0,get:function(){return d.UintNumberType}});var p=e("./type/union");Object.defineProperty(r,"UnionType",{enumerable:!0,get:function(){return p.UnionType}});var g=e("./type/vectorBasic");Object.defineProperty(r,"VectorBasicType",{enumerable:!0,get:function(){return g.VectorBasicType}});var m=e("./type/vectorComposite");Object.defineProperty(r,"VectorCompositeType",{enumerable:!0,get:function(){return m.VectorCompositeType}});var y=e("./type/array");Object.defineProperty(r,"ArrayType",{enumerable:!0,get:function(){return y.ArrayType}});var b=e("./type/bitArray");Object.defineProperty(r,"BitArrayType",{enumerable:!0,get:function(){return b.BitArrayType}});var w=e("./type/byteArray");Object.defineProperty(r,"ByteArrayType",{enumerable:!0,get:function(){return w.ByteArrayType}});var v=e("./type/abstract");Object.defineProperty(r,"Type",{enumerable:!0,get:function(){return v.Type}});var T=e("./type/basic");Object.defineProperty(r,"BasicType",{enumerable:!0,get:function(){return T.BasicType}}),Object.defineProperty(r,"isBasicType",{enumerable:!0,get:function(){return T.isBasicType}});var _=e("./type/composite");Object.defineProperty(r,"CompositeType",{enumerable:!0,get:function(){return _.CompositeType}}),Object.defineProperty(r,"isCompositeType",{enumerable:!0,get:function(){return _.isCompositeType}});var k=e("./view/abstract");Object.defineProperty(r,"TreeView",{enumerable:!0,get:function(){return k.TreeView}});var E=e("./viewDU/abstract");Object.defineProperty(r,"TreeViewDU",{enumerable:!0,get:function(){return E.TreeViewDU}});var S=e("./value/bitArray");Object.defineProperty(r,"BitArray",{enumerable:!0,get:function(){return S.BitArray}}),Object.defineProperty(r,"getUint8ByteToBitBooleanArray",{enumerable:!0,get:function(){return S.getUint8ByteToBitBooleanArray}});var N=e("./util/byteArray");Object.defineProperty(r,"fromHexString",{enumerable:!0,get:function(){return N.fromHexString}}),Object.defineProperty(r,"toHexString",{enumerable:!0,get:function(){return N.toHexString}}),Object.defineProperty(r,"byteArrayEquals",{enumerable:!0,get:function(){return N.byteArrayEquals}});var A=e("./util/merkleize");Object.defineProperty(r,"hash64",{enumerable:!0,get:function(){return A.hash64}})}}},{package:"eth-lattice-keyring>@ethereumjs/tx>@chainsafe/ssz",file:"node_modules/@chainsafe/ssz/lib/index.js"}],[255,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.Type=void 0;r.Type=class{value_toTree(e){const t=new Uint8Array(this.value_serializedSize(e)),r=new DataView(t.buffer,t.byteOffset,t.byteLength);return this.value_serializeToBytes({uint8Array:t,dataView:r},0,e),this.tree_deserializeFromBytes({uint8Array:t,dataView:r},0,t.length)}tree_toValue(e){const t=new Uint8Array(this.tree_serializedSize(e)),r=new DataView(t.buffer,t.byteOffset,t.byteLength);return this.tree_serializeToBytes({uint8Array:t,dataView:r},0,e),this.value_deserializeFromBytes({uint8Array:t,dataView:r},0,t.length)}serialize(e){const t=new Uint8Array(this.value_serializedSize(e)),r=new DataView(t.buffer,t.byteOffset,t.byteLength);return this.value_serializeToBytes({uint8Array:t,dataView:r},0,e),t}deserialize(e){const t=new DataView(e.buffer,e.byteOffset,e.byteLength);return this.value_deserializeFromBytes({uint8Array:e,dataView:t},0,e.length)}}}}},{package:"eth-lattice-keyring>@ethereumjs/tx>@chainsafe/ssz",file:"node_modules/@chainsafe/ssz/lib/type/abstract.js"}],[256,{"./arrayBasic":257,"./composite":267,"@chainsafe/persistent-merkle-tree":242},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.ArrayType=void 0;const n=e("@chainsafe/persistent-merkle-tree"),i=e("./composite"),s=e("./arrayBasic");class o extends i.CompositeType{constructor(e){super(),this.elementType=e}defaultValue(){return s.value_defaultValueArray(this.elementType,this.defaultLen)}getPropertyType(){return this.elementType}getPropertyGindex(e){if("number"!=typeof e)throw Error(`Invalid array index: ${e}`);const t=Math.floor(e/this.itemsPerChunk);return n.toGindex(this.depth,BigInt(t))}getIndexProperty(e){return e}tree_getLeafGindices(e,t){let r;if(this.isList){if(!t)throw new Error("List type requires tree argument to get leaves");r=this.tree_getLength(t)}else r=this.tree_getLength(null);const s=[];if(i.isCompositeType(this.elementType)){const i=n.toGindex(this.depth,BigInt(0)),o=i+BigInt(r),a=n.concatGindices([e,i]);if(null===this.elementType.fixedSize){if(!t)throw new Error("Array of variable size requires tree argument to get leaves");for(let e=i,r=a;e<o;e++,r++)s.push(...this.elementType.tree_getLeafGindices(r,n.getNode(t,e)))}else for(let e=0,t=a;e<r;e++,t++)s.push(...this.elementType.tree_getLeafGindices(t))}else{const t=Math.ceil(r/this.itemsPerChunk),i=n.concatGindices([e,n.toGindex(this.depth,BigInt(0))]),o=i+BigInt(t);for(let e=i;e<o;e++)s.push(e)}return this.isList&&s.push(n.concatGindices([e,i.LENGTH_GINDEX])),s}fromJson(e){return s.value_fromJsonArray(this.elementType,e,this)}toJson(e){return s.value_toJsonArray(this.elementType,e,this)}clone(e){return s.value_cloneArray(this.elementType,e)}equals(e,t){return s.value_equals(this.elementType,e,t)}}r.ArrayType=o}}},{package:"eth-lattice-keyring>@ethereumjs/tx>@chainsafe/ssz",file:"node_modules/@chainsafe/ssz/lib/type/array.js"}],[257,{"@chainsafe/persistent-merkle-tree":242},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.assertValidArrayLength=r.value_defaultValueArray=r.value_equals=r.value_cloneArray=r.value_toJsonArray=r.value_fromJsonArray=r.tree_deserializeFromBytesArrayBasic=r.tree_serializeToBytesArrayBasic=r.value_deserializeFromBytesArrayBasic=r.value_serializeToBytesArrayBasic=r.setChunksNode=r.addLengthNode=r.getChunksNodeFromRootNode=r.getLengthFromRootNode=void 0;const n=e("@chainsafe/persistent-merkle-tree");function i(e,t){return new n.BranchNode(e,n.LeafNode.fromUint32(t))}function s(e,t,r){if(r&&e%1!=0)throw Error("size not multiple of element fixedSize");if(t.isList){if(e>t.limit)throw new Error(`Invalid list length ${e} over limit ${t.limit}`)}else if(e!==t.length)throw new Error(`Incorrect vector length ${e} expected ${t.length}`)}r.getLengthFromRootNode=function(e){return e.right.getUint(4,0)},r.getChunksNodeFromRootNode=function(e){return e.left},r.addLengthNode=i,r.setChunksNode=function(e,t,r){const i=r!==undefined?n.LeafNode.fromUint32(r):e.right;return new n.BranchNode(t,i)},r.value_serializeToBytesArrayBasic=function(e,t,r,n,i){const s=e.byteLength;for(let o=0;o<t;o++)e.value_serializeToBytes(r,n+o*s,i[o]);return n+t*s},r.value_deserializeFromBytesArrayBasic=function(e,t,r,n,i){const o=e.byteLength,a=(n-r)/o;s(a,i,!0);const u=new Array(a);for(let n=0;n<a;n++)u[n]=e.value_deserializeFromBytes(t,r+n*o,r+(n+1)*o);return u},r.tree_serializeToBytesArrayBasic=function(e,t,r,i,s,o){const a=e.byteLength*t,u=Math.ceil(a/32),c=n.getNodesAtDepth(o,r,0,u);return n.packedNodeRootsToBytes(i.dataView,s,a,c),s+a},r.tree_deserializeFromBytesArrayBasic=function(e,t,r,o,a,u){const c=(a-o)/e.byteLength;s(c,u,!0);const l=n.packedRootsBytesToNode(t,r.dataView,o,a);return u.isList?i(l,c):l},r.value_fromJsonArray=function(e,t,r){if(!Array.isArray(t))throw Error("JSON is not an array");s(t.length,r);const n=new Array(t.length);for(let r=0;r<t.length;r++)n[r]=e.fromJson(t[r]);return n},r.value_toJsonArray=function(e,t,r){const n=r.isList?t.length:r.length,i=new Array(n);for(let r=0;r<n;r++)i[r]=e.toJson(t[r]);return i},r.value_cloneArray=function(e,t){const r=new Array(t.length);for(let n=0;n<t.length;n++)r[n]=e.clone(t[n]);return r},r.value_equals=function(e,t,r){if(t.length!==r.length)return!1;for(let n=0;n<t.length;n++)if(!e.equals(t[n],r[n]))return!1;return!0},r.value_defaultValueArray=function(e,t){const r=new Array(t);for(let n=0;n<t;n++)r[n]=e.defaultValue();return r},r.assertValidArrayLength=s}}},{package:"eth-lattice-keyring>@ethereumjs/tx>@chainsafe/ssz",file:"node_modules/@chainsafe/ssz/lib/type/arrayBasic.js"}],[258,{"./arrayBasic":257,"@chainsafe/persistent-merkle-tree":242},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.value_getRootsArrayComposite=r.tree_deserializeFromBytesArrayComposite=r.tree_serializeToBytesArrayComposite=r.tree_serializedSizeArrayComposite=r.value_deserializeFromBytesArrayComposite=r.value_serializeToBytesArrayComposite=r.value_serializedSizeArrayComposite=r.maxSizeArrayComposite=r.minSizeArrayComposite=void 0;const n=e("@chainsafe/persistent-merkle-tree"),i=e("./arrayBasic");function s(e,t,r,n,s){const o=n-r;let a;if(null===e)a=function(e,t,r){if(0===r)return new Uint32Array(0);const n=e.getUint32(t,!0),i=n;if(0===n)throw Error("First offset must be > 0");if(i%4!=0)throw Error("Offset data length not multiple of 4");const s=i/4,o=new Uint32Array(s);o[0]=n;for(let n=1;n<s;n++){const i=e.getUint32(t+4*n,!0);if(o[n]=i,i>r)throw new Error(`Offset out of bounds ${i} > ${r}`);if(i<o[n-1])throw new Error(`Offsets must be increasing ${i} < ${o[n-1]}`)}return o}(t,r,o);else{if(0===e)throw Error("element fixed length is 0");if(o%e!=0)throw Error(`size ${o} is not multiple of element fixedSize ${e}`);const t=o/e;a=new Uint32Array(t);for(let r=0;r<t;r++)a[r]=r*e}return i.assertValidArrayLength(a.length,s),a}r.minSizeArrayComposite=function(e,t){return null===e.fixedSize?t*(4+e.minSize):t*e.minSize},r.maxSizeArrayComposite=function(e,t){return null===e.fixedSize?t*(4+e.maxSize):t*e.maxSize},r.value_serializedSizeArrayComposite=function(e,t,r){if(null===e.fixedSize){let n=0;for(let i=0;i<t;i++)n+=4+e.value_serializedSize(r[i]);return n}return t*e.fixedSize},r.value_serializeToBytesArrayComposite=function(e,t,r,n,i){if(null===e.fixedSize){let s=n+4*t;for(let o=0;o<t;o++)r.dataView.setUint32(n+4*o,s-n,!0),s=e.value_serializeToBytes(r,s,i[o]);return s}for(let s=0;s<t;s++)e.value_serializeToBytes(r,n+s*e.fixedSize,i[s]);return n+t*e.fixedSize},r.value_deserializeFromBytesArrayComposite=function(e,t,r,n,i){const o=s(e.fixedSize,t.dataView,r,n,i),a=o.length,u=new Array(a);for(let i=0;i<a;i++){const s=r+o[i],c=i===a-1?n:r+o[i+1];u[i]=e.value_deserializeFromBytes(t,s,c)}return u},r.tree_serializedSizeArrayComposite=function(e,t,r,i){if(null===e.fixedSize){const s=n.getNodesAtDepth(i,r,0,t);let o=0;for(let t=0;t<s.length;t++)o+=4+e.tree_serializedSize(s[t]);return o}return t*e.fixedSize},r.tree_serializeToBytesArrayComposite=function(e,t,r,i,s,o){const a=n.getNodesAtDepth(i,r,0,t);if(null===e.fixedSize){let r=o+4*t;const{dataView:n}=s;for(let t=0;t<a.length;t++)n.setUint32(o+4*t,r-o,!0),r=e.tree_serializeToBytes(s,r,a[t]);return r}for(let t=0;t<a.length;t++)o=e.tree_serializeToBytes(s,o,a[t]);return o},r.tree_deserializeFromBytesArrayComposite=function(e,t,r,o,a,u){const c=s(e.fixedSize,r.dataView,o,a,u),l=c.length,h=new Array(l);for(let t=0;t<l;t++){const n=o+c[t],i=t===l-1?a:o+c[t+1];h[t]=e.tree_deserializeFromBytes(r,n,i)}const f=n.subtreeFillToContents(h,t);return u.isList?i.addLengthNode(f,l):f},r.value_getRootsArrayComposite=function(e,t,r){const n=new Array(t);for(let i=0;i<t;i++)n[i]=e.hashTreeRoot(r[i]);return n}}}},{package:"eth-lattice-keyring>@ethereumjs/tx>@chainsafe/ssz",file:"node_modules/@chainsafe/ssz/lib/type/arrayComposite.js"}],[259,{"./abstract":255},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.isBasicType=r.BasicType=void 0;const n=e("./abstract");class i extends n.Type{constructor(){super(...arguments),this.isBasic=!0,this.depth=0,this.maxChunkCount=1}value_serializedSize(){return this.byteLength}tree_serializedSize(){return this.byteLength}assertValidSize(e){if(e!==this.byteLength)throw Error(`BasicType invalid size ${e} expected ${this.byteLength}`)}hashTreeRoot(e){const t=new Uint8Array(32),r=new DataView(t.buffer,t.byteOffset,t.byteLength);return this.value_serializeToBytes({uint8Array:t,dataView:r},0,e),t}clone(e){return e}equals(e,t){return e===t}}r.BasicType=i,r.isBasicType=function(e){return e.isBasic}}}},{package:"eth-lattice-keyring>@ethereumjs/tx>@chainsafe/ssz",file:"node_modules/@chainsafe/ssz/lib/type/basic.js"}],[26,{"../../../shared/constants/common":4751,"../../../shared/constants/gas":4753,"../../../shared/constants/metametrics":4758,"../../../shared/constants/network":4759,"../../../shared/constants/smartTransactions":4763,"../../../shared/constants/swaps":4766,"../../../shared/constants/time":4768,"../../../shared/lib/fetch-with-cache":4772,"../../../shared/lib/swaps-utils":4775,"../../../shared/lib/transactions-controller-utils":4778,"../../../shared/modules/Numeric":4780,"../../../shared/modules/conversion.utils":4784,"../../../shared/modules/string-utils":4797,"../../../shared/modules/swaps.utils":4798,"../../../ui/helpers/utils/optimism/fetchEstimatedL1Fee":5571,"@ethersproject/contracts":455,"@ethersproject/providers":494,"@metamask/obs-store":1659,"@sentry/browser":2179,"bignumber.js":2804,"human-standard-token-abi":3827,lodash:4071},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.utils=r.default=void 0;var n=e("@ethersproject/providers"),i=e("@ethersproject/contracts"),s=S(e("bignumber.js")),o=e("@metamask/obs-store"),a=e("lodash"),u=S(e("human-standard-token-abi")),c=e("@sentry/browser"),l=e("../../../shared/modules/conversion.utils"),h=e("../../../shared/constants/swaps"),f=e("../../../shared/constants/gas"),d=e("../../../shared/constants/network"),p=e("../../../shared/constants/metametrics"),g=e("../../../shared/constants/smartTransactions"),m=e("../../../shared/modules/swaps.utils"),y=e("../../../shared/lib/swaps-utils"),b=S(e("../../../shared/lib/fetch-with-cache")),w=e("../../../shared/constants/time"),v=e("../../../shared/modules/string-utils"),T=e("../../../shared/lib/transactions-controller-utils"),_=S(e("../../../ui/helpers/utils/optimism/fetchEstimatedL1Fee")),k=e("../../../shared/modules/Numeric"),E=e("../../../shared/constants/common");function S(e){return e&&e.__esModule?e:{default:e}}const N=25e5,A=w.MINUTE;function I(e=25e5,t=0,r=0){const n=new s.default(e,10).minus(t,10);return!n.lt(0)&&n.lt(r,16)?`0x${n.toString(16)}`:r}const x={quotes:{},quotesPollingLimitEnabled:!1,fetchParams:null,tokens:null,tradeTxId:null,approveTxId:null,quotesLastFetched:null,customMaxGas:"",customGasPrice:null,customMaxFeePerGas:null,customMaxPriorityFeePerGas:null,swapsUserFeeLevel:"",selectedAggId:null,customApproveTxData:"",errorKey:"",topAggId:null,routeState:"",swapsFeatureIsLive:!0,saveFetchedQuotes:!1,swapsQuoteRefreshTime:A,swapsQuotePrefetchingRefreshTime:A,swapsStxBatchStatusRefreshTime:g.FALLBACK_SMART_TRANSACTIONS_REFRESH_TIME,swapsStxGetTransactionsRefreshTime:g.FALLBACK_SMART_TRANSACTIONS_REFRESH_TIME,swapsStxMaxFeeMultiplier:g.FALLBACK_SMART_TRANSACTIONS_MAX_FEE_MULTIPLIER,swapsFeatureFlags:{}};function P(e){if(!Array.isArray(e)||0===e.length)throw new Error("Expected non-empty array param.");const t=[...e];if(t.sort(((e,t)=>{const r=new s.default(e.overallValueOfQuote,10),n=new s.default(t.overallValueOfQuote,10);return r.equals(n)?0:r.lessThan(n)?-1:1})),t.length%2==1){const e=t[(t.length-1)/2].overallValueOfQuote;return B(t.filter((t=>e===t.overallValueOfQuote)))}const r=t.length/2,n=r-1,i=t[r].overallValueOfQuote,o=t[n].overallValueOfQuote,a=t.filter((e=>i===e.overallValueOfQuote)),u=t.filter((e=>o===e.overallValueOfQuote)),c=B(a),l=B(u);return{ethFee:new s.default(c.ethFee,10).plus(l.ethFee,10).dividedBy(2).toString(10),metaMaskFeeInEth:new s.default(c.metaMaskFeeInEth,10).plus(l.metaMaskFeeInEth,10).dividedBy(2).toString(10),ethValueOfTokens:new s.default(c.ethValueOfTokens,10).plus(l.ethValueOfTokens,10).dividedBy(2).toString(10)}}function B(e){const t=e.reduce(((e,t)=>({ethFee:e.ethFee.plus(t.ethFee,10),metaMaskFeeInEth:e.metaMaskFeeInEth.plus(t.metaMaskFeeInEth,10),ethValueOfTokens:e.ethValueOfTokens.plus(t.ethValueOfTokens,10)})),{ethFee:new s.default(0,10),metaMaskFeeInEth:new s.default(0,10),ethValueOfTokens:new s.default(0,10)});return{ethFee:t.ethFee.div(e.length,10).toString(10),metaMaskFeeInEth:t.metaMaskFeeInEth.div(e.length,10).toString(10),ethValueOfTokens:t.ethValueOfTokens.div(e.length,10).toString(10)}}r.default=class{constructor({getBufferedGasLimit:e,networkController:t,provider:r,getProviderConfig:i,getTokenRatesState:s,fetchTradesInfo:a=y.fetchTradesInfo,getCurrentChainId:u,getEIP1559GasFeeEstimates:c,onNetworkStateChange:l,trackMetaMetricsEvent:h},f){var p;this.store=new o.ObservableStore({swapsState:{...x,swapsFeatureFlags:(null==f||null===(p=f.swapsState)||void 0===p?void 0:p.swapsFeatureFlags)||{}}}),this.resetState=()=>{var e;this.store.updateState({swapsState:{...x,swapsFeatureFlags:null==f||null===(e=f.swapsState)||void 0===e?void 0:e.swapsFeatureFlags}})},this._fetchTradesInfo=a,this._getCurrentChainId=u,this._getEIP1559GasFeeEstimates=c,this.getBufferedGasLimit=e,this.getTokenRatesState=s,this.trackMetaMetricsEvent=h,this.pollCount=0,this.getProviderConfig=i,this.indexOfNewestCallInFlight=0,this.ethersProvider=new n.Web3Provider(r),this._currentChainId=t.state.providerConfig.chainId,l((()=>{var e;const{networksMetadata:i,selectedNetworkClientId:s,providerConfig:{chainId:o}}=t.state;(null===(e=i[s])||void 0===e?void 0:e.status)===d.NetworkStatus.Available&&o!==this._currentChainId&&(this._currentChainId=o,this.ethersProvider=new n.Web3Provider(r))}))}async fetchSwapsNetworkConfig(e){const t=await(0,b.default)({url:(0,y.getBaseApi)("network",e),fetchOptions:{method:"GET"},cacheOptions:{cacheRefreshTime:6e5},functionName:"fetchSwapsNetworkConfig"}),{refreshRates:r,parameters:n={}}=t||{};if(!r||"number"!=typeof r.quotes||"number"!=typeof r.quotesPrefetching)throw new Error(`MetaMask - invalid response for refreshRates: ${t}`);return{quotes:1e3*r.quotes,quotesPrefetching:1e3*r.quotesPrefetching,stxGetTransactions:1e3*r.stxGetTransactions,stxBatchStatus:1e3*r.stxBatchStatus,stxStatusDeadline:r.stxStatusDeadline,stxMaxFeeMultiplier:n.stxMaxFeeMultiplier}}async _setSwapsNetworkConfig(){var e,t,r,n,i,s;const o=this._getCurrentChainId();let a;try{a=await this.fetchSwapsNetworkConfig(o)}catch(e){console.error("Request for Swaps network config failed: ",e)}const{swapsState:u}=this.store.getState();this.store.updateState({swapsState:{...u,swapsQuoteRefreshTime:(null===(e=a)||void 0===e?void 0:e.quotes)||A,swapsQuotePrefetchingRefreshTime:(null===(t=a)||void 0===t?void 0:t.quotesPrefetching)||A,swapsStxGetTransactionsRefreshTime:(null===(r=a)||void 0===r?void 0:r.stxGetTransactions)||g.FALLBACK_SMART_TRANSACTIONS_REFRESH_TIME,swapsStxBatchStatusRefreshTime:(null===(n=a)||void 0===n?void 0:n.stxBatchStatus)||g.FALLBACK_SMART_TRANSACTIONS_REFRESH_TIME,swapsStxStatusDeadline:(null===(i=a)||void 0===i?void 0:i.stxStatusDeadline)||g.FALLBACK_SMART_TRANSACTIONS_DEADLINE,swapsStxMaxFeeMultiplier:(null===(s=a)||void 0===s?void 0:s.stxMaxFeeMultiplier)||g.FALLBACK_SMART_TRANSACTIONS_MAX_FEE_MULTIPLIER}})}pollForNewQuotes(){const{swapsState:{swapsQuoteRefreshTime:e,swapsQuotePrefetchingRefreshTime:t,quotesPollingLimitEnabled:r}}=this.store.getState(),n=r?e:t;this.pollingTimeout=setTimeout((()=>{var e;const{swapsState:t}=this.store.getState();this.fetchAndSetQuotes(t.fetchParams,null===(e=t.fetchParams)||void 0===e?void 0:e.metaData,!0)}),n)}stopPollingForQuotes(){this.pollingTimeout&&clearTimeout(this.pollingTimeout)}async fetchAndSetQuotes(e,t={},r){const{chainId:n}=t,{swapsState:{quotesPollingLimitEnabled:i,saveFetchedQuotes:s}}=this.store.getState();if(!e)return null;r||(this.pollCount=0),clearTimeout(this.pollingTimeout),r||this.setSwapsErrorKey("");const o=this.indexOfNewestCallInFlight+1;this.indexOfNewestCallInFlight=o,s||this.setSaveFetchedQuotes(!0);let[u]=await Promise.all([this._fetchTradesInfo(e,{...t}),this._setSwapsNetworkConfig()]);const{swapsState:{saveFetchedQuotes:c}}=this.store.getState();if(!c)return[{},null];u=(0,a.mapValues)(u,(e=>({...e,sourceTokenInfo:t.sourceTokenInfo,destinationTokenInfo:t.destinationTokenInfo}))),n===d.CHAIN_IDS.OPTIMISM&&Object.values(u).length>0&&await Promise.all(Object.values(u).map((async e=>{if(e.trade){const t=await(0,_.default)(n,{txParams:e.trade,chainId:n},this.ethersProvider);e.multiLayerL1TradeFeeTotal=t}return e})));const l=Date.now();let f=!1;if(!(0,m.isSwapsDefaultTokenAddress)(e.sourceToken,n)&&Object.values(u).length){const t=await this._getERC20Allowance(e.sourceToken,e.fromAddress,n),[i]=Object.values(u);if(f=i.approvalNeeded&&t.eq(0)&&"wrappedNative"!==i.aggregator,f){if(!r){const{gasLimit:e}=await this.timedoutGasReturn(i.approvalNeeded,i.aggregator);u=(0,a.mapValues)(u,(t=>({...t,approvalNeeded:{...t.approvalNeeded,gas:e||h.DEFAULT_ERC20_APPROVE_GAS}})))}}else u=(0,a.mapValues)(u,(e=>({...e,approvalNeeded:null})))}let p=null;if(f||null!=e&&e.balanceError||(u=await this.getAllQuotesWithGasEstimates(u)),0===Object.values(u).length)this.setSwapsErrorKey(h.QUOTES_NOT_AVAILABLE_ERROR);else{const[e,t]=await this._findTopQuoteAndCalculateSavings(u);p=e,u=t}if(this.indexOfNewestCallInFlight!==o)throw new Error(h.SWAPS_FETCH_ORDER_CONFLICT);const{swapsState:g}=this.store.getState();let{selectedAggId:y}=g;return u[y]||(y=null),this.store.updateState({swapsState:{...g,quotes:u,fetchParams:{...e,metaData:t},quotesLastFetched:l,selectedAggId:y,topAggId:p}}),i&&(this.pollCount+=1),!i||this.pollCount<4?(this.pollForNewQuotes(),[u,p]):(this.resetPostFetchState(),this.setSwapsErrorKey(h.QUOTES_EXPIRED_ERROR),null)}safeRefetchQuotes(){const{swapsState:e}=this.store.getState();!this.pollingTimeout&&e.fetchParams&&this.fetchAndSetQuotes(e.fetchParams)}setSelectedQuoteAggId(e){const{swapsState:t}=this.store.getState();this.store.updateState({swapsState:{...t,selectedAggId:e}})}setSwapsTokens(e){const{swapsState:t}=this.store.getState();this.store.updateState({swapsState:{...t,tokens:e}})}clearSwapsQuotes(){const{swapsState:e}=this.store.getState();this.store.updateState({swapsState:{...e,quotes:{}}})}setSwapsErrorKey(e){const{swapsState:t}=this.store.getState();this.store.updateState({swapsState:{...t,errorKey:e}})}async getAllQuotesWithGasEstimates(e){const t=await Promise.all(Object.values(e).map((async e=>{const{gasLimit:t,simulationFails:r}=await this.timedoutGasReturn(e.trade,e.aggregator);return[t,r,e.aggregator]}))),r={};return t.forEach((([t,n,i])=>{if(t&&!n){const n=I(e[i].maxGas,e[i].estimatedRefund,t);r[i]={...e[i],gasEstimate:t,gasEstimateWithRefund:n}}else e[i].approvalNeeded&&(r[i]=e[i])})),r}timedoutGasReturn(e,t=""){return new Promise((r=>{let n=!1;const i=setTimeout((()=>{n=!0,this.trackMetaMetricsEvent({event:p.MetaMetricsEventName.QuoteError,category:p.MetaMetricsEventCategory.Swaps,properties:{error_type:p.MetaMetricsEventErrorType.GasTimeout,aggregator:t}}),r({gasLimit:null,simulationFails:!0})}),5*w.SECOND),s={data:e.data,from:e.from,to:e.to,value:e.value};this.getBufferedGasLimit({txParams:s},1).then((({gasLimit:e,simulationFails:t})=>{n||(clearTimeout(i),r({gasLimit:e,simulationFails:t}))})).catch((e=>{(0,c.captureException)(e,{extra:{aggregator:t}}),n||(clearTimeout(i),r({gasLimit:null,simulationFails:!0}))}))}))}async setInitialGasEstimate(e){const{swapsState:t}=this.store.getState(),r={...t.quotes[e]},{gasLimit:n,simulationFails:i}=await this.timedoutGasReturn(r.trade,r.aggregator);if(n&&!i){const e=I(r.maxGas,r.estimatedRefund,n);r.gasEstimate=n,r.gasEstimateWithRefund=e}this.store.updateState({swapsState:{...t,quotes:{...t.quotes,[e]:r}}})}setApproveTxId(e){const{swapsState:t}=this.store.getState();this.store.updateState({swapsState:{...t,approveTxId:e}})}setTradeTxId(e){const{swapsState:t}=this.store.getState();this.store.updateState({swapsState:{...t,tradeTxId:e}})}setQuotesLastFetched(e){const{swapsState:t}=this.store.getState();this.store.updateState({swapsState:{...t,quotesLastFetched:e}})}setSwapsTxGasPrice(e){const{swapsState:t}=this.store.getState();this.store.updateState({swapsState:{...t,customGasPrice:e}})}setSwapsTxMaxFeePerGas(e){const{swapsState:t}=this.store.getState();this.store.updateState({swapsState:{...t,customMaxFeePerGas:e}})}setSwapsUserFeeLevel(e){const{swapsState:t}=this.store.getState();this.store.updateState({swapsState:{...t,swapsUserFeeLevel:e}})}setSwapsQuotesPollingLimitEnabled(e){const{swapsState:t}=this.store.getState();this.store.updateState({swapsState:{...t,quotesPollingLimitEnabled:e}})}setSwapsTxMaxFeePriorityPerGas(e){const{swapsState:t}=this.store.getState();this.store.updateState({swapsState:{...t,customMaxPriorityFeePerGas:e}})}setSwapsTxGasLimit(e){const{swapsState:t}=this.store.getState();this.store.updateState({swapsState:{...t,customMaxGas:e}})}setCustomApproveTxData(e){const{swapsState:t}=this.store.getState();this.store.updateState({swapsState:{...t,customApproveTxData:e}})}setBackgroundSwapRouteState(e){const{swapsState:t}=this.store.getState();this.store.updateState({swapsState:{...t,routeState:e}})}setSaveFetchedQuotes(e){const{swapsState:t}=this.store.getState();this.store.updateState({swapsState:{...t,saveFetchedQuotes:e}})}setSwapsLiveness(e){const{swapsState:t}=this.store.getState(),{swapsFeatureIsLive:r}=e;this.store.updateState({swapsState:{...t,swapsFeatureIsLive:r}})}setSwapsFeatureFlags(e){const{swapsState:t}=this.store.getState();this.store.updateState({swapsState:{...t,swapsFeatureFlags:e}})}resetPostFetchState(){const{swapsState:e}=this.store.getState();this.store.updateState({swapsState:{...x,tokens:e.tokens,fetchParams:e.fetchParams,swapsFeatureIsLive:e.swapsFeatureIsLive,swapsQuoteRefreshTime:e.swapsQuoteRefreshTime,swapsQuotePrefetchingRefreshTime:e.swapsQuotePrefetchingRefreshTime,swapsFeatureFlags:e.swapsFeatureFlags}}),clearTimeout(this.pollingTimeout)}resetSwapsState(){const{swapsState:e}=this.store.getState();this.store.updateState({swapsState:{...x,swapsQuoteRefreshTime:e.swapsQuoteRefreshTime,swapsQuotePrefetchingRefreshTime:e.swapsQuotePrefetchingRefreshTime,swapsFeatureFlags:e.swapsFeatureFlags}}),clearTimeout(this.pollingTimeout)}async _findTopQuoteAndCalculateSavings(e={}){const{contractExchangeRates:t}=this.getTokenRatesState(),{swapsState:{customGasPrice:r,customMaxPriorityFeePerGas:n}}=this.store.getState(),i=this._getCurrentChainId();if(!Object.keys(e).length)return{};const o=(0,a.cloneDeep)(e),{gasFeeEstimates:u,gasEstimateType:c}=await this._getEIP1559GasFeeEstimates();let h="0x0";if(c===f.GasEstimateTypes.feeMarket){const{high:{suggestedMaxPriorityFeePerGas:e},estimatedBaseFee:t}=u,r=(0,l.decGWEIToHexWEI)(e),i=new k.Numeric(t,10,E.EtherDenomination.GWEI).toDenomination(E.EtherDenomination.WEI);h=new k.Numeric(n||r,16).add(i).round(6).toString()}else c===f.GasEstimateTypes.legacy?h=r||(0,l.decGWEIToHexWEI)(u.high):c===f.GasEstimateTypes.ethGasPrice&&(h=r||(0,l.decGWEIToHexWEI)(u.gasPrice));let d=null,p=null;Object.values(o).forEach((e=>{const{aggregator:r,approvalNeeded:n,averageGas:o,destinationAmount:a=0,destinationToken:u,destinationTokenInfo:c,gasEstimateWithRefund:f,sourceAmount:g,sourceToken:y,trade:b,fee:w,multiLayerL1TradeFeeTotal:_}=e,S=(f?new s.default(f,16):new s.default(o||N,10)).plus((null==n?void 0:n.gas)||"0x0",16).toString(16);let A=(0,T.calcGasTotal)(S,h);null!==_&&(A=(0,l.sumHexes)(A||"0x0",_||"0x0"));const I=new k.Numeric(A,16,E.EtherDenomination.WEI).add(new k.Numeric(b.value,16,E.EtherDenomination.WEI)),x=I.toDenomination(E.EtherDenomination.ETH).round(6).value,P=(0,m.isSwapsDefaultTokenAddress)(y,i)?I.minus(new k.Numeric(g,10)).toDenomination(E.EtherDenomination.ETH).round(6).value:x,B=(0,T.calcTokenAmount)(a,c.decimals),O=new s.default(100,10).minus(w,10).div(100),C=B.div(O).minus(B),z=t[Object.keys(t).find((e=>(0,v.isEqualCaseInsensitive)(e,u)))],R=z||1,L=B.times(R.toString(10),10),M=(0,m.isSwapsDefaultTokenAddress)(u,i)?1:z,j=M===undefined?L:L.minus(P,10);e.ethFee=P.toString(10),M!==undefined&&(e.ethValueOfTokens=L.toString(10),e.overallValueOfQuote=j.toString(10),e.metaMaskFeeInEth=C.times(M.toString(10)).toString(10)),(null===p||j.gt(p))&&(d=r,p=j)}));let g=null;if((0,m.isSwapsDefaultTokenAddress)(o[d].destinationToken,i)||Boolean(t[Object.keys(t).find((e=>{var t;return(0,v.isEqualCaseInsensitive)(e,null===(t=o[d])||void 0===t?void 0:t.destinationToken)}))])){const e=o[d];g={};const{ethFee:t,metaMaskFeeInEth:r,ethValueOfTokens:n}=P(Object.values(o));g.performance=new s.default(e.ethValueOfTokens,10).minus(n,10),g.fee=new s.default(t).minus(e.ethFee,10),g.metaMaskFee=e.metaMaskFeeInEth,g.total=g.performance.plus(g.fee).minus(g.metaMaskFee).toString(10),g.performance=g.performance.toString(10),g.fee=g.fee.toString(10),g.medianMetaMaskFee=r,o[d].isBestQuote=!0,o[d].savings=g}return[d,o]}async _getERC20Allowance(e,t,r){const n=new i.Contract(e,u.default,this.ethersProvider);return await n.allowance(t,h.SWAPS_CHAINID_CONTRACT_ADDRESS_MAP[r])}};r.utils={getMedianEthValueQuote:P,meansOfQuotesFeesAndValue:B}}}},{package:"$root$",file:"app/scripts/controllers/swaps.js"}],[260,{"../util/byteArray":277,"../util/merkleize":278,"../view/bitArray":286,"../viewDU/bitArray":294,"./composite":267,"@chainsafe/persistent-merkle-tree":242},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.BitArrayType=void 0;const n=e("@chainsafe/persistent-merkle-tree"),i=e("../util/byteArray"),s=e("../util/merkleize"),o=e("./composite"),a=e("../view/bitArray"),u=e("../viewDU/bitArray");class c extends o.CompositeType{constructor(){super(...arguments),this.isViewMutable=!0}getView(e){return new a.BitArrayTreeView(this,e)}getViewDU(e){return new u.BitArrayTreeViewDU(this,e)}commitView(e){return e.node}commitViewDU(e){return e.commit(),e.node}cacheOfViewDU(e){return e.cache}getRoots(e){return s.splitIntoRootChunks(e.uint8Array)}getPropertyGindex(){return null}getPropertyType(){throw Error("Must only request BitArray complete data")}getIndexProperty(){throw Error("Must only request BitArray complete data")}tree_fromProofNode(e){return{node:e,done:!0}}tree_getLeafGindices(e,t){const r=this.tree_getByteLen(t),i=Math.ceil(r/32),s=n.concatGindices([e,n.toGindex(this.depth,BigInt(0))]),a=new Array(i);for(let e=0,t=s;e<i;e++,t++)a[e]=t;return this.isList&&a.push(n.concatGindices([e,o.LENGTH_GINDEX])),a}fromJson(e){const t=i.fromHexString(e),r=new DataView(t.buffer,t.byteOffset,t.byteLength);return this.value_deserializeFromBytes({uint8Array:t,dataView:r},0,t.length)}toJson(e){return i.toHexString(this.serialize(e))}clone(e){return e.clone()}equals(e,t){return e.bitLen===t.bitLen&&i.byteArrayEquals(e.uint8Array,t.uint8Array)}}r.BitArrayType=c}}},{package:"eth-lattice-keyring>@ethereumjs/tx>@chainsafe/ssz",file:"node_modules/@chainsafe/ssz/lib/type/bitArray.js"}],[261,{"../util/merkleize":278,"../util/named":279,"../value/bitArray":282,"./arrayBasic":257,"./bitArray":260,"@chainsafe/persistent-merkle-tree":242},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.BitListType=void 0;const n=e("@chainsafe/persistent-merkle-tree"),i=e("../util/merkleize"),s=e("../util/named"),o=e("./arrayBasic"),a=e("../value/bitArray"),u=e("./bitArray");class c extends u.BitArrayType{constructor(e,t){if(super(),this.limitBits=e,this.fixedSize=null,this.minSize=1,this.isList=!0,0===e)throw Error("List limit must be > 0");this.typeName=t?.typeName??`BitList[${e}]`,this.maxChunkCount=Math.ceil(this.limitBits/8/32),this.chunkDepth=i.maxChunksToDepth(this.maxChunkCount),this.depth=1+this.chunkDepth,this.maxSize=Math.ceil(e/8)+1}static named(e,t){return new(s.namedClass(c,t.typeName))(e,t)}defaultValue(){return a.BitArray.fromBitLen(0)}value_serializedSize(e){return l(e.bitLen)}value_serializeToBytes(e,t,r){return e.uint8Array.set(r.uint8Array,t),h(e.uint8Array,t,r.bitLen)}value_deserializeFromBytes(e,t,r){const{uint8Array:n,bitLen:i}=this.deserializeUint8ArrayBitListFromBytes(e.uint8Array,t,r);return new a.BitArray(n,i)}tree_serializedSize(e){return l(o.getLengthFromRootNode(e))}tree_serializeToBytes(e,t,r){const i=o.getChunksNodeFromRootNode(r),s=o.getLengthFromRootNode(r),a=Math.ceil(s/8),u=Math.ceil(a/32),c=n.getNodesAtDepth(i,this.chunkDepth,0,u);return n.packedNodeRootsToBytes(e.dataView,t,a,c),h(e.uint8Array,t,s)}tree_deserializeFromBytes(e,t,r){const{uint8Array:i,bitLen:s}=this.deserializeUint8ArrayBitListFromBytes(e.uint8Array,t,r),a=new DataView(i.buffer,i.byteOffset,i.byteLength),u=n.packedRootsBytesToNode(this.chunkDepth,a,0,i.length);return o.addLengthNode(u,s)}tree_getByteLen(e){if(!e)throw new Error("BitListType requires a node to get leaves");return Math.ceil(o.getLengthFromRootNode(e)/8)}hashTreeRoot(e){return i.mixInLength(super.hashTreeRoot(e),e.bitLen)}deserializeUint8ArrayBitListFromBytes(e,t,r){const{uint8Array:n,bitLen:i}=function(e,t,r){if(r>e.length)throw Error(`BitList attempting to read byte ${r} of data length ${e.length}`);const n=e[r-1],i=r-t;if(0===n)throw new Error("Invalid deserialized bitlist, padding bit required");if(1===n){return{uint8Array:Uint8Array.prototype.slice.call(e,t,r-1),bitLen:8*(i-1)}}const s=Uint8Array.prototype.slice.call(e,t,r),o=n.toString(2).length-1,a=8*(i-1)+o,u=255>>8-o;return s[i-1]&=u,{uint8Array:s,bitLen:a}}(e,t,r);if(i>this.limitBits)throw Error(`bitLen over limit ${i} > ${this.limitBits}`);return{uint8Array:n,bitLen:i}}}function l(e){const t=Math.ceil(e/8);return e%8==0?t+1:t}function h(e,t,r){const n=t+Math.ceil(r/8);return r%8==0?(e[n]=1,n+1):(e[n-1]|=1<<r%8,n)}r.BitListType=c}}},{package:"eth-lattice-keyring>@ethereumjs/tx>@chainsafe/ssz",file:"node_modules/@chainsafe/ssz/lib/type/bitList.js"}],[262,{"../util/merkleize":278,"../util/named":279,"../value/bitArray":282,"./bitArray":260,"@chainsafe/persistent-merkle-tree":242},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.BitVectorType=void 0;const n=e("@chainsafe/persistent-merkle-tree"),i=e("../util/merkleize"),s=e("../util/named"),o=e("../value/bitArray"),a=e("./bitArray");class u extends a.BitArrayType{constructor(e,t){if(super(),this.lengthBits=e,this.isList=!1,0===e)throw Error("Vector length must be > 0");this.typeName=t?.typeName??`BitVector[${e}]`,this.chunkCount=Math.ceil(this.lengthBits/8/32),this.maxChunkCount=this.chunkCount,this.depth=i.maxChunksToDepth(this.chunkCount),this.fixedSize=Math.ceil(this.lengthBits/8),this.minSize=this.fixedSize,this.maxSize=this.fixedSize,this.zeroBitsMask=e%8==0?0:255&255<<e%8}static named(e,t){return new(s.namedClass(u,t.typeName))(e,t)}defaultValue(){return o.BitArray.fromBitLen(this.lengthBits)}value_serializedSize(){return this.fixedSize}value_serializeToBytes(e,t,r){return e.uint8Array.set(r.uint8Array,t),t+this.fixedSize}value_deserializeFromBytes(e,t,r){return this.assertValidLength(e.uint8Array,t,r),new o.BitArray(Uint8Array.prototype.slice.call(e.uint8Array,t,r),this.lengthBits)}tree_serializedSize(){return this.fixedSize}tree_serializeToBytes(e,t,r){const i=n.getNodesAtDepth(r,this.depth,0,this.chunkCount);return n.packedNodeRootsToBytes(e.dataView,t,this.fixedSize,i),t+this.fixedSize}tree_deserializeFromBytes(e,t,r){return this.assertValidLength(e.uint8Array,t,r),n.packedRootsBytesToNode(this.depth,e.dataView,t,r)}tree_getByteLen(){return this.fixedSize}assertValidLength(e,t,r){const n=r-t;if(r-t!==this.fixedSize)throw Error(`Invalid BitVector size ${n} != ${this.fixedSize}`);if(this.zeroBitsMask>0&&(e[r-1]&this.zeroBitsMask)>0)throw Error("BitVector: nonzero bits past length")}}r.BitVectorType=u}}},{package:"eth-lattice-keyring>@ethereumjs/tx>@chainsafe/ssz",file:"node_modules/@chainsafe/ssz/lib/type/bitVector.js"}],[263,{"../util/named":279,"./basic":259,"@chainsafe/persistent-merkle-tree":242},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.BooleanType=void 0;const n=e("@chainsafe/persistent-merkle-tree"),i=e("../util/named"),s=e("./basic");class o extends s.BasicType{constructor(e){super(),this.byteLength=1,this.itemsPerChunk=32,this.fixedSize=1,this.minSize=1,this.maxSize=1,this.typeName=e?.typeName??"boolean"}static named(e){return new(i.namedClass(o,e.typeName))(e)}defaultValue(){return!1}value_serializeToBytes(e,t,r){return e.uint8Array[t]=r?1:0,t+1}value_deserializeFromBytes(e,t,r){switch(this.assertValidSize(r-t),e.uint8Array[t]){case 1:return!0;case 0:return!1;default:throw new Error(`Boolean: invalid value: ${e.uint8Array[t]}`)}}tree_serializeToBytes(e,t,r){return e.uint8Array[t]=r.getUint(4,0),t+1}tree_deserializeFromBytes(e,t,r){this.assertValidSize(r-t);const i=e.uint8Array[t];if(i>1)throw Error(`Boolean: invalid value ${i}`);return n.LeafNode.fromUint32(i)}tree_getFromNode(e){return 1===e.getUint(4,0)}tree_setToNode(e,t){e.setUint(4,0,t?1:0)}tree_getFromPackedNode(e,t){const r=t%this.itemsPerChunk;return 0!==e.getUint(1,r)}tree_setToPackedNode(e,t,r){const n=t%this.itemsPerChunk;e.setUint(1,n,r?1:0)}fromJson(e){if("boolean"!=typeof e)throw Error(`JSON invalid type ${typeof e} expected boolean`);return e}toJson(e){return e}}r.BooleanType=o}}},{package:"eth-lattice-keyring>@ethereumjs/tx>@chainsafe/ssz",file:"node_modules/@chainsafe/ssz/lib/type/boolean.js"}],[264,{"../util/byteArray":277,"../util/merkleize":278,"./composite":267,"@chainsafe/persistent-merkle-tree":242},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.ByteArrayType=void 0;const n=e("@chainsafe/persistent-merkle-tree"),i=e("../util/byteArray"),s=e("../util/merkleize"),o=e("./composite");class a extends o.CompositeType{constructor(){super(...arguments),this.isViewMutable=!1}defaultValue(){return new Uint8Array(this.minSize)}getView(e){return this.getViewDU(e.rootNode)}getViewDU(e){return this.tree_toValue(e)}commitView(e){return this.commitViewDU(e)}commitViewDU(e){const t=new Uint8Array(this.value_serializedSize(e)),r=new DataView(t.buffer,t.byteOffset,t.byteLength);return this.value_serializeToBytes({uint8Array:t,dataView:r},0,e),this.tree_deserializeFromBytes({uint8Array:t,dataView:r},0,t.length)}cacheOfViewDU(){}toView(e){return e}toViewDU(e){return e}value_serializeToBytes(e,t,r){return e.uint8Array.set(r,t),t+r.length}value_deserializeFromBytes(e,t,r){return this.assertValidSize(r-t),Uint8Array.prototype.slice.call(e.uint8Array,t,r)}getRoots(e){return s.splitIntoRootChunks(e)}getPropertyGindex(){return null}getPropertyType(){throw Error("Must only request ByteArray complete data")}getIndexProperty(){throw Error("Must only request ByteArray complete data")}tree_fromProofNode(e){return{node:e,done:!0}}tree_getLeafGindices(e,t){const r=this.tree_getByteLen(t),i=Math.ceil(r/32),s=n.concatGindices([e,n.toGindex(this.depth,BigInt(0))]),a=new Array(i);for(let e=0,t=s;e<i;e++,t++)a[