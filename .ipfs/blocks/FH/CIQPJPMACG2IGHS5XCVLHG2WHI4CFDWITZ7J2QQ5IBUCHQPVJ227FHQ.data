]=o[s]);for(var c=0,u=e.transpileOptionValueCompilerOptions;c<u.length;c++){var l=u[c];a[l.name]=l.transpileOptionValue}a.suppressOutputPathCheck=!0,a.allowNonTsExtensions=!0;var _=r.fileName||(r.compilerOptions&&r.compilerOptions.jsx?"module.tsx":"module.ts"),d=e.createSourceFile(_,t,a.target);r.moduleName&&(d.moduleName=r.moduleName),r.renamedDependencies&&(d.renamedDependencies=e.createMapFromTemplate(r.renamedDependencies));var p,f,m=e.getNewLineCharacter(a),g={getSourceFile:function(t){return t===e.normalizePath(_)?d:void 0},writeFile:function(t,r){e.fileExtensionIs(t,".map")?(e.Debug.assertEqual(f,void 0,"Unexpected multiple source map outputs, file:",t),f=r):(e.Debug.assertEqual(p,void 0,"Unexpected multiple outputs, file:",t),p=r)},getDefaultLibFileName:function(){return"lib.d.ts"},useCaseSensitiveFileNames:function(){return!1},getCanonicalFileName:function(e){return e},getCurrentDirectory:function(){return""},getNewLine:function(){return m},fileExists:function(e){return e===_},readFile:function(){return""},directoryExists:function(){return!0},getDirectories:function(){return[]}},y=e.createProgram([_],a,g);return r.reportDiagnostics&&(e.addRange(i,y.getSyntacticDiagnostics(d)),e.addRange(i,y.getOptionsDiagnostics())),y.emit(void 0,void 0,void 0,void 0,r.transformers),void 0===p?e.Debug.fail("Output generation failed"):{outputText:p,diagnostics:i,sourceMapText:f}}var r;function n(t,n){r=r||e.filter(e.optionDeclarations,(function(t){return"object"===f(t.type)&&!e.forEachEntry(t.type,(function(e){return"number"!=typeof e}))})),t=e.cloneCompilerOptions(t);for(var i=function(r){if(!e.hasProperty(t,r.name))return"continue";var i=t[r.name];e.isString(i)?t[r.name]=e.parseCustomTypeOption(r,i,n):e.forEachEntry(r.type,(function(e){return e===i}))||n.push(e.createCompilerDiagnosticForInvalidCustomType(r))},a=0,o=r;a<o.length;a++){i(o[a])}return t}e.transpileModule=t,e.transpile=function(r,n,i,a,o){var s=t(r,{compilerOptions:n,fileName:i,reportDiagnostics:!!a,moduleName:o});return e.addRange(a,s.diagnostics),s.outputText},e.fixupCompilerOptions=n}(s||(s={})),function(e){!function(t){!function(e){e[e.FormatDocument=0]="FormatDocument",e[e.FormatSelection=1]="FormatSelection",e[e.FormatOnEnter=2]="FormatOnEnter",e[e.FormatOnSemicolon=3]="FormatOnSemicolon",e[e.FormatOnOpeningCurlyBrace=4]="FormatOnOpeningCurlyBrace",e[e.FormatOnClosingCurlyBrace=5]="FormatOnClosingCurlyBrace"}(t.FormattingRequestKind||(t.FormattingRequestKind={}));var r=function(){function t(e,t,r){this.sourceFile=e,this.formattingRequestKind=t,this.options=r}return t.prototype.updateContext=function(t,r,n,i,a){this.currentTokenSpan=e.Debug.assertDefined(t),this.currentTokenParent=e.Debug.assertDefined(r),this.nextTokenSpan=e.Debug.assertDefined(n),this.nextTokenParent=e.Debug.assertDefined(i),this.contextNode=e.Debug.assertDefined(a),this.contextNodeAllOnSameLine=void 0,this.nextNodeAllOnSameLine=void 0,this.tokensAreOnSameLine=void 0,this.contextNodeBlockIsOnOneLine=void 0,this.nextNodeBlockIsOnOneLine=void 0},t.prototype.ContextNodeAllOnSameLine=function(){return void 0===this.contextNodeAllOnSameLine&&(this.contextNodeAllOnSameLine=this.NodeIsOnOneLine(this.contextNode)),this.contextNodeAllOnSameLine},t.prototype.NextNodeAllOnSameLine=function(){return void 0===this.nextNodeAllOnSameLine&&(this.nextNodeAllOnSameLine=this.NodeIsOnOneLine(this.nextTokenParent)),this.nextNodeAllOnSameLine},t.prototype.TokensAreOnSameLine=function(){if(void 0===this.tokensAreOnSameLine){var e=this.sourceFile.getLineAndCharacterOfPosition(this.currentTokenSpan.pos).line,t=this.sourceFile.getLineAndCharacterOfPosition(this.nextTokenSpan.pos).line;this.tokensAreOnSameLine=e===t}return this.tokensAreOnSameLine},t.prototype.ContextNodeBlockIsOnOneLine=function(){return void 0===this.contextNodeBlockIsOnOneLine&&(this.contextNodeBlockIsOnOneLine=this.BlockIsOnOneLine(this.contextNode)),this.contextNodeBlockIsOnOneLine},t.prototype.NextNodeBlockIsOnOneLine=function(){return void 0===this.nextNodeBlockIsOnOneLine&&(this.nextNodeBlockIsOnOneLine=this.BlockIsOnOneLine(this.nextTokenParent)),this.nextNodeBlockIsOnOneLine},t.prototype.NodeIsOnOneLine=function(e){return this.sourceFile.getLineAndCharacterOfPosition(e.getStart(this.sourceFile)).line===this.sourceFile.getLineAndCharacterOfPosition(e.getEnd()).line},t.prototype.BlockIsOnOneLine=function(t){var r=e.findChildOfKind(t,18,this.sourceFile),n=e.findChildOfKind(t,19,this.sourceFile);return!(!r||!n)&&this.sourceFile.getLineAndCharacterOfPosition(r.getEnd()).line===this.sourceFile.getLineAndCharacterOfPosition(n.getStart(this.sourceFile)).line},t}();t.FormattingContext=r}(e.formatting||(e.formatting={}))}(s||(s={})),function(e){!function(t){var r,n=e.createScanner(99,!1,0),i=e.createScanner(99,!1,1);!function(e){e[e.Scan=0]="Scan",e[e.RescanGreaterThanToken=1]="RescanGreaterThanToken",e[e.RescanSlashToken=2]="RescanSlashToken",e[e.RescanTemplateToken=3]="RescanTemplateToken",e[e.RescanJsxIdentifier=4]="RescanJsxIdentifier",e[e.RescanJsxText=5]="RescanJsxText"}(r||(r={})),t.getFormattingScanner=function(r,a,o,s,c){var u=1===a?i:n;u.setText(r),u.setTextPos(o);var l,_,d,p,f,m=!0,g=c({advance:function(){f=void 0,u.getStartPos()!==o?m=!!_&&4===e.last(_).kind:u.scan();l=void 0,_=void 0;var t=u.getStartPos();for(;t<s;){var r=u.getToken();if(!e.isTrivia(r))break;u.scan();var n={pos:t,end:u.getStartPos(),kind:r};t=u.getStartPos(),l=e.append(l,n)}d=u.getStartPos()},readTokenInfo:function(r){e.Debug.assert(y());var n=function(e){switch(e.kind){case 33:case 70:case 71:case 49:case 48:return!0}return!1}(r)?1:(i=r,13===i.kind?2:function(e){return 16===e.kind||17===e.kind}(r)?3:function(t){if(t.parent)switch(t.parent.kind){case 271:case 266:case 267:case 265:return e.isKeyword(t.kind)||75===t.kind}return!1}(r)?4:function(e){return 11===e.kind}(r)?5:0);var i;if(f&&n===p)return v(f,r);u.getStartPos()!==d&&(e.Debug.assert(void 0!==f),u.setTextPos(d),u.scan());var a=function(t,r){var n=u.getToken();switch(p=0,r){case 1:if(31===n){p=1;var i=u.reScanGreaterToken();return e.Debug.assert(t.kind===i),i}break;case 2:if(43===(a=n)||67===a){p=2;i=u.reScanSlashToken();return e.Debug.assert(t.kind===i),i}break;case 3:if(19===n)return p=3,u.reScanTemplateToken();break;case 4:return p=4,u.scanJsxIdentifier();case 5:return p=5,u.reScanJsxToken();case 0:break;default:e.Debug.assertNever(r)}var a;return n}(r,n),o=t.createTextRangeWithKind(u.getStartPos(),u.getTextPos(),a);_&&(_=void 0);for(;u.getStartPos()<s&&(a=u.scan(),e.isTrivia(a));){var c=t.createTextRangeWithKind(u.getStartPos(),u.getTextPos(),a);if(_||(_=[]),_.push(c),4===a){u.scan();break}}return v(f={leadingTrivia:l,trailingTrivia:_,token:o},r)},readEOFTokenRange:function(){return e.Debug.assert(h()),t.createTextRangeWithKind(u.getStartPos(),u.getTextPos(),1)},isOnToken:y,isOnEOF:h,getCurrentLeadingTrivia:function(){return l},lastTrailingTriviaWasNewLine:function(){return m},skipToEndOf:function(e){u.setTextPos(e.end),d=u.getStartPos(),p=void 0,f=void 0,m=!1,l=void 0,_=void 0}});return f=void 0,u.setText(void 0),g;function y(){var t=f?f.token.kind:u.getToken();return(f?f.token.pos:u.getStartPos())<s&&1!==t&&!e.isTrivia(t)}function h(){return 1===(f?f.token.kind:u.getToken())}function v(t,r){return e.isToken(r)&&t.token.kind!==r.kind&&(t.token.kind=r.kind),t}}}(e.formatting||(e.formatting={}))}(s||(s={})),function(e){!function(t){t.anyContext=e.emptyArray,function(e){e[e.StopProcessingSpaceActions=1]="StopProcessingSpaceActions",e[e.StopProcessingTokenActions=2]="StopProcessingTokenActions",e[e.InsertSpace=4]="InsertSpace",e[e.InsertNewLine=8]="InsertNewLine",e[e.DeleteSpace=16]="DeleteSpace",e[e.DeleteToken=32]="DeleteToken",e[e.InsertTrailingSemicolon=64]="InsertTrailingSemicolon",e[e.StopAction=3]="StopAction",e[e.ModifySpaceAction=28]="ModifySpaceAction",e[e.ModifyTokenAction=96]="ModifyTokenAction"}(t.RuleAction||(t.RuleAction={})),function(e){e[e.None=0]="None",e[e.CanDeleteNewLines=1]="CanDeleteNewLines"}(t.RuleFlags||(t.RuleFlags={}))}(e.formatting||(e.formatting={}))}(s||(s={})),function(e){!function(r){function n(e,t,r,n,i,o){return void 0===o&&(o=0),{leftTokenRange:a(t),rightTokenRange:a(r),rule:{debugName:e,context:n,action:i,flags:o}}}function i(e){return{tokens:e,isSpecific:!0}}function a(t){return"number"==typeof t?i([t]):e.isArray(t)?i(t):t}function o(t,r,n){void 0===n&&(n=[]);for(var a=[],o=t;o<=r;o++)e.contains(n,o)||a.push(o);return i(a)}function s(e,t){return function(r){return r.options&&r.options[e]===t}}function c(e){return function(t){return t.options&&t.options.hasOwnProperty(e)&&!!t.options[e]}}function u(e){return function(t){return t.options&&t.options.hasOwnProperty(e)&&!t.options[e]}}function l(e){return function(t){return!t.options||!t.options.hasOwnProperty(e)||!t.options[e]}}function _(e){return function(t){return!t.options||!t.options.hasOwnProperty(e)||!t.options[e]||t.TokensAreOnSameLine()}}function d(e){return function(t){return!t.options||!t.options.hasOwnProperty(e)||!!t.options[e]}}function p(e){return 229===e.contextNode.kind}function f(e){return!p(e)}function m(e){switch(e.contextNode.kind){case 208:case 209:case 179:case 216:case 261:case 257:case 167:case 177:case 178:return!0;case 190:case 246:case 252:case 241:case 155:case 282:case 158:case 157:return 62===e.currentTokenSpan.kind||62===e.nextTokenSpan.kind;case 230:case 154:return 96===e.currentTokenSpan.kind||96===e.nextTokenSpan.kind||62===e.currentTokenSpan.kind||62===e.nextTokenSpan.kind;case 231:return 151===e.currentTokenSpan.kind||151===e.nextTokenSpan.kind}return!1}function g(e){return!m(e)}function y(e){return!h(e)}function h(t){var r=t.contextNode.kind;return 158===r||157===r||155===r||241===r||e.isFunctionLikeKind(r)}function v(e){return 209===e.contextNode.kind||179===e.contextNode.kind}function b(e){return e.TokensAreOnSameLine()||E(e)}function x(e){return 188===e.contextNode.kind||185===e.contextNode.kind||function(e){return T(e)&&(e.ContextNodeAllOnSameLine()||e.ContextNodeBlockIsOnOneLine())}(e)}function D(e){return E(e)&&!(e.NextNodeAllOnSameLine()||e.NextNodeBlockIsOnOneLine())}function S(e){return T(e)&&!(e.ContextNodeAllOnSameLine()||e.ContextNodeBlockIsOnOneLine())}function T(e){return C(e.contextNode)}function E(e){return C(e.nextTokenParent)}function C(e){if(P(e))return!0;switch(e.kind){case 222:case 250:case 192:case 249:return!0}return!1}function k(e){switch(e.contextNode.kind){case 243:case 160:case 159:case 162:case 163:case 164:case 200:case 161:case 201:case 245:return!0}return!1}function N(e){return!k(e)}function A(e){return 243===e.contextNode.kind||200===e.contextNode.kind}function F(e){return P(e.contextNode)}function P(e){switch(e.kind){case 244:case 213:case 245:case 247:case 172:case 248:case 259:case 260:case 253:case 256:return!0}return!1}function w(e){switch(e.currentTokenParent.kind){case 244:case 248:case 247:case 278:case 249:case 236:return!0;case 222:var t=e.currentTokenParent.parent;if(!t||201!==t.kind&&200!==t.kind)return!0}return!1}function I(e){switch(e.contextNode.kind){case 226:case 236:case 229:case 230:case 231:case 228:case 239:case 227:case 235:case 278:return!0;default:return!1}}function O(e){return 192===e.contextNode.kind}function M(e){return function(e){return 195===e.contextNode.kind}(e)||function(e){return 196===e.contextNode.kind}(e)}function L(e){return 27!==e.currentTokenSpan.kind}function R(e){return 23!==e.nextTokenSpan.kind}function B(e){return 201===e.contextNode.kind}function j(e){return 187===e.contextNode.kind}function K(e){return e.TokensAreOnSameLine()&&11!==e.contextNode.kind}function J(e){return 264!==e.contextNode.kind&&268!==e.contextNode.kind}function z(e){return 274===e.contextNode.kind||273===e.contextNode.kind}function U(e){return 271===e.nextTokenParent.kind}function V(e){return 271===e.contextNode.kind}function q(e){return 265===e.contextNode.kind}function W(e){return!k(e)&&!E(e)}function G(e){return e.TokensAreOnSameLine()&&!!e.contextNode.decorators&&H(e.currentTokenParent)&&!H(e.nextTokenParent)}function H(t){for(;e.isExpressionNode(t);)t=t.parent;return 156===t.kind}function Y(e){return 242===e.currentTokenParent.kind&&e.currentTokenParent.getStart(e.sourceFile)===e.currentTokenSpan.pos}function X(e){return 2!==e.formattingRequestKind}function Q(e){return 248===e.contextNode.kind}function $(e){return 172===e.contextNode.kind}function Z(e){return 165===e.contextNode.kind}function ee(e,t){if(29!==e.kind&&31!==e.kind)return!1;switch(t.kind){case 168:case 198:case 246:case 244:case 213:case 245:case 243:case 200:case 201:case 160:case 159:case 164:case 165:case 195:case 196:case 215:return!0;default:return!1}}function te(e){return ee(e.currentTokenSpan,e.currentTokenParent)||ee(e.nextTokenSpan,e.nextTokenParent)}function re(e){return 198===e.contextNode.kind}function ne(e){return 109===e.currentTokenSpan.kind&&204===e.currentTokenParent.kind}function ie(e){return 211===e.contextNode.kind&&void 0!==e.contextNode.expression}function ae(e){return 217===e.contextNode.kind}function oe(t){var r=t.nextTokenSpan.kind,n=t.nextTokenSpan.pos;if(e.isTrivia(r)){var i=t.nextTokenParent===t.currentTokenParent?e.findNextToken(t.currentTokenParent,e.findAncestor(t.currentTokenParent,(function(e){return!e.parent})),t.sourceFile):t.nextTokenParent.getFirstToken(t.sourceFile);if(!i)return!0;r=i.kind,n=i.getStart(t.sourceFile)}return t.sourceFile.getLineAndCharacterOfPosition(t.currentTokenSpan.pos).line===t.sourceFile.getLineAndCharacterOfPosition(n).line?19===r||1===r:221!==r&&26!==r&&(245===t.contextNode.kind||246===t.contextNode.kind?!e.isPropertySignature(t.currentTokenParent)||!!t.currentTokenParent.type||20!==r:e.isPropertyDeclaration(t.currentTokenParent)?!t.currentTokenParent.initializer:229!==t.currentTokenParent.kind&&223!==t.currentTokenParent.kind&&221!==t.currentTokenParent.kind&&22!==r&&20!==r&&39!==r&&40!==r&&43!==r&&13!==r&&27!==r&&210!==r&&15!==r&&14!==r&&24!==r)}function se(t){var r=e.findAncestor(t.currentTokenParent,(function(r){return r.end!==t.currentTokenSpan.end?"quit":e.syntaxMayBeASICandidate(r.kind)}));return!!r&&e.isASICandidate(r,t.sourceFile)}r.getAllRules=function(){for(var a=[],T=0;T<=151;T++)1!==T&&a.push(T);function C(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return{tokens:a.filter((function(t){return!e.some((function(e){return e===t}))})),isSpecific:!1}}var P={tokens:a,isSpecific:!1},H=i(t(a,[3])),ee=i(t(a,[1])),ce=o(76,151),ue=o(29,74),le=[96,97,151,122,132],_e=t([75],e.typeKeywords),de=H,pe=i([75,3,79,88,95]),fe=i([21,3,85,106,91,86]),me=[n("IgnoreBeforeComment",P,[2,3],r.anyContext,1),n("IgnoreAfterLineComment",2,P,r.anyContext,1),n("NotSpaceBeforeColon",P,58,[K,g,y],16),n("SpaceAfterColon",58,P,[K,g],4),n("NoSpaceBeforeQuestionMark",P,57,[K,g],16),n("SpaceAfterQuestionMarkInConditionalOperator",57,P,[K,v],4),n("NoSpaceAfterQuestionMark",57,P,[K],16),n("NoSpaceBeforeDot",P,[24,28],[K],16),n("NoSpaceAfterDot",[24,28],P,[K],16),n("NoSpaceBetweenImportParenInImportType",95,20,[K,j],16),n("NoSpaceAfterUnaryPrefixOperator",[45,46,54,53],[8,9,75,20,22,18,103,98],[K,g],16),n("NoSpaceAfterUnaryPreincrementOperator",45,[75,20,103,98],[K],16),n("NoSpaceAfterUnaryPredecrementOperator",46,[75,20,103,98],[K],16),n("NoSpaceBeforeUnaryPostincrementOperator",[75,21,23,98],45,[K],16),n("NoSpaceBeforeUnaryPostdecrementOperator",[75,21,23,98],46,[K],16),n("SpaceAfterPostincrementWhenFollowedByAdd",45,39,[K,m],4),n("SpaceAfterAddWhenFollowedByUnaryPlus",39,39,[K,m],4),n("SpaceAfterAddWhenFollowedByPreincrement",39,45,[K,m],4),n("SpaceAfterPostdecrementWhenFollowedBySubtract",46,40,[K,m],4),n("SpaceAfterSubtractWhenFollowedByUnaryMinus",40,40,[K,m],4),n("SpaceAfterSubtractWhenFollowedByPredecrement",40,46,[K,m],4),n("NoSpaceAfterCloseBrace",19,[27,26],[K],16),n("NewLineBeforeCloseBraceInBlockContext",H,19,[S],8),n("SpaceAfterCloseBrace",19,C(21),[K,w],4),n("SpaceBetweenCloseBraceAndElse",19,86,[K],4),n("SpaceBetweenCloseBraceAndWhile",19,110,[K],4),n("NoSpaceBetweenEmptyBraceBrackets",18,19,[K,O],16),n("SpaceAfterConditionalClosingParen",21,22,[I],4),n("NoSpaceBetweenFunctionKeywordAndStar",93,41,[A],16),n("SpaceAfterStarInGeneratorDeclaration",41,75,[A],4),n("SpaceAfterFunctionInFuncDecl",93,P,[k],4),n("NewLineAfterOpenBraceInBlockContext",18,P,[S],8),n("SpaceAfterGetSetInMember",[130,141],75,[k],4),n("NoSpaceBetweenYieldKeywordAndStar",120,41,[K,ie],16),n("SpaceBetweenYieldOrYieldStarAndOperand",[120,41],P,[K,ie],4),n("NoSpaceBetweenReturnAndSemicolon",100,26,[K],16),n("SpaceAfterCertainKeywords",[108,104,98,84,100,107,126],P,[K],4),n("SpaceAfterLetConstInVariableDeclaration",[114,80],P,[K,Y],4),n("NoSpaceBeforeOpenParenInFuncCall",P,20,[K,M,L],16),n("SpaceBeforeBinaryKeywordOperator",P,le,[K,m],4),n("SpaceAfterBinaryKeywordOperator",le,P,[K,m],4),n("SpaceAfterVoidOperator",109,P,[K,ne],4),n("SpaceBetweenAsyncAndOpenParen",125,20,[B,K],4),n("SpaceBetweenAsyncAndFunctionKeyword",125,93,[K],4),n("NoSpaceBetweenTagAndTemplateString",[75,21],[14,15],[K],16),n("SpaceBeforeJsxAttribute",P,75,[U,K],4),n("SpaceBeforeSlashInJsxOpeningElement",P,43,[q,K],4),n("NoSpaceBeforeGreaterThanTokenInJsxOpeningElement",43,31,[q,K],16),n("NoSpaceBeforeEqualInJsxAttribute",P,62,[V,K],16),n("NoSpaceAfterEqualInJsxAttribute",62,P,[V,K],16),n("NoSpaceAfterModuleImport",[134,138],20,[K],16),n("SpaceAfterCertainTypeScriptKeywords",[121,79,129,83,87,88,89,130,112,95,113,134,135,116,118,117,137,141,119,144,148,133,131],P,[K],4),n("SpaceBeforeCertainTypeScriptKeywords",P,[89,112,148],[K],4),n("SpaceAfterModuleName",10,18,[Q],4),n("SpaceBeforeArrow",P,38,[K],4),n("SpaceAfterArrow",38,P,[K],4),n("NoSpaceAfterEllipsis",25,75,[K],16),n("NoSpaceAfterOptionalParameters",57,[21,27],[K,g],16),n("NoSpaceBetweenEmptyInterfaceBraceBrackets",18,19,[K,$],16),n("NoSpaceBeforeOpenAngularBracket",_e,29,[K,te],16),n("NoSpaceBetweenCloseParenAndAngularBracket",21,29,[K,te],16),n("NoSpaceAfterOpenAngularBracket",29,P,[K,te],16),n("NoSpaceBeforeCloseAngularBracket",P,31,[K,te],16),n("NoSpaceAfterCloseAngularBracket",31,[20,22,31,27],[K,te,N],16),n("SpaceBeforeAt",[21,75],59,[K],4),n("NoSpaceAfterAt",59,P,[K],16),n("SpaceAfterDecorator",P,[121,75,88,83,79,119,118,116,117,130,141,22,41],[G],4),n("NoSpaceBeforeNonNullAssertionOperator",P,53,[K,ae],16),n("NoSpaceAfterNewKeywordOnConstructorSignature",98,20,[K,Z],16),n("SpaceLessThanAndNonJSXTypeAnnotation",29,29,[K],4)],ge=[n("SpaceAfterConstructor",128,20,[c("insertSpaceAfterConstructor"),K],4),n("NoSpaceAfterConstructor",128,20,[l("insertSpaceAfterConstructor"),K],16),n("SpaceAfterComma",27,P,[c("insertSpaceAfterCommaDelimiter"),K,J,R],4),n("NoSpaceAfterComma",27,P,[l("insertSpaceAfterCommaDelimiter"),K,J],16),n("SpaceAfterAnonymousFunctionKeyword",[93,41],20,[c("insertSpaceAfterFunctionKeywordForAnonymousFunctions"),k],4),n("NoSpaceAfterAnonymousFunctionKeyword",[93,41],20,[l("insertSpaceAfterFunctionKeywordForAnonymousFunctions"),k],16),n("SpaceAfterKeywordInControl",ce,20,[c("insertSpaceAfterKeywordsInControlFlowStatements"),I],4),n("NoSpaceAfterKeywordInControl",ce,20,[l("insertSpaceAfterKeywordsInControlFlowStatements"),I],16),n("SpaceAfterOpenParen",20,P,[c("insertSpaceAfterOpeningAndBeforeClosingNonemptyParenthesis"),K],4),n("SpaceBeforeCloseParen",P,21,[c("insertSpaceAfterOpeningAndBeforeClosingNonemptyParenthesis"),K],4),n("SpaceBetweenOpenParens",20,20,[c("insertSpaceAfterOpeningAndBeforeClosingNonemptyParenthesis"),K],4),n("NoSpaceBetweenParens",20,21,[K],16),n("NoSpaceAfterOpenParen",20,P,[l("insertSpaceAfterOpeningAndBeforeClosingNonemptyParenthesis"),K],16),n("NoSpaceBeforeCloseParen",P,21,[l("insertSpaceAfterOpeningAndBeforeClosingNonemptyParenthesis"),K],16),n("SpaceAfterOpenBracket",22,P,[c("insertSpaceAfterOpeningAndBeforeClosingNonemptyBrackets"),K],4),n("SpaceBeforeCloseBracket",P,23,[c("insertSpaceAfterOpeningAndBeforeClosingNonemptyBrackets"),K],4),n("NoSpaceBetweenBrackets",22,23,[K],16),n("NoSpaceAfterOpenBracket",22,P,[l("insertSpaceAfterOpeningAndBeforeClosingNonemptyBrackets"),K],16),n("NoSpaceBeforeCloseBracket",P,23,[l("insertSpaceAfterOpeningAndBeforeClosingNonemptyBrackets"),K],16),n("SpaceAfterOpenBrace",18,P,[d("insertSpaceAfterOpeningAndBeforeClosingNonemptyBraces"),x],4),n("SpaceBeforeCloseBrace",P,19,[d("insertSpaceAfterOpeningAndBeforeClosingNonemptyBraces"),x],4),n("NoSpaceBetweenEmptyBraceBrackets",18,19,[K,O],16),n("NoSpaceAfterOpenBrace",18,P,[u("insertSpaceAfterOpeningAndBeforeClosingNonemptyBraces"),K],16),n("NoSpaceBeforeCloseBrace",P,19,[u("insertSpaceAfterOpeningAndBeforeClosingNonemptyBraces"),K],16),n("SpaceAfterTemplateHeadAndMiddle",[15,16],P,[c("insertSpaceAfterOpeningAndBeforeClosingTemplateStringBraces"),K],4),n("SpaceBeforeTemplateMiddleAndTail",P,[16,17],[c("insertSpaceAfterOpeningAndBeforeClosingTemplateStringBraces"),K],4),n("NoSpaceAfterTemplateHeadAndMiddle",[15,16],P,[l("insertSpaceAfterOpeningAndBeforeClosingTemplateStringBraces"),K],16),n("NoSpaceBeforeTemplateMiddleAndTail",P,[16,17],[l("insertSpaceAfterOpeningAndBeforeClosingTemplateStringBraces"),K],16),n("SpaceAfterOpenBraceInJsxExpression",18,P,[c("insertSpaceAfterOpeningAndBeforeClosingJsxExpressionBraces"),K,z],4),n("SpaceBeforeCloseBraceInJsxExpression",P,19,[c("insertSpaceAfterOpeningAndBeforeClosingJsxExpressionBraces"),K,z],4),n("NoSpaceAfterOpenBraceInJsxExpression",18,P,[l("insertSpaceAfterOpeningAndBeforeClosingJsxExpressionBraces"),K,z],16),n("NoSpaceBeforeCloseBraceInJsxExpression",P,19,[l("insertSpaceAfterOpeningAndBeforeClosingJsxExpressionBraces"),K,z],16),n("SpaceAfterSemicolonInFor",26,P,[c("insertSpaceAfterSemicolonInForStatements"),K,p],4),n("NoSpaceAfterSemicolonInFor",26,P,[l("insertSpaceAfterSemicolonInForStatements"),K,p],16),n("SpaceBeforeBinaryOperator",P,ue,[c("insertSpaceBeforeAndAfterBinaryOperators"),K,m],4),n("SpaceAfterBinaryOperator",ue,P,[c("insertSpaceBeforeAndAfterBinaryOperators"),K,m],4),n("NoSpaceBeforeBinaryOperator",P,ue,[l("insertSpaceBeforeAndAfterBinaryOperators"),K,m],16),n("NoSpaceAfterBinaryOperator",ue,P,[l("insertSpaceBeforeAndAfterBinaryOperators"),K,m],16),n("SpaceBeforeOpenParenInFuncDecl",P,20,[c("insertSpaceBeforeFunctionParenthesis"),K,k],4),n("NoSpaceBeforeOpenParenInFuncDecl",P,20,[l("insertSpaceBeforeFunctionParenthesis"),K,k],16),n("NewLineBeforeOpenBraceInControl",fe,18,[c("placeOpenBraceOnNewLineForControlBlocks"),I,D],8,1),n("NewLineBeforeOpenBraceInFunction",de,18,[c("placeOpenBraceOnNewLineForFunctions"),k,D],8,1),n("NewLineBeforeOpenBraceInTypeScriptDeclWithBlock",pe,18,[c("placeOpenBraceOnNewLineForFunctions"),F,D],8,1),n("SpaceAfterTypeAssertion",31,P,[c("insertSpaceAfterTypeAssertion"),K,re],4),n("NoSpaceAfterTypeAssertion",31,P,[l("insertSpaceAfterTypeAssertion"),K,re],16),n("SpaceBeforeTypeAnnotation",P,58,[c("insertSpaceBeforeTypeAnnotation"),K,h],4),n("NoSpaceBeforeTypeAnnotation",P,58,[l("insertSpaceBeforeTypeAnnotation"),K,h],16),n("NoOptionalSemicolon",26,ee,[s("semicolons",e.SemicolonPreference.Remove),oe],32),n("OptionalSemicolon",P,ee,[s("semicolons",e.SemicolonPreference.Insert),se],64)],ye=[n("NoSpaceBeforeSemicolon",P,26,[K],16),n("SpaceBeforeOpenBraceInControl",fe,18,[_("placeOpenBraceOnNewLineForControlBlocks"),I,X,b],4,1),n("SpaceBeforeOpenBraceInFunction",de,18,[_("placeOpenBraceOnNewLineForFunctions"),k,E,X,b],4,1),n("SpaceBeforeOpenBraceInTypeScriptDeclWithBlock",pe,18,[_("placeOpenBraceOnNewLineForFunctions"),F,X,b],4,1),n("NoSpaceBeforeComma",P,27,[K],16),n("NoSpaceBeforeOpenBracket",C(125,77),22,[K],16),n("NoSpaceAfterCloseBracket",23,P,[K,W],16),n("SpaceAfterSemicolon",26,P,[K],4),n("SpaceBetweenForAndAwaitKeyword",92,126,[K],4),n("SpaceBetweenStatements",[21,85,86,77],P,[K,J,f],4),n("SpaceAfterTryFinally",[106,91],18,[K],4)];return t(me,ge,ye)}}(e.formatting||(e.formatting={}))}(s||(s={})),function(e){!function(t){var r;function n(){var n,o;return void 0===r&&(n=t.getAllRules(),o=function(e){for(var t=new Array(u*u),r=new Array(t.length),n=0,i=e;n<i.length;n++)for(var o=i[n],s=o.leftTokenRange.isSpecific&&o.rightTokenRange.isSpecific,c=0,_=o.leftTokenRange.tokens;c<_.length;c++)for(var d=_[c],p=0,f=o.rightTokenRange.tokens;p<f.length;p++){var m=f[p],g=a(d,m),y=t[g];void 0===y&&(y=t[g]=[]),l(y,o.rule,s,r,g)}return t}(n),r=function(t){var r=o[a(t.currentTokenSpan.kind,t.nextTokenSpan.kind)];if(r){for(var n=[],s=0,c=0,u=r;c<u.length;c++){var l=u[c],_=~i(s);l.action&_&&e.every(l.context,(function(e){return e(t)}))&&(n.push(l),s|=l.action)}if(n.length)return n}}),r}function i(e){var t=0;return 1&e&&(t|=28),2&e&&(t|=96),28&e&&(t|=28),96&e&&(t|=96),t}function a(t,r){return e.Debug.assert(t<=151&&r<=151,"Must compute formatting context from tokens"),t*u+r}t.getFormatContext=function(e){return{options:e,getRules:n()}};var o,s=5,c=31,u=152;function l(r,n,i,a,u){var l,_,d,p=3&n.action?i?o.StopRulesSpecific:o.StopRulesAny:n.context!==t.anyContext?i?o.ContextRulesSpecific:o.ContextRulesAny:i?o.NoContextRulesSpecific:o.NoContextRulesAny,f=a[u]||0;r.splice(function(e,t){for(var r=0,n=0;n<=t;n+=s)r+=e&c,e>>=s;return r}(f,p),0,n),a[u]=(d=1+((l=f)>>(_=p)&c),e.Debug.assert((d&c)===d,"Adding more rules into the sub-bucket than allowed. Maximum allowed is 32 rules."),l&~(c<<_)|d<<_)}!function(e){e[e.StopRulesSpecific=0]="StopRulesSpecific",e[e.StopRulesAny=1*s]="StopRulesAny",e[e.ContextRulesSpecific=2*s]="ContextRulesSpecific",e[e.ContextRulesAny=3*s]="ContextRulesAny",e[e.NoContextRulesSpecific=4*s]="NoContextRulesSpecific",e[e.NoContextRulesAny=5*s]="NoContextRulesAny"}(o||(o={}))}(e.formatting||(e.formatting={}))}(s||(s={})),function(e){!function(t){var r,n,i,a,o;function s(t,r,n){var i=e.findPrecedingToken(t,n);return i&&i.kind===r&&t===i.getEnd()?i:void 0}function c(e){for(var t=e;t&&t.parent&&t.parent.end===e.end&&!u(t.parent,t);)t=t.parent;return t}function u(t,r){switch(t.kind){case 244:case 245:return e.rangeContainsRange(t.members,r);case 248:var n=t.body;return!!n&&249===n.kind&&e.rangeContainsRange(n.statements,r);case 288:case 222:case 249:return e.rangeContainsRange(t.statements,r);case 278:return e.rangeContainsRange(t.block.statements,r)}return!1}function l(t,r,n,i){return t?_({pos:e.getLineStartPositionForPosition(t.getStart(r),r),end:t.end},r,n,i):[]}function _(r,n,i,a){var o=function(t,r){return function n(i){var a=e.forEachChild(i,(function(n){return e.startEndContainsRange(n.getStart(r),n.end,t)&&n}));if(a){var o=n(a);if(o)return o}return i}(r)}(r,n);return t.getFormattingScanner(n.text,n.languageVariant,function(t,r,n){var i=t.getStart(n);if(i===r.pos&&t.end===r.end)return i;var a=e.findPrecedingToken(r.pos,n);return a?a.end>=r.pos?t.pos:a.end:t.pos}(o,r,n),r.end,(function(s){return d(r,o,t.SmartIndenter.getIndentationForNode(o,r,n,i.options),function(e,r,n){for(var i,a=-1;e;){var o=n.getLineAndCharacterOfPosition(e.getStart(n)).line;if(-1!==a&&o!==a)break;if(t.SmartIndenter.shouldIndentChildNode(r,e,i,n))return r.indentSize;a=o,i=e,e=e.parent}return 0}(o,i.options,n),s,i,a,function(t,r){if(!t.length)return a;var n=t.filter((function(t){return e.rangeOverlapsWithStartEnd(r,t.start,t.start+t.length)})).sort((function(e,t){return e.start-t.start}));if(!n.length)return a;var i=0;return function(t){for(;;){if(i>=n.length)return!1;var r=n[i];if(t.end<=r.start)return!1;if(e.startEndOverlapsWithStartEnd(t.pos,t.end,r.start,r.start+r.length))return!0;i++}};function a(){return!1}}(n.parseDiagnostics,r),n)}))}function d(r,n,i,a,o,s,c,u,l){var _,d,f,m,g=s.options,y=s.getRules,h=new t.FormattingContext(l,c,g),v=-1,b=[];if(o.advance(),o.isOnToken()){var x=l.getLineAndCharacterOfPosition(n.getStart(l)).line,D=x;n.decorators&&(D=l.getLineAndCharacterOfPosition(e.getNonDecoratorTokenPosOfNode(n,l)).line),function n(i,a,s,c,p,y){if(!e.rangeOverlapsWithStartEnd(r,i.getStart(l),i.getEnd()))return;var h=T(i,s,p,y);var b=a;e.forEachChild(i,(function(e){S(e,-1,i,h,s,c,!1)}),(function(r){!function(r,n,a,s){e.Debug.assert(e.isNodeArray(r));var c=function(e,t){switch(e.kind){case 161:case 243:case 200:case 160:case 159:case 201:if(e.typeParameters===t)return 29;if(e.parameters===t)return 20;break;case 195:case 196:if(e.typeArguments===t)return 29;if(e.arguments===t)return 20;break;case 168:if(e.typeArguments===t)return 29;break;case 172:return 18}return 0}(n,r),u=s,_=a;if(0!==c)for(;o.isOnToken();){if((b=o.readTokenInfo(n)).token.end>r.pos)break;if(b.token.kind===c){_=l.getLineAndCharacterOfPosition(b.token.pos).line,P(b,n,s,n);var d=void 0;if(-1!==v)d=v;else{var p=e.getLineStartPositionForPosition(b.token.pos,l);d=t.SmartIndenter.findFirstNonWhitespaceColumn(p,b.token.pos,l,g)}u=T(n,a,d,g.indentSize)}else P(b,n,s,n)}for(var f=-1,m=0;m<r.length;m++){var y=r[m];f=S(y,f,i,u,_,_,!0,0===m)}var h=function(e){switch(e){case 20:return 21;case 29:return 31;case 18:return 19}return 0}(c);if(0!==h&&o.isOnToken()){var b;27===(b=o.readTokenInfo(n)).token.kind&&e.isCallLikeExpression(n)&&(o.advance(),b=o.isOnToken()?o.readTokenInfo(n):void 0),b&&b.token.kind===h&&e.rangeContainsRange(n,b.token)&&P(b,n,u,n,!0)}}(r,i,s,h)}));for(;o.isOnToken();){var x=o.readTokenInfo(i);if(x.token.end>i.end)break;P(x,i,h,i)}if(!i.parent&&o.isOnEOF()){var D=o.readEOFTokenRange();D.end<=i.end&&_&&N(D,l.getLineAndCharacterOfPosition(D.pos).line,i,_,f,d,a,h)}function S(a,s,c,u,_,d,p,f){var y=a.getStart(l),h=l.getLineAndCharacterOfPosition(y).line,x=h;a.decorators&&(x=l.getLineAndCharacterOfPosition(e.getNonDecoratorTokenPosOfNode(a,l)).line);var D=-1;if(p&&e.rangeContainsRange(r,c)&&-1!==(D=function(r,n,i,a,o){if(e.rangeOverlapsWithStartEnd(a,r,n)||e.rangeContainsStartEnd(a,r,n)){if(-1!==o)return o}else{var s=l.getLineAndCharacterOfPosition(r).line,c=e.getLineStartPositionForPosition(r,l),u=t.SmartIndenter.findFirstNonWhitespaceColumn(c,r,l,g);if(s!==i||r===u){var _=t.SmartIndenter.getBaseIndentation(g);return _>u?_:u}}return-1}(y,a.end,_,r,s))&&(s=D),!e.rangeOverlapsWithStartEnd(r,a.pos,a.end))return a.end<r.pos&&o.skipToEndOf(a),s;if(0===a.getFullWidth())return s;for(;o.isOnToken();){if((S=o.readTokenInfo(i)).token.end>y)break;P(S,i,u,i)}if(!o.isOnToken())return s;if(e.isToken(a)&&11!==a.kind){var S=o.readTokenInfo(a);return e.Debug.assert(S.token.end===a.end,"Token end is child end"),P(S,i,u,a),s}var T=156===a.kind?h:d,E=function(e,r,n,i,a,o){var s=t.SmartIndenter.shouldIndentChildNode(g,e)?g.indentSize:0;return o===r?{indentation:r===m?v:a.getIndentation(),delta:Math.min(g.indentSize,a.getDelta(e)+s)}:-1===n?20===e.kind&&r===m?{indentation:v,delta:a.getDelta(e)}:t.SmartIndenter.childStartsOnTheSameLineWithElseInIfStatement(i,e,r,l)?{indentation:a.getIndentation(),delta:s}:t.SmartIndenter.argumentStartsOnSameLineAsPreviousArgument(i,e,r,l)?{indentation:a.getIndentation(),delta:s}:{indentation:a.getIndentation()+a.getDelta(e),delta:s}:{indentation:n,delta:s}}(a,h,D,i,u,T);(n(a,b,h,x,E.indentation,E.delta),11===a.kind)&&F({pos:a.getStart(),end:a.getEnd()},E.indentation,!0,!1);return b=i,f&&191===c.kind&&-1===s&&(s=E.indentation),s}function P(t,n,i,a,s){e.Debug.assert(e.rangeContainsRange(n,t.token));var c=o.lastTrailingTriviaWasNewLine(),d=!1;t.leadingTrivia&&C(t.leadingTrivia,n,b,i);var p=0,f=e.rangeContainsRange(r,t.token),g=l.getLineAndCharacterOfPosition(t.token.pos);if(f){var y=u(t.token),h=_;if(p=k(t.token,g,n,b,i),!y)if(0===p){var x=h&&l.getLineAndCharacterOfPosition(h.end).line;d=c&&g.line!==x}else d=1===p}if(t.trailingTrivia&&C(t.trailingTrivia,n,b,i),d){var D=f&&!u(t.token)?i.getIndentationForToken(g.line,t.token.kind,a,!!s):-1,S=!0;if(t.leadingTrivia){var T=i.getIndentationForComment(t.token.kind,D,a);S=E(t.leadingTrivia,T,S,(function(e){return A(e.pos,T,!1)}))}-1!==D&&S&&(A(t.token.pos,D,1===p),m=g.line,v=D)}o.advance(),b=n}}(n,n,x,D,i,a)}if(!o.isOnToken()){var S=o.getCurrentLeadingTrivia();S&&(E(S,i,!1,(function(e){return k(e,l.getLineAndCharacterOfPosition(e.pos),n,n,void 0)})),function(){var e=_?_.end:r.pos,t=l.getLineAndCharacterOfPosition(e).line,n=l.getLineAndCharacterOfPosition(r.end).line;P(t,n+1,_)}())}return b;function T(r,n,i,a){return{getIndentationForComment:function(e,t,r){switch(e){case 19:case 23:case 21:return i+o(r)}return-1!==t?t:i},getIndentationForToken:function(t,a,s,c){return!c&&function(t,i,a){switch(i){case 18:case 19:case 21:case 86:case 110:case 59:return!1;case 43:case 31:switch(a.kind){case 266:case 267:case 265:return!1}break;case 22:case 23:if(185!==a.kind)return!1}return n!==t&&!(r.decorators&&i===function(t){if(t.modifiers&&t.modifiers.length)return t.modifiers[0].kind;switch(t.kind){case 244:return 79;case 245:return 113;case 243:return 93;case 247:return 247;case 162:return 130;case 163:return 141;case 160:if(t.asteriskToken)return 41;case 158:case 155:var r=e.getNameOfDeclaration(t);if(r)return r.kind}}(r))}(t,a,s)?i+o(s):i},getIndentation:function(){return i},getDelta:o,recomputeIndentation:function(e){r.parent&&t.SmartIndenter.shouldIndentChildNode(g,r.parent,r,l)&&(i+=e?g.indentSize:-g.indentSize,a=t.SmartIndenter.shouldIndentChildNode(g,r)?g.indentSize:0)}};function o(e){return t.SmartIndenter.nodeWillIndentChild(g,r,e,l,!0)?a:0}}function E(t,n,i,a){for(var o=0,s=t;o<s.length;o++){var c=s[o],u=e.rangeContainsRange(r,c);switch(c.kind){case 3:u&&F(c,n,!i),i=!1;break;case 2:i&&u&&a(c),i=!1;break;case 4:i=!0}}return i}function C(t,n,i,a){for(var o=0,s=t;o<s.length;o++){var c=s[o];if(e.isComment(c.kind)&&e.rangeContainsRange(r,c))k(c,l.getLineAndCharacterOfPosition(c.pos),n,i,a)}}function k(e,t,n,i,a){var o=0;u(e)||(_?o=N(e,t.line,n,_,f,d,i,a):P(l.getLineAndCharacterOfPosition(r.pos).line,t.line));return _=e,d=n,f=t.line,o}function N(t,r,n,i,a,o,s,c){h.updateContext(i,o,t,n,s);var u=y(h),_=!1,d=0;return u?e.forEachRight(u,(function(o){switch(d=function(t,r,n,i,a){var o=a!==n;switch(t.action){case 1:return 0;case 16:if(r.end!==i.pos)return I(r.end,i.pos-r.end),o?2:0;break;case 32:I(r.pos,r.end-r.pos);break;case 8:if(1!==t.flags&&n!==a)return 0;if(1!==a-n)return O(r.end,i.pos-r.end,g.newLineCharacter),o?0:1;break;case 4:if(1!==t.flags&&n!==a)return 0;if(1!==i.pos-r.end||32!==l.text.charCodeAt(r.end))return O(r.end,i.pos-r.end," "),o?2:0;break;case 64:s=r.end,(c=";")&&b.push(e.createTextChangeFromStartLength(s,0,c))}var s,c;return 0}(o,i,a,t,r)){case 2:n.getStart(l)===t.pos&&c.recomputeIndentation(!1);break;case 1:n.getStart(l)===t.pos&&c.recomputeIndentation(!0);break;default:e.Debug.assert(0===d)}_=!(16&o.action)&&1!==o.flags})):_=1!==t.kind,r!==a&&_&&P(a,r,i),d}function A(t,r,n){var i=p(r,g);if(n)O(t,0,i);else{var a=l.getLineAndCharacterOfPosition(t),o=e.getStartPositionOfLine(a.line,l);(r!==function(e,t){for(var r=0,n=0;n<t;n++)9===l.text.charCodeAt(e+n)?r+=g.tabSize-r%g.tabSize:r++;return r}(o,a.character)||function(e,t){return e!==l.text.substr(t,e.length)}(i,o))&&O(o,a.character,i)}}function F(r,n,i,a){void 0===a&&(a=!0);var o=l.getLineAndCharacterOfPosition(r.pos).line,s=l.getLineAndCharacterOfPosition(r.end).line;if(o!==s){for(var c=[],u=r.pos,_=o;_<s;_++){var d=e.getEndLinePosition(_,l);c.push({pos:u,end:d}),u=e.getStartPositionOfLine(_+1,l)}if(a&&c.push({pos:u,end:r.end}),0!==c.length){var f=e.getStartPositionOfLine(o,l),m=t.SmartIndenter.findFirstNonWhitespaceCharacterAndColumn(f,c[0].pos,l,g);if(n!==m.column){var y=0;i&&(y=1,o++);for(var h=n-m.column,v=y;v<c.length;v++,o++){var b=e.getStartPositionOfLine(o,l),x=0===v?m:t.SmartIndenter.findFirstNonWhitespaceCharacterAndColumn(c[v].pos,c[v].end,l,g),D=x.column+h;if(D>0){var S=p(D,g);O(b,x.character,S)}else I(b,x.character)}}}}else i||A(r.pos,n,!1)}function P(t,r,n){for(var i=t;i<r;i++){var a=e.getStartPositionOfLine(i,l),o=e.getEndLinePosition(i,l);if(!(n&&(e.isComment(n.kind)||e.isStringOrRegularExpressionOrTemplateLiteral(n.kind))&&n.pos<=o&&n.end>o)){var s=w(a,o);-1!==s&&(e.Debug.assert(s===a||!e.isWhiteSpaceSingleLine(l.text.charCodeAt(s-1))),I(s,o+1-s))}}}function w(t,r){for(var n=r;n>=t&&e.isWhiteSpaceSingleLine(l.text.charCodeAt(n));)n--;return n!==r?n+1:-1}function I(t,r){r&&b.push(e.createTextChangeFromStartLength(t,r,""))}function O(t,r,n){(r||n)&&b.push(e.createTextChangeFromStartLength(t,r,n))}}function p(t,r){if((!i||i.tabSize!==r.tabSize||i.indentSize!==r.indentSize)&&(i={tabSize:r.tabSize,indentSize:r.indentSize},a=o=void 0),r.convertTabsToSpaces){var n=void 0,s=Math.floor(t/r.indentSize),c=t%r.indentSize;return o||(o=[]),void 0===o[s]?(n=e.repeatString(" ",r.indentSize*s),o[s]=n):n=o[s],c?n+e.repeatString(" ",c):n}var u=Math.floor(t/r.tabSize),l=t-u*r.tabSize,_=void 0;return a||(a=[]),void 0===a[u]?a[u]=_=e.repeatString("\t",u):_=a[u],l?_+e.repeatString(" ",l):_}t.createTextRangeWithKind=function(t,r,n){var i={pos:t,end:r,kind:n};return e.Debug.isDebugging&&Object.defineProperty(i,"__debugKind",{get:function(){return e.Debug.formatSyntaxKind(n)}}),i},function(e){e[e.Unknown=-1]="Unknown"}(r||(r={})),t.formatOnEnter=function(t,r,n){var i=r.getLineAndCharacterOfPosition(t).line;if(0===i)return[];for(var a=e.getEndLinePosition(i,r);e.isWhiteSpaceSingleLine(r.text.charCodeAt(a));)a--;return e.isLineBreak(r.text.charCodeAt(a))&&a--,_({pos:e.getStartPositionOfLine(i-1,r),end:a+1},r,n,2)},t.formatOnSemicolon=function(e,t,r){return l(c(s(e,26,t)),t,r,3)},t.formatOnOpeningCurly=function(t,r,n){var i=s(t,18,r);if(!i)return[];var a=c(i.parent);return _({pos:e.getLineStartPositionForPosition(a.getStart(r),r),end:t},r,n,4)},t.formatOnClosingCurly=function(e,t,r){return l(c(s(e,19,t)),t,r,5)},t.formatDocument=function(e,t){return _({pos:0,end:e.text.length},e,t,0)},t.formatSelection=function(t,r,n,i){return _({pos:e.getLineStartPositionForPosition(t,n),end:r},n,i,1)},t.formatNodeGivenIndentation=function(e,r,n,i,a,o){var s={pos:0,end:r.text.length};return t.getFormattingScanner(r.text,n,s.pos,s.end,(function(t){return d(s,e,i,a,t,o,1,(function(e){return!1}),r)}))},function(e){e[e.None=0]="None",e[e.LineAdded=1]="LineAdded",e[e.LineRemoved=2]="LineRemoved"}(n||(n={})),t.getRangeOfEnclosingComment=function(t,r,n,i){void 0===i&&(i=e.getTokenAtPosition(t,r));var a=e.findAncestor(i,e.isJSDoc);if(a&&(i=a.parent),!(i.getStart(t)<=r&&r<i.getEnd())){var o=(n=null===n?void 0:void 0===n?e.findPrecedingToken(r,t):n)&&e.getTrailingCommentRanges(t.text,n.end),s=e.getLeadingCommentRangesOfNode(i,t),c=e.concatenate(o,s);return c&&e.find(c,(function(n){return e.rangeContainsPositionExclusive(n,r)||r===n.end&&(2===n.kind||r===t.getFullWidth())}))}},t.getIndentationString=p}(e.formatting||(e.formatting={}))}(s||(s={})),function(e){!function(t){!function(r){var n,i;function a(e){return e.baseIndentSize||0}function o(e,t,r,n,i,o,u){for(var l=e.parent;l;){var p=!0;if(r){var f=e.getStart(i);p=f<r.pos||f>r.end}var m=s(l,e,i),y=m.line===t.line||d(l,e,t.line,i);if(p){var h=g(e,i,u,!y);if(-1!==h)return h+n;if(-1!==(h=c(e,l,t,y,i,u)))return h+n}D(u,l,e,i,o)&&!y&&(n+=u.indentSize);var v=_(l,e,t.line,i);l=(e=l).parent,t=v?i.getLineAndCharacterOfPosition(e.getStart(i)):m}return n+a(u)}function s(e,t,r){var n=p(t,r),i=n?n.pos:e.getStart(r);return r.getLineAndCharacterOfPosition(i)}function c(t,r,n,i,a,o){return(e.isDeclaration(t)||e.isStatementButNotDeclaration(t))&&(288===r.kind||!i)?h(n,a,o):-1}function u(t,r,n,i){var a=e.findNextToken(t,r,i);return a?18===a.kind?1:19===a.kind&&n===l(a,i).line?2:0:0}function l(e,t){return t.getLineAndCharacterOfPosition(e.getStart(t))}function _(t,r,n,i){if(!e.isCallExpression(t)||!e.contains(t.arguments,r))return!1;var a=t.expression.getEnd();return e.getLineAndCharacterOfPosition(i,a).line===n}function d(t,r,n,i){if(226===t.kind&&t.elseStatement===r){var a=e.findChildOfKind(t,86,i);return e.Debug.assert(void 0!==a),l(a,i).line===n}return!1}function p(e,t){return e.parent&&f(e.getStart(t),e.getEnd(),e.parent,t)}function f(t,r,n,i){switch(n.kind){case 168:return a(n.typeArguments);case 192:return a(n.properties);case 191:return a(n.elements);case 172:return a(n.members);case 243:case 200:case 201:case 160:case 159:case 164:case 161:case 170:case 165:return a(n.typeParameters)||a(n.parameters);case 244:case 213:case 245:case 246:case 314:return a(n.typeParameters);case 196:case 195:return a(n.typeArguments)||a(n.arguments);case 242:return a(n.declarations);case 256:case 260:return a(n.elements);case 188:case 189:return a(n.elements)}function a(a){return a&&e.rangeContainsStartEnd(function(e,t,r){for(var n=e.getChildren(r),i=1;i<n.length-1;i++)if(n[i].pos===t.pos&&n[i].end===t.end)return{pos:n[i-1].end,end:n[i+1].getStart(r)};return t}(n,a,i),t,r)?a:void 0}}function m(e,t,r){return e?h(t.getLineAndCharacterOfPosition(e.pos),t,r):-1}function g(e,t,r,n){if(e.parent&&242===e.parent.kind)return-1;var i=p(e,t);if(i){var a=i.indexOf(e);if(-1!==a){var o=y(i,a,t,r);if(-1!==o)return o}return m(i,t,r)+(n?r.indentSize:0)}return-1}function y(t,r,n,i){e.Debug.assert(r>=0&&r<t.length);for(var a=l(t[r],n),o=r-1;o>=0;o--)if(27!==t[o].kind){if(n.getLineAndCharacterOfPosition(t[o].end).line!==a.line)return h(a,n,i);a=l(t[o],n)}return-1}function h(e,t,r){var n=t.getPositionOfLineAndCharacter(e.line,0);return b(n,n+e.character,t,r)}function v(t,r,n,i){for(var a=0,o=0,s=t;s<r;s++){var c=n.text.charCodeAt(s);if(!e.isWhiteSpaceSingleLine(c))break;9===c?o+=i.tabSize+o%i.tabSize:o++,a++}return{column:o,character:a}}function b(e,t,r,n){return v(e,t,r,n).column}function x(t,r,n,i,a){var o=n?n.kind:0;switch(r.kind){case 225:case 244:case 213:case 245:case 247:case 246:case 191:case 222:case 249:case 192:case 172:case 185:case 174:case 250:case 276:case 275:case 199:case 193:case 195:case 196:case 224:case 258:case 234:case 209:case 189:case 188:case 266:case 269:case 265:case 274:case 159:case 164:case 165:case 155:case 169:case 170:case 181:case 197:case 205:case 260:case 256:case 261:case 257:case 158:return!0;case 241:case 279:case 208:if(!t.indentMultiLineObjectLiteralBeginningOnBlankLine&&i&&192===o)return function(t,r){var n=e.skipTrivia(t.text,r.pos),i=t.getLineAndCharacterOfPosition(n).line,a=t.getLineAndCharacterOfPosition(r.end).line;return i===a}(i,n);if(208!==r.kind)return!0;break;case 227:case 228:case 230:case 231:case 229:case 226:case 243:case 200:case 160:case 201:case 161:case 162:case 163:return 222!==o;case 259:return 260!==o;case 253:return 254!==o||!!n.namedBindings&&256!==n.namedBindings.kind;case 264:return 267!==o;case 268:return 270!==o;case 178:case 177:if(172===o)return!1}return a}function D(e,t,r,n,i){return void 0===i&&(i=!1),x(e,t,r,n,!1)&&!(i&&r&&function(e,t){switch(e){case 234:case 238:case 232:case 233:return 222!==t.kind;default:return!1}}(r.kind,t))}!function(e){e[e.Unknown=-1]="Unknown"}(n||(n={})),r.getIndentation=function(r,n,i,s){if(void 0===s&&(s=!1),r>n.text.length)return a(i);if(i.indentStyle===e.IndentStyle.None)return 0;var c=e.findPrecedingToken(r,n,void 0,!0),_=t.getRangeOfEnclosingComment(n,r,c||null);if(_&&3===_.kind)return function(t,r,n,i){var a=e.getLineAndCharacterOfPosition(t,r).line-1,o=e.getLineAndCharacterOfPosition(t,i.pos).line;if(e.Debug.assert(o>=0),a<=o)return b(e.getStartPositionOfLine(o,t),r,t,n);var s=e.getStartPositionOfLine(a,t),c=v(s,r,t,n),u=c.column,l=c.character;if(0===u)return u;return 42===t.text.charCodeAt(s+l)?u-1:u}(n,r,i,_);if(!c)return a(i);if(e.isStringOrRegularExpressionOrTemplateLiteral(c.kind)&&c.getStart(n)<=r&&r<c.end)return 0;var d=n.getLineAndCharacterOfPosition(r).line;if(i.indentStyle===e.IndentStyle.Block)return function(t,r,n){var i=r;for(;i>0;){var a=t.text.charCodeAt(i);if(!e.isWhiteSpaceLike(a))break;i--}return b(e.getLineStartPositionForPosition(i,t),i,t,n)}(n,r,i);if(27===c.kind&&208!==c.parent.kind){var p=function(t,r,n){var i=e.findListItemInfo(t);return i&&i.listItemIndex>0?y(i.list.getChildren(),i.listItemIndex-1,r,n):-1}(c,n,i);if(-1!==p)return p}var h=function(e,t,r){return t&&f(e,e,t,r)}(r,c.parent,n);return h&&!e.rangeContainsRange(h,c)?m(h,n,i)+i.indentSize:function(t,r,n,i,s,c){var _,d=n;for(;d;){if(e.positionBelongsToNode(d,r,t)&&D(c,d,_,t,!0)){var p=l(d,t),f=u(n,d,i,t),m=0!==f?s&&2===f?c.indentSize:0:i!==p.line?c.indentSize:0;return o(d,p,void 0,m,t,!0,c)}var y=g(d,t,c,!0);if(-1!==y)return y;_=d,d=d.parent}return a(c)}(n,r,c,d,s,i)},r.getIndentationForNode=function(e,t,r,n){var i=r.getLineAndCharacterOfPosition(e.getStart(r));return o(e,i,t,0,r,!1,n)},r.getBaseIndentation=a,function(e){e[e.Unknown=0]="Unknown",e[e.OpenBrace=1]="OpenBrace",e[e.CloseBrace=2]="CloseBrace"}(i||(i={})),r.isArgumentAndStartLineOverlapsExpressionBeingCalled=_,r.childStartsOnTheSameLineWithElseInIfStatement=d,r.argumentStartsOnSameLineAsPreviousArgument=function(t,r,n,i){if(e.isCallOrNewExpression(t)){if(!t.arguments)return!1;var a=e.find(t.arguments,(function(e){return e.pos===r.pos}));if(!a)return!1;var o=t.arguments.indexOf(a);if(0===o)return!1;var s=t.arguments[o-1];if(n===e.getLineAndCharacterOfPosition(i,s.getEnd()).line)return!0}return!1},r.getContainingList=p,r.findFirstNonWhitespaceCharacterAndColumn=v,r.findFirstNonWhitespaceColumn=b,r.nodeWillIndentChild=x,r.shouldIndentChildNode=D}(t.SmartIndenter||(t.SmartIndenter={}))}(e.formatting||(e.formatting={}))}(s||(s={})),function(e){!function(n){function i(t){var r=t.__pos;return e.Debug.assert("number"==typeof r),r}function a(t,r){e.Debug.assert("number"==typeof r),t.__pos=r}function o(t){var r=t.__end;return e.Debug.assert("number"==typeof r),r}function s(t,r){e.Debug.assert("number"==typeof r),t.__end=r}var c,u;function l(t,r){return e.skipTrivia(t,r,!1,!0)}!function(e){e[e.Exclude=0]="Exclude",e[e.IncludeAll=1]="IncludeAll"}(c=n.LeadingTriviaOption||(n.LeadingTriviaOption={})),function(e){e[e.Exclude=0]="Exclude",e[e.Include=1]="Include"}(u=n.TrailingTriviaOption||(n.TrailingTriviaOption={}));var _,d={leadingTriviaOption:c.Exclude,trailingTriviaOption:u.Exclude};function p(e,t,r,n){return{pos:f(e,t,n),end:m(e,r,n)}}function f(t,r,n){var i=n.leadingTriviaOption;if(i===c.Exclude)return r.getStart(t);var a=r.getFullStart(),o=r.getStart(t);if(a===o)return o;var s=e.getLineStartPositionForPosition(a,t);if(e.getLineStartPositionForPosition(o,t)===s)return i===c.IncludeAll?a:o;var u=a>0?1:0,_=e.getStartPositionOfLine(e.getLineOfLocalPosition(t,s)+u,t);return _=l(t.text,_),e.getStartPositionOfLine(e.getLineOfLocalPosition(t,_),t)}function m(t,r,n){var i=r.end,a=n.trailingTriviaOption;if(a===u.Exclude||e.isExpression(r)&&a!==u.Include)return i;var o=e.skipTrivia(t.text,i,!0);return o===i||a!==u.Include&&!e.isLineBreak(t.text.charCodeAt(o-1))?i:o}function g(e,t){return!!t&&!!e.parent&&(27===t.kind||26===t.kind&&192===e.parent.kind)}!function(e){e[e.Remove=0]="Remove",e[e.ReplaceWithSingleNode=1]="ReplaceWithSingleNode",e[e.ReplaceWithMultipleNodes=2]="ReplaceWithMultipleNodes",e[e.Text=3]="Text"}(_||(_={})),n.isThisTypeAnnotatable=function(t){return e.isFunctionExpression(t)||e.isFunctionDeclaration(t)};var y,h,v=function(){function n(t,r){this.newLineCharacter=t,this.formatContext=r,this.changes=[],this.newFiles=[],this.classesWithNodesInsertedAtStart=e.createMap(),this.deletedNodes=[]}return n.fromContext=function(t){return new n(e.getNewLineOrDefaultFromHost(t.host,t.formatContext.options),t.formatContext)},n.with=function(e,t){var r=n.fromContext(e);return t(r),r.getChanges()},n.prototype.pushRaw=function(t,r){e.Debug.assertEqual(t.fileName,r.fileName);for(var n=0,i=r.textChanges;n<i.length;n++){var a=i[n];this.changes.push({kind:_.Text,sourceFile:t,text:a.newText,range:e.createTextRangeFromSpan(a.span)})}},n.prototype.deleteRange=function(e,t){this.changes.push({kind:_.Remove,sourceFile:e,range:t})},n.prototype.delete=function(e,t){this.deletedNodes.push({sourceFile:e,node:t})},n.prototype.deleteModifier=function(t,r){this.deleteRange(t,{pos:r.getStart(t),end:e.skipTrivia(t.text,r.end,!0)})},n.prototype.deleteNodeRange=function(e,t,r,n){void 0===n&&(n={leadingTriviaOption:c.IncludeAll});var i=f(e,t,n),a=m(e,r,n);this.deleteRange(e,{pos:i,end:a})},n.prototype.deleteNodeRangeExcludingEnd=function(e,t,r,n){void 0===n&&(n={leadingTriviaOption:c.IncludeAll});var i=f(e,t,n),a=void 0===r?e.text.length:f(e,r,n);this.deleteRange(e,{pos:i,end:a})},n.prototype.replaceRange=function(e,t,r,n){void 0===n&&(n={}),this.changes.push({kind:_.ReplaceWithSingleNode,sourceFile:e,range:t,options:n,node:r})},n.prototype.replaceNode=function(e,t,r,n){void 0===n&&(n=d),this.replaceRange(e,p(e,t,t,n),r,n)},n.prototype.replaceNodeRange=function(e,t,r,n,i){void 0===i&&(i=d),this.replaceRange(e,p(e,t,r,i),n,i)},n.prototype.replaceRangeWithNodes=function(e,t,r,n){void 0===n&&(n={}),this.changes.push({kind:_.ReplaceWithMultipleNodes,sourceFile:e,range:t,options:n,nodes:r})},n.prototype.replaceNodeWithNodes=function(e,t,r,n){void 0===n&&(n=d),this.replaceRangeWithNodes(e,p(e,t,t,n),r,n)},n.prototype.replaceNodeWithText=function(e,t,r){this.replaceRangeWithText(e,p(e,t,t,d),r)},n.prototype.replaceNodeRangeWithNodes=function(e,t,r,n,i){void 0===i&&(i=d),this.replaceRangeWithNodes(e,p(e,t,r,i),n,i)},n.prototype.nextCommaToken=function(t,r){var n=e.findNextToken(r,r.parent,t);return n&&27===n.kind?n:void 0},n.prototype.replacePropertyAssignment=function(e,t,r){var n=this.nextCommaToken(e,t)?"":","+this.newLineCharacter;this.replaceNode(e,t,r,{suffix:n})},n.prototype.insertNodeAt=function(t,r,n,i){void 0===i&&(i={}),this.replaceRange(t,e.createRange(r),n,i)},n.prototype.insertNodesAt=function(t,r,n,i){void 0===i&&(i={}),this.replaceRangeWithNodes(t,e.createRange(r),n,i)},n.prototype.insertNodeAtTopOfFile=function(t,r,n){var i=function(t){for(var r,n=0,i=t.statements;n<i.length;n++){var a=i[n];if(!e.isPrologueDirective(a))break;r=a}var o=0,s=t.text;if(r)return o=r.end,p(),o;var c=e.getShebang(s);void 0!==c&&(o=c.length,p());var u=e.getLeadingCommentRanges(s,o);if(!u)return o;u.length&&3===u[0].kind&&e.isPinnedComment(s,u[0].pos)&&(o=u[0].end,p(),u=u.slice(1));for(var l=0,_=u;l<_.length;l++){var d=_[l];if(2!==d.kind||!e.isRecognizedTripleSlashComment(s,d.pos,d.end))break;o=d.end,p()}return o;function p(){if(o<s.length){var t=s.charCodeAt(o);e.isLineBreak(t)&&++o<s.length&&13===t&&10===s.charCodeAt(o)&&o++}}}(t);this.insertNodeAt(t,i,r,{prefix:0===i?void 0:this.newLineCharacter,suffix:(e.isLineBreak(t.text.charCodeAt(i))?"":this.newLineCharacter)+(n?this.newLineCharacter:"")})},n.prototype.insertNodeBefore=function(e,t,r,n){void 0===n&&(n=!1),this.insertNodeAt(e,f(e,t,{}),r,this.getOptionsForInsertNodeBefore(t,n))},n.prototype.insertModifierBefore=function(t,r,n){var i=n.getStart(t);this.insertNodeAt(t,i,e.createToken(r),{suffix:" "})},n.prototype.insertLastModifierBefore=function(t,r,n){if(n.modifiers){var i=n.modifiers.end;this.insertNodeAt(t,i,e.createToken(r),{prefix:" "})}else this.insertModifierBefore(t,r,n)},n.prototype.insertCommentBeforeLine=function(t,r,n,i){var a=e.getStartPositionOfLine(r,t),o=e.getFirstNonSpaceCharacterPosition(t.text,a),s=C(t,o),c=e.getTouchingToken(t,s?o:n),u=t.text.slice(a,o),l=(s?"":this.newLineCharacter)+"//"+i+this.newLineCharacter+u;this.insertText(t,c.getStart(t),l)},n.prototype.insertJsdocCommentBefore=function(t,r,n){var i=r.getStart(t);if(r.jsDoc)for(var a=0,o=r.jsDoc;a<o.length;a++){var s=o[a];this.deleteRange(t,{pos:e.getLineStartPositionForPosition(s.getStart(t),t),end:m(t,s,{})})}var c=e.getPrecedingNonSpaceCharacterPosition(t.text,i-1),u=t.text.slice(c,i);this.insertNodeAt(t,i,n,{preserveLeadingWhitespace:!1,suffix:this.newLineCharacter+u})},n.prototype.replaceRangeWithText=function(e,t,r){this.changes.push({kind:_.Text,sourceFile:e,range:t,text:r})},n.prototype.insertText=function(t,r,n){this.replaceRangeWithText(t,e.createRange(r),n)},n.prototype.tryInsertTypeAnnotation=function(t,r,n){var i;if(e.isFunctionLike(r)){if(!(i=e.findChildOfKind(r,21,t))){if(!e.isArrowFunction(r))return!1;i=e.first(r.parameters)}}else i=241!==r.kind&&r.questionToken?r.questionToken:r.name;return this.insertNodeAt(t,i.end,n,{prefix:": "}),!0},n.prototype.tryInsertThisTypeAnnotation=function(t,r,n){var i=e.findChildOfKind(r,20,t).getStart(t)+1,a=r.parameters.length?", ":"";this.insertNodeAt(t,i,n,{prefix:"this: ",suffix:a})},n.prototype.insertTypeParameters=function(t,r,n){var i=(e.findChildOfKind(r,20,t)||e.first(r.parameters)).getStart(t);this.insertNodesAt(t,i,n,{prefix:"<",suffix:">"})},n.prototype.getOptionsForInsertNodeBefore=function(t,r){return e.isStatement(t)||e.isClassElement(t)?{suffix:r?this.newLineCharacter+this.newLineCharacter:this.newLineCharacter}:e.isVariableDeclaration(t)?{suffix:", "}:e.isParameter(t)?{}:e.isStringLiteral(t)&&e.isImportDeclaration(t.parent)||e.isNamedImports(t)?{suffix:", "}:e.Debug.failBadSyntaxKind(t)},n.prototype.insertNodeAtConstructorStart=function(r,n,i){var a=e.firstOrUndefined(n.body.statements);a&&n.body.multiLine?this.insertNodeBefore(r,a,i):this.replaceConstructorBody(r,n,t([i],n.body.statements))},n.prototype.insertNodeAtConstructorEnd=function(r,n,i){var a=e.lastOrUndefined(n.body.statements);a&&n.body.multiLine?this.insertNodeAfter(r,a,i):this.replaceConstructorBody(r,n,t(n.body.statements,[i]))},n.prototype.replaceConstructorBody=function(t,r,n){this.replaceNode(t,r.body,e.createBlock(n,!0))},n.prototype.insertNodeAtEndOfScope=function(t,r,n){var i=f(t,r.getLastToken(),{});this.insertNodeAt(t,i,n,{prefix:e.isLineBreak(t.text.charCodeAt(r.getLastToken().pos))?this.newLineCharacter:this.newLineCharacter+this.newLineCharacter,suffix:this.newLineCharacter})},n.prototype.insertNodeAtClassStart=function(e,t,r){this.insertNodeAtStartWorker(e,t,r)},n.prototype.insertNodeAtObjectStart=function(e,t,r){this.insertNodeAtStartWorker(e,t,r)},n.prototype.insertNodeAtStartWorker=function(t,n,i){var a=n.getStart(t),o=e.formatting.SmartIndenter.findFirstNonWhitespaceColumn(e.getLineStartPositionForPosition(a,t),a,t,this.formatContext.options)+this.formatContext.options.indentSize;this.insertNodeAt(t,D(n).pos,i,r({indentation:o},this.getInsertNodeAtStartPrefixSuffix(t,n)))},n.prototype.getInsertNodeAtStartPrefixSuffix=function(r,n){var i=e.isObjectLiteralExpression(n)?",":"";if(0===D(n).length){if(e.addToSeen(this.classesWithNodesInsertedAtStart,e.getNodeId(n),{node:n,sourceFile:r})){var a=e.positionsAreOnSameLine.apply(void 0,t(x(n,r),[r]));return{prefix:this.newLineCharacter,suffix:i+(a?this.newLineCharacter:"")}}return{prefix:"",suffix:i+this.newLineCharacter}}return{prefix:this.newLineCharacter,suffix:i}},n.prototype.insertNodeAfterComma=function(e,t,r){var n=this.insertNodeAfterWorker(e,this.nextCommaToken(e,t)||t,r);this.insertNodeAt(e,n,r,this.getInsertNodeAfterOptions(e,t))},n.prototype.insertNodeAfter=function(e,t,r){var n=this.insertNodeAfterWorker(e,t,r);this.insertNodeAt(e,n,r,this.getInsertNodeAfterOptions(e,t))},n.prototype.insertNodeAtEndOfList=function(e,t,r){this.insertNodeAt(e,t.end,r,{prefix:", "})},n.prototype.insertNodesAfter=function(t,r,n){var i=this.insertNodeAfterWorker(t,r,e.first(n));this.insertNodesAt(t,i,n,this.getInsertNodeAfterOptions(t,r))},n.prototype.insertNodeAfterWorker=function(t,r,n){var i,a;return i=r,a=n,((e.isPropertySignature(i)||e.isPropertyDeclaration(i))&&e.isClassOrTypeElement(a)&&153===a.name.kind||e.isStatementButNotDeclaration(i)&&e.isStatementButNotDeclaration(a))&&59!==t.text.charCodeAt(r.end-1)&&this.replaceRange(t,e.createRange(r.end),e.createToken(26)),m(t,r,{})},n.prototype.getInsertNodeAfterOptions=function(t,n){var i=this.getInsertNodeAfterOptionsWorker(n);return r(r({},i),{prefix:n.end===t.end&&e.isStatement(n)?i.prefix?"\n"+i.prefix:"\n":i.prefix})},n.prototype.getInsertNodeAfterOptionsWorker=function(t){switch(t.kind){case 244:case 248:return{prefix:this.newLineCharacter,suffix:this.newLineCharacter};case 241:case 10:case 75:return{prefix:", "};case 279:return{suffix:","+this.newLineCharacter};case 88:return{prefix:" "};case 155:return{};default:return e.Debug.assert(e.isStatement(t)||e.isClassOrTypeElement(t)),{suffix:this.newLineCharacter}}},n.prototype.insertName=function(t,r,n){if(e.Debug.assert(!r.name),201===r.kind){var i=e.findChildOfKind(r,38,t),a=e.findChildOfKind(r,20,t);a?(this.insertNodesAt(t,a.getStart(t),[e.createToken(93),e.createIdentifier(n)],{joiner:" "}),k(this,t,i)):(this.insertText(t,e.first(r.parameters).getStart(t),"function "+n+"("),this.replaceRange(t,i,e.createToken(21))),222!==r.body.kind&&(this.insertNodesAt(t,r.body.getStart(t),[e.createToken(18),e.createToken(100)],{joiner:" ",suffix:" "}),this.insertNodesAt(t,r.body.end,[e.createToken(26),e.createToken(19)],{joiner:" "}))}else{var o=e.findChildOfKind(r,200===r.kind?93:79,t).end;this.insertNodeAt(t,o,e.createIdentifier(n),{prefix:" "})}},n.prototype.insertExportModifier=function(e,t){this.insertText(e,t.getStart(e),"export ")},n.prototype.insertNodeInListAfter=function(t,r,n,i){if(void 0===i&&(i=e.formatting.SmartIndenter.getContainingList(r,t)),i){var a=e.indexOfNode(i,r);if(!(a<0)){var o=r.getEnd();if(a!==i.length-1){var s=e.getTokenAtPosition(t,r.end);if(s&&g(r,s)){var c=e.getLineAndCharacterOfPosition(t,l(t.text,i[a+1].getFullStart())),u=e.getLineAndCharacterOfPosition(t,s.end),_=void 0,d=void 0;u.line===c.line?(d=s.end,_=function(e){for(var t="",r=0;r<e;r++)t+=" ";return t}(c.character-u.character)):d=e.getStartPositionOfLine(c.line,t);var p=""+e.tokenToString(s.kind)+t.text.substring(s.end,i[a+1].getStart(t));this.replaceRange(t,e.createRange(d,i[a+1].getStart(t)),n,{prefix:_,suffix:p})}}else{var f=r.getStart(t),m=e.getLineStartPositionForPosition(f,t),y=void 0,h=!1;if(1===i.length)y=27;else{var v=e.findPrecedingToken(r.pos,t);y=g(r,v)?v.kind:27,h=e.getLineStartPositionForPosition(i[a-1].getStart(t),t)!==m}if(function(t,r){for(var n=r;n<t.length;){var i=t.charCodeAt(n);if(!e.isWhiteSpaceSingleLine(i))return 47===i;n++}return!1}(t.text,r.end)&&(h=!0),h){this.replaceRange(t,e.createRange(o),e.createToken(y));var b=e.formatting.SmartIndenter.findFirstNonWhitespaceColumn(m,f,t,this.formatContext.options),x=e.skipTrivia(t.text,o,!0,!1);x!==o&&e.isLineBreak(t.text.charCodeAt(x-1))&&x--,this.replaceRange(t,e.createRange(x),n,{indentation:b,prefix:this.newLineCharacter})}else this.replaceRange(t,e.createRange(o),n,{prefix:e.tokenToString(y)+" "})}}}else e.Debug.fail("node is not a list element")},n.prototype.parenthesizeExpression=function(t,r){this.replaceRange(t,e.rangeOfNode(r),e.createParen(r))},n.prototype.finishClassesWithNodesInsertedAtStart=function(){var t=this;this.classesWithNodesInsertedAtStart.forEach((function(r){var n=r.node,i=r.sourceFile,a=x(n,i),o=a[0],s=a[1];e.positionsAreOnSameLine(o,s,i)&&o!==s-1&&t.deleteRange(i,e.createRange(o,s-1))}))},n.prototype.finishDeleteDeclarations=function(){for(var t=this,r=new e.NodeSet,n=function(t,n){i.deletedNodes.some((function(r){return r.sourceFile===t&&e.rangeContainsRangeExclusive(r.node,n)}))||(e.isArray(n)?i.deleteRange(t,e.rangeOfTypeParameters(n)):h.deleteDeclaration(i,r,t,n))},i=this,a=0,o=this.deletedNodes;a<o.length;a++){var s=o[a];n(s.sourceFile,s.node)}r.forEach((function(n){var i=n.getSourceFile(),a=e.formatting.SmartIndenter.getContainingList(n,i);if(n===e.last(a)){var o=e.findLastIndex(a,(function(e){return!r.has(e)}),a.length-2);-1!==o&&t.deleteRange(i,{pos:a[o].end,end:b(i,a[o+1])})}}))},n.prototype.getChanges=function(e){this.finishDeleteDeclarations(),this.finishClassesWithNodesInsertedAtStart();for(var t=y.getTextChangesFromChanges(this.changes,this.newLineCharacter,this.formatContext,e),r=0,n=this.newFiles;r<n.length;r++){var i=n[r],a=i.oldFile,o=i.fileName,s=i.statements;t.push(y.newFileChanges(a,o,s,this.newLineCharacter,this.formatContext))}return t},n.prototype.createNewFile=function(e,t,r){this.newFiles.push({oldFile:e,fileName:t,statements:r})},n}();function b(t,r){return e.skipTrivia(t.text,f(t,r,{leadingTriviaOption:c.IncludeAll}),!1,!0)}function x(t,r){return[e.findChildOfKind(t,18,r).end,e.findChildOfKind(t,19,r).end]}function D(t){return e.isObjectLiteralExpression(t)?t.properties:t.members}function S(t,r){for(var n=r.length-1;n>=0;n--){var i=r[n],a=i.span,o=i.newText;t=""+t.substring(0,a.start)+o+t.substring(e.textSpanEnd(a))}return t}function T(t){var r=e.visitEachChild(t,T,e.nullTransformationContext,E,T),n=e.nodeIsSynthesized(r)?r:Object.create(r);return n.pos=i(t),n.end=o(t),n}function E(t,r,n,a,s){var c=e.visitNodes(t,r,n,a,s);if(!c)return c;var u=c===t?e.createNodeArray(c.slice(0)):c;return u.pos=i(t),u.end=o(t),u}function C(t,r){return!(e.isInComment(t,r)||e.isInString(t,r)||e.isInTemplateString(t,r)||e.isInJSXText(t,r))}function k(e,t,r,n){void 0===n&&(n={leadingTriviaOption:c.IncludeAll});var i=f(t,r,n),a=m(t,r,n);e.deleteRange(t,{pos:i,end:a})}function N(t,r,n,i){var a=e.Debug.assertDefined(e.formatting.SmartIndenter.getContainingList(i,n)),o=e.indexOfNode(a,i);e.Debug.assert(-1!==o),1!==a.length?(e.Debug.assert(!r.has(i),"Deleting a node twice"),r.add(i),t.deleteRange(n,{pos:b(n,i),end:o===a.length-1?m(n,i,{}):b(n,a[o+1])})):k(t,n,i)}n.ChangeTracker=v,n.getNewFileText=function(e,t,r,n){return y.newFileChangesWorker(void 0,t,e,r,n)},function(t){function n(t,r,n,a,o){var s=n.map((function(e){return i(e,t,a).text})).join(a),c=e.createSourceFile("any file name",s,99,!0,r);return S(s,e.formatting.formatDocument(c,o))+a}function i(t,r,n){var i=function(t){var r=0,n=e.createTextWriter(t);function i(t,i){if(i||!function(t){return e.skipTrivia(t,0)===t.length}(t)){r=n.getTextPos();for(var a=0;e.isWhiteSpaceLike(t.charCodeAt(t.length-a-1));)a++;r-=a}}return{onEmitNode:function(e,t,n){t&&a(t,r),n(e,t),t&&s(t,r)},onBeforeEmitNodeArray:function(e){e&&a(e,r)},onAfterEmitNodeArray:function(e){e&&s(e,r)},onBeforeEmitToken:function(e){e&&a(e,r)},onAfterEmitToken:function(e){e&&s(e,r)},write:function(e){n.write(e),i(e,!1)},writeComment:function(e){n.writeComment(e)},writeKeyword:function(e){n.writeKeyword(e),i(e,!1)},writeOperator:function(e){n.writeOperator(e),i(e,!1)},writePunctuation:function(e){n.writePunctuation(e),i(e,!1)},writeTrailingSemicolon:function(e){n.writeTrailingSemicolon(e),i(e,!1)},writeParameter:function(e){n.writeParameter(e),i(e,!1)},writeProperty:function(e){n.writeProperty(e),i(e,!1)},writeSpace:function(e){n.writeSpace(e),i(e,!1)},writeStringLiteral:function(e){n.writeStringLiteral(e),i(e,!1)},writeSymbol:function(e,t){n.writeSymbol(e,t),i(e,!1)},writeLine:function(){n.writeLine()},increaseIndent:function(){n.increaseIndent()},decreaseIndent:function(){n.decreaseIndent()},getText:function(){return n.getText()},rawWrite:function(e){n.rawWrite(e),i(e,!1)},writeLiteral:function(e){n.writeLiteral(e),i(e,!0)},getTextPos:function(){return n.getTextPos()},getLine:function(){return n.getLine()},getColumn:function(){return n.getColumn()},getIndent:function(){return n.getIndent()},isAtStartOfLine:function(){return n.isAtStartOfLine()},hasTrailingComment:function(){return n.hasTrailingComment()},hasTrailingWhitespace:function(){return n.hasTrailingWhitespace()},clear:function(){n.clear(),r=0}}}(n),o="\n"===n?1:0;return e.createPrinter({newLine:o,neverAsciiEscape:!0},i).writeNode(4,t,r,i),{text:i.getText(),node:T(t)}}t.getTextChangesFromChanges=function(t,n,a,o){return e.group(t,(function(e){return e.sourceFile.path})).map((function(t){for(var s=t[0].sourceFile,c=e.stableSort(t,(function(e,t){return e.range.pos-t.range.pos||e.range.end-t.range.end})),u=function(t){e.Debug.assert(c[t].range.end<=c[t+1].range.pos,"Changes overlap",(function(){return JSON.stringify(c[t].range)+" and "+JSON.stringify(c[t+1].range)}))},l=0;l<c.length-1;l++)u(l);var d=c.map((function(t){return e.createTextChange(e.createTextSpanFromRange(t.range),function(t,n,a,o,s){if(t.kind===_.Remove)return"";if(t.kind===_.Text)return t.text;var c=t.options,u=void 0===c?{}:c,l=t.range.pos,d=function(t){return function(t,n,a,o,s,c,u){var l=o.indentation,_=o.prefix,d=o.delta,p=i(t,n,s),f=p.node,m=p.text;u&&u(f,m);var g=function(t,n){var i=t.options,a=!i.semicolons||i.semicolons===e.SemicolonPreference.Ignore,o=i.semicolons===e.SemicolonPreference.Remove||a&&!e.probablyUsesSemicolons(n);return r(r({},i),{semicolons:o?e.SemicolonPreference.Remove:e.SemicolonPreference.Ignore})}(c,n),y=void 0!==l?l:e.formatting.SmartIndenter.getIndentation(a,n,g,_===s||e.getLineStartPositionForPosition(a,n)===a);void 0===d&&(d=e.formatting.SmartIndenter.shouldIndentChildNode(g,t)&&g.indentSize||0);var h={text:m,getLineAndCharacterOfPosition:function(t){return e.getLineAndCharacterOfPosition(this,t)}},v=e.formatting.formatNodeGivenIndentation(f,h,n.languageVariant,y,d,r(r({},c),{options:g}));return S(m,v)}(t,n,l,u,a,o,s)},p=t.kind===_.ReplaceWithMultipleNodes?t.nodes.map((function(t){return e.removeSuffix(d(t),a)})).join(t.options.joiner||a):d(t.node),f=u.preserveLeadingWhitespace||void 0!==u.indentation||e.getLineStartPositionForPosition(l,n)===l?p:p.replace(/^\s+/,"");return(u.prefix||"")+f+(u.suffix||"")}(t,s,n,a,o))}));return{fileName:s.fileName,textChanges:d}}))},t.newFileChanges=function(t,r,i,a,o){var s=n(t,e.getScriptKindFromFileName(r),i,a,o);return{fileName:r,textChanges:[e.createTextChange(e.createTextSpan(0,0),s)],isNewFile:!0}},t.newFileChangesWorker=n,t.getNonformattedText=i}(y||(y={})),n.applyChanges=S,n.isValidLocationToAddComment=C,function(t){function r(t,r,n){if(n.parent.name){var i=e.Debug.assertDefined(e.getTokenAtPosition(r,n.pos-1));t.deleteRange(r,{pos:i.getStart(r),end:n.end})}else{k(t,r,e.getAncestor(n,253))}}t.deleteDeclaration=function(t,n,i,a){switch(a.kind){case 155:var o=a.parent;e.isArrowFunction(o)&&1===o.parameters.length&&!e.findChildOfKind(o,20,i)?t.replaceNodeWithText(i,a,"()"):N(t,n,i,a);break;case 253:k(t,i,a,a===i.imports[0].parent?{leadingTriviaOption:c.Exclude}:void 0);break;case 190:var s=a.parent;189===s.kind&&a!==e.last(s.elements)?k(t,i,a):N(t,n,i,a);break;case 241:!function(t,r,n,i){var a=i.parent;if(278===a.kind)return void t.deleteNodeRange(n,e.findChildOfKind(a,20,n),e.findChildOfKind(a,21,n));if(1!==a.declarations.length)return void N(t,r,n,i);var o=a.parent;switch(o.kind){case 231:case 230:t.replaceNode(n,i,e.createObjectLiteral());break;case 229:k(t,n,a);break;case 224:k(t,n,o);break;default:e.Debug.assertNever(o)}}(t,n,i,a);break;case 154:N(t,n,i,a);break;case 257:var l=a.parent;1===l.elements.length?r(t,i,l):N(t,n,i,a);break;case 255:r(t,i,a);break;default:e.isImportClause(a.parent)&&a.parent.name===a?function(t,r,n){if(n.namedBindings){var i=n.name.getStart(r),a=e.getTokenAtPosition(r,n.name.end);if(a&&27===a.kind){var o=e.skipTrivia(r.text,a.end,!1,!0);t.deleteRange(r,{pos:i,end:o})}else k(t,r,n.name)}else k(t,r,n.parent)}(t,i,a.parent):e.isCallLikeExpression(a.parent)?N(t,n,i,a):k(t,i,a,26===a.kind?{trailingTriviaOption:u.Exclude}:void 0)}}}(h||(h={})),n.deleteNode=k}(e.textChanges||(e.textChanges={}))}(s||(s={})),function(e){!function(t){var r=e.createMultiMap(),n=e.createMap();function i(t){return e.isArray(t)?e.formatStringFromArgs(e.getLocaleSpecificMessage(t[0]),t.slice(1)):e.getLocaleSpecificMessage(t)}function a(e,t,r,n,i,a){return{fixName:e,description:t,changes:r,fixId:n,fixAllDescription:i,commands:a?[a]:void 0}}function o(e,t){return{changes:e,commands:t}}function s(t,r,n){for(var i=t.program,a=t.sourceFile,o=t.cancellationToken,s=0,c=i.getSemanticDiagnostics(a,o).concat(e.computeSuggestionDiagnostics(a,i,o));s<c.length;s++){var u=c[s];e.contains(r,u.code)&&n(u)}}t.createCodeFixActionNoFixId=function(e,t,r){return a(e,i(r),t,void 0,void 0)},t.createCodeFixAction=function(e,t,r,n,o,s){return a(e,i(r),t,n,i(o),s)},t.registerCodeFix=function(t){for(var i=0,a=t.errorCodes;i<a.length;i++){var o=a[i];r.add(String(o),t)}if(t.fixIds)for(var s=0,c=t.fixIds;s<c.length;s++){var u=c[s];e.Debug.assert(!n.has(u)),n.set(u,t)}},t.getSupportedErrorCodes=function(){return e.arrayFrom(r.keys())},t.getFixes=function(t){return e.flatMap(r.get(String(t.errorCode))||e.emptyArray,(function(e){return e.getCodeActions(t)}))},t.getAllFixes=function(t){return n.get(e.cast(t.fixId,e.isString)).getAllCodeActions(t)},t.createCombinedCodeActions=o,t.createFileTextChanges=function(e,t){return{fileName:e,textChanges:t}},t.codeFixAll=function(t,r,n){var i=[];return o(e.textChanges.ChangeTracker.with(t,(function(e){return s(t,r,(function(t){return n(e,t,i)}))})),0===i.length?void 0:i)},t.eachDiagnostic=s}(e.codefix||(e.codefix={}))}(s||(s={})),function(e){var t,r;t=e.refactor||(e.refactor={}),r=e.createMap(),t.registerRefactor=function(e,t){r.set(e,t)},t.getApplicableRefactors=function(t){return e.arrayFrom(e.flatMapIterator(r.values(),(function(e){return t.cancellationToken&&t.cancellationToken.isCancellationRequested()?void 0:e.getAvailableActions(t)})))},t.getEditsForRefactor=function(e,t,n){var i=r.get(t);return i&&i.getEditsForAction(e,n)},e.getRefactorContextSpan=function(t){var r=t.startPosition,n=t.endPosition;return e.createTextSpanFromBounds(r,void 0===n?r:n)}}(s||(s={})),function(e){!function(t){var r="addConvertToUnknownForNonOverlappingTypes",n=[e.Diagnostics.Conversion_of_type_0_to_type_1_may_be_a_mistake_because_neither_type_sufficiently_overlaps_with_the_other_If_this_was_intentional_convert_the_expression_to_unknown_first.code];function i(t,r,n){var i=e.getTokenAtPosition(r,n),a=e.Debug.assertDefined(e.findAncestor(i,(function(t){return e.isAsExpression(t)||e.isTypeAssertion(t)})),"Expected to find an assertion expression"),o=e.isAsExpression(a)?e.createAsExpression(a.expression,e.createKeywordTypeNode(147)):e.createTypeAssertion(e.createKeywordTypeNode(147),a.expression);t.replaceNode(r,a.expression,o)}t.registerCodeFix({errorCodes:n,getCodeActions:function(n){var a=e.textChanges.ChangeTracker.with(n,(function(e){return i(e,n.sourceFile,n.span.start)}));return[t.createCodeFixAction(r,a,e.Diagnostics.Add_unknown_conversion_for_non_overlapping_types,r,e.Diagnostics.Add_unknown_to_all_conversions_of_non_overlapping_types)]},fixIds:[r],getAllCodeActions:function(e){return t.codeFixAll(e,n,(function(e,t){return i(e,t.file,t.start)}))}})}(e.codefix||(e.codefix={}))}(s||(s={})),function(e){!function(r){var n="addMissingAwait",i=e.Diagnostics.Property_0_does_not_exist_on_type_1.code,a=[e.Diagnostics.This_expression_is_not_callable.code,e.Diagnostics.This_expression_is_not_constructable.code],o=t([e.Diagnostics.An_arithmetic_operand_must_be_of_type_any_number_bigint_or_an_enum_type.code,e.Diagnostics.The_left_hand_side_of_an_arithmetic_operation_must_be_of_type_any_number_bigint_or_an_enum_type.code,e.Diagnostics.The_right_hand_side_of_an_arithmetic_operation_must_be_of_type_any_number_bigint_or_an_enum_type.code,e.Diagnostics.Operator_0_cannot_be_applied_to_type_1.code,e.Diagnostics.Operator_0_cannot_be_applied_to_types_1_and_2.code,e.Diagnostics.This_condition_will_always_return_0_since_the_types_1_and_2_have_no_overlap.code,e.Diagnostics.Type_0_is_not_an_array_type.code,e.Diagnostics.Type_0_is_not_an_array_type_or_a_string_type.code,e.Diagnostics.Type_0_is_not_an_array_type_or_a_string_type_Use_compiler_option_downlevelIteration_to_allow_iterating_of_iterators.code,e.Diagnostics.Type_0_is_not_an_array_type_or_a_string_type_or_does_not_have_a_Symbol_iterator_method_that_returns_an_iterator.code,e.Diagnostics.Type_0_is_not_an_array_type_or_does_not_have_a_Symbol_iterator_method_that_returns_an_iterator.code,e.Diagnostics.Type_0_must_have_a_Symbol_iterator_method_that_returns_an_iterator.code,e.Diagnostics.Type_0_must_have_a_Symbol_asyncIterator_method_that_returns_an_async_iterator.code,e.Diagnostics.Argument_of_type_0_is_not_assignable_to_parameter_of_type_1.code,i],a);function s(t,n,i,a,s,c){var u=t.sourceFile,d=t.program,p=t.cancellationToken,f=function(t,r,n,i,a){var s=function(t,r){if(e.isPropertyAccessExpression(t.parent)&&e.isIdentifier(t.parent.expression))return{identifiers:[t.parent.expression],isCompleteFix:!0};if(e.isIdentifier(t))return{identifiers:[t],isCompleteFix:!0};if(e.isBinaryExpression(t)){for(var n=void 0,i=!0,a=0,o=[t.left,t.right];a<o.length;a++){var s=o[a],c=r.getTypeAtLocation(s);if(r.getPromisedTypeOfPromise(c)){if(!e.isIdentifier(s)){i=!1;continue}(n||(n=[])).push(s)}}return n&&{identifiers:n,isCompleteFix:i}}}(t,a);if(!s)return;for(var c,u=s.isCompleteFix,_=function(t){var s=a.getSymbolAtLocation(t);if(!s)return"continue";var _=e.tryCast(s.valueDeclaration,e.isVariableDeclaration),d=_&&e.tryCast(_.name,e.isIdentifier),p=e.getAncestor(_,224);if(!_||!p||_.type||!_.initializer||p.getSourceFile()!==r||e.hasModifier(p,1)||!d||!l(_.initializer))return u=!1,"continue";var f=i.getSemanticDiagnostics(r,n);if(e.FindAllReferences.Core.eachSymbolReferenceInFile(d,a,r,(function(n){return t!==n&&!function(t,r,n,i){var a=e.isPropertyAccessExpression(t.parent)?t.parent.name:e.isBinaryExpression(t.parent)?t.parent:t,s=e.find(r,(function(e){return e.start===a.getStart(n)&&e.start+e.length===a.getEnd()}));return s&&e.contains(o,s.code)||1&i.getTypeAtLocation(a).flags}(n,f,r,a)})))return u=!1,"continue";(c||(c=[])).push({expression:_.initializer,declarationSymbol:s})},d=0,p=s.identifiers;d<p.length;d++){var f=p[d];_(f)}return c&&{initializers:c,needsSecondPassForFixAll:!u}}(n,u,p,d,a);if(f){var m=s((function(t){e.forEach(f.initializers,(function(e){var r=e.expression;return _(t,i,u,a,r,c)})),c&&f.needsSecondPassForFixAll&&_(t,i,u,a,n,c)}));return r.createCodeFixActionNoFixId("addMissingAwaitToInitializer",m,1===f.initializers.length?[e.Diagnostics.Add_await_to_initializer_for_0,f.initializers[0].declarationSymbol.name]:e.Diagnostics.Add_await_to_initializers)}}function c(t,i,a,o,s,c){var u=s((function(e){return _(e,a,t.sourceFile,o,i,c)}));return r.createCodeFixAction(n,u,e.Diagnostics.Add_await,n,e.Diagnostics.Fix_all_expressions_possibly_missing_await)}function u(t,r,n,i,a){var o=e.getTokenAtPosition(t,n.start),s=e.findAncestor(o,(function(r){return r.getStart(t)<n.start||r.getEnd()>e.textSpanEnd(n)?"quit":e.isExpression(r)&&e.textSpansEqual(n,e.createTextSpanFromNode(r,t))}));return s&&function(t,r,n,i,a){var o=a.getDiagnosticsProducingTypeChecker().getDiagnostics(t,i);return e.some(o,(function(t){var i=t.start,a=t.length,o=t.relatedInformation,s=t.code;return e.isNumber(i)&&e.isNumber(a)&&e.textSpansEqual({start:i,length:a},n)&&s===r&&!!o&&e.some(o,(function(t){return t.code===e.Diagnostics.Did_you_forget_to_use_await.code}))}))}(t,r,n,i,a)&&l(s)?s:void 0}function l(t){return 32768&t.kind||!!e.findAncestor(t,(function(t){return t.parent&&e.isArrowFunction(t.parent)&&t.parent.body===t||e.isBlock(t)&&(243===t.parent.kind||200===t.parent.kind||201===t.parent.kind||160===t.parent.kind)}))}function _(t,r,n,o,s,c){if(e.isBinaryExpression(s))for(var u=0,l=[s.left,s.right];u<l.length;u++){var _=l[u];if(c&&e.isIdentifier(_))if((f=o.getSymbolAtLocation(_))&&c.has(e.getSymbolId(f).toString()))continue;var d=o.getTypeAtLocation(_),p=o.getPromisedTypeOfPromise(d)?e.createAwait(_):_;t.replaceNode(n,_,p)}else if(r===i&&e.isPropertyAccessExpression(s.parent)){if(c&&e.isIdentifier(s.parent.expression))if((f=o.getSymbolAtLocation(s.parent.expression))&&c.has(e.getSymbolId(f).toString()))return;t.replaceNode(n,s.parent.expression,e.createParen(e.createAwait(s.parent.expression)))}else if(e.contains(a,r)&&e.isCallOrNewExpression(s.parent)){if(c&&e.isIdentifier(s))if((f=o.getSymbolAtLocation(s))&&c.has(e.getSymbolId(f).toString()))return;t.replaceNode(n,s,e.createParen(e.createAwait(s)))}else{var f;if(c&&e.isVariableDeclaration(s.parent)&&e.isIdentifier(s.parent.name))if((f=o.getSymbolAtLocation(s.parent.name))&&!e.addToSeen(c,e.getSymbolId(f)))return;t.replaceNode(n,s,e.createAwait(s))}}r.registerCodeFix({fixIds:[n],errorCodes:o,getCodeActions:function(t){var r=t.sourceFile,n=t.errorCode,i=u(r,n,t.span,t.cancellationToken,t.program);if(i){var a=t.program.getTypeChecker(),o=function(r){return e.textChanges.ChangeTracker.with(t,r)};return e.compact([s(t,i,n,a,o),c(t,i,n,a,o)])}},getAllCodeActions:function(t){var n=t.sourceFile,i=t.program,a=t.cancellationToken,l=t.program.getTypeChecker(),_=e.createMap();return r.codeFixAll(t,o,(function(e,r){var o=u(n,r.code,r,a,i);if(o){var d=function(t){return t(e),[]};return s(t,o,r.code,l,d,_)||c(t,o,r.code,l,d,_)}}))}})}(e.codefix||(e.codefix={}))}(s||(s={})),function(e){!function(t){var r="addMissingConst",n=[e.Diagnostics.Cannot_find_name_0.code,e.Diagnostics.No_value_exists_in_scope_for_the_shorthand_property_0_Either_declare_one_or_provide_an_initializer.code];function i(t,r,n,i,o){var s=e.getTokenAtPosition(r,n),c=e.findAncestor(s,(function(t){return e.isForInOrOfStatement(t.parent)?t.parent.initializer===t:!function(e){switch(e.kind){case 75:case 191:case 192:case 279:case 280:return!0;default:return!1}}(t)&&"quit"}));if(c)return a(t,c,r,o);var u=s.parent;if(e.isBinaryExpression(u)&&e.isExpressionStatement(u.parent))return a(t,s,r,o);if(e.isArrayLiteralExpression(u)){var l=i.getTypeChecker();if(!e.every(u.elements,(function(t){return function(t,r){var n=e.isIdentifier(t)?t:e.isAssignmentExpression(t,!0)&&e.isIdentifier(t.left)?t.left:void 0;return!!n&&!r.getSymbolAtLocation(n)}(t,l)})))return;return a(t,u,r,o)}var _=e.findAncestor(s,(function(t){return!!e.isExpressionStatement(t.parent)||!function(e){switch(e.kind){case 75:case 208:case 27:return!0;default:return!1}}(t)&&"quit"}));if(_){if(!function t(r,n){if(!e.isBinaryExpression(r))return!1;if(27===r.operatorToken.kind)return e.every([r.left,r.right],(function(e){return t(e,n)}));return e.isIdentifier(r.left)&&!n.getSymbolAtLocation(r.left)}(_,i.getTypeChecker()))return;return a(t,_,r,o)}}function a(e,t,r,n){n&&!n.tryAdd(t)||e.insertModifierBefore(r,80,t)}t.registerCodeFix({errorCodes:n,getCodeActions:function(n){var a=e.textChanges.ChangeTracker.with(n,(function(e){return i(e,n.sourceFile,n.span.start,n.program)}));if(a.length>0)return[t.createCodeFixAction(r,a,e.Diagnostics.Add_const_to_unresolved_variable,r,e.Diagnostics.Add_const_to_all_unresolved_variables)]},fixIds:[r],getAllCodeActions:function(r){var a=new e.NodeSet;return t.codeFixAll(r,n,(function(e,t){return i(e,t.file,t.start,r.program,a)}))}})}(e.codefix||(e.codefix={}))}(s||(s={})),function(e){!function(t){var r="addMissingDeclareProperty",n=[e.Diagnostics.Property_0_will_overwrite_the_base_property_in_1_If_this_is_intentional_add_an_initializer_Otherwise_add_a_declare_modifier_or_remove_the_redundant_declaration.code];function i(t,r,n,i){var a=e.getTokenAtPosition(r,n);if(e.isIdentifier(a)){var o=a.parent;158!==o.kind||i&&!i.tryAdd(o)||t.insertModifierBefore(r,129,o)}}t.registerCodeFix({errorCodes:n,getCodeActions:function(n){var a=e.textChanges.ChangeTracker.with(n,(function(e){return i(e,n.sourceFile,n.span.start)}));if(a.length>0)return[t.createCodeFixAction(r,a,e.Diagnostics.Prefix_with_declare,r,e.Diagnostics.Prefix_all_incorrect_property_declarations_with_declare)]},fixIds:[r],getAllCodeActions:function(r){var a=new e.NodeSet;return t.codeFixAll(r,n,(function(e,t){return i(e,t.file,t.start,a)}))}})}(e.codefix||(e.codefix={}))}(s||(s={})),function(e){!function(t){var r="addMissingInvocationForDecorator",n=[e.Diagnostics._0_accepts_too_few_arguments_to_be_used_as_a_decorator_here_Did_you_mean_to_call_it_first_and_write_0.code];function i(t,r,n){var i=e.getTokenAtPosition(r,n),a=e.findAncestor(i,e.isDecorator);e.Debug.assert(!!a,"Expected position to be owned by a decorator.");var o=e.createCall(a.expression,void 0,void 0);t.replaceNode(r,a.expression,o)}t.registerCodeFix({errorCodes:n,getCodeActions:function(n){var a=e.textChanges.ChangeTracker.with(n,(function(e){return i(e,n.sourceFile,n.span.start)}));return[t.createCodeFixAction(r,a,e.Diagnostics.Call_decorator_expression,r,e.Diagnostics.Add_to_all_uncalled_decorators)]},fixIds:[r],getAllCodeActions:function(e){return t.codeFixAll(e,n,(function(e,t){return i(e,t.file,t.start)}))}})}(e.codefix||(e.codefix={}))}(s||(s={})),function(e){!function(t){var r="addNameToNamelessParameter",n=[e.Diagnostics.Parameter_has_a_name_but_no_type_Did_you_mean_0_Colon_1.code];function i(t,r,n){var i=e.getTokenAtPosition(r,n);if(!e.isIdentifier(i))return e.Debug.fail("add-name-to-nameless-parameter operates on identifiers, but got a "+e.Debug.formatSyntaxKind(i.kind));var a=i.parent;if(!e.isParameter(a))return e.Debug.fail("Tried to add a parameter name to a non-parameter: "+e.Debug.formatSyntaxKind(i.kind));var o=a.parent.parameters.indexOf(a);e.Debug.assert(!a.type,"Tried to add a parameter name to a parameter that already had one."),e.Debug.assert(o>-1,"Parameter not found in parent parameter list.");var s=e.createParameter(void 0,a.modifiers,a.dotDotDotToken,"arg"+o,a.questionToken,e.createTypeReferenceNode(i,void 0),a.initializer);t.replaceNode(r,i,s)}t.registerCodeFix({errorCodes:n,getCodeActions:function(n){var a=e.textChanges.ChangeTracker.with(n,(function(e){return i(e,n.sourceFile,n.span.start)}));return[t.createCodeFixAction(r,a,e.Diagnostics.Add_parameter_name,r,e.Diagnostics.Add_names_to_all_parameters_without_names)]},fixIds:[r],getAllCodeActions:function(e){return t.codeFixAll(e,n,(function(e,t){return i(e,t.file,t.start)}))}})}(e.codefix||(e.codefix={}))}(s||(s={})),function(e){!function(t){var r="annotateWithTypeFromJSDoc",n=[e.Diagnostics.JSDoc_types_may_be_moved_to_TypeScript_types.code];function i(t,r){var n=e.getTokenAtPosition(t,r);return e.tryCast(e.isParameter(n.parent)?n.parent.parent:n.parent,a)}function a(t){return function(t){return e.isFunctionLikeDeclaration(t)||241===t.kind||157===t.kind||158===t.kind}(t)&&o(t)}function o(t){return e.isFunctionLikeDeclaration(t)?t.parameters.some(o)||!t.type&&!!e.getJSDocReturnType(t):!t.type&&!!e.getJSDocType(t)}function s(t,r,n){if(e.isFunctionLikeDeclaration(n)&&(e.getJSDocReturnType(n)||n.parameters.some((function(t){return!!e.getJSDocType(t)})))){if(!n.typeParameters){var i=e.getJSDocTypeParameterDeclarations(n);i.length&&t.insertTypeParameters(r,n,i)}var a=e.isArrowFunction(n)&&!e.findChildOfKind(n,20,r);a&&t.insertNodeBefore(r,e.first(n.parameters),e.createToken(20));for(var o=0,s=n.parameters;o<s.length;o++){var u=s[o];if(!u.type){var l=e.getJSDocType(u);l&&t.tryInsertTypeAnnotation(r,u,c(l))}}if(a&&t.insertNodeAfter(r,e.last(n.parameters),e.createToken(21)),!n.type){var _=e.getJSDocReturnType(n);_&&t.tryInsertTypeAnnotation(r,n,c(_))}}else{var d=e.Debug.assertDefined(e.getJSDocType(n),"A JSDocType for this declaration should exist");e.Debug.assert(!n.type,"The JSDocType decl should have a type"),t.tryInsertTypeAnnotation(r,n,c(d))}}function c(t){switch(t.kind){case 293:case 294:return e.createTypeReferenceNode("any",e.emptyArray);case 297:return function(t){return e.createUnionTypeNode([e.visitNode(t.type,c),e.createTypeReferenceNode("undefined",e.emptyArray)])}(t);case 296:return c(t.type);case 295:return function(t){return e.createUnionTypeNode([e.visitNode(t.type,c),e.createTypeReferenceNode("null",e.emptyArray)])}(t);case 299:return function(t){return e.createArrayTypeNode(e.visitNode(t.type,c))}(t);case 298:return function(t){return e.createFunctionTypeNode(e.emptyArray,t.parameters.map(u),t.type)}(t);case 168:return function(t){var r=t.typeName,n=t.typeArguments;if(e.isIdentifier(t.typeName)){if(e.isJSDocIndexSignature(t))return function(t){var r=e.createParameter(void 0,void 0,void 0,139===t.typeArguments[0].kind?"n":"s",void 0,e.createTypeReferenceNode(139===t.typeArguments[0].kind?"number":"string",[]),void 0),n=e.createTypeLiteralNode([e.createIndexSignature(void 0,void 0,[r],t.typeArguments[1])]);return e.setEmitFlags(n,1),n}(t);var i=t.typeName.text;switch(t.typeName.text){case"String":case"Boolean":case"Object":case"Number":i=i.toLowerCase();break;case"array":case"date":case"promise":i=i[0].toUpperCase()+i.slice(1)}r=e.createIdentifier(i),n="Array"!==i&&"Promise"!==i||t.typeArguments?e.visitNodes(t.typeArguments,c):e.createNodeArray([e.createTypeReferenceNode("any",e.emptyArray)])}return e.createTypeReferenceNode(r,n)}(t);default:var r=e.visitEachChild(t,c,void 0);return e.setEmitFlags(r,1),r}}function u(t){var r=t.parent.parameters.indexOf(t),n=299===t.type.kind&&r===t.parent.parameters.length-1,i=t.name||(n?"rest":"arg"+r),a=n?e.createToken(25):t.dotDotDotToken;return e.createParameter(t.decorators,t.modifiers,a,i,t.questionToken,e.visitNode(t.type,c),t.initializer)}t.registerCodeFix({errorCodes:n,getCodeActions:function(n){var a=i(n.sourceFile,n.span.start);if(a){var o=e.textChanges.ChangeTracker.with(n,(function(e){return s(e,n.sourceFile,a)}));return[t.createCodeFixAction(r,o,e.Diagnostics.Annotate_with_type_from_JSDoc,r,e.Diagnostics.Annotate_everything_with_types_from_JSDoc)]}},fixIds:[r],getAllCodeActions:function(e){return t.codeFixAll(e,n,(function(e,t){var r=i(t.file,t.start);r&&s(e,t.file,r)}))}}),t.parameterShouldGetTypeFromJSDoc=a}(e.codefix||(e.codefix={}))}(s||(s={})),function(e){!function(r){var n="inferFromUsage",i=[e.Diagnostics.Variable_0_implicitly_has_type_1_in_some_locations_where_its_type_cannot_be_determined.code,e.Diagnostics.Variable_0_implicitly_has_an_1_type.code,e.Diagnostics.Parameter_0_implicitly_has_an_1_type.code,e.Diagnostics.Rest_parameter_0_implicitly_has_an_any_type.code,e.Diagnostics.Property_0_implicitly_has_type_any_because_its_get_accessor_lacks_a_return_type_annotation.code,e.Diagnostics._0_which_lacks_return_type_annotation_implicitly_has_an_1_return_type.code,e.Diagnostics.Property_0_implicitly_has_type_any_because_its_set_accessor_lacks_a_parameter_type_annotation.code,e.Diagnostics.Member_0_implicitly_has_an_1_type.code,e.Diagnostics.Variable_0_implicitly_has_type_1_in_some_locations_but_a_better_type_may_be_inferred_from_usage.code,e.Diagnostics.Variable_0_implicitly_has_an_1_type_but_a_better_type_may_be_inferred_from_usage.code,e.Diagnostics.Parameter_0_implicitly_has_an_1_type_but_a_better_type_may_be_inferred_from_usage.code,e.Diagnostics.Rest_parameter_0_implicitly_has_an_any_type_but_a_better_type_may_be_inferred_from_usage.code,e.Diagnostics.Property_0_implicitly_has_type_any_but_a_better_type_for_its_get_accessor_may_be_inferred_from_usage.code,e.Diagnostics._0_implicitly_has_an_1_return_type_but_a_better_type_may_be_inferred_from_usage.code,e.Diagnostics.Property_0_implicitly_has_type_any_but_a_better_type_for_its_set_accessor_may_be_inferred_from_usage.code,e.Diagnostics.Member_0_implicitly_has_an_1_type_but_a_better_type_may_be_inferred_from_usage.code,e.Diagnostics.this_implicitly_has_type_any_because_it_does_not_have_a_type_annotation.code];function a(t,r){switch(t){case e.Diagnostics.Parameter_0_implicitly_has_an_1_type.code:case e.Diagnostics.Parameter_0_implicitly_has_an_1_type_but_a_better_type_may_be_inferred_from_usage.code:return e.isSetAccessorDeclaration(e.getContainingFunction(r))?e.Diagnostics.Infer_type_of_0_from_usage:e.Diagnostics.Infer_parameter_types_from_usage;case e.Diagnostics.Rest_parameter_0_implicitly_has_an_any_type.code:case e.Diagnostics.Rest_parameter_0_implicitly_has_an_any_type_but_a_better_type_may_be_inferred_from_usage.code:return e.Diagnostics.Infer_parameter_types_from_usage;case e.Diagnostics.this_implicitly_has_type_any_because_it_does_not_have_a_type_annotation.code:return e.Diagnostics.Infer_this_type_of_0_from_usage;default:return e.Diagnostics.Infer_type_of_0_from_usage}}function o(t,r,n,i,a,o,d,g,y,h){if(e.isParameterPropertyModifier(n.kind)||75===n.kind||25===n.kind||103===n.kind){var v=n.parent;switch(i=function(t){switch(t){case e.Diagnostics.Variable_0_implicitly_has_type_1_in_some_locations_but_a_better_type_may_be_inferred_from_usage.code:return e.Diagnostics.Variable_0_implicitly_has_type_1_in_some_locations_where_its_type_cannot_be_determined.code;case e.Diagnostics.Variable_0_implicitly_has_an_1_type_but_a_better_type_may_be_inferred_from_usage.code:return e.Diagnostics.Variable_0_implicitly_has_an_1_type.code;case e.Diagnostics.Parameter_0_implicitly_has_an_1_type_but_a_better_type_may_be_inferred_from_usage.code:return e.Diagnostics.Parameter_0_implicitly_has_an_1_type.code;case e.Diagnostics.Rest_parameter_0_implicitly_has_an_any_type_but_a_better_type_may_be_inferred_from_usage.code:return e.Diagnostics.Rest_parameter_0_implicitly_has_an_any_type.code;case e.Diagnostics.Property_0_implicitly_has_type_any_but_a_better_type_for_its_get_accessor_may_be_inferred_from_usage.code:return e.Diagnostics.Property_0_implicitly_has_type_any_because_its_get_accessor_lacks_a_return_type_annotation.code;case e.Diagnostics._0_implicitly_has_an_1_return_type_but_a_better_type_may_be_inferred_from_usage.code:return e.Diagnostics._0_which_lacks_return_type_annotation_implicitly_has_an_1_return_type.code;case e.Diagnostics.Property_0_implicitly_has_type_any_but_a_better_type_for_its_set_accessor_may_be_inferred_from_usage.code:return e.Diagnostics.Property_0_implicitly_has_type_any_because_its_set_accessor_lacks_a_parameter_type_annotation.code;case e.Diagnostics.Member_0_implicitly_has_an_1_type_but_a_better_type_may_be_inferred_from_usage.code:return e.Diagnostics.Member_0_implicitly_has_an_1_type.code}return t}(i)){case e.Diagnostics.Member_0_implicitly_has_an_1_type.code:case e.Diagnostics.Variable_0_implicitly_has_type_1_in_some_locations_where_its_type_cannot_be_determined.code:if(e.isVariableDeclaration(v)&&d(v)||e.isPropertyDeclaration(v)||e.isPropertySignature(v))return s(t,r,v,a,g,o,y,h),v;if(e.isPropertyAccessExpression(v)){var b=p(v.name,a,o),x=e.getTypeNodeIfAccessible(b,v,a,g);if(x){var D=e.createJSDocTypeTag(e.createJSDocTypeExpression(x),"");_(t,r,e.cast(v.parent.parent,e.isExpressionStatement),[D])}return v}return;case e.Diagnostics.Variable_0_implicitly_has_an_1_type.code:var S=a.getTypeChecker().getSymbolAtLocation(n);return S&&S.valueDeclaration&&e.isVariableDeclaration(S.valueDeclaration)&&d(S.valueDeclaration)?(s(t,r,S.valueDeclaration,a,g,o,y,h),S.valueDeclaration):void 0}var T=e.getContainingFunction(n);if(void 0!==T)switch(i){case e.Diagnostics.Parameter_0_implicitly_has_an_1_type.code:if(e.isSetAccessorDeclaration(T))return c(t,r,T,a,g,o,y,h),T;case e.Diagnostics.Rest_parameter_0_implicitly_has_an_any_type.code:if(d(T)){var E=e.cast(v,e.isParameter);return function(t,r,n,i,a,o,s,c,_){if(!e.isIdentifier(n.name))return;var d=function(t,r,n,i){var a=f(t,r,n,i);return a&&m(n,a,i).parameters(t)||t.parameters.map((function(t){return{declaration:t,type:e.isIdentifier(t.name)?p(t.name,n,i):n.getTypeChecker().getAnyType()}}))}(i,r,a,s);if(e.Debug.assert(i.parameters.length===d.length,"Parameter count and inference count should match"),e.isInJSFile(i))l(t,r,d,a,o);else{var g=e.isArrowFunction(i)&&!e.findChildOfKind(i,20,r);g&&t.insertNodeBefore(r,e.first(i.parameters),e.createToken(20));for(var y=0,h=d;y<h.length;y++){var v=h[y],b=v.declaration,x=v.type;!b||b.type||b.initializer||u(t,r,b,x,a,o,c,_)}g&&t.insertNodeAfter(r,e.last(i.parameters),e.createToken(21))}}(t,r,E,T,a,g,o,y,h),E}return;case e.Diagnostics.Property_0_implicitly_has_type_any_because_its_get_accessor_lacks_a_return_type_annotation.code:case e.Diagnostics._0_which_lacks_return_type_annotation_implicitly_has_an_1_return_type.code:return e.isGetAccessorDeclaration(T)&&e.isIdentifier(T.name)?(u(t,r,T,p(T.name,a,o),a,g,y,h),T):void 0;case e.Diagnostics.Property_0_implicitly_has_type_any_because_its_set_accessor_lacks_a_parameter_type_annotation.code:return e.isSetAccessorDeclaration(T)?(c(t,r,T,a,g,o,y,h),T):void 0;case e.Diagnostics.this_implicitly_has_type_any_because_it_does_not_have_a_type_annotation.code:return e.textChanges.isThisTypeAnnotatable(T)&&d(T)?(function(t,r,n,i,a,o){var s=f(n,r,i,o);if(!s||!s.length)return;var c=m(i,s,o).thisParameter(),u=e.getTypeNodeIfAccessible(c,n,i,a);if(!u)return;e.isInJSFile(n)?function(t,r,n,i){_(t,r,n,[e.createJSDocThisTag(e.createJSDocTypeExpression(i))])}(t,r,n,u):t.tryInsertThisTypeAnnotation(r,n,u)}(t,r,T,a,g,o),T):void 0;default:return e.Debug.fail(String(i))}}}function s(t,r,n,i,a,o,s,c){e.isIdentifier(n.name)&&u(t,r,n,p(n.name,i,o),i,a,s,c)}function c(t,r,n,i,a,o,s,c){var _=e.firstOrUndefined(n.parameters);if(_&&e.isIdentifier(n.name)&&e.isIdentifier(_.name)){var d=p(n.name,i,o);d===i.getTypeChecker().getAnyType()&&(d=p(_.name,i,o)),e.isInJSFile(n)?l(t,r,[{declaration:_,type:d}],i,a):u(t,r,_,d,i,a,s,c)}}function u(t,n,i,a,o,s,c,u){var l=e.getTypeNodeIfAccessible(a,i,o,s);if(l)if(e.isInJSFile(n)&&157!==i.kind){var d=e.isVariableDeclaration(i)?e.tryCast(i.parent.parent,e.isVariableStatement):i;if(!d)return;var p=e.createJSDocTypeExpression(l);_(t,n,d,[e.isGetAccessorDeclaration(i)?e.createJSDocReturnTag(p,""):e.createJSDocTypeTag(p,"")])}else(function(t,n,i,a,o,s,c,u,l){var _;if(e.isLiteralImportTypeNode(t)&&t.qualifier&&o.symbol){var d=null===(_=e.find(o.symbol.declarations,(function(e){return!!e.getSourceFile().externalModuleIndicator})))||void 0===_?void 0:_.getSourceFile().symbol;if(d){var p=e.getFirstIdentifier(t.qualifier).symbol,f=r.getImportCompletionAction(p,d,i,p.name,c,s,u,a.pos,l);if(f.codeAction.changes.length&&n.tryInsertTypeAnnotation(i,a,e.createTypeReferenceNode(t.qualifier,t.typeArguments))){for(var m=0,g=f.codeAction.changes;m<g.length;m++){var y=g[m],h=i.fileName===y.fileName?i:e.Debug.assertDefined(s.getSourceFile(y.fileName));n.pushRaw(h,y)}return!0}}}return!1})(l,t,n,i,a,o,s,c,u)||t.tryInsertTypeAnnotation(n,i,l)}function l(t,r,n,i,a){var o=n.length&&n[0].declaration.parent;o&&_(t,r,o,e.mapDefined(n,(function(t){var r=t.declaration;if(!r.initializer&&!e.getJSDocType(r)&&e.isIdentifier(r.name)){var n=t.type&&e.getTypeNodeIfAccessible(t.type,r,i,a),o=e.getSynthesizedClone(r.name);return e.setEmitFlags(o,3584),n&&e.createJSDocParamTag(o,!!t.isOptional,e.createJSDocTypeExpression(n),"")}})))}function _(r,n,i,a){var o=e.mapDefined(i.jsDoc,(function(e){return e.comment})),s=e.flatMapToMutable(i.jsDoc,(function(e){return e.tags})),c=a.filter((function(t){return!s||!s.some((function(r,n){var i=function(t,r){if(t.kind!==r.kind)return;switch(t.kind){case 310:var n=t,i=r;return e.isIdentifier(n.name)&&e.isIdentifier(i.name)&&n.name.escapedText===i.name.escapedText?e.createJSDocParamTag(i.name,i.isBracketed,i.typeExpression,n.comment):void 0;case 311:return e.createJSDocReturnTag(r.typeExpression,t.comment)}}(r,t);return i&&(s[n]=i),!!i}))})),u=e.createJSDocComment(o.join("\n"),e.createNodeArray(t(s||e.emptyArray,c))),l=201===i.kind?function(e){if(158===e.parent.kind)return e.parent;return e.parent.parent}(i):i;l.jsDoc=i.jsDoc,l.jsDocCache=i.jsDocCache,r.insertJsdocCommentBefore(n,l,u)}function d(t,r,n){return e.mapDefined(e.FindAllReferences.getReferenceEntriesForNode(-1,t,r,r.getSourceFiles(),n),(function(t){return 0!==t.kind?e.tryCast(t.node,e.isIdentifier):void 0}))}function p(e,t,r){return m(t,d(e,t,r),r).single()}function f(t,r,n,i){var a;switch(t.kind){case 161:a=e.findChildOfKind(t,128,r);break;case 201:case 200:var o=t.parent;a=e.isVariableDeclaration(o)&&e.isIdentifier(o.name)?o.name:t.name;break;case 243:case 160:a=t.name}if(a)return d(a,n,i)}function m(r,n,i){var a=r.getTypeChecker(),o={string:function(){return a.getStringType()},number:function(){return a.getNumberType()},Array:function(e){return a.createArrayType(e)},Promise:function(e){return a.createPromiseType(e)}},s=[a.getStringType(),a.getNumberType(),a.createArrayType(a.getAnyType()),a.createPromiseType(a.getAnyType())];return{single:function(){return f(u(n))},parameters:function(o){if(0===n.length||!o.parameters)return;for(var s=c(),_=0,p=n;_<p.length;_++){var m=p[_];i.throwIfCancellationRequested(),l(m,s)}var g=t(s.constructs||[],s.calls||[]);return o.parameters.map((function(t,n){for(var s=[],c=e.isRestParameter(t),l=!1,_=0,p=g;_<p.length;_++){var m=p[_];if(m.argumentTypes.length<=n)l=e.isInJSFile(o),s.push(a.getUndefinedType());else if(c)for(var y=n;y<m.argumentTypes.length;y++)s.push(a.getBaseTypeOfLiteralType(m.argumentTypes[y]));else s.push(a.getBaseTypeOfLiteralType(m.argumentTypes[n]))}if(e.isIdentifier(t.name)){var h=u(d(t.name,r,i));s.push.apply(s,c?e.mapDefined(h,a.getElementTypeOfArrayType):h)}var v=f(s);return{type:c?a.createArrayType(v):v,isOptional:l&&!c,declaration:t}}))},thisParameter:function(){for(var t=c(),r=0,a=n;r<a.length;r++){var o=a[r];i.throwIfCancellationRequested(),l(o,t)}return f(t.candidateThisTypes||e.emptyArray)}};function c(){return{isNumber:void 0,isString:void 0,isNumberOrString:void 0,candidateTypes:void 0,properties:void 0,calls:void 0,constructs:void 0,numberIndex:void 0,stringIndex:void 0,candidateThisTypes:void 0,inferredTypes:void 0}}function u(e){for(var t={isNumber:void 0,isString:void 0,isNumberOrString:void 0,candidateTypes:void 0,properties:void 0,calls:void 0,constructs:void 0,numberIndex:void 0,stringIndex:void 0,candidateThisTypes:void 0,inferredTypes:void 0},r=0,n=e;r<n.length;r++){var a=n[r];i.throwIfCancellationRequested(),l(a,t)}return m(t)}function l(t,r){for(;e.isRightSideOfQualifiedNameOrPropertyAccess(t);)t=t.parent;switch(t.parent.kind){case 225:h(r,a.getVoidType());break;case 207:r.isNumber=!0;break;case 206:!function(e,t){switch(e.operator){case 45:case 46:case 40:case 54:t.isNumber=!0;break;case 39:t.isNumberOrString=!0}}(t.parent,r);break;case 208:!function(t,r,n){switch(r.operatorToken.kind){case 42:case 41:case 43:case 44:case 47:case 48:case 49:case 50:case 51:case 52:case 64:case 66:case 65:case 67:case 68:case 72:case 73:case 74:case 69:case 71:case 70:case 40:case 29:case 32:case 31:case 33:var i=a.getTypeAtLocation(r.left===t?r.right:r.left);1056&i.flags?h(n,i):n.isNumber=!0;break;case 63:case 39:var o=a.getTypeAtLocation(r.left===t?r.right:r.left);1056&o.flags?h(n,o):296&o.flags?n.isNumber=!0:132&o.flags?n.isString=!0:1&o.flags||(n.isNumberOrString=!0);break;case 62:case 34:case 36:case 37:case 35:h(n,a.getTypeAtLocation(r.left===t?r.right:r.left));break;case 96:t===r.left&&(n.isString=!0);break;case 56:case 60:t!==r.left||241!==t.parent.parent.kind&&!e.isAssignmentExpression(t.parent.parent,!0)||h(n,a.getTypeAtLocation(r.right))}}(t,t.parent,r);break;case 275:case 276:!function(e,t){h(t,a.getTypeAtLocation(e.parent.parent.expression))}(t.parent,r);break;case 195:case 196:t.parent.expression===t?function(e,t){var r={argumentTypes:[],return_:{isNumber:void 0,isString:void 0,isNumberOrString:void 0,candidateTypes:void 0,properties:void 0,calls:void 0,constructs:void 0,numberIndex:void 0,stringIndex:void 0,candidateThisTypes:void 0,inferredTypes:void 0}};if(e.arguments)for(var n=0,i=e.arguments;n<i.length;n++){var o=i[n];r.argumentTypes.push(a.getTypeAtLocation(o))}l(e,r.return_),195===e.kind?(t.calls||(t.calls=[])).push(r):(t.constructs||(t.constructs=[])).push(r)}(t.parent,r):_(t,r);break;case 193:!function(t,r){var n=e.escapeLeadingUnderscores(t.name.text);r.properties||(r.properties=e.createUnderscoreEscapedMap());var i=r.properties.get(n)||{isNumber:void 0,isString:void 0,isNumberOrString:void 0,candidateTypes:void 0,properties:void 0,calls:void 0,constructs:void 0,numberIndex:void 0,stringIndex:void 0,candidateThisTypes:void 0,inferredTypes:void 0};l(t,i),r.properties.set(n,i)}(t.parent,r);break;case 194:!function(e,t,r){if(t===e.argumentExpression)return void(r.isNumberOrString=!0);var n=a.getTypeAtLocation(e.argumentExpression),i={isNumber:void 0,isString:void 0,isNumberOrString:void 0,candidateTypes:void 0,properties:void 0,calls:void 0,constructs:void 0,numberIndex:void 0,stringIndex:void 0,candidateThisTypes:void 0,inferredTypes:void 0};l(e,i),296&n.flags?r.numberIndex=i:r.stringIndex=i}(t.parent,t,r);break;case 279:case 280:!function(t,r){var n=e.isVariableDeclaration(t.parent.parent)?t.parent.parent:t.parent;v(r,a.getTypeAtLocation(n))}(t.parent,r);break;case 158:!function(e,t){v(t,a.getTypeAtLocation(e.parent))}(t.parent,r);break;case 241:var n=t.parent,i=n.name,o=n.initializer;if(t===i){o&&h(r,a.getTypeAtLocation(o));break}default:return _(t,r)}}function _(t,r){e.isExpressionNode(t)&&h(r,a.getContextualType(t))}function p(e){return f(m(e))}function f(t){if(!t.length)return a.getAnyType();var r=a.getUnionType([a.getStringType(),a.getNumberType()]),n=function(t,r){for(var n=[],i=0,a=t;i<a.length;i++)for(var o=a[i],s=0,c=r;s<c.length;s++){var u=c[s],l=u.high,_=u.low;l(o)&&(e.Debug.assert(!_(o),"Priority can't have both low and high"),n.push(_))}return t.filter((function(e){return n.every((function(t){return!t(e)}))}))}(t,[{high:function(e){return e===a.getStringType()||e===a.getNumberType()},low:function(e){return e===r}},{high:function(e){return!(16385&e.flags)},low:function(e){return!!(16385&e.flags)}},{high:function(e){return!(114689&e.flags||16&a.getObjectFlags(e))},low:function(e){return!!(16&a.getObjectFlags(e))}}]),i=n.filter((function(e){return 16&a.getObjectFlags(e)}));return i.length&&(n=n.filter((function(e){return!(16&a.getObjectFlags(e))}))).push(function(t){if(1===t.length)return t[0];for(var r=[],n=[],i=[],o=[],s=!1,c=!1,u=e.createMultiMap(),l=0,_=t;l<_.length;l++){for(var d=_[l],p=0,f=a.getPropertiesOfType(d);p<f.length;p++){var m=f[p];u.add(m.name,a.getTypeOfSymbolAtLocation(m,m.valueDeclaration))}r.push.apply(r,a.getSignaturesOfType(d,0)),n.push.apply(n,a.getSignaturesOfType(d,1)),d.stringIndexInfo&&(i.push(d.stringIndexInfo.type),s=s||d.stringIndexInfo.isReadonly),d.numberIndexInfo&&(o.push(d.numberIndexInfo.type),c=c||d.numberIndexInfo.isReadonly)}var g=e.mapEntries(u,(function(e,r){var n=r.length<t.length?16777216:0,i=a.createSymbol(4|n,e);return i.type=a.getUnionType(r),[e,i]}));return a.createAnonymousType(t[0].symbol,g,r,n,i.length?a.createIndexInfo(a.getUnionType(i),s):void 0,o.length?a.createIndexInfo(a.getUnionType(o),c):void 0)}(i)),a.getWidenedType(a.getUnionType(n.map(a.getBaseTypeOfLiteralType),2))}function m(t){var r=[];return t.isNumber&&r.push(a.getNumberType()),t.isString&&r.push(a.getStringType()),t.isNumberOrString&&r.push(a.getUnionType([a.getStringType(),a.getNumberType()])),t.numberIndex&&r.push(a.createArrayType(p(t.numberIndex))),(t.properties&&t.properties.size||t.calls&&t.calls.length||t.constructs&&t.constructs.length||t.stringIndex)&&r.push(function(t){var r=e.createUnderscoreEscapedMap();t.properties&&t.properties.forEach((function(e,t){var n=a.createSymbol(4,t);n.type=p(e),r.set(t,n)}));var n=t.calls?[y(t.calls)]:[],i=t.constructs?[y(t.constructs)]:[],o=t.stringIndex&&a.createIndexInfo(p(t.stringIndex),!1);return a.createAnonymousType(void 0,r,n,i,o,void 0)}(t)),r.push.apply(r,(t.candidateTypes||[]).map((function(e){return a.getBaseTypeOfLiteralType(e)}))),r.push.apply(r,function(t){if(!t.properties||!t.properties.size)return[];var r=s.filter((function(r){return function(t,r){return!!r.properties&&!e.forEachEntry(r.properties,(function(r,n){var i,o=a.getTypeOfPropertyOfType(t,n);return!o||(r.calls?!a.getSignaturesOfType(o,0).length||!a.isTypeAssignableTo(o,(i=r.calls,a.createAnonymousType(void 0,e.createSymbolTable(),[y(i)],e.emptyArray,void 0,void 0))):!a.isTypeAssignableTo(o,p(r)))}))}(r,t)}));if(0<r.length&&r.length<3)return r.map((function(r){return function(t,r){if(!(4&e.getObjectFlags(t)&&r.properties))return t;var n=t.target,i=e.singleOrUndefined(n.typeParameters);if(!i)return t;var s=[];return r.properties.forEach((function(t,r){var o=a.getTypeOfPropertyOfType(n,r);e.Debug.assert(!!o,"generic should have all the properties of its reference."),s.push.apply(s,g(o,p(t),i))})),o[t.symbol.escapedName](f(s))}(r,t)}));return[]}(t)),r}function g(t,r,n){if(t===n)return[r];if(3145728&t.flags)return e.flatMap(t.types,(function(e){return g(e,r,n)}));if(4&e.getObjectFlags(t)&&4&e.getObjectFlags(r)){var i=a.getTypeArguments(t),o=a.getTypeArguments(r),s=[];if(i&&o)for(var c=0;c<i.length;c++)o[c]&&s.push.apply(s,g(i[c],o[c],n));return s}var u=a.getSignaturesOfType(t,0),l=a.getSignaturesOfType(r,0);return 1===u.length&&1===l.length?function(t,r,n){for(var i=[],o=0;o<t.parameters.length;o++){var s=t.parameters[o],c=r.parameters[o],u=t.declaration&&e.isRestParameter(t.declaration.parameters[o]);if(!c)break;var l=a.getTypeOfSymbolAtLocation(s,s.valueDeclaration),_=u&&a.getElementTypeOfArrayType(l);_&&(l=_);var d=c.type||a.getTypeOfSymbolAtLocation(c,c.valueDeclaration);i.push.apply(i,g(l,d,n))}var p=a.getReturnTypeOfSignature(t),f=a.getReturnTypeOfSignature(r);return i.push.apply(i,g(p,f,n)),i}(u[0],l[0],n):[]}function y(t){for(var r=[],n=Math.max.apply(Math,t.map((function(e){return e.argumentTypes.length}))),i=function(n){var i=a.createSymbol(1,e.escapeLeadingUnderscores("arg"+n));i.type=f(t.map((function(e){return e.argumentTypes[n]||a.getUndefinedType()}))),t.some((function(e){return void 0===e.argumentTypes[n]}))&&(i.flags|=16777216),r.push(i)},o=0;o<n;o++)i(o);var s=p(function t(r){for(var n=e.createUnderscoreEscapedMap(),i=0,a=r;i<a.length;i++){var o=a[i];o.properties&&o.properties.forEach((function(e,t){n.has(t)||n.set(t,[]),n.get(t).push(e)}))}var s=e.createUnderscoreEscapedMap();return n.forEach((function(e,r){s.set(r,t(e))})),{isNumber:r.some((function(e){return e.isNumber})),isString:r.some((function(e){return e.isString})),isNumberOrString:r.some((function(e){return e.isNumberOrString})),candidateTypes:e.flatMap(r,(function(e){return e.candidateTypes})),properties:s,calls:e.flatMap(r,(function(e){return e.calls})),constructs:e.flatMap(r,(function(e){return e.constructs})),numberIndex:e.forEach(r,(function(e){return e.numberIndex})),stringIndex:e.forEach(r,(function(e){return e.stringIndex})),candidateThisTypes:e.flatMap(r,(function(e){return e.candidateThisTypes})),inferredTypes:void 0}}(t.map((function(e){return e.return_}))));return a.createSignature(void 0,void 0,void 0,r,s,void 0,n,0)}function h(e,t){!t||1&t.flags||131072&t.flags||(e.candidateTypes||(e.candidateTypes=[])).push(t)}function v(e,t){!t||1&t.flags||131072&t.flags||(e.candidateThisTypes||(e.candidateThisTypes=[])).push(t)}}r.registerCodeFix({errorCodes:i,getCodeActions:function(t){var i,s=t.sourceFile,c=t.program,u=t.span.start,l=t.errorCode,_=t.cancellationToken,d=t.host,p=t.formatContext,f=t.preferences,m=e.getTokenAtPosition(s,u),g=e.textChanges.ChangeTracker.with(t,(function(t){i=o(t,s,m,l,c,_,e.returnTrue,d,p,f)})),y=i&&e.getNameOfDeclaration(i);return y&&0!==g.length?[r.createCodeFixAction(n,g,[a(l,m),y.getText(s)],n,e.Diagnostics.Infer_all_types_from_usage)]:void 0},fixIds:[n],getAllCodeActions:function(t){var n=t.sourceFile,a=t.program,s=t.cancellationToken,c=t.host,u=t.formatContext,l=t.preferences,_=e.nodeSeenTracker();return r.codeFixAll(t,i,(function(t,r){o(t,n,e.getTokenAtPosition(r.file,r.start),r.code,a,s,_,c,u,l)}))}})}(e.codefix||(e.codefix={}))}(s||(s={})),function(e){!function(t){var r="convertFunctionToEs6Class",n=[e.Diagnostics.This_constructor_function_may_be_converted_to_a_class_declaration.code];function i(t,r,n,i){var o=i.getSymbolAtLocation(e.getTokenAtPosition(r,n));if(o&&19&o.flags){var s,c,u=o.valueDeclaration;switch(u.kind){case 243:s=u,t.delete(r,u),c=function(t){var r=l(o);t.body&&r.unshift(e.createConstructor(void 0,void 0,t.parameters,t.body));var n=a(t,88);return e.createClassDeclaration(void 0,n,t.name,void 0,void 0,r)}(u);break;case 241:s=u.parent.parent,c=function(t){var r=t.initializer;if(!r||200!==r.kind)return;if(75!==t.name.kind)return;var n=l(t.symbol);r.body&&n.unshift(e.createConstructor(void 0,void 0,r.parameters,r.body));var i=a(s,88);return e.createClassDeclaration(void 0,i,t.name,void 0,void 0,n)}(u),1===u.parent.declarations.length?(e.copyLeadingComments(s,c,r),t.delete(r,s)):t.delete(r,u)}c&&(e.copyLeadingComments(u,c,r),t.insertNodeAfter(r,s,c))}function l(n){var i=[];return n.members&&n.members.forEach((function(e){var t=o(e,void 0);t&&i.push(t)})),n.exports&&n.exports.forEach((function(t){var r=o(t,[e.createToken(119)]);r&&i.push(r)})),i;function o(n,i){if(8192&n.flags){var o=n.valueDeclaration,s=o.parent;if(c=s.right,e.isFunctionLike(c)){var c,u=s.parent&&225===s.parent.kind?s.parent:s;if(t.delete(r,u),!s.right)return e.createProperty([],i,n.name,void 0,void 0,void 0);switch(s.right.kind){case 200:var l=s.right,_=e.concatenate(i,a(l,125)),d=e.createMethod(void 0,_,void 0,o.name,void 0,void 0,l.parameters,void 0,l.body);return e.copyLeadingComments(s,d,r),d;case 201:var p=s.right,f=p.body,m=void 0;m=222===f.kind?f:e.createBlock([e.createReturn(f)]);_=e.concatenate(i,a(p,125)),d=e.createMethod(void 0,_,void 0,o.name,void 0,void 0,p.parameters,void 0,m);return e.copyLeadingComments(s,d,r),d;default:if(e.isSourceFileJS(r))return;var g=e.createProperty(void 0,i,o.name,void 0,void 0,s.right);return e.copyLeadingComments(s.parent,g,r),g}}}}}}function a(t,r){return e.filter(t.modifiers,(function(e){return e.kind===r}))}t.registerCodeFix({errorCodes:n,getCodeActions:function(n){var a=e.textChanges.ChangeTracker.with(n,(function(e){return i(e,n.sourceFile,n.span.start,n.program.getTypeChecker())}));return[t.createCodeFixAction(r,a,e.Diagnostics.Convert_function_to_an_ES2015_class,r,e.Diagnostics.Convert_all_constructor_functions_to_classes)]},fixIds:[r],getAllCodeActions:function(e){return t.codeFixAll(e,n,(function(t,r){return i(t,r.file,r.start,e.program.getTypeChecker())}))}})}(e.codefix||(e.codefix={}))}(s||(s={})),function(e){!function(t){var r,n="convertToAsyncFunction",i=[e.Diagnostics.This_may_be_converted_to_an_async_function.code],a=!0;function o(t,r,n,i,a){var o,_=e.getTokenAtPosition(r,n);if(o=e.isIdentifier(_)&&e.isVariableDeclaration(_.parent)&&_.parent.initializer&&e.isFunctionLikeDeclaration(_.parent.initializer)?_.parent.initializer:e.tryCast(e.getContainingFunction(e.getTokenAtPosition(r,n)),e.isFunctionLikeDeclaration)){var d,p,f=e.createMap(),g=e.createMap(),y=[],h=e.isInJSFile(o),v=function(t,r){if(!t.body)return e.createMap();var n=e.createMap();return e.forEachChild(t.body,(function t(i){s(i,r,"then")?(n.set(e.getNodeId(i).toString(),!0),e.forEach(i.arguments,t)):s(i,r,"catch")?(n.set(e.getNodeId(i).toString(),!0),e.forEachChild(i,t)):s(i,r)?n.set(e.getNodeId(i).toString(),!0):e.forEachChild(i,t)})),n}(o,i),x=function(t,r,n,i,a,o,s){var l=e.createMap(),_=e.createMap();return e.forEachChild(t,(function t(o){if(e.isIdentifier(o)){var d=r.getSymbolAtLocation(o),p=d&&function(e,t){return e.valueDeclaration&&e.valueDeclaration.getSourceFile()===t}(d,i.sourceFile);if(d&&p){var f=m(r.getTypeAtLocation(o),r),g=e.getSymbolId(d).toString();if(!f||e.isFunctionLikeDeclaration(o.parent)||n.has(g)){if(o.parent&&(e.isParameter(o.parent)||e.isVariableDeclaration(o.parent)||e.isBindingElement(o.parent))){var y=o.text,h=_.get(y);if(h&&h.some((function(e){return e!==d}))){var v=u(o,_);l.set(g,v.identifier),n.set(g,v),s.push({identifier:v.identifier,symbol:d}),c(_,y,d)}else{var x=e.getSynthesizedDeepClone(o);l.set(g,x),n.set(g,b(x,[],s.filter((function(e){return e.identifier.text===o.text})).length)),(e.isParameter(o.parent)&&function(t){var n=t.parent;if(e.isCallExpression(n)||e.isIdentifier(n)&&!a.get(e.getNodeId(n).toString())){var i=r.getTypeAtLocation(n);return!!(i&&r.getPromisedTypeOfPromise(i))}return!1}(o.parent.parent)||e.isVariableDeclaration(o.parent))&&(s.push({identifier:x,symbol:d}),c(_,y,d))}}}else{var D=e.firstOrUndefined(f.parameters),S=D&&e.isParameter(D.valueDeclaration)&&e.tryCast(D.valueDeclaration.name,e.isIdentifier)||e.createOptimisticUniqueName("result"),T=u(S,_);n.set(g,T),s.push({identifier:T.identifier,symbol:d}),c(_,S.text,d)}}}else e.forEachChild(o,t)})),e.getSynthesizedDeepCloneWithRenames(t,!0,l,r,(function(t,i){if(e.isIdentifier(t)){var s=r.getSymbolAtLocation(t),c=s&&e.getSymbolId(s).toString();if(s&&n.get(c)){var u=r.getTypeAtLocation(t);o.set(e.getNodeId(i).toString(),u)}}var l=a.get(e.getNodeId(t).toString());void 0!==l&&(a.delete(e.getNodeId(t).toString()),a.set(e.getNodeId(i).toString(),l))}))}(o,i,f,a,v,g,y),D=function(e){var t=[];return e.forEach((function(e){0===e.numberOfAssignmentsOriginal&&t.push(e.identifier)})),t}(f),S=x.body&&e.isBlock(x.body)?(d=x.body,p=[],e.forEachReturnStatement(d,(function(t){e.isReturnStatementWithFixablePromiseHandler(t)&&p.push(t)})),p):e.emptyArray,T={checker:i,synthNamesMap:f,allVarNames:y,setOfExpressionsToReturn:v,constIdentifiers:D,originalTypeMap:g,isInJSFile:h};if(S.length){t.insertLastModifierBefore(r,125,o);for(var E=function(n){e.forEachChild(n,(function i(a){e.isCallExpression(a)?function(e,n){var i=l(e,T,e);t.replaceNodeWithNodes(r,n,i)}(a,n):e.isFunctionLike(a)||e.forEachChild(a,i)}))},C=0,k=S;C<k.length;C++){E(k[C])}}}}function s(t,r,n){var i=(n?e.isCallExpression(t):e.isExpression(t))&&(!n||e.hasPropertyAccessExpressionWithName(t,n))&&r.getTypeAtLocation(t);return!(!i||!r.getPromisedTypeOfPromise(i))}function c(e,t,r){e.has(t)?e.get(t).push(r):e.set(t,[r])}function u(t,r){var n=(r.get(t.text)||e.emptyArray).length;return b(0===n?t:e.createIdentifier(t.text+"_"+n),[],0)}function l(t,r,n,i){if(!t)return e.emptyArray;var o=e.isIdentifier(t)&&r.originalTypeMap.get(e.getNodeId(t).toString())||r.checker.getTypeAtLocation(t);return e.isCallExpression(t)&&e.hasPropertyAccessExpressionWithName(t,"then")&&o&&r.checker.getPromisedTypeOfPromise(o)?function(t,r,n,i){var a=t.arguments,o=a[0],s=a[1];if(!o)return l(t.expression,r,n);var c=y(o,r),u=f(o,i,c,t,r);if(s){var _=y(s,r),d=e.createBlock(l(t.expression,r,t,c).concat(u)),p=f(s,i,_,t,r),m=_?x(_)?_.identifier.text:_.bindingPattern:"e",g=e.createVariableDeclaration(m),h=e.createCatchClause(g,e.createBlock(p));return[e.createTry(d,h,void 0)]}return l(t.expression,r,t,c).concat(u)}(t,r,n,i):e.isCallExpression(t)&&e.hasPropertyAccessExpressionWithName(t,"catch")&&o&&r.checker.getPromisedTypeOfPromise(o)?function(t,r,n){var i,a=t.arguments[0],o=y(a,r),s=r.setOfExpressionsToReturn.get(e.getNodeId(t).toString());n&&!s&&(x(n)?(i=n,r.synthNamesMap.forEach((function(e,t){if(e.identifier.text===n.identifier.text){var i=_(n);r.synthNamesMap.set(t,i)}}))):i=b(e.createOptimisticUniqueName("result"),n.types),i.numberOfAssignmentsOriginal=2,r.constIdentifiers.some((function(e){return e.text===i.identifier.text}))&&r.constIdentifiers.push(_(i).identifier));var c,u,d=e.createBlock(l(t.expression,r,t,i)),p=f(a,i,o,t,r),m=o?x(o)?o.identifier.text:o.bindingPattern:"e",g=e.createVariableDeclaration(m),h=e.createCatchClause(g,e.createBlock(p));if(i&&!s){u=e.getSynthesizedDeepClone(i.identifier);var v=i.types,D=r.checker.getUnionType(v,2),S=r.isInJSFile?void 0:r.checker.typeToTypeNode(D),T=[e.createVariableDeclaration(u,S)];c=e.createVariableStatement(void 0,e.createVariableDeclarationList(T,1))}var E=e.createTry(d,h,void 0),C=n&&u&&(k=n,1===k.kind)&&e.createVariableStatement(void 0,e.createVariableDeclarationList([e.createVariableDeclaration(e.getSynthesizedDeepCloneWithRenames(n.bindingPattern),void 0,u)],2));var k;return e.compact([c,E,C])}(t,r,i):e.isPropertyAccessExpression(t)?l(t.expression,r,n,i):o&&r.checker.getPromisedTypeOfPromise(o)?function(t,r,n){var i=r.setOfExpressionsToReturn.get(e.getNodeId(t).toString()),a=t.original?t.original.parent:t.parent;if(n&&!i&&(!a||e.isPropertyAccessExpression(a)))return p(n,e.createAwait(t),r);if(!n&&!i&&(!a||e.isPropertyAccessExpression(a)))return[e.createStatement(e.createAwait(t))];return[e.createReturn(e.getSynthesizedDeepClone(t))]}(t,r,i):(a=!1,e.emptyArray)}function _(t){return b(e.createOptimisticUniqueName(t.identifier.text))}function d(t,r){var n=function t(r){return e.isIdentifier(r)?[r.text]:e.flatMap(r.elements,(function(r){return e.isOmittedExpression(r)?[]:t(r.name)}))}(v(t));return r.some((function(t){return e.contains(n,t.text)}))?2:1}function p(t,r,n){return!t||h(t)?[e.createStatement(r)]:x(t)&&t.types.length<t.numberOfAssignmentsOriginal?[e.createStatement(e.createAssignment(e.getSynthesizedDeepClone(t.identifier),r))]:[e.createVariableStatement(void 0,e.createVariableDeclarationList([e.createVariableDeclaration(e.getSynthesizedDeepClone(v(t)),void 0,r)],d(t,n.constIdentifiers)))]}function f(t,r,n,i,o){var c=o.setOfExpressionsToReturn.get(e.getNodeId(i).toString());switch(t.kind){case 99:break;case 75:if(!n)break;var u=e.createCall(e.getSynthesizedDeepClone(t),void 0,x(n)?[n.identifier]:[]);if(c)return[e.createReturn(u)];var l=o.originalTypeMap.get(e.getNodeId(t).toString())||o.checker.getTypeAtLocation(t),_=o.checker.getSignaturesOfType(l,0);if(!_.length){a=!1;break}var f=_[0].getReturnType(),y=p(r,e.createAwait(u),o);return r&&r.types.push(f),y;case 200:case 201:var h=t.body;if(e.isBlock(h)){for(var b=[],D=!1,S=0,T=h.statements;S<T.length;S++){var E=T[S];e.isReturnStatement(E)&&(D=!0),e.isReturnStatementWithFixablePromiseHandler(E)?b=b.concat(g(o,[E],r)):b.push(E)}return c?b.map((function(t){return e.getSynthesizedDeepClone(t)})):function(t,r,n,i){for(var a=[],o=0,c=t;o<c.length;o++){var u=c[o];if(e.isReturnStatement(u)){if(u.expression){var l=s(u.expression,n.checker)?e.createAwait(u.expression):u.expression;void 0===r?a.push(e.createExpressionStatement(l)):a.push(e.createVariableStatement(void 0,e.createVariableDeclarationList([e.createVariableDeclaration(v(r),void 0,l)],d(r,n.constIdentifiers))))}}else a.push(e.getSynthesizedDeepClone(u))}i||void 0===r||a.push(e.createVariableStatement(void 0,e.createVariableDeclarationList([e.createVariableDeclaration(v(r),void 0,e.createIdentifier("undefined"))],d(r,n.constIdentifiers))));return a}(b,r,o,D)}var C=g(o,e.isFixablePromiseHandler(h)?[e.createReturn(h)]:e.emptyArray,r);if(C.length>0)return C;var k=m(o.checker.getTypeAtLocation(t),o.checker).getReturnType(),N=e.getSynthesizedDeepClone(h),A=o.checker.getPromisedTypeOfPromise(k)?e.createAwait(N):N;if(c)return[e.createReturn(A)];var F=p(r,A,o);return r&&r.types.push(k),F;default:a=!1}return e.emptyArray}function m(t,r){var n=r.getSignaturesOfType(t,0);return e.lastOrUndefined(n)}function g(t,r,n){for(var i=[],a=0,o=r;a<o.length;a++){var s=o[a];e.forEachChild(s,(function r(a){if(e.isCallExpression(a)){var o=l(a,t,a,n);if((i=i.concat(o)).length>0)return}else e.isFunctionLike(a)||e.forEachChild(a,r)}))}return i}function y(t,r){var n,i=0,a=[];e.isFunctionLikeDeclaration(t)?t.parameters.length>0&&(n=function t(r){if(e.isIdentifier(r))return o(r);var n=e.flatMap(r.elements,(function(r){return e.isOmittedExpression(r)?[]:[t(r.name)]}));return function(t,r,n){void 0===r&&(r=e.emptyArray);void 0===n&&(n=[]);return{kind:1,bindingPattern:t,elements:r,types:n}}(r,n)}(t.parameters[0].name)):e.isIdentifier(t)&&(n=o(t));if(n&&!("identifier"in n&&"undefined"===n.identifier.text))return n;function o(t){var n=function(e){return e.symbol?e.symbol:r.checker.getSymbolAtLocation(e)}(function(e){return e.original?e.original:e}(t));return n&&r.synthNamesMap.get(e.getSymbolId(n).toString())||b(t,a,i)}}function h(t){return!t||(x(t)?!t.identifier.text:e.every(t.elements,h))}function v(e){return x(e)?e.identifier:e.bindingPattern}function b(e,t,r){return void 0===t&&(t=[]),void 0===r&&(r=0),{kind:0,identifier:e,types:t,numberOfAssignmentsOriginal:r}}function x(e){return 0===e.kind}t.registerCodeFix({errorCodes:i,getCodeActions:function(r){a=!0;var i=e.textChanges.ChangeTracker.with(r,(function(e){return o(e,r.sourceFile,r.span.start,r.program.getTypeChecker(),r)}));return a?[t.createCodeFixAction(n,i,e.Diagnostics.Convert_to_async_function,n,e.Diagnostics.Convert_all_to_async_functions)]:[]},fixIds:[n],getAllCodeActions:function(e){return t.codeFixAll(e,i,(function(t,r){return o(t,r.file,r.start,e.program.getTypeChecker(),e)}))}}),function(e){e[e.Identifier=0]="Identifier",e[e.BindingPattern=1]="BindingPattern"}(r||(r={}))}(e.codefix||(e.codefix={}))}(s||(s={})),function(e){!function(t){function r(t,r,n,i){for(var a=0,o=t.imports;a<o.length;a++){var s=o[a],c=e.getResolvedModule(t,s.text);if(c&&c.resolvedFileName===r.fileName){var u=e.importFromModuleSpecifier(s);switch(u.kind){case 252:n.replaceNode(t,u,e.makeImport(u.name,void 0,s,i));break;case 195:e.isRequireCall(u,!1)&&n.replaceNode(t,u,e.createPropertyAccess(e.getSynthesizedDeepClone(u),"default"))}}}}function n(t,r){t.forEachChild((function n(i){if(e.isPropertyAccessExpression(i)&&e.isExportsOrModuleExportsOrAlias(t,i.expression)){var a=i.parent;r(i,e.isBinaryExpression(a)&&a.left===i&&62===a.operatorToken.kind)}i.forEachChild(n)}))}function i(r,n,i,c,f,m,g,y){switch(n.kind){case 224:return function(r,n,i,a,o,c,u){var p=n.declarationList,f=!1,m=e.flatMap(p.declarations,(function(n){var m=n.name,g=n.initializer;if(g){if(e.isExportsOrModuleExportsOrAlias(r,g))return f=!0,[];if(e.isRequireCall(g,!0))return f=!0,function(r,n,i,a,o,c,u,l){switch(n.kind){case 188:var p=e.mapAllOrFail(n.elements,(function(t){return t.dotDotDotToken||t.initializer||t.propertyName&&!e.isIdentifier(t.propertyName)||!e.isIdentifier(t.name)?void 0:_(t.propertyName&&t.propertyName.text,t.name.text)}));if(p)return[e.makeImport(void 0,p,i,l)];case 189:var f=s(t.moduleSpecifierToValidIdentifier(i.text,u),c);return[e.makeImport(e.createIdentifier(f),void 0,i,l),d(void 0,e.getSynthesizedDeepClone(n),e.createIdentifier(f))];case 75:return function(t,r,n,i,a,o,c){for(var u=a.getSymbolAtLocation(r),l=e.createMap(),_=!1,d=0,p=o.original.get(r.text);d<p.length;d++){var f=p[d];if(a.getSymbolAtLocation(f)===u&&f!==r){var m=f.parent;if(e.isPropertyAccessExpression(m)){var g=m.expression,y=m.name.text;e.Debug.assert(g===f,"Didn't expect expression === use");var h=l.get(y);void 0===h&&(h=s(y,o),l.set(y,h)),i.replaceNode(t,m,e.createIdentifier(h))}else _=!0}}var v=0===l.size?void 0:e.arrayFrom(e.mapIterator(l.entries(),(function(t){var r=t[0],n=t[1];return e.createImportSpecifier(r===n?void 0:e.createIdentifier(r),e.createIdentifier(n))})));v||(_=!0);return[e.makeImport(_?e.getSynthesizedDeepClone(r):void 0,v,n,c)]}(r,n,i,a,o,c,l);default:return e.Debug.assertNever(n,"Convert to ES6 module got invalid name kind "+n.kind)}}(r,m,g.arguments[0],i,a,o,c,u);if(e.isPropertyAccessExpression(g)&&e.isRequireCall(g.expression,!0))return f=!0,function(t,r,n,i,a){switch(t.kind){case 188:case 189:var o=s(r,i);return[l(o,r,n,a),d(void 0,t,e.createIdentifier(o))];case 75:return[l(t.text,r,n,a)];default:return e.Debug.assertNever(t,"Convert to ES6 module got invalid syntax form "+t.kind)}}(m,g.name.text,g.expression.arguments[0],o,u)}return e.createVariableStatement(void 0,e.createVariableDeclarationList([n],p.flags))}));f&&i.replaceNodeWithNodes(r,n,m)}(r,n,c,i,f,m,y),!1;case 225:var h=n.expression;switch(h.kind){case 195:return e.isRequireCall(h,!0)&&c.replaceNode(r,n,e.makeImport(void 0,void 0,h.arguments[0],y)),!1;case 208:return 62===h.operatorToken.kind&&function(t,r,n,i,s){var c=n.left,l=n.right;if(!e.isPropertyAccessExpression(c))return!1;if(e.isExportsOrModuleExportsOrAlias(t,c)){if(!e.isExportsOrModuleExportsOrAlias(t,l)){var _=e.isObjectLiteralExpression(l)?(f=l,(m=e.mapAllOrFail(f.properties,(function(t){switch(t.kind){case 162:case 163:case 280:case 281:return;case 279:return e.isIdentifier(t.name)?function(t,r){var n=[e.createToken(88)];switch(r.kind){case 200:var i=r.name;if(i&&i.text!==t)return a();case 201:return u(t,n,r);case 213:return function(t,r,n){return e.createClassDeclaration(e.getSynthesizedDeepClones(n.decorators),e.concatenate(r,e.getSynthesizedDeepClones(n.modifiers)),t,e.getSynthesizedDeepClones(n.typeParameters),e.getSynthesizedDeepClones(n.heritageClauses),e.getSynthesizedDeepClones(n.members))}(t,n,r);default:return a()}function a(){return d(n,e.createIdentifier(t),r)}}(t.name.text,t.initializer):void 0;case 160:return e.isIdentifier(t.name)?u(t.name.text,[e.createToken(88)],t):void 0;default:e.Debug.assertNever(t,"Convert to ES6 got invalid prop kind "+t.kind)}})))&&[m,!1]):e.isRequireCall(l,!0)?function(t,r){var n=t.text,i=r.getSymbolAtLocation(t),s=i?i.exports:e.emptyUnderscoreEscapedMap;return s.has("export=")?[[o(n)],!0]:s.has("default")?s.size>1?[[a(n),o(n)],!0]:[[o(n)],!0]:[[a(n)],!1]}(l.arguments[0],r):void 0;return _?(i.replaceNodeWithNodes(t,n.parent,_[0]),_[1]):(i.replaceRangeWithText(t,e.createRange(c.getStart(t),l.pos),"export default"),!0)}i.delete(t,n.parent)}else e.isExportsOrModuleExportsOrAlias(t,c.expression)&&function(t,r,n,i){var a=r.left.name.text,o=i.get(a);if(void 0!==o){var s=[d(void 0,o,r.right),p([e.createExportSpecifier(o,a)])];n.replaceNodeWithNodes(t,r.parent,s)}else!function(t,r,n){var i=t.left,a=t.right,o=t.parent,s=i.name.text;if(!(e.isFunctionExpression(a)||e.isArrowFunction(a)||e.isClassExpression(a))||a.name&&a.name.text!==s)n.replaceNodeRangeWithNodes(r,i.expression,e.findChildOfKind(i,24,r),[e.createToken(88),e.createToken(80)],{joiner:" ",suffix:" "});else{n.replaceRange(r,{pos:i.getStart(r),end:a.getStart(r)},e.createToken(88),{suffix:" "}),a.name||n.insertName(r,a,s);var c=e.findChildOfKind(o,26,r);c&&n.delete(r,c)}}(r,t,n)}(t,n,i,s);var f,m;return!1}(r,i,h,c,g)}default:return!1}}function a(e){return p(void 0,e)}function o(t){return p([e.createExportSpecifier(void 0,"default")],t)}function s(e,t){for(;t.original.has(e)||t.additional.has(e);)e="_"+e;return t.additional.set(e,!0),e}function c(t){var r=e.createMultiMap();return function t(r,n){e.isIdentifier(r)&&function(e){var t=e.parent;switch(t.kind){case 193:return t.name!==e;case 190:case 257:return t.propertyName!==e;default:return!0}}(r)&&n(r);r.forEachChild((function(e){return t(e,n)}))}(t,(function(e){return r.add(e.text,e)})),r}function u(t,r,n){return e.createFunctionDeclaration(e.getSynthesizedDeepClones(n.decorators),e.concatenate(r,e.getSynthesizedDeepClones(n.modifiers)),e.getSynthesizedDeepClone(n.asteriskToken),t,e.getSynthesizedDeepClones(n.typeParameters),e.getSynthesizedDeepClones(n.parameters),e.getSynthesizedDeepClone(n.type),e.convertToFunctionBody(e.getSynthesizedDeepClone(n.body)))}function l(t,r,n,i){return"default"===r?e.makeImport(e.createIdentifier(t),void 0,n,i):e.makeImport(void 0,[_(r,t)],n,i)}function _(t,r){return e.createImportSpecifier(void 0!==t&&t!==r?e.createIdentifier(t):void 0,e.createIdentifier(r))}function d(t,r,n){return e.createVariableStatement(t,e.createVariableDeclarationList([e.createVariableDeclaration(r,void 0,n)],2))}function p(t,r){return e.createExportDeclaration(void 0,void 0,t&&e.createNamedExports(t),void 0===r?void 0:e.createLiteral(r))}t.registerCodeFix({errorCodes:[e.Diagnostics.File_is_a_CommonJS_module_it_may_be_converted_to_an_ES6_module.code],getCodeActions:function(a){var o=a.sourceFile,u=a.program,l=a.preferences,_=e.textChanges.ChangeTracker.with(a,(function(t){if(function(t,r,a,o,u){var l={original:c(t),additional:e.createMap()},_=function(t,r,i){var a=e.createMap();return n(t,(function(t){var n=t.name,o=n.text,c=n.originalKeywordKind;!a.has(o)&&(void 0!==c&&e.isNonContextualKeyword(c)||r.resolveName(t.name.text,t,111551,!0))&&a.set(o,s("_"+o,i))})),a}(t,r,l);!function(t,r,i){n(t,(function(n,a){if(!a){var o=n.name.text;i.replaceNode(t,n,e.createIdentifier(r.get(o)||o))}}))}(t,_,a);for(var d=!1,p=0,f=t.statements;p<f.length;p++){var m=f[p],g=i(t,m,r,a,l,o,_,u);d=d||g}return d}(o,u.getTypeChecker(),t,u.getCompilerOptions().target,e.getQuotePreference(o,l)))for(var a=0,_=u.getSourceFiles();a<_.length;a++){var d=_[a];r(d,o,t,e.getQuotePreference(d,l))}}));return[t.createCodeFixActionNoFixId("convertToEs6Module",_,e.Diagnostics.Convert_to_ES6_module)]}})}(e.codefix||(e.codefix={}))}(s||(s={})),function(e){!function(t){var r="correctQualifiedNameToIndexedAccessType",n=[e.Diagnostics.Cannot_access_0_1_because_0_is_a_type_but_not_a_namespace_Did_you_mean_to_retrieve_the_type_of_the_property_1_in_0_with_0_1.code];function i(t,r){var n=e.findAncestor(e.getTokenAtPosition(t,r),e.isQualifiedName);return e.Debug.assert(!!n,"Expected position to be owned by a qualified name."),e.isIdentifier(n.left)?n:void 0}function a(t,r,n){var i=n.right.text,a=e.createIndexedAccessTypeNode(e.createTypeReferenceNode(n.left,void 0),e.createLiteralTypeNode(e.createLiteral(i)));t.replaceNode(r,n,a)}t.registerCodeFix({errorCodes:n,getCodeActions:function(n){var o=i(n.sourceFile,n.span.start);if(o){var s=e.textChanges.ChangeTracker.with(n,(function(e){return a(e,n.sourceFile,o)})),c=o.left.text+'["'+o.right.text+'"]';return[t.createCodeFixAction(r,s,[e.Diagnostics.Rewrite_as_the_indexed_access_type_0,c],r,e.Diagnostics.Rewrite_all_as_indexed_access_types)]}},fixIds:[r],getAllCodeActions:function(e){return t.codeFixAll(e,n,(function(e,t){var r=i(t.file,t.start);r&&a(e,t.file,r)}))}})}(e.codefix||(e.codefix={}))}(s||(s={})),function(e){!function(t){var r=[e.Diagnostics.Class_0_incorrectly_implements_interface_1.code,e.Diagnostics.Class_0_incorrectly_implements_class_1_Did_you_mean_to_extend_1_and_inherit_its_members_as_a_subclass.code],n="fixClassIncorrectlyImplementsInterface";function i(t,r){return e.Debug.assertDefined(e.getContainingClass(e.getTokenAtPosition(t,r)),"There should be a containing class")}function a(t){return!(8&e.getModifierFlags(t.valueDeclaration))}function o(r,n,i,o,s,c){var u=r.program.getTypeChecker(),l=function(t,r){var n=e.getEffectiveBaseTypeNode(t);if(!n)return e.createSymbolTable();var i=r.getTypeAtLocation(n),o=r.getPropertiesOfType(i);return e.createSymbolTable(o.filter(a))}(o,u),_=u.getTypeAtLocation(n),d=u.getPropertiesOfType(_).filter(e.and(a,(function(e){return!l.has(e.escapedName)}))),p=u.getTypeAtLocation(o);function f(e,n){var a=u.getIndexInfoOfType(e,n);a&&s.insertNodeAtClassStart(i,o,u.indexInfoToIndexSignatureDeclaration(a,n,o,void 0,t.getNoopSymbolTrackerWithResolver(r)))}p.getNumberIndexType()||f(_,1),p.getStringIndexType()||f(_,0),t.createMissingMemberNodes(o,d,r,c,(function(e){return s.insertNodeAtClassStart(i,o,e)}))}t.registerCodeFix({errorCodes:r,getCodeActions:function(r){var a=r.sourceFile,s=r.span,c=i(a,s.start);return e.mapDefined(e.getClassImplementsHeritageClauseElements(c),(function(i){var s=e.textChanges.ChangeTracker.with(r,(function(e){return o(r,i,a,c,e,r.preferences)}));return 0===s.length?void 0:t.createCodeFixAction(n,s,[e.Diagnostics.Implement_interface_0,i.getText(a)],n,e.Diagnostics.Implement_all_unimplemented_interfaces)}))},fixIds:[n],getAllCodeActions:function(n){var a=e.createMap();return t.codeFixAll(n,r,(function(t,r){var s=i(r.file,r.start);if(e.addToSeen(a,e.getNodeId(s)))for(var c=0,u=e.getClassImplementsHeritageClauseElements(s);c<u.length;c++){var l=u[c];o(n,l,r.file,s,t,n.preferences)}}))}})}(e.codefix||(e.codefix={}))}(s||(s={})),function(e){!function(n){n.importFixId="fixMissingImport";var i,a,o=[e.Diagnostics.Cannot_find_name_0.code,e.Diagnostics.Cannot_find_name_0_Did_you_mean_1.code,e.Diagnostics.Cannot_find_name_0_Did_you_mean_the_instance_member_this_0.code,e.Diagnostics.Cannot_find_name_0_Did_you_mean_the_static_member_1_0.code,e.Diagnostics.Cannot_find_namespace_0.code,e.Diagnostics._0_refers_to_a_UMD_global_but_the_current_file_is_a_module_Consider_adding_an_import_instead.code,e.Diagnostics._0_only_refers_to_a_type_but_is_being_used_as_a_value_here.code];function s(e){return{description:e.description,changes:e.changes,commands:e.commands}}function c(t,r){return!(111551&e.skipAlias(t,r).flags)}function u(r,n,i,a,o,s,c){var u=a.getTypeChecker(),d=e.flatMap(r,(function(t){return function(t,r,n){var i=t.moduleSymbol,a=t.importKind;return t.exportedSymbolIsTypeOnly&&e.isSourceFileJS(n)?e.emptyArray:e.mapDefined(n.imports,(function(t){var n=e.importFromModuleSpecifier(t);return 253!==n.kind&&252!==n.kind||r.getSymbolAtLocation(t)!==i?void 0:{declaration:n,importKind:a}}))}(t,u,o)})),p=void 0===i?void 0:function(t,r,n,i){return e.firstDefined(t,(function(t){var a=function(t){if(253===t.kind){var r=t.importClause&&e.isImportClause(t.importClause)&&t.importClause.namedBindings;return r&&255===r.kind?r.name:void 0}return t.name}(t.declaration);if(a){var o=i.getAliasedSymbol(i.getSymbolAtLocation(a));if(o&&o.exports.has(e.escapeLeadingUnderscores(r)))return{kind:0,namespacePrefix:a.text,position:n}}}))}(d,n,i,u),f=function(t){return e.firstDefined(t,(function(e){var t=e.declaration,r=e.importKind;if(253===t.kind){var n=t.importClause;if(n){var i=n.name,a=n.namedBindings;return 1===r&&!i||0===r&&(!a||256===a.kind)?{kind:2,importClause:n,importKind:r}:void 0}}}))}(d),m=f?[f]:function(t,r,n,i,a,o,s){var c=e.firstDefined(r,_);return c?[c]:l(n,i,a,t,o,s)}(r,d,a,o,i,s,c);return t(p?[p]:e.emptyArray,m)}function l(t,r,n,i,a,o){var s=e.isSourceFileJS(r),c=k(r,t,a).allowsImportingSpecifier,u=e.flatMap(i,(function(i){var c=i.moduleSymbol,u=i.importKind,l=i.exportedSymbolIsTypeOnly;return e.moduleSpecifiers.getModuleSpecifiers(c,t.getCompilerOptions(),r,a,t.getSourceFiles(),o,t.redirectTargetsMap).map((function(t){return l&&s?{kind:1,moduleSpecifier:t,position:e.Debug.assertDefined(n,"position should be defined")}:{kind:3,moduleSpecifier:t,importKind:u}}))}));return e.sort(u,(function(e,t){var r=c(e.moduleSpecifier),n=c(t.moduleSpecifier);return r&&!n?-1:n&&!r?1:e.moduleSpecifier.length-t.moduleSpecifier.length}))}function _(t){var r=t.declaration,n=t.importKind,i=253===r.kind?r.moduleSpecifier:263===r.moduleReference.kind?r.moduleReference.expression:void 0;return i&&e.isStringLiteral(i)?{kind:3,moduleSpecifier:i.text,importKind:n}:void 0}function d(t,n,i){var a=e.getTokenAtPosition(t.sourceFile,i),o=n===e.Diagnostics._0_refers_to_a_UMD_global_but_the_current_file_is_a_module_Consider_adding_an_import_instead.code?function(t,r){var n=t.sourceFile,i=t.program,a=t.host,o=t.preferences,s=i.getTypeChecker(),c=function(t,r){var n=e.isIdentifier(t)?r.getSymbolAtLocation(t):void 0;if(e.isUMDExportSymbol(n))return n;var i=t.parent;return e.isJsxOpeningLikeElement(i)&&i.tagName===t||e.isJsxOpeningFragment(i)?e.tryCast(r.resolveName(r.getJsxNamespace(i),e.isJsxOpeningLikeElement(i)?t:i,111551,!1),e.isUMDExportSymbol):void 0}(r,s);if(!c)return;var l=s.getAliasedSymbol(c),_=c.name;return{fixes:u([{moduleSymbol:l,importKind:p(n,i.getCompilerOptions()),exportedSymbolIsTypeOnly:!1}],_,e.isIdentifier(r)?r.getStart(n):void 0,i,n,a,o),symbolName:_}}(t,a):e.isIdentifier(a)?function(t,r){var n=t.sourceFile,i=t.program,a=t.cancellationToken,o=t.host,s=t.preferences,l=i.getTypeChecker(),_=e.isJsxOpeningLikeElement(r.parent)&&r.parent.tagName===r&&(e.isIntrinsicJsxName(r.text)||l.resolveName(r.text,r,67108863,!1))?l.getJsxNamespace(n):r.text;e.Debug.assert("default"!==_,"'default' isn't a legal identifier and couldn't occur here");var d=function(t,r,n,i,a,o,s){var u=e.createMultiMap();function l(t,r,n){u.add(e.getUniqueSymbolId(r,a).toString(),{moduleSymbol:t,importKind:n,exportedSymbolIsTypeOnly:c(r,a)})}return S(o,s,i,!0,(function(e){n.throwIfCancellationRequested();var s=f(i,e,a,o.getCompilerOptions());s&&s.name===t&&D(s.symbolForMeaning,r)&&l(e,s.symbol,s.kind);var c=a.tryGetMemberInModuleExportsAndProperties(t,e);c&&D(c,r)&&l(e,c,0)})),u}(_,e.getMeaningFromLocation(r),a,n,l,i,o);return{fixes:e.arrayFrom(e.flatMapIterator(d.entries(),(function(e){e[0];return u(e[1],_,r.getStart(n),i,n,o,s)}))),symbolName:_}}(t,a):void 0;return o&&r(r({},o),{fixes:e.sort(o.fixes,(function(e,t){return e.kind-t.kind}))})}function p(t,r){if(e.getAllowSyntheticDefaultImports(r))return 1;var n=e.getEmitModuleKind(r);switch(n){case e.ModuleKind.AMD:case e.ModuleKind.CommonJS:case e.ModuleKind.UMD:return e.isInJSFile(t)?e.isExternalModule(t)?2:4:3;case e.ModuleKind.System:case e.ModuleKind.ES2015:case e.ModuleKind.ESNext:case e.ModuleKind.None:return 2;default:return e.Debug.assertNever(n,"Unexpected moduleKind "+n)}}function f(t,n,i,a){var o=function(e,t,r,n){var i=r.tryGetMemberInModuleExports("default",t);if(i)return{symbol:i,kind:1};var a=r.resolveExternalModuleSymbol(t);return a===t?void 0:{symbol:a,kind:m(e,n,r)}}(t,n,i,a);if(o){var s=o.symbol,c=o.kind,u=function t(r,n,i,a){var o=e.getLocalSymbolForExportDefault(r);if(o)return{symbolForMeaning:o,name:o.name};var s=(c=r,c.declarations&&e.firstDefined(c.declarations,(function(t){if(e.isExportAssignment(t)){if(e.isIdentifier(t.expression))return t.expression.text}else if(e.isExportSpecifier(t))return e.Debug.assert("default"===t.name.text,"Expected the specifier to be a default export"),t.propertyName&&t.propertyName.text})));var c;if(void 0!==s)return{symbolForMeaning:r,name:s};if(2097152&r.flags){var u=i.getImmediateAliasedSymbol(r);return u&&t(u,e.Debug.assertDefined(u.parent,"Alias targets of default exports must have a parent"),i,a)}if("default"!==r.escapedName&&"export="!==r.escapedName)return{symbolForMeaning:r,name:r.getName()};return{symbolForMeaning:r,name:E(n,a.target)}}(s,n,i,a);return u&&r({symbol:s,kind:c},u)}}function m(t,r,n){if(e.getAllowSyntheticDefaultImports(r)&&e.getEmitModuleKind(r)>=e.ModuleKind.ES2015)return 1;if(e.isInJSFile(t))return e.isExternalModule(t)?1:4;for(var i=0,a=t.statements;i<a.length;i++){var o=a[i];if(e.isImportEqualsDeclaration(o))return 3;if(e.isImportDeclaration(o)&&o.importClause&&o.importClause.name){var s=n.getImmediateAliasedSymbol(o.importClause.symbol);if(s&&"default"!==s.name)return 1}}return 3}function g(t,r,i,a,o){var s,c=e.textChanges.ChangeTracker.with(t,(function(t){s=function(t,r,n,i,a){switch(i.kind){case 0:return h(t,r,i),[e.Diagnostics.Change_0_to_1,n,i.namespacePrefix+"."+n];case 1:return v(t,r,i,a),[e.Diagnostics.Change_0_to_1,n,b(i.moduleSpecifier,a)+n];case 2:var o=i.importClause,s=i.importKind;y(t,r,o,1===s?n:void 0,0===s?[n]:e.emptyArray);var c=e.stripQuotes(o.parent.moduleSpecifier.getText());return[1===s?e.Diagnostics.Add_default_import_0_to_existing_import_declaration_from_1:e.Diagnostics.Add_0_to_existing_import_declaration_from_1,n,c];case 3:s=i.importKind;var u=i.moduleSpecifier;return x(t,r,u,a,1===s?{defaultImport:n,namedImports:e.emptyArray,namespaceLikeImport:void 0}:0===s?{defaultImport:void 0,namedImports:[n],namespaceLikeImport:void 0}:{defaultImport:void 0,namedImports:e.emptyArray,namespaceLikeImport:{importKind:s,name:n}}),[1===s?e.Diagnostics.Import_default_0_from_module_1:e.Diagnostics.Import_0_from_module_1,n,u];default:return e.Debug.assertNever(i,"Unexpected fix kind "+i.kind)}}(t,r,i,a,o)}));return n.createCodeFixAction("import",c,s,n.importFixId,e.Diagnostics.Add_all_missing_imports)}function y(t,r,n,i,a){if(i&&(e.Debug.assert(!n.name,"Default imports can't have names"),t.insertNodeAt(r,n.getStart(r),e.createIdentifier(i),{suffix:", "})),a.length){var o=a.map((function(t){return e.createImportSpecifier(void 0,e.createIdentifier(t))}));if(n.namedBindings&&e.cast(n.namedBindings,e.isNamedImports).elements.length)for(var s=0,c=o;s<c.length;s++){var u=c[s];t.insertNodeInListAfter(r,e.last(e.cast(n.namedBindings,e.isNamedImports).elements),u)}else if(o.length){var l=e.createNamedImports(o);n.namedBindings?t.replaceNode(r,n.namedBindings,l):t.insertNodeAfter(r,e.Debug.assertDefined(n.name,"Named import specifiers must have names"),l)}}}function h(e,t,r){var n=r.namespacePrefix,i=r.position;e.insertText(t,i,n+".")}function v(e,t,r,n){var i=r.moduleSpecifier,a=r.position;e.insertText(t,a,b(i,n))}function b(t,r){var n=e.getQuoteFromPreference(r);return"import("+n+t+n+")."}function x(t,r,n,i,a){var o=a.defaultImport,s=a.namedImports,c=a.namespaceLikeImport,u=e.makeStringLiteral(n,i);(void 0!==o||s.length)&&e.insertImport(t,r,e.makeImport(void 0===o?void 0:e.createIdentifier(o),s.map((function(t){return e.createImportSpecifier(void 0,e.createIdentifier(t))})),n,i)),c&&e.insertImport(t,r,3===c.importKind?e.createImportEqualsDeclaration(void 0,void 0,e.createIdentifier(c.name),e.createExternalModuleReference(u)):4===c.importKind?function(t,r){return e.createVariableStatement(void 0,e.createVariableDeclarationList([e.createVariableDeclaration(e.createIdentifier(t),void 0,e.createCall(e.createIdentifier("require"),void 0,[r]))],2))}(c.name,u):e.createImportDeclaration(void 0,void 0,e.createImportClause(void 0,e.createNamespaceImport(e.createIdentifier(c.name))),u))}function D(t,r){var n=t.declarations;return e.some(n,(function(t){return!!(e.getMeaningFromDeclaration(t)&r)}))}function S(t,r,n,i,a){var o=0,s=i&&k(n,t,r),c=t.getSourceFiles(),u=r.getGlobalTypingsCacheLocation&&r.getGlobalTypingsCacheLocation();T(t.getTypeChecker(),c,(function(t,i){var l,_,d,p,f,m;void 0===i?!s||s.allowsImportingAmbientModule(t,c)?a(t):s&&o++:i&&i!==n&&(l=n.fileName,_=i.fileName,d=e.hostGetCanonicalFileName(r),p=u,f=e.forEachAncestorDirectory(_,(function(t){return"node_modules"===e.getBaseFileName(t)?t:void 0})),void 0===(m=f&&e.getDirectoryPath(d(f)))||e.startsWith(d(l),m)||p&&e.startsWith(d(p),m))&&(!s||s.allowsImportingSourceFile(i,c)?a(t):s&&o++)})),r.log&&r.log("forEachExternalModuleToImportFrom: filtered out "+o+" modules by package.json contents")}function T(t,r,n){for(var i=0,a=t.getAmbientModules();i<a.length;i++){n(a[i],void 0)}for(var o=0,s=r;o<s.length;o++){var c=s[o];e.isExternalOrCommonJsModule(c)&&n(t.getMergedSymbol(c.symbol),c)}}function E(t,r){return C(e.removeFileExtension(e.stripQuotes(t.name)),r)}function C(t,r){var n=e.getBaseFileName(e.removeSuffix(t,"/index")),i="",a=!0,o=n.charCodeAt(0);e.isIdentifierStart(o,r)?i+=String.fromCharCode(o):a=!1;for(var s=1;s<n.length;s++){var c=n.charCodeAt(s),u=e.isIdentifierPart(c,r);if(u){var l=String.fromCharCode(c);a||(l=l.toUpperCase()),i+=l}a=u}return e.isStringANonContextualKeyword(i)?"_"+i:i||"_"}function k(t,r,n){var i,a=n.getPackageJsonsVisibleToFile&&n.getPackageJsonsVisibleToFile(t.fileName)||e.getPackageJsonsVisibleToFile(t.fileName,n),o=11,s={directoryExists:e.maybeBind(n,n.directoryExists),fileExists:e.maybeBind(n,n.fileExists),getCurrentDirectory:e.maybeBind(n,n.getCurrentDirectory),readFile:e.maybeBind(n,n.readFile),useCaseSensitiveFileNames:e.maybeBind(n,n.useCaseSensitiveFileNames),getProbableSymlinks:e.maybeBind(n,n.getProbableSymlinks)||r.getProbableSymlinks,getGlobalTypingsCacheLocation:e.maybeBind(n,n.getGlobalTypingsCacheLocation)};return{allowsImportingAmbientModule:function(t,r){if(!a.length)return!0;var n=l(t.valueDeclaration.getSourceFile().fileName,r);if(void 0===n)return!0;var i=e.stripQuotes(t.getName());if(u(i))return!0;return c(n)||c(i)},allowsImportingSourceFile:function(e,t){if(!a.length)return!0;var r=l(e.fileName,t);if(!r)return!0;return c(r)},allowsImportingSpecifier:function(t){if(!a.length||u(t))return!0;if(e.pathIsRelative(t)||e.isRootedDiskPath(t))return!0;return c(t)}};function c(t){for(var r=_(t),n=0,i=a;n<i.length;n++){var s=i[n];if(s.has(r,o)||s.has(e.getTypesPackageName(r),o))return!0}return!1}function u(r){return!!(e.isSourceFileJS(t)&&e.JsTyping.nodeCoreModules.has(r)&&(void 0===i&&(i=e.consumesNodeCoreModules(t)),i))}function l(i,a){if(e.stringContains(i,"node_modules")){var o=e.moduleSpecifiers.getNodeModulesPackageName(n.getCompilationSettings(),t.path,i,s,a,r.redirectTargetsMap);if(o)return e.pathIsRelative(o)||e.isRootedDiskPath(o)?void 0:_(o)}}function _(t){var r=e.getPathComponents(e.getPackageNameFromTypesPackageName(t)).slice(1);return e.startsWith(r[0],"@")?r[0]+"/"+r[1]:r[0]}}n.registerCodeFix({errorCodes:o,getCodeActions:function(t){var r=t.errorCode,n=t.preferences,i=t.sourceFile,a=t.span,o=d(t,r,a.start);if(o){var s=o.fixes,c=o.symbolName,u=e.getQuotePreference(i,n);return s.map((function(e){return g(t,i,c,e,u)}))}},fixIds:[n.importFixId],getAllCodeActions:function(t){var r=t.sourceFile,i=t.preferences,a=[],s=[],c=e.createMap(),u=e.createMap();return n.eachDiagnostic(t,o,(function(r){var n=d(t,r.code,r.start);if(n&&n.fixes.length){var i=n.fixes,o=n.symbolName,l=e.first(i);switch(l.kind){case 0:a.push(l);break;case 1:s.push(l);break;case 2:var _=l.importClause,p=l.importKind,f=String(e.getNodeId(_));(m=c.get(f))||c.set(f,m={importClause:_,defaultImport:void 0,namedImports:[]}),0===p?e.pushIfUnique(m.namedImports,o):(e.Debug.assert(void 0===m.defaultImport||m.defaultImport===o,"(Add to Existing) Default import should be missing or match symbolName"),m.defaultImport=o);break;case 3:var m,g=l.moduleSpecifier;p=l.importKind;switch((m=u.get(g))||u.set(g,m={defaultImport:void 0,namedImports:[],namespaceLikeImport:void 0}),p){case 1:e.Debug.assert(void 0===m.defaultImport||m.defaultImport===o,"(Add new) Default import should be missing or match symbolName"),m.defaultImport=o;break;case 0:e.pushIfUnique(m.namedImports,o);break;case 3:case 2:e.Debug.assert(void 0===m.namespaceLikeImport||m.namespaceLikeImport.name===o,"Namespacelike import shoudl be missing or match symbolName"),m.namespaceLikeImport={importKind:p,name:o}}break;default:e.Debug.assertNever(l,"fix wasn't never - got kind "+l.kind)}}})),n.createCombinedCodeActions(e.textChanges.ChangeTracker.with(t,(function(t){for(var n=e.getQuotePreference(r,i),o=0,l=a;o<l.length;o++){var _=l[o];h(t,r,_)}for(var d=0,p=s;d<p.length;d++){_=p[d];v(t,r,_,n)}c.forEach((function(e){var n=e.importClause,i=e.defaultImport,a=e.namedImports;y(t,r,n,i,a)})),u.forEach((function(e,i){x(t,r,i,n,e)}))})))}}),function(e){e[e.UseNamespace=0]="UseNamespace",e[e.ImportType=1]="ImportType",e[e.AddToExisting=2]="AddToExisting",e[e.AddNew=3]="AddNew"}(i||(i={})),function(e){e[e.Named=0]="Named",e[e.Default=1]="Default",e[e.Namespace=2]="Namespace",e[e.Equals=3]="Equals",e[e.ConstEquals=4]="ConstEquals"}(a||(a={})),n.getImportCompletionAction=function(t,r,n,i,a,o,_,d,p){var m=function(t,r,n,i,a,o,s,u){var l=[];return T(s,u,(function(u,_){if(!_||u===n||!e.startsWith(a.fileName,e.getDirectoryPath(_.fileName))){var d=f(t,u,s,o);d&&d.name===i&&e.skipAlias(d.symbol,s)===r&&l.push({moduleSymbol:u,importKind:d.kind,exportedSymbolIsTypeOnly:c(d.symbol,s)});for(var p=0,m=s.getExportsOfModule(u);p<m.length;p++){var g=m[p];g.name===i&&e.skipAlias(g,s)===r&&l.push({moduleSymbol:u,importKind:0,exportedSymbolIsTypeOnly:c(g,s)})}}})),l}(n,t,r,i,n,o.getCompilerOptions(),o.getTypeChecker(),o.getSourceFiles());return e.Debug.assert(m.some((function(e){return e.moduleSymbol===r})),"Some exportInfo should match the specified moduleSymbol"),{moduleSpecifier:e.first(l(o,n,d,m,a,p)).moduleSpecifier,codeAction:s(g({host:a,formatContext:_,preferences:p},n,i,e.first(u(m,i,d,o,n,a,p)),e.getQuotePreference(n,p)))}},n.forEachExternalModuleToImportFrom=S,n.moduleSymbolToValidIdentifier=E,n.moduleSpecifierToValidIdentifier=C}(e.codefix||(e.codefix={}))}(s||(s={})),function(e){!function(t){var r=[e.Diagnostics.Property_0_does_not_exist_on_type_1_Did_you_mean_2.code,e.Diagnostics.Cannot_find_name_0_Did_you_mean_1.code,e.Diagnostics.Cannot_find_name_0_Did_you_mean_the_instance_member_this_0.code,e.Diagnostics.Cannot_find_name_0_Did_you_mean_the_static_member_1_0.code,e.Diagnostics.Module_0_has_no_exported_member_1_Did_you_mean_2.code];function n(t,r,n){var i,a=e.getTokenAtPosition(t,r),o=n.program.getTypeChecker();if(e.isPropertyAccessExpression(a.parent)&&a.parent.name===a){e.Debug.assert(75===a.kind,"Expected an identifier for spelling (property access)");var s=o.getTypeAtLocation(a.parent.expression);i=o.getSuggestionForNonexistentProperty(a,s)}else if(e.isImportSpecifier(a.parent)&&a.parent.name===a){e.Debug.assert(75===a.kind,"Expected an identifier for spelling (import)");var c=function(t,r,n){if(!n||!e.isStringLiteralLike(n.moduleSpecifier))return;var i=e.getResolvedModule(t,n.moduleSpecifier.text);return i?r.program.getSourceFile(i.resolvedFileName):void 0}(t,n,e.findAncestor(a,e.isImportDeclaration));c&&c.symbol&&(i=o.getSuggestionForNonexistentExport(a,c.symbol))}else{var u=e.getMeaningFromLocation(a),l=e.getTextOfNode(a);e.Debug.assert(void 0!==l,"name should be defined"),i=o.getSuggestionForNonexistentSymbol(a,l,function(e){var t=0;4&e&&(t|=1920);2&e&&(t|=788968);1&e&&(t|=111551);return t}(u))}return void 0===i?void 0:{node:a,suggestion:i}}function i(t,r,n,i,a){!e.isIdentifierText(i,a)&&e.isPropertyAccessExpression(n.parent)?t.replaceNode(r,n.parent,e.createElementAccess(n.parent.expression,e.createLiteral(i))):t.replaceNode(r,n,e.createIdentifier(i))}t.registerCodeFix({errorCodes:r,getCodeActions:function(r){var a=r.sourceFile,o=n(a,r.span.start,r);if(o){var s=o.node,c=o.suggestion,u=r.host.getCompilationSettings().target,l=e.textChanges.ChangeTracker.with(r,(function(e){return i(e,a,s,c,u)}));return[t.createCodeFixAction("spelling",l,[e.Diagnostics.Change_spelling_to_0,c],"fixSpelling",e.Diagnostics.Fix_all_detected_spelling_errors)]}},fixIds:["fixSpelling"],getAllCodeActions:function(e){return t.codeFixAll(e,r,(function(t,r){var a=n(r.file,r.start,e),o=e.host.getCompilationSettings().target;a&&i(t,e.sourceFile,a.node,a.suggestion,o)}))}})}(e.codefix||(e.codefix={}))}(s||(s={})),function(e){!function(t){var r,n="addMissingMember",i=[e.Diagnostics.Property_0_does_not_exist_on_type_1.code,e.Diagnostics.Property_0_does_not_exist_on_type_1_Did_you_mean_2.code,e.Diagnostics.Property_0_is_missing_in_type_1_but_required_in_type_2.code,e.Diagnostics.Type_0_is_missing_the_following_properties_from_type_1_Colon_2.code,e.Diagnostics.Type_0_is_missing_the_following_properties_from_type_1_Colon_2_and_3_more.code],a="addMissingMember";function o(t,r,n,i){var a=e.getTokenAtPosition(t,r);if(e.isIdentifier(a)){var o=a.parent;if(e.isPropertyAccessExpression(o)){var s=e.skipConstraint(n.getTypeAtLocation(o.expression)),c=s.symbol;if(c&&c.declarations){var u=e.find(c.declarations,e.isClassLike)||e.find(c.declarations,e.isInterfaceDeclaration);if(u&&!i.isSourceFileFromExternalLibrary(u.getSourceFile())){var l=(s.target||s)!==n.getDeclaredTypeOfSymbol(c),_=u.getSourceFile();return{kind:1,token:a,parentDeclaration:u,makeStatic:l,declSourceFile:_,inJs:e.isSourceFileJS(_),call:e.tryCast(o.parent,e.isCallExpression)}}var d=e.find(c.declarations,e.isEnumDeclaration);return d&&!i.isSourceFileFromExternalLibrary(d.getSourceFile())?{kind:0,token:a,parentDeclaration:d}:void 0}}}}function s(t,r,n,i,a){if(a){if(213===n.kind)return;var o=n.name.getText(),s=c(e.createIdentifier(o),i);t.insertNodeAfter(r,n,s)}else{var u=e.getFirstConstructorWithBody(n);if(!u)return;var l=c(e.createThis(),i);t.insertNodeAtConstructorEnd(r,u,l)}}function c(t,r){return e.createStatement(e.createAssignment(e.createPropertyAccess(t,r),e.createIdentifier("undefined")))}function u(t,r,n){var i;if(208===n.parent.parent.kind){var a=n.parent.parent,o=n.parent===a.left?a.right:a.left,s=t.getWidenedType(t.getBaseTypeOfLiteralType(t.getTypeAtLocation(o)));i=t.typeToTypeNode(s,r)}else{var c=t.getContextualType(n.parent);i=c?t.typeToTypeNode(c):void 0}return i||e.createKeywordTypeNode(124)}function l(t,r,n,i,a,o){var s=e.createProperty(void 0,o?[e.createToken(119)]:void 0,i,void 0,a,void 0),c=function(t){for(var r,n=0,i=t.members;n<i.length;n++){var a=i[n];if(!e.isPropertyDeclaration(a))break;r=a}return r}(n);c?t.insertNodeAfter(r,c,s):t.insertNodeAtClassStart(r,n,s)}function _(r,i,a,o,s){var c=e.createKeywordTypeNode(142),u=e.createParameter(void 0,void 0,void 0,"x",void 0,c,void 0),l=e.createIndexSignature(void 0,void 0,[u],s),_=e.textChanges.ChangeTracker.with(r,(function(e){return e.insertNodeAtClassStart(i,a,l)}));return t.createCodeFixActionNoFixId(n,_,[e.Diagnostics.Add_index_signature_for_property_0,o])}function d(r,n,i,a,o,s,c,u,l){var _=t.createMethodFromCallExpression(r,s,o.text,u,c,l,a),d=e.getAncestor(s,160);d&&d.parent===a?n.insertNodeAfter(i,d,_):n.insertNodeAtClassStart(i,a,_)}function p(t,r,n,i){var a=e.some(i.members,(function(e){var t=r.getTypeAtLocation(e);return!!(t&&132&t.flags)})),o=e.createEnumMember(n,a?e.createStringLiteral(n.text):void 0);t.replaceNode(i.getSourceFile(),i,e.updateEnumDeclaration(i,i.decorators,i.modifiers,i.name,e.concatenate(i.members,e.singleElementArray(o))))}t.registerCodeFix({errorCodes:i,getCodeActions:function(r){var i=o(r.sourceFile,r.span.start,r.program.getTypeChecker(),r.program);if(i){if(0===i.kind){var c=i.token,f=i.parentDeclaration,m=e.textChanges.ChangeTracker.with(r,(function(e){return p(e,r.program.getTypeChecker(),c,f)}));return[t.createCodeFixAction(n,m,[e.Diagnostics.Add_missing_enum_member_0,c.text],a,e.Diagnostics.Add_all_missing_members)]}var g=i.parentDeclaration,y=i.declSourceFile,h=i.inJs,v=i.makeStatic,b=i.token,x=i.call,D=x&&function(r,i,o,s,c,u,l,_){var p=e.textChanges.ChangeTracker.with(r,(function(e){return d(r,e,i,o,s,c,u,l,_)}));return t.createCodeFixAction(n,p,[u?e.Diagnostics.Declare_static_method_0:e.Diagnostics.Declare_method_0,s.text],a,e.Diagnostics.Add_all_missing_members)}(r,y,g,b,x,v,h,r.preferences),S=h&&!e.isInterfaceDeclaration(g)?e.singleElementArray(function(r,i,o,c,u){var l=e.textChanges.ChangeTracker.with(r,(function(e){return s(e,i,o,c,u)}));return 0===l.length?void 0:t.createCodeFixAction(n,l,[u?e.Diagnostics.Initialize_static_property_0:e.Diagnostics.Initialize_property_0_in_the_constructor,c],a,e.Diagnostics.Add_all_missing_members)}(r,y,g,b.text,v)):function(r,i,o,s,c){var d=u(r.program.getTypeChecker(),o,s),p=function(r,i,o,s,c,u){var _=e.textChanges.ChangeTracker.with(r,(function(e){return l(e,i,o,c,u,s)}));return t.createCodeFixAction(n,_,[s?e.Diagnostics.Declare_static_property_0:e.Diagnostics.Declare_property_0,c],a,e.Diagnostics.Add_all_missing_members)}(r,i,o,c,s.text,d);return c?[p]:[p,_(r,i,o,s.text,d)]}(r,y,g,b,v);return e.concatenate(e.singleElementArray(D),S)}},fixIds:[a],getAllCodeActions:function(r){var n=r.program,a=r.preferences,c=n.getTypeChecker(),_=e.createMap(),f=new e.NodeMap;return t.createCombinedCodeActions(e.textChanges.ChangeTracker.with(r,(function(m){t.eachDiagnostic(r,i,(function(t){var n=o(t.file,t.start,c,r.program);if(n&&e.addToSeen(_,e.getNodeId(n.parentDeclaration)+"#"+n.token.text))if(0===n.kind){var i=n.token,a=n.parentDeclaration;p(m,c,i,a)}else{a=n.parentDeclaration;var s=n.token,u=f.getOrUpdate(a,(function(){return[]}));u.some((function(e){return e.token.text===s.text}))||u.push(n)}})),f.forEach((function(t,i){for(var o=function(t,r){var n=[];for(;t;){var i=e.getClassExtendsHeritageElement(t),a=i&&r.getSymbolAtLocation(i.expression),o=a&&e.find(a.declarations,e.isClassLike);o&&n.push(o),t=o}return n}(i,c),_=function(t){if(o.some((function(e){var r=f.get(e);return!!r&&r.some((function(e){return e.token.text===t.token.text}))})))return"continue";var i=t.parentDeclaration,c=t.declSourceFile,_=t.inJs,p=t.makeStatic,g=t.token,y=t.call;if(y)d(r,m,c,i,g,y,p,_,a);else if(_&&!e.isInterfaceDeclaration(i))s(m,c,i,g.text,p);else{var h=u(n.getTypeChecker(),i,g);l(m,c,i,g.text,h,p)}},p=0,g=t;p<g.length;p++){_(g[p])}}))})))}}),function(e){e[e.Enum=0]="Enum",e[e.ClassOrInterface=1]="ClassOrInterface"}(r||(r={}))}(e.codefix||(e.codefix={}))}(s||(s={})),function(e){!function(t){var r="addMissingNewOperator",n=[e.Diagnostics.Value_of_type_0_is_not_callable_Did_you_mean_to_include_new.code];function i(t,r,n){var i=e.cast(function(t,r){var n=e.getTokenAtPosition(t,r.start),i=e.textSpanEnd(r);for(;n.end<i;)n=n.parent;return n}(r,n),e.isCallExpression),a=e.createNew(i.expression,i.typeArguments,i.arguments);t.replaceNode(r,i,a)}t.registerCodeFix({errorCodes:n,getCodeActions:function(n){var a=n.sourceFile,o=n.span,s=e.textChanges.ChangeTracker.with(n,(function(e){return i(e,a,o)}));return[t.createCodeFixAction(r,s,e.Diagnostics.Add_missing_new_operator_to_call,r,e.Diagnostics.Add_missing_new_operator_to_all_calls)]},fixIds:[r],getAllCodeActions:function(e){return t.codeFixAll(e,n,(function(t,r){return i(t,e.sourceFile,r)}))}})}(e.codefix||(e.codefix={}))}(s||(s={})),function(e){!function(t){var r=e.Diagnostics.Cannot_find_module_0.code,n=[r,e.Diagnostics.Could_not_find_a_declaration_file_for_module_0_1_implicitly_has_an_any_type.code];function i(e,t){return{type:"install package",file:e,packageName:t}}function a(t,r){var n=e.cast(e.getTokenAtPosition(t,r),e.isStringLiteral).text,i=e.parsePackageName(n).packageName;return e.isExternalModuleNameRelative(i)?void 0:i}function o(t,n,i){return i===r?e.JsTyping.nodeCoreModules.has(t)?"@types/node":void 0:n.isKnownTypesPackageName(t)?e.getTypesPackageName(t):void 0}t.registerCodeFix({errorCodes:n,getCodeActions:function(r){var n=r.host,s=r.sourceFile,c=a(s,r.span.start);if(void 0!==c){var u=o(c,n,r.errorCode);return void 0===u?[]:[t.createCodeFixAction("fixCannotFindModule",[],[e.Diagnostics.Install_0,u],"installTypesPackage",e.Diagnostics.Install_all_missing_types_packages,i(s.fileName,u))]}},fixIds:["installTypesPackage"],getAllCodeActions:function(r){return t.codeFixAll(r,n,(function(t,n,s){var c=a(n.file,n.start);if(void 0!==c)switch(r.fixId){case"installTypesPackage":var u=o(c,r.host,n.code);u&&s.push(i(n.file.fileName,u));break;default:e.Debug.fail("Bad fixId: "+r.fixId)}}))}})}(e.codefix||(e.codefix={}))}(s||(s={})),function(e){!function(t){var r=[e.Diagnostics.Non_abstract_class_0_does_not_implement_inherited_abstract_member_1_from_class_2.code,e.Diagnostics.Non_abstract_class_expression_does_not_implement_inherited_abstract_member_0_from_class_1.code],n="fixClassDoesntImplementInheritedAbstractMember";function i(t,r){var n=e.getTokenAtPosition(t,r);return e.cast(n.parent,e.isClassLike)}function a(r,n,i,a,s){var c=e.getEffectiveBaseTypeNode(r),u=i.program.getTypeChecker(),l=u.getTypeAtLocation(c),_=u.getPropertiesOfType(l).filter(o);t.createMissingMemberNodes(r,_,i,s,(function(e){return a.insertNodeAtClassStart(n,r,e)}))}function o(t){var r=e.getModifierFlags(e.first(t.getDeclarations()));return!(8&r||!(128&r))}t.registerCodeFix({errorCodes:r,getCodeActions:function(r){var o=r.sourceFile,s=r.span,c=e.textChanges.ChangeTracker.with(r,(function(e){return a(i(o,s.start),o,r,e,r.preferences)}));return 0===c.length?void 0:[t.createCodeFixAction(n,c,e.Diagnostics.Implement_inherited_abstract_class,n,e.Diagnostics.Implement_all_inherited_abstract_classes)]},fixIds:[n],getAllCodeActions:function(n){var o=e.createMap();return t.codeFixAll(n,r,(function(t,r){var s=i(r.file,r.start);e.addToSeen(o,e.getNodeId(s))&&a(s,n.sourceFile,n,t,n.preferences)}))}})}(e.codefix||(e.codefix={}))}(s||(s={})),function(e){!function(t){var r="classSuperMustPrecedeThisAccess",n=[e.Diagnostics.super_must_be_called_before_accessing_this_in_the_constructor_of_a_derived_class.code];function i(e,t,r,n){e.insertNodeAtConstructorStart(t,r,n),e.delete(t,n)}function a(t,r){var n=e.getTokenAtPosition(t,r);if(103===n.kind){var i=e.getContainingFunction(n),a=o(i.body);return a&&!a.expression.arguments.some((function(t){return e.isPropertyAccessExpression(t)&&t.expression===n}))?{constructor:i,superCall:a}:void 0}}function o(t){return e.isExpressionStatement(t)&&e.isSuperCall(t.expression)?t:e.isFunctionLike(t)?void 0:e.forEachChild(t,o)}t.registerCodeFix({errorCodes:n,getCodeActions:function(n){var o=n.sourceFile,s=n.span,c=a(o,s.start);if(c){var u=c.constructor,l=c.superCall,_=e.textChanges.ChangeTracker.with(n,(function(e){return i(e,o,u,l)}));return[t.createCodeFixAction(r,_,e.Diagnostics.Make_super_call_the_first_statement_in_the_constructor,r,e.Diagnostics.Make_all_super_calls_the_first_statement_in_their_constructor)]}},fixIds:[r],getAllCodeActions:function(r){var o=r.sourceFile,s=e.createMap();return t.codeFixAll(r,n,(function(t,r){var n=a(r.file,r.start);if(n){var c=n.constructor,u=n.superCall;e.addToSeen(s,e.getNodeId(c.parent))&&i(t,o,c,u)}}))}})}(e.codefix||(e.codefix={}))}(s||(s={})),function(e){!function(t){var r="constructorForDerivedNeedSuperCall",n=[e.Diagnostics.Constructors_for_derived_classes_must_contain_a_super_call.code];function i(t,r){var n=e.getTokenAtPosition(t,r);return e.Debug.assert(128===n.kind,"token should be at the constructor keyword"),n.parent}function a(t,r,n){var i=e.createStatement(e.createCall(e.createSuper(),void 0,e.emptyArray));t.insertNodeAtConstructorStart(r,n,i)}t.registerCodeFix({errorCodes:n,getCodeActions:function(n){var o=n.sourceFile,s=n.span,c=i(o,s.start),u=e.textChanges.ChangeTracker.with(n,(function(e){return a(e,o,c)}));return[t.createCodeFixAction(r,u,e.Diagnostics.Add_missing_super_call,r,e.Diagnostics.Add_all_missing_super_calls)]},fixIds:[r],getAllCodeActions:function(e){return t.codeFixAll(e,n,(function(t,r){return a(t,e.sourceFile,i(r.file,r.start))}))}})}(e.codefix||(e.codefix={}))}(s||(s={})),function(e){!function(t){var r="enableExperimentalDecorators",n=[e.Diagnostics.Experimental_support_for_decorators_is_a_feature_that_is_subject_to_change_in_a_future_release_Set_the_experimentalDecorators_option_in_your_tsconfig_or_jsconfig_to_remove_this_warning.code];function i(r,n){t.setJsonCompilerOptionValue(r,n,"experimentalDecorators",e.createTrue())}t.registerCodeFix({errorCodes:n,getCodeActions:function(n){var a=n.program.getCompilerOptions().configFile;if(void 0!==a){var o=e.textChanges.ChangeTracker.with(n,(function(e){return i(e,a)}));return[t.createCodeFixActionNoFixId(r,o,e.Diagnostics.Enable_the_experimentalDecorators_option_in_your_configuration_file)]}},fixIds:[r],getAllCodeActions:function(e){return t.codeFixAll(e,n,(function(t){var r=e.program.getCompilerOptions().configFile;void 0!==r&&i(t,r)}))}})}(e.codefix||(e.codefix={}))}(s||(s={})),function(e){!function(t){var r="fixEnableJsxFlag",n=[e.Diagnostics.Cannot_use_JSX_unless_the_jsx_flag_is_provided.code];function i(r,n){t.setJsonCompilerOptionValue(r,n,"jsx",e.createStringLiteral("react"))}t.registerCodeFix({errorCodes:n,getCodeActions:function(n){var a=n.program.getCompilerOptions().configFile;if(void 0!==a){var o=e.textChanges.ChangeTracker.with(n,(function(e){return i(e,a)}));return[t.createCodeFixActionNoFixId(r,o,e.Diagnostics.Enable_the_jsx_flag_in_your_configuration_file)]}},fixIds:[r],getAllCodeActions:function(e){return t.codeFixAll(e,n,(function(t){var r=e.program.getCompilerOptions().configFile;void 0!==r&&i(t,r)}))}})}(e.codefix||(e.codefix={}))}(s||(s={})),function(e){!function(t){var r="extendsInterfaceBecomesImplements",n=[e.Diagnostics.Cannot_extend_an_interface_0_Did_you_mean_implements.code];function i(t,r){var n=e.getTokenAtPosition(t,r),i=e.getContainingClass(n).heritageClauses,a=i[0].getFirstToken();return 89===a.kind?{extendsToken:a,heritageClauses:i}:void 0}function a(t,r,n,i){if(t.replaceNode(r,n,e.createToken(112)),2===i.length&&89===i[0].token&&112===i[1].token){var a=i[1].getFirstToken(),o=a.getFullStart();t.replaceRange(r,{pos:o,end:o},e.createToken(27));for(var s=r.text,c=a.end;c<s.length&&e.isWhiteSpaceSingleLine(s.charCodeAt(c));)c++;t.deleteRange(r,{pos:a.getStart(),end:c})}}t.registerCodeFix({errorCodes:n,getCodeActions:function(n){var o=n.sourceFile,s=i(o,n.span.start);if(s){var c=s.extendsToken,u=s.heritageClauses,l=e.textChanges.ChangeTracker.with(n,(function(e){return a(e,o,c,u)}));return[t.createCodeFixAction(r,l,e.Diagnostics.Change_extends_to_implements,r,e.Diagnostics.Change_all_extended_interfaces_to_implements)]}},fixIds:[r],getAllCodeActions:function(e){return t.codeFixAll(e,n,(function(e,t){var r=i(t.file,t.start);r&&a(e,t.file,r.extendsToken,r.heritageClauses)}))}})}(e.codefix||(e.codefix={}))}(s||(s={})),function(e){!function(t){var r="forgottenThisPropertyAccess",n=e.Diagnostics.Cannot_find_name_0_Did_you_mean_the_static_member_1_0.code,i=[e.Diagnostics.Cannot_find_name_0_Did_you_mean_the_instance_member_this_0.code,n];function a(t,r,i){var a=e.getTokenAtPosition(t,r);if(e.isIdentifier(a))return{node:a,className:i===n?e.getContainingClass(a).name.text:void 0}}function o(t,r,n){var i=n.node,a=n.className;e.suppressLeadingAndTrailingTrivia(i),t.replaceNode(r,i,e.createPropertyAccess(a?e.createIdentifier(a):e.createThis(),i))}t.registerCodeFix({errorCodes:i,getCodeActions:function(n){var i=n.sourceFile,s=a(i,n.span.start,n.errorCode);if(s){var c=e.textChanges.ChangeTracker.with(n,(function(e){return o(e,i,s)}));return[t.createCodeFixAction(r,c,[e.Diagnostics.Add_0_to_unresolved_variable,s.className||"this"],r,e.Diagnostics.Add_qualifier_to_all_unresolved_variables_matching_a_member_name)]}},fixIds:[r],getAllCodeActions:function(e){return t.codeFixAll(e,i,(function(t,r){var n=a(r.file,r.start,r.code);n&&o(t,e.sourceFile,n)}))}})}(e.codefix||(e.codefix={}))}(s||(s={})),function(e){!function(t){var r="unusedIdentifier",n="unusedIdentifier_prefix",i="unusedIdentifier_delete",a="unusedIdentifier_infer",o=[e.Diagnostics._0_is_declared_but_its_value_is_never_read.code,e.Diagnostics._0_is_declared_but_never_used.code,e.Diagnostics.Property_0_is_declared_but_its_value_is_never_read.code,e.Diagnostics.All_imports_in_import_declaration_are_unused.code,e.Diagnostics.All_destructured_elements_are_unused.code,e.Diagnostics.All_variables_are_unused.code,e.Diagnostics.All_type_parameters_are_unused.code];function s(t,r,n){t.replaceNode(r,n.parent,e.createKeywordTypeNode(147))}function c(n,a){return t.createCodeFixAction(r,n,a,i,e.Diagnostics.Delete_all_unused_declarations)}function u(t,r,n){t.delete(r,e.Debug.assertDefined(e.cast(n.parent,e.isDeclarationWithTypeParameterChildren).typeParameters,"The type parameter to delete should exist"))}function l(t){return 95===t.kind?e.tryCast(t.parent,e.isImportDeclaration):void 0}function _(t,r,n,i,a,o){if(18!==t.kind||!e.isObjectBindingPattern(t.parent))return!1;var s=t.parent.parent;return 155===s.kind?m(r,n,s,i,a,o):r.delete(n,s),!0}function d(t,r,n){var i=e.tryCast(r.parent,e.isVariableDeclarationList);return!(!i||i.getChildren(t)[0]!==r)&&(n.delete(t,224===i.parent.kind?i.parent:i),!0)}function p(t,r,n,i){r!==e.Diagnostics.Property_0_is_declared_but_its_value_is_never_read.code&&(131===i.kind&&(i=e.cast(i.parent,e.isInferTypeNode).typeParameter.name),e.isIdentifier(i)&&function(e){switch(e.parent.kind){case 155:case 154:return!0;case 241:switch(e.parent.parent.parent.kind){case 231:case 230:return!0}}return!1}(i)&&t.replaceNode(n,i,e.createIdentifier("_"+i.text)))}function f(t,r,n,i,a,o){!function(t,r,n,i,a,o){var s=t.parent;e.isParameter(s)?m(r,n,s,i,a,o):r.delete(n,e.isImportClause(s)?t:e.isComputedPropertyName(s)?s.parent:s)}(r,n,t,i,a,o),e.isIdentifier(r)&&function(t,r,n,i){e.FindAllReferences.Core.eachSymbolReferenceInFile(n,i,r,(function(n){e.isPropertyAccessExpression(n.parent)&&n.parent.name===n&&(n=n.parent),e.isBinaryExpression(n.parent)&&e.isExpressionStatement(n.parent.parent)&&n.parent.left===n&&t.delete(r,n.parent.parent)}))}(n,t,r,i)}function m(t,r,n,i,a,o){(function(t,r,n){var i=t.parent;switch(i.kind){case 160:var a=r.getSymbolAtLocation(i.name);if(e.isMemberSymbolInBaseType(a,r))return!1;case 161:case 243:return!0;case 200:case 201:var o=i.parameters,s=o.indexOf(t);return e.Debug.assert(-1!==s,"The parameter should already be in the list"),n?o.slice(s+1).every((function(e){return 75===e.name.kind&&!e.symbol.isReferenced})):s===o.length-1;case 163:return!1;default:return e.Debug.failBadSyntaxKind(i)}})(n,i,o)&&(n.modifiers&&n.modifiers.length>0&&(!e.isIdentifier(n.name)||e.FindAllReferences.Core.isSymbolReferencedInFile(n.name,i,r))?n.modifiers.forEach((function(e){t.deleteModifier(r,e)})):(t.delete(r,n),function(t,r,n,i,a){e.FindAllReferences.Core.eachSignatureCall(n.parent,i,a,(function(e){var i=n.parent.parameters.indexOf(n);e.arguments.length>i&&t.delete(r,e.arguments[i])}))}(t,r,n,a,i)))}t.registerCodeFix({errorCodes:o,getCodeActions:function(i){var o=i.errorCode,m=i.sourceFile,g=i.program,y=g.getTypeChecker(),h=g.getSourceFiles(),v=e.getTokenAtPosition(m,i.span.start);if(e.isJSDocTemplateTag(v))return[c(e.textChanges.ChangeTracker.with(i,(function(e){return e.delete(m,v)})),e.Diagnostics.Remove_template_tag)];if(29===v.kind)return[c(T=e.textChanges.ChangeTracker.with(i,(function(e){return u(e,m,v)})),e.Diagnostics.Remove_type_parameters)];var b=l(v);if(b)return[c(T=e.textChanges.ChangeTracker.with(i,(function(e){return e.delete(m,b)})),[e.Diagnostics.Remove_import_from_0,e.showModuleSpecifier(b)])];var x=e.textChanges.ChangeTracker.with(i,(function(e){return _(v,e,m,y,h,!1)}));if(x.length)return[c(x,e.Diagnostics.Remove_destructuring)];var D=e.textChanges.ChangeTracker.with(i,(function(e){return d(m,v,e)}));if(D.length)return[c(D,e.Diagnostics.Remove_variable_statement)];var S=[];if(131===v.kind){var T=e.textChanges.ChangeTracker.with(i,(function(e){return s(e,m,v)})),E=e.cast(v.parent,e.isInferTypeNode).typeParameter.name.text;S.push(t.createCodeFixAction(r,T,[e.Diagnostics.Replace_infer_0_with_unknown,E],a,e.Diagnostics.Replace_all_unused_infer_with_unknown))}else{var C=e.textChanges.ChangeTracker.with(i,(function(e){return f(m,v,e,y,h,!1)}));if(C.length){E=e.isComputedPropertyName(v.parent)?v.parent:v;S.push(c(C,[e.Diagnostics.Remove_declaration_for_Colon_0,E.getText(m)]))}}var k=e.textChanges.ChangeTracker.with(i,(function(e){return p(e,o,m,v)}));return k.length&&S.push(t.createCodeFixAction(r,k,[e.Diagnostics.Prefix_0_with_an_underscore,v.getText(m)],n,e.Diagnostics.Prefix_all_unused_declarations_with_where_possible)),S},fixIds:[n,i,a],getAllCodeActions:function(r){var c=r.sourceFile,m=r.program,g=m.getTypeChecker(),y=m.getSourceFiles();return t.codeFixAll(r,o,(function(t,o){var m=e.getTokenAtPosition(c,o.start);switch(r.fixId){case n:p(t,o.code,c,m);break;case i:if(131===m.kind)break;var h=l(m);h?t.delete(c,h):e.isJSDocTemplateTag(m)?t.delete(c,m):29===m.kind?u(t,c,m):_(m,t,c,g,y,!0)||d(c,m,t)||f(c,m,t,g,y,!0);break;case a:131===m.kind&&s(t,c,m);break;default:e.Debug.fail(JSON.stringify(r.fixId))}}))}})}(e.codefix||(e.codefix={}))}(s||(s={})),function(e){!function(t){var r="fixUnreachableCode",n=[e.Diagnostics.Unreachable_code_detected.code];function i(t,r,n,i){var a=e.getTokenAtPosition(r,n),o=e.findAncestor(a,e.isStatement);e.Debug.assert(o.getStart(r)===a.getStart(r),"token and statement should start at the same point");var s=(e.isBlock(o.parent)?o.parent:o).parent;if(!e.isBlock(o.parent)||o===e.first(o.parent.statements))switch(s.kind){case 226:if(s.elseStatement){if(e.isBlock(o.parent))break;return void t.replaceNode(r,o,e.createBlock(e.emptyArray))}case 228:case 229:return void t.delete(r,s)}if(e.isBlock(o.parent)){var c=n+i,u=e.Debug.assertDefined(function(e,t){for(var r,n=0,i=e;n<i.length;n++){var a=i[n];if(!t(a))break;r=a}return r}(e.sliceAfter(o.parent.statements,o),(function(e){return e.pos<c})),"Some statement should be last");t.deleteNodeRange(r,o,u)}else t.delete(r,o)}t.registerCodeFix({errorCodes:n,getCodeActions:function(n){var a=e.textChanges.ChangeTracker.with(n,(function(e){return i(e,n.sourceFile,n.span.start,n.span.length)}));return[t.createCodeFixAction(r,a,e.Diagnostics.Remove_unreachable_code,r,e.Diagnostics.Remove_all_unreachable_code)]},fixIds:[r],getAllCodeActions:function(e){return t.codeFixAll(e,n,(function(e,t){return i(e,t.file,t.start,t.length)}))}})}(e.codefix||(e.codefix={}))}(s||(s={})),function(e){!function(t){var r="fixUnusedLabel",n=[e.Diagnostics.Unused_label.code];function i(t,r,n){var i=e.getTokenAtPosition(r,n),a=e.cast(i.parent,e.isLabeledStatement),o=i.getStart(r),s=a.statement.getStart(r),c=e.positionsAreOnSameLine(o,s,r)?s:e.skipTrivia(r.text,e.findChildOfKind(a,58,r).end,!0);t.deleteRange(r,{pos:o,end:c})}t.registerCodeFix({errorCodes:n,getCodeActions:function(n){var a=e.textChanges.ChangeTracker.with(n,(function(e){return i(e,n.sourceFile,n.span.start)}));return[t.createCodeFixAction(r,a,e.Diagnostics.Remove_unused_label,r,e.Diagnostics.Remove_all_unused_labels)]},fixIds:[r],getAllCodeActions:function(e){return t.codeFixAll(e,n,(function(e,t){return i(e,t.file,t.start)}))}})}(e.codefix||(e.codefix={}))}(s||(s={})),function(e){!function(t){var r=[e.Diagnostics.JSDoc_types_can_only_be_used_inside_documentation_comments.code];function n(e,t,r,n,i){e.replaceNode(t,r,i.typeToTypeNode(n,r))}function i(t,r,n){var i=e.findAncestor(e.getTokenAtPosition(t,r),a),o=i&&i.type;return o&&{typeNode:o,type:n.getTypeFromTypeNode(o)}}function a(e){switch(e.kind){case 216:case 164:case 165:case 243:case 162:case 166:case 185:case 160:case 159:case 155:case 158:case 157:case 163:case 246:case 198:case 241:return!0;default:return!1}}t.registerCodeFix({errorCodes:r,getCodeActions:function(r){var a=r.sourceFile,o=r.program.getTypeChecker(),s=i(a,r.span.start,o);if(s){var c=s.typeNode,u=s.type,l=c.getText(a),_=[d(u,"fixJSDocTypes_plain",e.Diagnostics.Change_all_jsdoc_style_types_to_TypeScript)];return 295===c.kind&&_.push(d(o.getNullableType(u,32768),"fixJSDocTypes_nullable",e.Diagnostics.Change_all_jsdoc_style_types_to_TypeScript_and_add_undefined_to_nullable_types)),_}function d(i,s,u){var _=e.textChanges.ChangeTracker.with(r,(function(e){return n(e,a,c,i,o)}));return t.createCodeFixAction("jdocTypes",_,[e.Diagnostics.Change_0_to_1,l,o.typeToString(i)],s,u)}},fixIds:["fixJSDocTypes_plain","fixJSDocTypes_nullable"],getAllCodeActions:function(e){var a=e.fixId,o=e.program,s=e.sourceFile,c=o.getTypeChecker();return t.codeFixAll(e,r,(function(e,t){var r=i(t.file,t.start,c);if(r){var o=r.typeNode,u=r.type,l=295===o.kind&&"fixJSDocTypes_nullable"===a?c.getNullableType(u,32768):u;n(e,s,o,l,c)}}))}})}(e.codefix||(e.codefix={}))}(s||(s={})),function(e){!function(t){var r="fixAwaitInSyncFunction",n=[e.Diagnostics.await_expression_is_only_allowed_within_an_async_function.code,e.Diagnostics.A_for_await_of_statement_is_only_allowed_within_an_async_function_or_async_generator.code];function i(t,r){var n=e.getTokenAtPosition(t,r),i=e.getContainingFunction(n);if(i){var a,o;switch(i.kind){case 160:a=i.name;break;case 243:case 200:a=e.findChildOfKind(i,93,t);break;case 201:a=e.findChildOfKind(i,20,t)||e.first(i.parameters);break;default:return}return a&&{insertBefore:a,returnType:(o=i,o.type?o.type:e.isVariableDeclaration(o.parent)&&o.parent.type&&e.isFunctionTypeNode(o.parent.type)?o.parent.type.type:void 0)}}}function a(t,r,n){var i=n.insertBefore,a=n.returnType;if(a){var o=e.getEntityNameFromTypeNode(a);o&&75===o.kind&&"Promise"===o.text||t.replaceNode(r,a,e.createTypeReferenceNode("Promise",e.createNodeArray([a])))}t.insertModifierBefore(r,125,i)}t.registerCodeFix({errorCodes:n,getCodeActions:function(n){var o=n.sourceFile,s=n.span,c=i(o,s.start);if(c){var u=e.textChanges.ChangeTracker.with(n,(function(e){return a(e,o,c)}));return[t.createCodeFixAction(r,u,e.Diagnostics.Add_async_modifier_to_containing_function,r,e.Diagnostics.Add_all_missing_async_modifiers)]}},fixIds:[r],getAllCodeActions:function(r){var o=e.createMap();return t.codeFixAll(r,n,(function(t,n){var s=i(n.file,n.start);s&&e.addToSeen(o,e.getNodeId(s.insertBefore))&&a(t,r.sourceFile,s)}))}})}(e.codefix||(e.codefix={}))}(s||(s={})),function(e){!function(t){var r="disableJsDiagnostics",n=e.mapDefined(Object.keys(e.Diagnostics),(function(t){var r=e.Diagnostics[t];return r.category===e.DiagnosticCategory.Error?r.code:void 0}));function i(t,r,n,i){var a=e.getLineAndCharacterOfPosition(r,n).line;i&&!e.addToSeen(i,a)||t.insertCommentBeforeLine(r,a,n," @ts-ignore")}t.registerCodeFix({errorCodes:n,getCodeActions:function(n){var a=n.sourceFile,o=n.program,s=n.span,c=n.host,u=n.formatContext;if(e.isInJSFile(a)&&e.isCheckJsEnabledForFile(a,o.getCompilerOptions())){var l=[t.createCodeFixActionNoFixId("disableJsDiagnostics",[t.createFileTextChanges(a.fileName,[e.createTextChange(a.checkJsDirective?e.createTextSpanFromBounds(a.checkJsDirective.pos,a.checkJsDirective.end):e.createTextSpan(0,0),"// @ts-nocheck"+e.getNewLineOrDefaultFromHost(c,u.options))])],e.Diagnostics.Disable_checking_for_this_file)];return e.textChanges.isValidLocationToAddComment(a,s.start)&&l.unshift(t.createCodeFixAction("disableJsDiagnostics",e.textChanges.ChangeTracker.with(n,(function(e){return i(e,a,s.start)})),e.Diagnostics.Ignore_this_error_message,r,e.Diagnostics.Add_ts_ignore_to_all_error_messages)),l}},fixIds:[r],getAllCodeActions:function(r){var a=e.createMap();return t.codeFixAll(r,n,(function(t,r){e.textChanges.isValidLocationToAddComment(r.file,r.start)&&i(t,r.file,r.start,a)}))}})}(e.codefix||(e.codefix={}))}(s||(s={})),function(e){!function(t){function r(e){return{directoryExists:e.host.directoryExists?function(t){return e.host.directoryExists(t)}:void 0,fileExists:e.host.fileExists?function(t){return e.host.fileExists(t)}:void 0,getCurrentDirectory:e.host.getCurrentDirectory?function(){return e.host.getCurrentDirectory()}:void 0,readFile:e.host.readFile?function(t){return e.host.readFile(t)}:void 0,useCaseSensitiveFileNames:e.host.useCaseSensitiveFileNames?function(){return e.host.useCaseSensitiveFileNames()}:void 0,getSourceFiles:function(){return e.program.getSourceFiles()},getCommonSourceDirectory:function(){return e.program.getCommonSourceDirectory()}}}function n(t){return{trackSymbol:e.noop,moduleResolverHost:r(t)}}function i(t,r,i,s,c){var u=t.getDeclarations();if(u&&u.length){var l=i.program.getTypeChecker(),_=u[0],d=e.getSynthesizedDeepClone(e.getNameOfDeclaration(_),!1),p=function(t){if(4&t)return e.createToken(118);if(16&t)return e.createToken(117);return}(e.getModifierFlags(_)),f=p?e.createNodeArray([p]):void 0,m=l.getWidenedType(l.getTypeOfSymbolAtLocation(t,r)),g=!!(16777216&t.flags),y=!!(8388608&r.flags);switch(_.kind){case 157:case 158:var h=l.typeToTypeNode(m,r,void 0,n(i));c(e.createProperty(void 0,f,d,g?e.createToken(57):void 0,h,void 0));break;case 162:case 163:for(var v=e.getAllAccessorDeclarations(u,_),b=l.typeToTypeNode(m,r,void 0,n(i)),x=0,D=v.secondAccessor?[v.firstAccessor,v.secondAccessor]:[v.firstAccessor];x<D.length;x++){var S=D[x];if(e.isGetAccessorDeclaration(S))c(e.createGetAccessor(void 0,f,d,e.emptyArray,b,y?void 0:o(s)));else{e.Debug.assertNode(S,e.isSetAccessorDeclaration,"The counterpart to a getter should be a setter");var T=e.getSetAccessorValueParameter(S),E=T&&e.isIdentifier(T.name)?e.idText(T.name):void 0;c(e.createSetAccessor(void 0,f,d,a(1,[E],[b],1,!1),y?void 0:o(s)))}}break;case 159:case 160:var C=l.getSignaturesOfType(m,0);if(!e.some(C))break;if(1===u.length){e.Debug.assert(1===C.length,"One declaration implies one signature"),A(C[0],f,d,y?void 0:o(s));break}for(var k=0,N=C;k<N.length;k++){A(N[k],e.getSynthesizedDeepClones(f,!1),e.getSynthesizedDeepClone(d,!1))}if(!y)if(u.length>C.length)A(l.getSignatureFromDeclaration(u[u.length-1]),f,d,o(s));else e.Debug.assert(u.length===C.length,"Declarations and signatures should match count"),c(function(t,r,n,i,s){for(var c=t[0],u=t[0].minArgumentCount,l=!1,_=0,d=t;_<d.length;_++){var p=d[_];u=Math.min(p.minArgumentCount,u),e.signatureHasRestParameter(p)&&(l=!0),p.parameters.length>=c.parameters.length&&(!e.signatureHasRestParameter(p)||e.signatureHasRestParameter(c))&&(c=p)}var f=c.parameters.length-(e.signatureHasRestParameter(c)?1:0),m=c.parameters.map((function(e){return e.name})),g=a(f,m,void 0,u,!1);if(l){var y=e.createArrayTypeNode(e.createKeywordTypeNode(124)),h=e.createParameter(void 0,void 0,e.createToken(25),m[f]||"rest",f>=u?e.createToken(57):void 0,y,void 0);g.push(h)}return function(t,r,n,i,a,s,c){return e.createMethod(void 0,t,void 0,r,n?e.createToken(57):void 0,i,a,s,o(c))}(i,r,n,void 0,g,void 0,s)}(C,d,g,f,s))}}function A(t,a,o,s){var u=function(t,r,i,a,o,s,c){var u=t.program.getTypeChecker().signatureToSignatureDeclaration(r,160,i,257,n(t));if(!u)return;return u.decorators=void 0,u.modifiers=a,u.name=o,u.questionToken=s?e.createToken(57):void 0,u.body=c,u}(i,t,r,a,o,g,s);u&&c(u)}}function a(t,r,n,i,a){for(var o=[],s=0;s<t;s++){var c=e.createParameter(void 0,void 0,void 0,r&&r[s]||"arg"+s,void 0!==i&&s>=i?e.createToken(57):void 0,a?void 0:n&&n[s]||e.createKeywordTypeNode(124),void 0);o.push(c)}return o}function o(t){return e.createBlock([e.createThrow(e.createNew(e.createIdentifier("Error"),void 0,[e.createLiteral("Method not implemented.","single"===t.quotePreference)]))],!0)}function s(t,r){return e.createPropertyAssignment(e.createStringLiteral(t),r)}function c(t,r){return e.find(t.properties,(function(t){return e.isPropertyAssignment(t)&&!!t.name&&e.isStringLiteral(t.name)&&t.name.text===r}))}t.createMissingMemberNodes=function(e,t,r,n,a){for(var o=e.symbol.members,s=0,c=t;s<c.length;s++){var u=c[s];o.has(u.escapedName)||i(u,e,r,n,a)}},t.getNoopSymbolTrackerWithResolver=n,t.createMethodFromCallExpression=function(t,r,i,s,c,u,l){var _=!e.isInterfaceDeclaration(l),d=r.typeArguments,p=r.arguments,f=r.parent,m=t.program.getTypeChecker(),g=n(t),y=e.map(p,(function(e){return m.typeToTypeNode(m.getBaseTypeOfLiteralType(m.getTypeAtLocation(e)),l,void 0,g)})),h=e.map(p,(function(t){return e.isIdentifier(t)?t.text:e.isPropertyAccessExpression(t)?t.name.text:void 0})),v=m.getContextualType(r),b=s||!v?void 0:m.typeToTypeNode(v,l,void 0,g);return e.createMethod(void 0,c?[e.createToken(119)]:void 0,e.isYieldExpression(f)?e.createToken(41):void 0,i,void 0,s?void 0:e.map(d,(function(t,r){return e.createTypeParameterDeclaration(84+d.length-1<=90?String.fromCharCode(84+r):"T"+r)})),a(p.length,h,y,void 0,s),b,_?o(u):void 0)},t.setJsonCompilerOptionValue=function(t,r,n,i){var a=e.getTsConfigObjectLiteralExpression(r);if(a){var o=c(a,"compilerOptions");if(void 0!==o){var u=o.initializer;if(e.isObjectLiteralExpression(u)){var l=c(u,n);void 0===l?t.insertNodeAtObjectStart(r,u,s(n,i)):t.replaceNode(r,l.initializer,i)}}else t.insertNodeAtObjectStart(r,a,s("compilerOptions",e.createObjectLiteral([s(n,i)])))}},t.createJsonPropertyAssignment=s,t.findJsonProperty=c}(e.codefix||(e.codefix={}))}(s||(s={})),function(e){!function(t){var r="invalidImportSyntax";function n(n,i,a,o){var s=e.textChanges.ChangeTracker.with(n,(function(e){return e.replaceNode(i,a,o)}));return t.createCodeFixActionNoFixId(r,s,[e.Diagnostics.Replace_import_with_0,s[0].textChanges[0].newText])}function i(i,a){var o=i.program.getTypeChecker().getTypeAtLocation(a);if(!o.symbol||!o.symbol.originatingImport)return[];var s=[],c=o.symbol.originatingImport;if(e.isImportCall(c)||e.addRange(s,function(t,r){var i=e.getSourceFileOfNode(r),a=e.getNamespaceDeclarationNode(r),o=t.program.getCompilerOptions(),s=[];return s.push(n(t,i,r,e.makeImport(a.name,void 0,r.moduleSpecifier,e.getQuotePreference(i,t.preferences)))),e.getEmitModuleKind(o)===e.ModuleKind.CommonJS&&s.push(n(t,i,r,e.createImportEqualsDeclaration(void 0,void 0,a.name,e.createExternalModuleReference(r.moduleSpecifier)))),s}(i,c)),e.isExpression(a)&&(!e.isNamedDeclaration(a.parent)||a.parent.name!==a)){var u=i.sourceFile,l=e.textChanges.ChangeTracker.with(i,(function(t){return t.replaceNode(u,a,e.createPropertyAccess(a,"default"),{})}));s.push(t.createCodeFixActionNoFixId(r,l,e.Diagnostics.Use_synthetic_default_member))}return s}t.registerCodeFix({errorCodes:[e.Diagnostics.This_expression_is_not_callable.code,e.Diagnostics.This_expression_is_not_constructable.code],getCodeActions:function(t){var r=t.sourceFile,n=e.Diagnostics.This_expression_is_not_callable.code===t.errorCode?195:196,a=e.findAncestor(e.getTokenAtPosition(r,t.span.start),(function(e){return e.kind===n}));if(!a)return[];var o=a.expression;return i(t,o)}}),t.registerCodeFix({errorCodes:[e.Diagnostics.Argument_of_type_0_is_not_assignable_to_parameter_of_type_1.code,e.Diagnostics.Type_0_does_not_satisfy_the_constraint_1.code,e.Diagnostics.Type_0_is_not_assignable_to_type_1.code,e.Diagnostics.Type_0_is_not_assignable_to_type_1_Two_different_types_with_this_name_exist_but_they_are_unrelated.code,e.Diagnostics.Type_predicate_0_is_not_assignable_to_1.code,e.Diagnostics.Property_0_of_type_1_is_not_assignable_to_string_index_type_2.code,e.Diagnostics.Property_0_of_type_1_is_not_assignable_to_numeric_index_type_2.code,e.Diagnostics.Numeric_index_type_0_is_not_assignable_to_string_index_type_1.code,e.Diagnostics.Property_0_in_type_1_is_not_assignable_to_the_same_property_in_base_type_2.code,e.Diagnostics.Property_0_in_type_1_is_not_assignable_to_type_2.code,e.Diagnostics.Property_0_of_JSX_spread_attribute_is_not_assignable_to_target_property.code,e.Diagnostics.The_this_context_of_type_0_is_not_assignable_to_method_s_this_of_type_1.code],getCodeActions:function(t){var r=t.sourceFile,n=e.findAncestor(e.getTokenAtPosition(r,t.span.start),(function(e){return e.getStart()===t.span.start&&e.getEnd()===t.span.start+t.span.length}));if(!n)return[];return i(t,n)}})}(e.codefix||(e.codefix={}))}(s||(s={})),function(e){!function(t){var r="strictClassInitialization",n="addMissingPropertyDefiniteAssignmentAssertions",i="addMissingPropertyUndefinedType",a="addMissingPropertyInitializer",o=[e.Diagnostics.Property_0_has_no_initializer_and_is_not_definitely_assigned_in_the_constructor.code];function s(t,r){var n=e.getTokenAtPosition(t,r);return e.isIdentifier(n)?e.cast(n.parent,e.isPropertyDeclaration):void 0}function c(i,a){var o=e.textChanges.ChangeTracker.with(i,(function(e){return u(e,i.sourceFile,a)}));return t.createCodeFixAction(r,o,[e.Diagnostics.Add_definite_assignment_assertion_to_property_0,a.getText()],n,e.Diagnostics.Add_definite_assignment_assertions_to_all_uninitialized_properties)}function u(t,r,n){var i=e.updateProperty(n,n.decorators,n.modifiers,n.name,e.createToken(53),n.type,n.initializer);t.replaceNode(r,n,i)}function l(n,a){var o=e.textChanges.ChangeTracker.with(n,(function(e){return _(e,n.sourceFile,a)}));return t.createCodeFixAction(r,o,[e.Diagnostics.Add_undefined_type_to_property_0,a.name.getText()],i,e.Diagnostics.Add_undefined_type_to_all_uninitialized_properties)}function _(t,r,n){var i=e.createKeywordTypeNode(145),a=n.type,o=e.isUnionTypeNode(a)?a.types.concat(i):[a,i];t.replaceNode(r,a,e.createUnionTypeNode(o))}function d(t,r,n,i){var a=e.updateProperty(n,n.decorators,n.modifiers,n.name,n.questionToken,n.type,i);t.replaceNode(r,n,a)}function p(t,r){return function t(r,n){if(512&n.flags)return n===r.getFalseType()||n===r.getFalseType(!0)?e.createFalse():e.createTrue();if(n.isLiteral())return e.createLiteral(n.value);if(n.isUnion())return e.firstDefined(n.types,(function(e){return t(r,e)}));if(n.isClass()){var i=e.getClassLikeDeclarationOfSymbol(n.symbol);if(!i||e.hasModifier(i,128))return;var a=e.getFirstConstructorWithBody(i);if(a&&a.parameters.length)return;return e.createNew(e.createIdentifier(n.symbol.name),void 0,void 0)}if(r.isArrayLikeType(n))return e.createArrayLiteral();return}(t,t.getTypeFromTypeNode(r.type))}t.registerCodeFix({errorCodes:o,getCodeActions:function(n){var i=s(n.sourceFile,n.span.start);if(i){var o=[l(n,i),c(n,i)];return e.append(o,function(n,i){var o=p(n.program.getTypeChecker(),i);if(!o)return;var s=e.textChanges.ChangeTracker.with(n,(function(e){return d(e,n.sourceFile,i,o)}));return t.createCodeFixAction(r,s,[e.Diagnostics.Add_initializer_to_property_0,i.name.getText()],a,e.Diagnostics.Add_initializers_to_all_uninitialized_properties)}(n,i)),o}},fixIds:[n,i,a],getAllCodeActions:function(r){return t.codeFixAll(r,o,(function(t,o){var c=s(o.file,o.start);if(c)switch(r.fixId){case n:u(t,o.file,c);break;case i:_(t,o.file,c);break;case a:var l=p(r.program.getTypeChecker(),c);if(!l)return;d(t,o.file,c,l);break;default:e.Debug.fail(JSON.stringify(r.fixId))}}))}})}(e.codefix||(e.codefix={}))}(s||(s={})),function(e){!function(t){var r="requireInTs",n=[e.Diagnostics.require_call_may_be_converted_to_an_import.code];function i(t,r,n,i){var a=function(t,r){var n=e.getTokenAtPosition(t,r).parent;if(!e.isRequireCall(n,!0))throw e.Debug.failBadSyntaxKind(n);var i=e.cast(n.parent,e.isVariableDeclaration);return{statement:e.cast(i.parent.parent,e.isVariableStatement),name:e.cast(i.name,e.isIdentifier),required:n.arguments[0]}}(r,n),o=a.statement,s=a.name,c=a.required;t.replaceNode(r,o,e.getAllowSyntheticDefaultImports(i.getCompilerOptions())?e.createImportDeclaration(void 0,void 0,e.createImportClause(s,void 0),c):e.createImportEqualsDeclaration(void 0,void 0,s,e.createExternalModuleReference(c)))}t.registerCodeFix({errorCodes:n,getCodeActions:function(n){var a=e.textChanges.ChangeTracker.with(n,(function(e){return i(e,n.sourceFile,n.span.start,n.program)}));return[t.createCodeFixAction(r,a,e.Diagnostics.Convert_require_to_import,r,e.Diagnostics.Convert_all_require_to_import)]},fixIds:[r],getAllCodeActions:function(e){return t.codeFixAll(e,n,(function(t,r){return i(t,r.file,r.start,e.program)}))}})}(e.codefix||(e.codefix={}))}(s||(s={})),function(e){!function(t){var r="useDefaultImport",n=[e.Diagnostics.Import_may_be_converted_to_a_default_import.code];function i(t,r){var n=e.getTokenAtPosition(t,r);if(e.isIdentifier(n)){var i=n.parent;if(e.isImportEqualsDeclaration(i)&&e.isExternalModuleReference(i.moduleReference))return{importNode:i,name:n,moduleSpecifier:i.moduleReference.expression};if(e.isNamespaceImport(i)){var a=i.parent.parent;return{importNode:a,name:n,moduleSpecifier:a.moduleSpecifier}}}}function a(t,r,n,i){t.replaceNode(r,n.importNode,e.makeImport(n.name,void 0,n.moduleSpecifier,e.getQuotePreference(r,i)))}t.registerCodeFix({errorCodes:n,getCodeActions:function(n){var o=n.sourceFile,s=n.span.start,c=i(o,s);if(c){var u=e.textChanges.ChangeTracker.with(n,(function(e){return a(e,o,c,n.preferences)}));return[t.createCodeFixAction(r,u,e.Diagnostics.Convert_to_default_import,r,e.Diagnostics.Convert_all_to_default_imports)]}},fixIds:[r],getAllCodeActions:function(e){return t.codeFixAll(e,n,(function(t,r){var n=i(r.file,r.start);n&&a(t,r.file,n,e.preferences)}))}})}(e.codefix||(e.codefix={}))}(s||(s={})),function(e){!function(t){var r="useBigintLiteral",n=[e.Diagnostics.Numeric_literals_with_absolute_values_equal_to_2_53_or_greater_are_too_large_to_be_represented_accurately_as_integers.code];function i(t,r,n){var i=e.tryCast(e.getTokenAtPosition(r,n.start),e.isNumericLiteral);if(i){var a=i.getText(r)+"n";t.replaceNode(r,i,e.createBigIntLiteral(a))}}t.registerCodeFix({errorCodes:n,getCodeActions:function(n){var a=e.textChanges.ChangeTracker.with(n,(function(e){return i(e,n.sourceFile,n.span)}));if(a.length>0)return[t.createCodeFixAction(r,a,e.Diagnostics.Convert_to_a_bigint_numeric_literal,r,e.Diagnostics.Convert_all_to_bigint_numeric_literals)]},fixIds:[r],getAllCodeActions:function(e){return t.codeFixAll(e,n,(function(e,t){return i(e,t.file,t)}))}})}(e.codefix||(e.codefix={}))}(s||(s={})),function(e){!function(t){var r="fixAddModuleReferTypeMissingTypeof",n=[e.Diagnostics.Module_0_does_not_refer_to_a_type_but_is_used_as_a_type_here_Did_you_mean_typeof_import_0.code];function i(t,r){var n=e.getTokenAtPosition(t,r);return e.Debug.assert(95===n.kind,"This token should be an ImportKeyword"),e.Debug.assert(187===n.parent.kind,"Token parent should be an ImportType"),n.parent}function a(t,r,n){var i=e.updateImportTypeNode(n,n.argument,n.qualifier,n.typeArguments,!0);t.replaceNode(r,n,i)}t.registerCodeFix({errorCodes:n,getCodeActions:function(n){var o=n.sourceFile,s=n.span,c=i(o,s.start),u=e.textChanges.ChangeTracker.with(n,(function(e){return a(e,o,c)}));return[t.createCodeFixAction(r,u,e.Diagnostics.Add_missing_typeof,r,e.Diagnostics.Add_missing_typeof)]},fixIds:[r],getAllCodeActions:function(e){return t.codeFixAll(e,n,(function(t,r){return a(t,e.sourceFile,i(r.file,r.start))}))}})}(e.codefix||(e.codefix={}))}(s||(s={})),function(e){!function(r){var n="fixConvertToMappedObjectType",i=[e.Diagnostics.An_index_signature_parameter_type_cannot_be_a_union_type_Consider_using_a_mapped_object_type_instead.code];function a(t,r){var n=e.getTokenAtPosition(t,r),i=e.cast(n.parent.parent,e.isIndexSignatureDeclaration);if(!e.isClassDeclaration(i.parent))return{indexSignature:i,container:e.isInterfaceDeclaration(i.parent)?i.parent:e.cast(i.parent.parent,e.isTypeAliasDeclaration)}}function o(r,n,i){var a=i.indexSignature,o=i.container,s=(e.isInterfaceDeclaration(o)?o.members:o.type.members).filter((function(t){return!e.isIndexSignatureDeclaration(t)})),c=e.first(a.parameters),u=e.createTypeParameterDeclaration(e.cast(c.name,e.isIdentifier),c.type),l=e.createMappedTypeNode(e.hasReadonlyModifier(a)?e.createModifier(137):void 0,u,a.questionToken,a.type),_=e.createIntersectionTypeNode(t(e.getAllSuperTypeNodes(o),[l],s.length?[e.createTypeLiteralNode(s)]:e.emptyArray));r.replaceNode(n,o,function(t,r){return e.createTypeAliasDeclaration(t.decorators,t.modifiers,t.name,t.typeParameters,r)}(o,_))}r.registerCodeFix({errorCodes:i,getCodeActions:function(t){var i=t.sourceFile,s=t.span,c=a(i,s.start);if(c){var u=e.textChanges.ChangeTracker.with(t,(function(e){return o(e,i,c)})),l=e.idText(c.container.name);return[r.createCodeFixAction(n,u,[e.Diagnostics.Convert_0_to_mapped_object_type,l],n,[e.Diagnostics.Convert_0_to_mapped_object_type,l])]}},fixIds:[n],getAllCodeActions:function(e){return r.codeFixAll(e,i,(function(e,t){var r=a(t.file,t.start);r&&o(e,t.file,r)}))}})}(e.codefix||(e.codefix={}))}(s||(s={})),function(e){!function(t){var r="removeUnnecessaryAwait",n=[e.Diagnostics.await_has_no_effect_on_the_type_of_this_expression.code];function i(t,r,n){var i=e.tryCast(e.getTokenAtPosition(r,n.start),(function(e){return 126===e.kind})),a=i&&e.tryCast(i.parent,e.isAwaitExpression);if(a){var o=a;if(e.isParenthesizedExpression(a.parent)){var s=e.getLeftmostExpression(a.expression,!1);if(e.isIdentifier(s)){var c=e.findPrecedingToken(a.parent.pos,r);c&&98!==c.kind&&(o=a.parent)}}t.replaceNode(r,o,a.expression)}}t.registerCodeFix({errorCodes:n,getCodeActions:function(n){var a=e.textChanges.ChangeTracker.with(n,(function(e){return i(e,n.sourceFile,n.span)}));if(a.length>0)return[t.createCodeFixAction(r,a,e.Diagnostics.Remove_unnecessary_await,r,e.Diagnostics.Remove_all_unnecessary_uses_of_await)]},fixIds:[r],getAllCodeActions:function(e){return t.codeFixAll(e,n,(function(e,t){return i(e,t.file,t)}))}})}(e.codefix||(e.codefix={}))}(s||(s={})),function(e){!function(t){var r="fixConvertConstToLet",n=[e.Diagnostics.Cannot_assign_to_0_because_it_is_a_constant.code];t.registerCodeFix({errorCodes:n,getCodeActions:function(n){var i=n.sourceFile,a=n.span,o=n.program,s=function(t,r,n){var i=e.getTokenAtPosition(t,r),a=n.getTypeChecker().getSymbolAtLocation(i);if(a)return a.valueDeclaration.parent.parent}(i,a.start,o),c=e.textChanges.ChangeTracker.with(n,(function(e){return function(e,t,r){if(!r)return;var n=r.getStart();e.replaceRangeWithText(t,{pos:n,end:n+5},"let")}(e,i,s)}));return[t.createCodeFixAction(r,c,e.Diagnostics.Convert_const_to_let,r,e.Diagnostics.Convert_const_to_let)]},fixIds:[r]})}(e.codefix||(e.codefix={}))}(s||(s={})),function(e){!function(t){function r(t){var r=t.file,n=e.getRefactorContextSpan(t),i=e.getTokenAtPosition(r,n.start),a=e.getParentNodeInSpan(i,r,n);if(a&&(e.isSourceFile(a.parent)||e.isModuleBlock(a.parent)&&e.isAmbientModule(a.parent.parent))){var o=e.isSourceFile(a.parent)?a.parent.symbol:a.parent.parent.symbol,s=e.getModifierFlags(a),c=!!(512&s);if(1&s&&(c||!o.exports.has("default")))switch(a.kind){case 243:case 244:case 245:case 247:case 246:case 248:var u=a;return u.name&&e.isIdentifier(u.name)?{exportNode:u,exportName:u.name,wasDefault:c,exportingModuleSymbol:o}:void 0;case 224:var l=a;if(!(2&l.declarationList.flags)||1!==l.declarationList.declarations.length)return;var _=e.first(l.declarationList.declarations);if(!_.initializer)return;return e.Debug.assert(!c,"Can't have a default flag here"),e.isIdentifier(_.name)?{exportNode:l,exportName:_.name,wasDefault:c,exportingModuleSymbol:o}:void 0;default:return}}}function n(t,r){return e.createImportSpecifier(t===r?void 0:e.createIdentifier(t),e.createIdentifier(r))}t.registerRefactor("Convert export",{getAvailableActions:function(t){var n=r(t);if(!n)return e.emptyArray;var i=n.wasDefault?e.Diagnostics.Convert_default_export_to_named_export.message:e.Diagnostics.Convert_named_export_to_default_export.message;return[{name:"Convert export",description:i,actions:[{name:n.wasDefault?"Convert default export to named export":"Convert named export to default export",description:i}]}]},getEditsForAction:function(t,i){return e.Debug.assert("Convert default export to named export"===i||"Convert named export to default export"===i,"Unexpected action name"),{edits:e.textChanges.ChangeTracker.with(t,(function(i){return a=t.file,o=t.program,s=e.Debug.assertDefined(r(t),"context must have info"),c=i,u=t.cancellationToken,function(t,r,n,i){var a=r.wasDefault,o=r.exportNode,s=r.exportName;if(a)n.delete(t,e.Debug.assertDefined(e.findModifier(o,83),"Should find a default keyword in modifier list"));else{var c=e.Debug.assertDefined(e.findModifier(o,88),"Should find an export keyword in modifier list");switch(o.kind){case 243:case 244:case 245:n.insertNodeAfter(t,c,e.createToken(83));break;case 224:if(!e.FindAllReferences.Core.isSymbolReferencedInFile(s,i,t)){n.replaceNode(t,o,e.createExportDefault(e.Debug.assertDefined(e.first(o.declarationList.declarations).initializer,"Initializer was previously known to be present")));break}case 247:case 246:case 248:n.deleteModifier(t,c),n.insertNodeAfter(t,o,e.createExportDefault(e.createIdentifier(s.text)));break;default:e.Debug.assertNever(o,"Unexpected exportNode kind "+o.kind)}}}(a,s,c,o.getTypeChecker()),void function(t,r,i,a){var o=r.wasDefault,s=r.exportName,c=r.exportingModuleSymbol,u=t.getTypeChecker(),l=e.Debug.assertDefined(u.getSymbolAtLocation(s),"Export name should resolve to a symbol");e.FindAllReferences.Core.eachExportReference(t.getSourceFiles(),u,a,l,c,s.text,o,(function(t){var r=t.getSourceFile();o?function(t,r,i,a){var o=r.parent;switch(o.kind){case 193:i.replaceNode(t,r,e.createIdentifier(a));break;case 257:case 261:var s=o;i.replaceNode(t,s,n(a,s.name.text));break;case 254:var c=o;e.Debug.assert(c.name===r,"Import clause name should match provided ref"),s=n(a,r.text);var u=c.namedBindings;if(u)if(255===u.kind){i.deleteRange(t,{pos:r.getStart(t),end:u.getStart(t)});var l=e.isStringLiteral(c.parent.moduleSpecifier)?e.quotePreferenceFromString(c.parent.moduleSpecifier,t):1,_=e.makeImport(void 0,[n(a,r.text)],c.parent.moduleSpecifier,l);i.insertNodeAfter(t,c.parent,_)}else i.delete(t,r),i.insertNodeAtEndOfList(t,u.elements,s);else i.replaceNode(t,r,e.createNamedImports([s]));break;default:e.Debug.failBadSyntaxKind(o)}}(r,t,i,s.text):function(t,r,n){var i=r.parent;switch(i.kind){case 193:n.replaceNode(t,r,e.createIdentifier("default"));break;case 257:var a=e.createIdentifier(i.name.text);1===i.parent.elements.length?n.replaceNode(t,i.parent,a):(n.delete(t,i),n.insertNodeBefore(t,i.parent,a));break;case 261:n.replaceNode(t,i,function(t,r){return e.createExportSpecifier(t===r?void 0:e.createIdentifier(t),e.createIdentifier(r))}("default",i.name.text));break;default:e.Debug.assertNever(i,"Unexpected parent kind "+i.kind)}}(r,t,i)}))}(o,s,c,u);var a,o,s,c,u})),renameFilename:void 0,renameLocation:void 0}}})}(e.refactor||(e.refactor={}))}(s||(s={})),function(e){!function(t){function r(t){var r=t.file,n=e.getRefactorContextSpan(t),i=e.getTokenAtPosition(r,n.start),a=e.getParentNodeInSpan(i,r,n);if(a&&e.isImportDeclaration(a)){var o=a.importClause;return o&&o.namedBindings}}function n(t,r,n){return e.createImportDeclaration(void 0,void 0,e.createImportClause(r,n&&n.length?e.createNamedImports(n):void 0),t.moduleSpecifier)}t.registerRefactor("Convert import",{getAvailableActions:function(t){var n=r(t);if(!n)return e.emptyArray;var i=255===n.kind?e.Diagnostics.Convert_namespace_import_to_named_imports.message:e.Diagnostics.Convert_named_imports_to_namespace_import.message;return[{name:"Convert import",description:i,actions:[{name:255===n.kind?"Convert namespace import to named imports":"Convert named imports to namespace import",description:i}]}]},getEditsForAction:function(t,i){return e.Debug.assert("Convert namespace import to named imports"===i||"Convert named imports to namespace import"===i,"Unexpected action name"),{edits:e.textChanges.ChangeTracker.with(t,(function(i){return a=t.file,o=t.program,s=i,c=e.Debug.assertDefined(r(t),"Context must provide an import to convert"),u=o.getTypeChecker(),void(255===c.kind?function(t,r,i,a,o){var s=!1,c=[],u=e.createMap();e.FindAllReferences.Core.eachSymbolReferenceInFile(a.name,r,t,(function(t){if(e.isPropertyAccessExpression(t.parent)){var n=e.cast(t.parent,e.isPropertyAccessExpression),i=n.name.text;r.resolveName(i,t,67108863,!0)&&u.set(i,!0),e.Debug.assert(n.expression===t,"Parent expression should match id"),c.push(n)}else s=!0}));for(var l=e.createMap(),_=0,d=c;_<d.length;_++){var p=d[_],f=p.name.text,m=l.get(f);void 0===m&&l.set(f,m=u.has(f)?e.getUniqueName(f,t):f),i.replaceNode(t,p,e.createIdentifier(m))}var g=[];l.forEach((function(t,r){g.push(e.createImportSpecifier(t===r?void 0:e.createIdentifier(r),e.createIdentifier(t)))}));var y=a.parent.parent;s&&!o?i.insertNodeAfter(t,y,n(y,void 0,g)):i.replaceNode(t,y,n(y,s?e.createIdentifier(a.name.text):void 0,g))}(a,u,s,c,e.getAllowSyntheticDefaultImports(o.getCompilerOptions())):function(t,r,i,a){for(var o=a.parent.parent,s=o.moduleSpecifier,c=s&&e.isStringLiteral(s)?e.codefix.moduleSpecifierToValidIdentifier(s.text,99):"module",u=a.elements.some((function(n){return e.FindAllReferences.Core.eachSymbolReferenceInFile(n.name,r,t,(function(e){return!!r.resolveName(c,e,67108863,!0)}))||!1}))?e.getUniqueName(c,t):c,l=[],_=function(n){var a=(n.propertyName||n.name).text;e.FindAllReferences.Core.eachSymbolReferenceInFile(n.name,r,t,(function(r){var o=e.createPropertyAccess(e.createIdentifier(u),a);e.isShorthandPropertyAssignment(r.parent)?i.replaceNode(t,r.parent,e.createPropertyAssignment(r.text,o)):e.isExportSpecifier(r.parent)&&!r.parent.propertyName?l.some((function(e){return e.name===n.name}))||l.push(e.createImportSpecifier(n.propertyName&&e.createIdentifier(n.propertyName.text),e.createIdentifier(n.name.text))):i.replaceNode(t,r,o)}))},d=0,p=a.elements;d<p.length;d++){var f=p[d];_(f)}i.replaceNode(t,a,e.createNamespaceImport(e.createIdentifier(u))),l.length&&i.insertNodeAfter(t,a.parent.parent,n(o,void 0,l))}(a,u,s,c));var a,o,s,c,u})),renameFilename:void 0,renameLocation:void 0}}})}(e.refactor||(e.refactor={}))}(s||(s={})),function(e){!function(t){!function(r){var n,i,a,o,s="Extract Symbol";function c(t){var r=l(t.file,e.getRefactorContextSpan(t)).targetRange;if(void 0===r)return e.emptyArray;var n=function(t,r){var n=p(t,r),i=n.scopes,a=n.readsAndWrites,o=a.functionErrorsPerScope,s=a.constantErrorsPerScope;return i.map((function(t,r){var n,i,a=function(t){return e.isFunctionLikeDeclaration(t)?"inner function":e.isClassLike(t)?"method":"function"}(t),c=function(t){return e.isClassLike(t)?"readonly field":"constant"}(t),u=e.isFunctionLikeDeclaration(t)?function(t){switch(t.kind){case 161:return"constructor";case 200:case 243:return t.name?"function '"+t.name.text+"'":"anonymous function";case 201:return"arrow function";case 160:return"method '"+t.name.getText()+"'";case 162:return"'get "+t.name.getText()+"'";case 163:return"'set "+t.name.getText()+"'";default:throw e.Debug.assertNever(t,"Unexpected scope kind "+t.kind)}}(t):e.isClassLike(t)?function(e){return 244===e.kind?e.name?"class '"+e.name.text+"'":"anonymous class declaration":e.name?"class expression '"+e.name.text+"'":"anonymous class expression"}(t):function(e){return 249===e.kind?"namespace '"+e.parent.name.getText()+"'":e.externalModuleIndicator?0:1}(t);return 1===u?(n=e.formatStringFromArgs(e.getLocaleSpecificMessage(e.Diagnostics.Extract_to_0_in_1_scope),[a,"global"]),i=e.formatStringFromArgs(e.getLocaleSpecificMessage(e.Diagnostics.Extract_to_0_in_1_scope),[c,"global"])):0===u?(n=e.formatStringFromArgs(e.getLocaleSpecificMessage(e.Diagnostics.Extract_to_0_in_1_scope),[a,"module"]),i=e.formatStringFromArgs(e.getLocaleSpecificMessage(e.Diagnostics.Extract_to_0_in_1_scope),[c,"module"])):(n=e.formatStringFromArgs(e.getLocaleSpecificMessage(e.Diagnostics.Extract_to_0_in_1),[a,u]),i=e.formatStringFromArgs(e.getLocaleSpecificMessage(e.Diagnostics.Extract_to_0_in_1),[c,u])),0!==r||e.isClassLike(t)||(i=e.formatStringFromArgs(e.getLocaleSpecificMessage(e.Diagnostics.Extract_to_0_in_enclosing_scope),[c])),{functionExtraction:{description:n,errors:o[r]},constantExtraction:{description:i,errors:s[r]}}}))}(r,t);if(void 0===n)return e.emptyArray;for(var i=[],a=e.createMap(),o=[],c=e.createMap(),u=0,_=0,d=n;_<d.length;_++){var f=d[_],m=f.functionExtraction,g=f.constantExtraction;if(0===m.errors.length){var y=m.description;a.has(y)||(a.set(y,!0),i.push({description:y,name:"function_scope_"+u}))}if(0===g.errors.length){y=g.description;c.has(y)||(c.set(y,!0),o.push({description:y,name:"constant_scope_"+u}))}u++}var h=[];return i.length&&h.push({name:s,description:e.getLocaleSpecificMessage(e.Diagnostics.Extract_function),actions:i}),o.length&&h.push({name:s,description:e.getLocaleSpecificMessage(e.Diagnostics.Extract_constant),actions:o}),h.length?h:e.emptyArray}function u(t,r){var n=l(t.file,e.getRefactorContextSpan(t)).targetRange,a=/^function_scope_(\d+)$/.exec(r);if(a){var o=+a[1];return e.Debug.assert(isFinite(o),"Expected to parse a finite number from the function scope index"),function(t,r,n){var a=p(t,r),o=a.scopes,s=a.readsAndWrites,c=s.target,u=s.usagesPerScope,l=s.functionErrorsPerScope,_=s.exposedVariableDeclarations;return e.Debug.assert(!l[n].length,"The extraction went missing? How?"),r.cancellationToken.throwIfCancellationRequested(),function(t,r,n,a,o,s){var c,u,l=n.usages,_=n.typeParameterUsages,d=n.substitutions,p=s.program.getTypeChecker(),h=r.getSourceFile(),v=e.getUniqueName(e.isClassLike(r)?"newMethod":"newFunction",h),b=e.isInJSFile(r),x=e.createIdentifier(v),D=[],S=[];l.forEach((function(t,n){var i;if(!b){var a=p.getTypeOfSymbolAtLocation(t.symbol,t.node);a=p.getBaseTypeOfLiteralType(a),i=p.typeToTypeNode(a,r,1)}var o=e.createParameter(void 0,void 0,void 0,n,void 0,i);D.push(o),2===t.usage&&(u||(u=[])).push(t),S.push(e.createIdentifier(n))}));var T=e.arrayFrom(_.values()).map((function(e){return{type:e,declaration:f(e)}})).sort(m),E=0===T.length?void 0:T.map((function(e){return e.declaration})),C=void 0!==E?E.map((function(t){return e.createTypeReferenceNode(t.name,void 0)})):void 0;if(e.isExpression(t)&&!b){var k=p.getContextualType(t);c=p.typeToTypeNode(k,r,1)}var N,A=function(t,r,n,i,a){var o,s=void 0!==n||r.length>0;if(e.isBlock(t)&&!s&&0===i.size)return{body:e.createBlock(t.statements,!0),returnValueProperty:void 0};var c=!1,u=e.createNodeArray(e.isBlock(t)?t.statements.slice(0):[e.isStatement(t)?t:e.createReturn(t)]);if(s||i.size){var l=e.visitNodes(u,(function t(a){if(!c&&234===a.kind&&s){var u=g(r,n);return a.expression&&(o||(o="__return"),u.unshift(e.createPropertyAssignment(o,e.visitNode(a.expression,t)))),1===u.length?e.createReturn(u[0].name):e.createReturn(e.createObjectLiteral(u))}var l=c;c=c||e.isFunctionLikeDeclaration(a)||e.isClassLike(a);var _=i.get(e.getNodeId(a).toString()),d=_?e.getSynthesizedDeepClone(_):e.visitEachChild(a,t,e.nullTransformationContext);return c=l,d})).slice();if(s&&!a&&e.isStatement(t)){var _=g(r,n);1===_.length?l.push(e.createReturn(_[0].name)):l.push(e.createReturn(e.createObjectLiteral(_)))}return{body:e.createBlock(l,!0),returnValueProperty:o}}return{body:e.createBlock(u,!0),returnValueProperty:void 0}}(t,a,u,d,!!(o.facts&i.HasReturn)),F=A.body,P=A.returnValueProperty;if(e.suppressLeadingAndTrailingTrivia(F),e.isClassLike(r)){var w=b?[]:[e.createToken(116)];o.facts&i.InStaticRegion&&w.push(e.createToken(119)),o.facts&i.IsAsyncFunction&&w.push(e.createToken(125)),N=e.createMethod(void 0,w.length?w:void 0,o.facts&i.IsGenerator?e.createToken(41):void 0,x,void 0,E,D,c,F)}else N=e.createFunctionDeclaration(void 0,o.facts&i.IsAsyncFunction?[e.createToken(125)]:void 0,o.facts&i.IsGenerator?e.createToken(41):void 0,x,E,D,c,F);var I=e.textChanges.ChangeTracker.fromContext(s),O=function(t,r){return e.find(function(t){if(e.isFunctionLikeDeclaration(t)){var r=t.body;if(e.isBlock(r))return r.statements}else{if(e.isModuleBlock(t)||e.isSourceFile(t))return t.statements;if(e.isClassLike(t))return t.members;e.assertType(t)}return e.emptyArray}(r),(function(r){return r.pos>=t&&e.isFunctionLikeDeclaration(r)&&!e.isConstructorDeclaration(r)}))}((y(o.range)?e.last(o.range):o.range).end,r);O?I.insertNodeBefore(s.file,O,N,!0):I.insertNodeAtEndOfScope(s.file,r,N);var M=[],L=function(t,r,n){var a=e.createIdentifier(n);if(e.isClassLike(t)){var o=r.facts&i.InStaticRegion?e.createIdentifier(t.name.text):e.createThis();return e.createPropertyAccess(o,a)}return a}(r,o,v),R=e.createCall(L,C,S);o.facts&i.IsGenerator&&(R=e.createYield(e.createToken(41),R));o.facts&i.IsAsyncFunction&&(R=e.createAwait(R));if(a.length&&!u)if(e.Debug.assert(!P,"Expected no returnValueProperty"),e.Debug.assert(!(o.facts&i.HasReturn),"Expected RangeFacts.HasReturn flag to be unset"),1===a.length){var B=a[0];M.push(e.createVariableStatement(void 0,e.createVariableDeclarationList([e.createVariableDeclaration(e.getSynthesizedDeepClone(B.name),e.getSynthesizedDeepClone(B.type),R)],B.parent.flags)))}else{for(var j=[],K=[],J=a[0].parent.flags,z=!1,U=0,V=a;U<V.length;U++){B=V[U];j.push(e.createBindingElement(void 0,void 0,e.getSynthesizedDeepClone(B.name)));var q=p.typeToTypeNode(p.getBaseTypeOfLiteralType(p.getTypeAtLocation(B)),r,1);K.push(e.createPropertySignature(void 0,B.symbol.name,void 0,q,void 0)),z=z||void 0!==B.type,J&=B.parent.flags}var W=z?e.createTypeLiteralNode(K):void 0;W&&e.setEmitFlags(W,1),M.push(e.createVariableStatement(void 0,e.createVariableDeclarationList([e.createVariableDeclaration(e.createObjectBindingPattern(j),W,R)],J)))}else if(a.length||u){if(a.length)for(var G=0,H=a;G<H.length;G++){var Y=(B=H[G]).parent.flags;2&Y&&(Y=-3&Y|1),M.push(e.createVariableStatement(void 0,e.createVariableDeclarationList([e.createVariableDeclaration(B.symbol.name,ee(B.type))],Y)))}P&&M.push(e.createVariableStatement(void 0,e.createVariableDeclarationList([e.createVariableDeclaration(P,ee(c))],1)));var X=g(a,u);P&&X.unshift(e.createShorthandPropertyAssignment(P)),1===X.length?(e.Debug.assert(!P,"Shouldn't have returnValueProperty here"),M.push(e.createStatement(e.createAssignment(X[0].name,R))),o.facts&i.HasReturn&&M.push(e.createReturn())):(M.push(e.createStatement(e.createAssignment(e.createObjectLiteral(X),R))),P&&M.push(e.createReturn(e.createIdentifier(P))))}else o.facts&i.HasReturn?M.push(e.createReturn(R)):y(o.range)?M.push(e.createStatement(R)):M.push(R);y(o.range)?I.replaceNodeRangeWithNodes(s.file,e.first(o.range),e.last(o.range),M):I.replaceNodeWithNodes(s.file,o.range,M);var Q=I.getChanges(),$=(y(o.range)?e.first(o.range):o.range).getSourceFile().fileName,Z=e.getRenameLocation(Q,$,v,!1);return{renameFilename:$,renameLocation:Z,edits:Q};function ee(t){if(void 0!==t){for(var r=e.getSynthesizedDeepClone(t),n=r;e.isParenthesizedTypeNode(n);)n=n.type;return e.isUnionTypeNode(n)&&e.find(n.types,(function(e){return 145===e.kind}))?r:e.createUnionTypeNode([r,e.createKeywordTypeNode(145)])}}}(c,o[n],u[n],_,t,r)}(n,t,o)}var s=/^constant_scope_(\d+)$/.exec(r);if(s){o=+s[1];return e.Debug.assert(isFinite(o),"Expected to parse a finite number from the constant scope index"),function(t,r,n){var a=p(t,r),o=a.scopes,s=a.readsAndWrites,c=s.target,u=s.usagesPerScope,l=s.constantErrorsPerScope,_=s.exposedVariableDeclarations;return e.Debug.assert(!l[n].length,"The extraction went missing? How?"),e.Debug.assert(0===_.length,"Extract constant accepted a range containing a variable declaration?"),r.cancellationToken.throwIfCancellationRequested(),function(t,r,n,a,o){var s,c=n.substitutions,u=o.program.getTypeChecker(),l=r.getSourceFile(),_=e.getUniqueName(e.isClassLike(r)?"newProperty":"newLocal",l),p=e.isInJSFile(r),f=p||!u.isContextSensitive(t)?void 0:u.typeToTypeNode(u.getContextualType(t),r,1),m=function(t,r){return r.size?function t(n){var i=r.get(e.getNodeId(n).toString());return i?e.getSynthesizedDeepClone(i):e.visitEachChild(n,t,e.nullTransformationContext)}(t):t}(t,c);s=function(n,i){if(void 0===n)return{variableType:n,initializer:i};if(!e.isFunctionExpression(i)&&!e.isArrowFunction(i)||i.typeParameters)return{variableType:n,initializer:i};var a=u.getTypeAtLocation(t),o=e.singleOrUndefined(u.getSignaturesOfType(a,0));if(!o)return{variableType:n,initializer:i};if(o.getTypeParameters())return{variableType:n,initializer:i};for(var s=[],c=!1,l=0,_=i.parameters;l<_.length;l++){var d=_[l];if(d.type)s.push(d);else{var p=u.getTypeAtLocation(d);p===u.getAnyType()&&(c=!0),s.push(e.updateParameter(d,d.decorators,d.modifiers,d.dotDotDotToken,d.name,d.questionToken,d.type||u.typeToTypeNode(p,r,1),d.initializer))}}if(c)return{variableType:n,initializer:i};if(n=void 0,e.isArrowFunction(i))i=e.updateArrowFunction(i,t.modifiers,i.typeParameters,s,i.type||u.typeToTypeNode(o.getReturnType(),r,1),i.equalsGreaterThanToken,i.body);else{if(o&&o.thisParameter){var f=e.firstOrUndefined(s);if(!f||e.isIdentifier(f.name)&&"this"!==f.name.escapedText){var m=u.getTypeOfSymbolAtLocation(o.thisParameter,t);s.splice(0,0,e.createParameter(void 0,void 0,void 0,"this",void 0,u.typeToTypeNode(m,r,1)))}}i=e.updateFunctionExpression(i,t.modifiers,i.asteriskToken,i.name,i.typeParameters,s,i.type||u.typeToTypeNode(o.getReturnType(),r,1),i.body)}return{variableType:n,initializer:i}}(f,m),f=s.variableType,m=s.initializer,e.suppressLeadingAndTrailingTrivia(m);var g=e.textChanges.ChangeTracker.fromContext(o);if(e.isClassLike(r)){e.Debug.assert(!p,"Cannot extract to a JS class");var y=[];y.push(e.createToken(116)),a&i.InStaticRegion&&y.push(e.createToken(119)),y.push(e.createToken(137));var v=e.createProperty(void 0,y,_,void 0,f,m),b=e.createPropertyAccess(a&i.InStaticRegion?e.createIdentifier(r.name.getText()):e.createThis(),e.createIdentifier(_)),x=function(t,r){var n,i=r.members;e.Debug.assert(i.length>0,"Found no members");for(var a=!0,o=0,s=i;o<s.length;o++){var c=s[o];if(c.pos>t)return n||i[0];if(a&&!e.isPropertyDeclaration(c)){if(void 0!==n)return c;a=!1}n=c}return void 0===n?e.Debug.fail():n}(t.pos,r);g.insertNodeBefore(o.file,x,v,!0),g.replaceNode(o.file,t,b)}else{var D=e.createVariableDeclaration(_,f,m),S=function(t,r){var n;for(;void 0!==t&&t!==r;){if(e.isVariableDeclaration(t)&&t.initializer===n&&e.isVariableDeclarationList(t.parent)&&t.parent.declarations.length>1)return t;n=t,t=t.parent}}(t,r);if(S){g.insertNodeBefore(o.file,S,D);b=e.createIdentifier(_);g.replaceNode(o.file,t,b)}else if(225===t.parent.kind&&r===e.findAncestor(t,d)){var T=e.createVariableStatement(void 0,e.createVariableDeclarationList([D],2));g.replaceNode(o.file,t.parent,T)}else{T=e.createVariableStatement(void 0,e.createVariableDeclarationList([D],2));if(0===(x=function(t,r){var n;e.Debug.assert(!e.isClassLike(r));for(var i=t;i!==r;i=i.parent)d(i)&&(n=i);for(i=(n||t).parent;;i=i.parent){if(h(i)){for(var a=void 0,o=0,s=i.statements;o<s.length;o++){var c=s[o];if(c.pos>t.pos)break;a=c}return!a&&e.isCaseClause(i)?(e.Debug.assert(e.isSwitchStatement(i.parent.parent),"Grandparent isn't a switch statement"),i.parent.parent):e.Debug.assertDefined(a,"prevStatement failed to get set")}e.Debug.assert(i!==r,"Didn't encounter a block-like before encountering scope")}}(t,r)).pos?g.insertNodeAtTopOfFile(o.file,T,!1):g.insertNodeBefore(o.file,x,T,!1),225===t.parent.kind)g.delete(o.file,t.parent);else{b=e.createIdentifier(_);g.replaceNode(o.file,t,b)}}}var E=g.getChanges(),C=t.getSourceFile().fileName,k=e.getRenameLocation(E,C,_,!0);return{renameFilename:C,renameLocation:k,edits:E}}(e.isExpression(c)?c:c.statements[0].expression,o[n],u[n],t.facts,r)}(n,t,o)}e.Debug.fail("Unrecognized action name")}function l(t,r){var a=r.length;if(0===a)return{errors:[e.createFileDiagnostic(t,r.start,a,n.cannotExtractEmpty)]};var o=e.getParentNodeInSpan(e.getTokenAtPosition(t,r.start),t,r),s=e.getParentNodeInSpan(e.findTokenOnLeftOfPosition(t,e.textSpanEnd(r)),t,r),c=[],u=i.None;if(!o||!s)return{errors:[e.createFileDiagnostic(t,r.start,a,n.cannotExtractRange)]};if(o.parent!==s.parent)return{errors:[e.createFileDiagnostic(t,r.start,a,n.cannotExtractRange)]};if(o!==s){if(!h(o.parent))return{errors:[e.createFileDiagnostic(t,r.start,a,n.cannotExtractRange)]};for(var l=[],d=0,p=o.parent.statements;d<p.length;d++){var f=p[d];if(f===o||l.length){var m=v(f);if(m)return{errors:m};l.push(f)}if(f===s)break}return l.length?{targetRange:{range:l,facts:u,declarations:c}}:{errors:[e.createFileDiagnostic(t,r.start,a,n.cannotExtractRange)]}}if(e.isJSDoc(o))return{errors:[e.createFileDiagnostic(t,r.start,a,n.cannotExtractJSDoc)]};if(e.isReturnStatement(o)&&!o.expression)return{errors:[e.createFileDiagnostic(t,r.start,a,n.cannotExtractRange)]};var g=function(t){if(e.isReturnStatement(t)){if(t.expression)return t.expression}else if(e.isVariableStatement(t)){for(var r=0,n=void 0,i=0,a=t.declarationList.declarations;i<a.length;i++){var o=a[i];o.initializer&&(r++,n=o.initializer)}if(1===r)return n}else if(e.isVariableDeclaration(t)&&t.initializer)return t.initializer;return t}(o),y=function(t){if(e.isIdentifier(e.isExpressionStatement(t)?t.expression:t))return[e.createDiagnosticForNode(t,n.cannotExtractIdentifier)];return}(g)||v(g);return y?{errors:y}:{targetRange:{range:_(g),facts:u,declarations:c}};function v(t){var a;if(function(e){e[e.None=0]="None",e[e.Break=1]="Break",e[e.Continue=2]="Continue",e[e.Return=4]="Return"}(a||(a={})),e.Debug.assert(t.pos<=t.end,"This failure could trigger https://github.com/Microsoft/TypeScript/issues/20809 (1)"),e.Debug.assert(!e.positionIsSynthesized(t.pos),"This failure could trigger https://github.com/Microsoft/TypeScript/issues/20809 (2)"),!(e.isStatement(t)||e.isExpressionNode(t)&&function(e){var t=e.parent;switch(t.kind){case 282:return!1}switch(e.kind){case 10:return 253!==t.kind&&257!==t.kind;case 212:case 188:case 190:return!1;case 75:return 190!==t.kind&&257!==t.kind&&261!==t.kind}return!0}(t)))return[e.createDiagnosticForNode(t,n.statementOrExpressionExpected)];if(8388608&t.flags)return[e.createDiagnosticForNode(t,n.cannotExtractAmbientBlock)];var o,s=e.getContainingClass(t);s&&function(t,r){for(var n=t;n!==r;){if(158===n.kind){e.hasModifier(n,32)&&(u|=i.InStaticRegion);break}if(155===n.kind){161===e.getContainingFunction(n).kind&&(u|=i.InStaticRegion);break}160===n.kind&&e.hasModifier(n,32)&&(u|=i.InStaticRegion),n=n.parent}}(t,s);var l,_=4;return function t(a){if(o)return!0;if(e.isDeclaration(a)){var s=241===a.kind?a.parent.parent:a;if(e.hasModifier(s,1))return(o||(o=[])).push(e.createDiagnosticForNode(a,n.cannotExtractExportedEntity)),!0;c.push(a.symbol)}switch(a.kind){case 253:return(o||(o=[])).push(e.createDiagnosticForNode(a,n.cannotExtractImport)),!0;case 101:if(195===a.parent.kind){var d=e.getContainingClass(a);if(d.pos<r.start||d.end>=r.start+r.length)return(o||(o=[])).push(e.createDiagnosticForNode(a,n.cannotExtractSuper)),!0}else u|=i.UsesThis}if(e.isFunctionLikeDeclaration(a)||e.isClassLike(a)){switch(a.kind){case 243:case 244:e.isSourceFile(a.parent)&&void 0===a.parent.externalModuleIndicator&&(o||(o=[])).push(e.createDiagnosticForNode(a,n.functionWillNotBeVisibleInTheNewScope))}return!1}var p=_;switch(a.kind){case 226:case 239:_=0;break;case 222:a.parent&&239===a.parent.kind&&a.parent.finallyBlock===a&&(_=4);break;case 275:_|=1;break;default:e.isIterationStatement(a,!1)&&(_|=3)}switch(a.kind){case 182:case 103:u|=i.UsesThis;break;case 237:var f=a.label;(l||(l=[])).push(f.escapedText),e.forEachChild(a,t),l.pop();break;case 233:case 232:(f=a.label)?e.contains(l,f.escapedText)||(o||(o=[])).push(e.createDiagnosticForNode(a,n.cannotExtractRangeContainingLabeledBreakOrContinueStatementWithTargetOutsideOfTheRange)):_&(233===a.kind?1:2)||(o||(o=[])).push(e.createDiagnosticForNode(a,n.cannotExtractRangeContainingConditionalBreakOrContinueStatements));break;case 205:u|=i.IsAsyncFunction;break;case 211:u|=i.IsGenerator;break;case 234:4&_?u|=i.HasReturn:(o||(o=[])).push(e.createDiagnosticForNode(a,n.cannotExtractRangeContainingConditionalReturnStatement));break;default:e.forEachChild(a,t)}_=p}(t),o}}function _(t){return e.isStatement(t)?[t]:e.isExpressionNode(t)?e.isExpressionStatement(t.parent)?[t.parent]:t:void 0}function d(t){return e.isFunctionLikeDeclaration(t)||e.isSourceFile(t)||e.isModuleBlock(t)||e.isClassLike(t)}function p(t,r){var a=r.file,o=function(t){var r=y(t.range)?e.first(t.range):t.range;if(t.facts&i.UsesThis){var n=e.getContainingClass(r);if(n){var a=e.findAncestor(r,e.isFunctionLikeDeclaration);return a?[a,n]:[n]}}for(var o=[];;)if(155===(r=r.parent).kind&&(r=e.findAncestor(r,(function(t){return e.isFunctionLikeDeclaration(t)})).parent),d(r)&&(o.push(r),288===r.kind))return o}(t);return{scopes:o,readsAndWrites:function(t,r,a,o,s,c){var u,l,_=e.createMap(),d=[],p=[],f=[],m=[],g=[],h=e.createMap(),v=[],b=y(t.range)?1===t.range.length&&e.isExpressionStatement(t.range[0])?t.range[0].expression:void 0:t.range;if(void 0===b){var x=t.range,D=e.first(x).getStart(),S=e.last(x).end;l=e.createFileDiagnostic(o,D,S-D,n.expressionExpected)}else 147456&s.getTypeAtLocation(b).flags&&(l=e.createDiagnosticForNode(b,n.uselessConstantType));for(var T=0,E=r;T<E.length;T++){var C=E[T];d.push({usages:e.createMap(),typeParameterUsages:e.createMap(),substitutions:e.createMap()}),p.push(e.createMap()),f.push(e.isFunctionLikeDeclaration(C)&&243!==C.kind?[e.createDiagnosticForNode(C,n.cannotExtractToOtherFunctionLike)]:[]);var k=[];l&&k.push(l),e.isClassLike(C)&&e.isInJSFile(C)&&k.push(e.createDiagnosticForNode(C,n.cannotExtractToJSClass)),e.isArrowFunction(C)&&!e.isBlock(C.body)&&k.push(e.createDiagnosticForNode(C,n.cannotExtractToExpressionArrowFunction)),m.push(k)}var N=e.createMap(),A=y(t.range)?e.createBlock(t.range):t.range,F=y(t.range)?e.first(t.range):t.range,P=function(t){return!!e.findAncestor(t,(function(t){return e.isDeclarationWithTypeParameters(t)&&0!==e.getEffectiveTypeParameterDeclarations(t).length}))}(F);if(function c(u,l){void 0===l&&(l=1);if(P){z(s.getTypeAtLocation(u))}e.isDeclaration(u)&&u.symbol&&g.push(u);if(e.isAssignmentExpression(u))c(u.left,2),c(u.right);else if(e.isUnaryExpressionWithWrite(u))c(u.operand,2);else if(e.isPropertyAccessExpression(u)||e.isElementAccessExpression(u))e.forEachChild(u,c);else if(e.isIdentifier(u)){if(!u.parent)return;if(e.isQualifiedName(u.parent)&&u!==u.parent.left)return;if(e.isPropertyAccessExpression(u.parent)&&u!==u.parent.expression)return;!function(c,u,l){var _=function(c,u,l){var _=U(c);if(!_)return;var g=e.getSymbolId(_).toString(),y=N.get(g);if(y&&y>=u)return g;if(N.set(g,u),y){for(var h=0,v=d;h<v.length;h++){var b=v[h];b.usages.get(c.text)&&b.usages.set(c.text,{usage:u,symbol:_,node:c})}return g}var x=_.getDeclarations(),D=x&&e.find(x,(function(e){return e.getSourceFile()===o}));if(!D)return;if(e.rangeContainsStartEnd(a,D.getStart(),D.end))return;if(t.facts&i.IsGenerator&&2===u){for(var S=e.createDiagnosticForNode(c,n.cannotExtractRangeThatContainsWritesToReferencesLocatedOutsideOfTheTargetRangeInGenerators),T=0,E=f;T<E.length;T++){E[T].push(S)}for(var C=0,k=m;C<k.length;C++){k[C].push(S)}}for(var A=0;A<r.length;A++){var F=r[A];if(s.resolveName(_.name,F,_.flags,!1)!==_&&!p[A].has(g)){var P=V(_.exportSymbol||_,F,l);if(P)p[A].set(g,P);else if(l){if(!(262144&_.flags)){S=e.createDiagnosticForNode(c,n.typeWillNotBeVisibleInTheNewScope);f[A].push(S),m[A].push(S)}}else d[A].usages.set(c.text,{usage:u,symbol:_,node:c})}}return g}(c,u,l);if(_)for(var g=0;g<r.length;g++){var y=p[g].get(_);y&&d[g].substitutions.set(e.getNodeId(c).toString(),y)}}(u,l,e.isPartOfTypeNode(u))}else e.forEachChild(u,c)}(A),P&&!y(t.range)){z(s.getContextualType(t.range))}if(_.size>0){for(var w=e.createMap(),I=0,O=F;void 0!==O&&I<r.length;O=O.parent)if(O===r[I]&&(w.forEach((function(e,t){d[I].typeParameterUsages.set(t,e)})),I++),e.isDeclarationWithTypeParameters(O))for(var M=0,L=e.getEffectiveTypeParameterDeclarations(O);M<L.length;M++){var R=L[M],B=s.getTypeAtLocation(R);_.has(B.id.toString())&&w.set(B.id.toString(),B)}e.Debug.assert(I===r.length,"Should have iterated all scopes")}if(g.length){var j=e.isBlockScope(r[0],r[0].parent)?r[0]:e.getEnclosingBlockScopeContainer(r[0]);e.forEachChild(j,(function r(n){if(n===t.range||y(t.range)&&t.range.indexOf(n)>=0)return;var i=e.isIdentifier(n)?U(n):s.getSymbolAtLocation(n);if(i){var a=e.find(g,(function(e){return e.symbol===i}));if(a)if(e.isVariableDeclaration(a)){var o=a.symbol.id.toString();h.has(o)||(v.push(a),h.set(o,!0))}else u=u||a}e.forEachChild(n,r)}))}for(var K=function(r){var i=d[r];if(r>0&&(i.usages.size>0||i.typeParameterUsages.size>0)){var a=y(t.range)?t.range[0]:t.range;m[r].push(e.createDiagnosticForNode(a,n.cannotAccessVariablesFromNestedScopes))}var o,s=!1;if(d[r].usages.forEach((function(t){2===t.usage&&(s=!0,106500&t.symbol.flags&&t.symbol.valueDeclaration&&e.hasModifier(t.symbol.valueDeclaration,64)&&(o=t.symbol.valueDeclaration))})),e.Debug.assert(y(t.range)||0===v.length,"No variable declarations expected if something was extracted"),s&&!y(t.range)){var c=e.createDiagnosticForNode(t.range,n.cannotWriteInExpression);f[r].push(c),m[r].push(c)}else if(o&&r>0){c=e.createDiagnosticForNode(o,n.cannotExtractReadonlyPropertyInitializerOutsideConstructor);f[r].push(c),m[r].push(c)}else if(u){c=e.createDiagnosticForNode(u,n.cannotExtractExportedEntity);f[r].push(c),m[r].push(c)}},J=0;J<r.length;J++)K(J);return{target:A,usagesPerScope:d,functionErrorsPerScope:f,constantErrorsPerScope:m,exposedVariableDeclarations:v};function z(e){for(var t=0,r=s.getSymbolWalker((function(){return c.throwIfCancellationRequested(),!0})).walkType(e).visitedTypes;t<r.length;t++){var n=r[t];n.isTypeParameter()&&_.set(n.id.toString(),n)}}function U(t){return t.parent&&e.isShorthandPropertyAssignment(t.parent)&&t.parent.name===t?s.getShorthandAssignmentValueSymbol(t.parent):s.getSymbolAtLocation(t)}function V(t,r,n){if(t){var i=t.getDeclarations();if(i&&i.some((function(e){return e.parent===r})))return e.createIdentifier(t.name);var a=V(t.parent,r,n);if(void 0!==a)return n?e.createQualifiedName(a,e.createIdentifier(t.name)):e.createPropertyAccess(a,t.name)}}}(t,o,function(t,r){return y(t.range)?{pos:e.first(t.range).getStart(r),end:e.last(t.range).getEnd()}:t.range}(t,a),a,r.program.getTypeChecker(),r.cancellationToken)}}function f(e){var t,r=e.symbol;if(r&&r.declarations)for(var n=0,i=r.declarations;n<i.length;n++){var a=i[n];(void 0===t||a.pos<t.pos)&&(t=a)}return t}function m(t,r){var n=t.type,i=t.declaration,a=r.type,o=r.declaration;return e.compareProperties(i,o,"pos",e.compareValues)||e.compareStringsCaseSensitive(n.symbol?n.symbol.getName():"",a.symbol?a.symbol.getName():"")||e.compareValues(n.id,a.id)}function g(t,r){var n=e.map(t,(function(t){return e.createShorthandPropertyAssignment(t.symbol.name)})),i=e.map(r,(function(t){return e.createShorthandPropertyAssignment(t.symbol.name)}));return void 0===n?i:void 0===i?n:n.concat(i)}function y(t){return e.isArray(t)}function h(e){switch(e.kind){case 222:case 288:case 249:case 275:return!0;default:return!1}}t.registerRefactor(s,{getAvailableActions:c,getEditsForAction:u}),r.getAvailableActions=c,r.getEditsForAction=u,function(t){function r(t){return{message:t,code:0,category:e.DiagnosticCategory.Message,key:t}}t.cannotExtractRange=r("Cannot extract range."),t.cannotExtractImport=r("Cannot extract import statement."),t.cannotExtractSuper=r("Cannot extract super call."),t.cannotExtractJSDoc=r("Cannot extract JSDoc."),t.cannotExtractEmpty=r("Cannot extract empty range."),t.expressionExpected=r("expression expected."),t.uselessConstantType=r("No reason to extract constant of type."),t.statementOrExpressionExpected=r("Statement or expression expected."),t.cannotExtractRangeContainingConditionalBreakOrContinueStatements=r("Cannot extract range containing conditional break or continue statements."),t.cannotExtractRangeContainingConditionalReturnStatement=r("Cannot extract range containing conditional return statement."),t.cannotExtractRangeContainingLabeledBreakOrContinueStatementWithTargetOutsideOfTheRange=r("Cannot extract range containing labeled break or continue with target outside of the range."),t.cannotExtractRangeThatContainsWritesToReferencesLocatedOutsideOfTheTargetRangeInGenerators=r("Cannot extract range containing writes to references located outside of the target range in generators."),t.typeWillNotBeVisibleInTheNewScope=r("Type will not visible in the new scope."),t.functionWillNotBeVisibleInTheNewScope=r("Function will not visible in the new scope."),t.cannotExtractIdentifier=r("Select more than a single identifier."),t.cannotExtractExportedEntity=r("Cannot extract exported declaration"),t.cannotWriteInExpression=r("Cannot write back side-effects when extracting an expression"),t.cannotExtractReadonlyPropertyInitializerOutsideConstructor=r("Cannot move initialization of read-only class property outside of the constructor"),t.cannotExtractAmbientBlock=r("Cannot extract code from ambient contexts"),t.cannotAccessVariablesFromNestedScopes=r("Cannot access variables from nested scopes"),t.cannotExtractToOtherFunctionLike=r("Cannot extract method to a function-like scope that is not a function"),t.cannotExtractToJSClass=r("Cannot extract constant to a class scope in JS"),t.cannotExtractToExpressionArrowFunction=r("Cannot extract constant to an arrow function without a block")}(n=r.Messages||(r.Messages={})),function(e){e[e.None=0]="None",e[e.HasReturn=1]="HasReturn",e[e.IsGenerator=2]="IsGenerator",e[e.IsAsyncFunction=4]="IsAsyncFunction",e[e.UsesThis=8]="UsesThis",e[e.InStaticRegion=16]="InStaticRegion"}(i||(i={})),r.getRangeToExtract=l,function(e){e[e.Module=0]="Module",e[e.Global=1]="Global"}(a||(a={})),function(e){e[e.Read=1]="Read",e[e.Write=2]="Write"}(o||(o={}))}(t.extractSymbol||(t.extractSymbol={}))}(e.refactor||(e.refactor={}))}(s||(s={})),function(e){!function(t){function r(t){var r=t.file,i=t.startPosition,a=e.isSourceFileJS(r),o=e.getTokenAtPosition(r,i),s=e.createTextRangeFromSpan(e.getRefactorContextSpan(t)),c=e.findAncestor(o,(function(e){return e.parent&&n(s,e,r)&&!n(s,e.parent,r)}));if(c&&e.isTypeNode(c)){var u=t.program.getTypeChecker(),l=e.Debug.assertDefined(e.findAncestor(c,e.isStatement),"Should find a statement"),_=function(t,r,i,a){var o=[];return function s(c){if(e.isTypeReferenceNode(c)){if(e.isIdentifier(c.typeName))if(d=t.resolveName(c.typeName.text,c.typeName,262144,!0)){var u=e.cast(e.first(d.declarations),e.isTypeParameterDeclaration);n(i,u,a)&&!n(r,u,a)&&o.push(u)}}else if(e.isInferTypeNode(c)){var l=e.findAncestor(c,(function(t){return e.isConditionalTypeNode(t)&&n(t.extendsType,c,a)}));if(!l||!n(r,l,a))return!0}else if(e.isTypePredicateNode(c)||e.isThisTypeNode(c)){var _=e.findAncestor(c.parent,e.isFunctionLike);if(_&&_.type&&n(_.type,c,a)&&!n(r,_,a))return!0}else if(e.isTypeQueryNode(c)){var d;if(e.isIdentifier(c.exprName)){if((d=t.resolveName(c.exprName.text,c.exprName,111551,!1))&&n(i,d.valueDeclaration,a)&&!n(r,d.valueDeclaration,a))return!0}else if(e.isThisIdentifier(c.exprName.left)&&!n(r,c.parent,a))return!0}return e.forEachChild(c,s)}(r)?void 0:o}(u,c,l,r);if(_)return{isJS:a,selection:c,firstStatement:l,typeParameters:_,typeElements:function t(r,n){if(!n)return;if(e.isIntersectionTypeNode(n)){for(var i=[],a=e.createMap(),o=0,s=n.types;o<s.length;o++){var c=s[o],u=t(r,c);if(!u||!u.every((function(t){return t.name&&e.addToSeen(a,e.getNameFromPropertyName(t.name))})))return;e.addRange(i,u)}return i}if(e.isParenthesizedTypeNode(n))return t(r,n.type);if(e.isTypeLiteralNode(n))return n.members;return}(u,c)}}}function n(t,r,n){return e.rangeContainsStartEnd(t,e.skipTrivia(n.text,r.pos),r.end)}t.registerRefactor("Extract type",{getAvailableActions:function(t){var n=r(t);return n?[{name:"Extract type",description:e.getLocaleSpecificMessage(e.Diagnostics.Extract_type),actions:n.isJS?[{name:"Extract to typedef",description:e.getLocaleSpecificMessage(e.Diagnostics.Extract_to_typedef)}]:e.append([{name:"Extract to type alias",description:e.getLocaleSpecificMessage(e.Diagnostics.Extract_to_type_alias)}],n.typeElements&&{name:"Extract to interface",description:e.getLocaleSpecificMessage(e.Diagnostics.Extract_to_interface)})}]:e.emptyArray},getEditsForAction:function(t,n){var i=t.file,a=e.Debug.assertDefined(r(t),"Expected to find a range to extract"),o=e.getUniqueName("NewType",i),s=e.textChanges.ChangeTracker.with(t,(function(t){switch(n){case"Extract to type alias":return e.Debug.assert(!a.isJS,"Invalid actionName/JS combo"),function(t,r,n,i){var a=i.firstStatement,o=i.selection,s=i.typeParameters,c=e.createTypeAliasDeclaration(void 0,void 0,n,s.map((function(t){return e.updateTypeParameterDeclaration(t,t.name,t.constraint,void 0)})),o);t.insertNodeBefore(r,a,c,!0),t.replaceNode(r,o,e.createTypeReferenceNode(n,s.map((function(t){return e.createTypeReferenceNode(t.name,void 0)}))))}(t,i,o,a);case"Extract to typedef":return e.Debug.assert(a.isJS,"Invalid actionName/JS combo"),function(t,r,n,i){var a=i.firstStatement,o=i.selection,s=i.typeParameters,c=e.createNode(315);c.tagName=e.createIdentifier("typedef"),c.fullName=e.createIdentifier(n),c.name=c.fullName,c.typeExpression=e.createJSDocTypeExpression(o);var u=[];e.forEach(s,(function(t){var r=e.getEffectiveConstraintOfTypeParameter(t),n=e.createNode(314);n.tagName=e.createIdentifier("template"),n.constraint=r&&e.cast(r,e.isJSDocTypeExpression);var i=e.createNode(154);i.name=t.name,n.typeParameters=e.createNodeArray([i]),u.push(n)})),t.insertNodeBefore(r,a,e.createJSDocComment(void 0,e.createNodeArray(e.concatenate(u,[c]))),!0),t.replaceNode(r,o,e.createTypeReferenceNode(n,s.map((function(t){return e.createTypeReferenceNode(t.name,void 0)}))))}(t,i,o,a);case"Extract to interface":return e.Debug.assert(!a.isJS&&!!a.typeElements,"Invalid actionName/JS combo"),function(t,r,n,i){var a=i.firstStatement,o=i.selection,s=i.typeParameters,c=i.typeElements,u=e.createInterfaceDeclaration(void 0,void 0,n,s,void 0,c);t.insertNodeBefore(r,a,u,!0),t.replaceNode(r,o,e.createTypeReferenceNode(n,s.map((function(t){return e.createTypeReferenceNode(t.name,void 0)}))))}(t,i,o,a);default:e.Debug.fail("Unexpected action name")}})),c=i.fileName;return{edits:s,renameFilename:c,renameLocation:e.getRenameLocation(s,c,o,!1)}}})}(e.refactor||(e.refactor={}))}(s||(s={})),function(e){!function(t){!function(r){var n="Generate 'get' and 'set' accessors",i=e.Diagnostics.Generate_get_and_set_accessors.message;function a(t){return e.isParameterPropertyDeclaration(t,t.parent)||e.isPropertyDeclaration(t)||e.isPropertyAssignment(t)}function o(t,r){return e.isIdentifier(r)?e.createIdentifier(t):e.createLiteral(t)}function s(t,r,n){var i=r?n.name:e.createThis();return e.isIdentifier(t)?e.createPropertyAccess(i,t):e.createElementAccess(i,e.createLiteral(t))}function c(t,r,n){var i=e.append(t?void 0:[e.createToken(n)],r?e.createToken(119):void 0);return i&&e.createNodeArray(i)}function u(t){var r=t.file,n=t.startPosition,i=t.endPosition,s=e.getTokenAtPosition(r,n),c=e.findAncestor(s.parent,a);if(c&&e.nodeOverlapsWithStartEnd(c.name,r,n,i)&&function(t){return e.isIdentifier(t)||e.isStringLiteral(t)}(c.name)&&124==(124|e.getModifierFlags(c))){var u=c.name.text,l=function(e){return 95===e.charCodeAt(0)}(u),_=o(l?u:e.getUniqueName("_"+u,r),c.name),d=o(l?e.getUniqueName(u.substring(1),r):u,c.name);return{isStatic:e.hasStaticModifier(c),isReadonly:e.hasReadonlyModifier(c),type:e.getTypeAnnotationNode(c),container:155===c.kind?c.parent.parent:c.parent,originalName:c.name.text,declaration:c,fieldName:_,accessorName:d,renameAccessor:l}}}function l(t,r,n,i,a){e.isParameterPropertyDeclaration(i,i.parent)?t.insertNodeAtClassStart(r,a,n):e.isPropertyAssignment(i)?t.insertNodeAfterComma(r,i,n):t.insertNodeAfter(r,i,n)}t.registerRefactor(n,{getEditsForAction:function(t,r){var n=t.file,i=u(t);if(!i)return;var a=e.isSourceFileJS(n),o=e.textChanges.ChangeTracker.fromContext(t),_=i.isStatic,d=i.isReadonly,p=i.fieldName,f=i.accessorName,m=i.originalName,g=i.type,y=i.container,h=i.declaration,v=i.renameAccessor;e.suppressLeadingAndTrailingTrivia(p),e.suppressLeadingAndTrailingTrivia(h),e.suppressLeadingAndTrailingTrivia(y);var b=e.isClassLike(y),x=-65&e.getModifierFlags(h),D=b?!x||8&x?c(a,_,118):e.createNodeArray(e.createModifiersFromModifierFlags(x)):void 0,S=b?c(a,_,116):void 0;!function(t,r,n,i,a){e.isPropertyDeclaration(n)?function(t,r,n,i,a){var o=e.updateProperty(n,n.decorators,a,i,n.questionToken||n.exclamationToken,n.type,n.initializer);t.replaceNode(r,n,o)}(t,r,n,i,a):e.isPropertyAssignment(n)?function(t,r,n,i){var a=e.updatePropertyAssignment(n,i,n.initializer);t.replacePropertyAssignment(r,n,a)}(t,r,n,i):t.replaceNode(r,n,e.updateParameter(n,n.decorators,a,n.dotDotDotToken,e.cast(i,e.isIdentifier),n.questionToken,n.type,n.initializer))}(o,n,h,p,S);var T=function(t,r,n,i,a,o){return e.createGetAccessor(void 0,i,r,void 0,n,e.createBlock([e.createReturn(s(t,a,o))],!0))}(p,f,g,D,_,y);if(e.suppressLeadingAndTrailingTrivia(T),l(o,n,T,h,y),d){var E=e.getFirstConstructorWithBody(y);E&&function(t,r,n,i,a){if(!n.body)return;n.body.forEachChild((function n(o){e.isElementAccessExpression(o)&&103===o.expression.kind&&e.isStringLiteral(o.argumentExpression)&&o.argumentExpression.text===a&&e.isWriteAccess(o)&&t.replaceNode(r,o.argumentExpression,e.createStringLiteral(i)),e.isPropertyAccessExpression(o)&&103===o.expression.kind&&o.name.text===a&&e.isWriteAccess(o)&&t.replaceNode(r,o.name,e.createIdentifier(i)),e.isFunctionLike(o)||e.isClassLike(o)||o.forEachChild(n)}))}(o,n,E,p.text,m)}else{var C=function(t,r,n,i,a,o){return e.createSetAccessor(void 0,i,r,[e.createParameter(void 0,void 0,void 0,e.createIdentifier("value"),void 0,n)],e.createBlock([e.createStatement(e.createAssignment(s(t,a,o),e.createIdentifier("value")))],!0))}(p,f,g,D,_,y);e.suppressLeadingAndTrailingTrivia(C),l(o,n,C,h,y)}var k=o.getChanges(),N=n.fileName,A=v?f:p,F=(e.isIdentifier(A)?0:-1)+e.getRenameLocation(k,N,A.text,e.isParameter(h));return{renameFilename:N,renameLocation:F,edits:k}},getAvailableActions:function(t){return u(t)?[{name:n,description:i,actions:[{name:n,description:i}]}]:e.emptyArray}})}(t.generateGetAccessorAndSetAccessor||(t.generateGetAccessorAndSetAccessor={}))}(e.refactor||(e.refactor={}))}(s||(s={})),function(e){!function(r){function n(t){var r=function(t){var r=t.file,n=e.createTextRangeFromSpan(e.getRefactorContextSpan(t)),i=r.statements,a=e.findIndex(i,(function(e){return e.end>n.pos}));if(-1!==a){var o=i[a];if(e.isNamedDeclaration(o)&&o.name&&e.rangeContainsRange(o.name,n))return{toMove:[i[a]],afterLast:i[a+1]};if(!(n.pos>o.getStart(r))){var s=e.findIndex(i,(function(e){return e.end>n.end}),a);if(-1===s||!(0===s||i[s].getStart(r)<n.end))return{toMove:i.slice(a,-1===s?i.length:s),afterLast:-1===s?void 0:i[s]}}}}(t);if(void 0!==r){var n=[],i=[],a=r.toMove,o=r.afterLast;return e.getRangesWhere(a,(function(t){return!function(t){switch(t.kind){case 253:return!0;case 252:return!e.hasModifier(t,1);case 224:return t.declarationList.declarations.every((function(t){return!!t.initializer&&e.isRequireCall(t.initializer,!0)}));default:return!1}}(t)}),(function(e,t){for(var r=e;r<t;r++)n.push(a[r]);i.push({first:a[e],afterLast:o})})),0===n.length?void 0:{all:n,ranges:i}}}function i(e,t,r){for(var n=0,i=t;n<i.length;n++){var a=i[n],o=a.first,s=a.afterLast;r.deleteNodeRangeExcludingEnd(e,o,s)}}function a(e){return 253===e.kind?e.moduleSpecifier:252===e.kind?e.moduleReference.expression:e.initializer.arguments[0]}function o(t,r){if(e.isImportDeclaration(t))e.isStringLiteral(t.moduleSpecifier)&&r(t);else if(e.isImportEqualsDeclaration(t))e.isExternalModuleReference(t.moduleReference)&&e.isStringLiteralLike(t.moduleReference.expression)&&r(t);else if(e.isVariableStatement(t))for(var n=0,i=t.declarationList.declarations;n<i.length;n++){var a=i[n];a.initializer&&e.isRequireCall(a.initializer,!0)&&r(a)}}function s(t,r,n,i,a){if(n=e.ensurePathIsNonModuleName(n),i){var o=r.map((function(t){return e.createImportSpecifier(void 0,e.createIdentifier(t))}));return e.makeImportIfNecessary(t,o,n,a)}e.Debug.assert(!t,"No default import should exist");var s=r.map((function(t){return e.createBindingElement(void 0,void 0,t)}));return s.length?c(e.createObjectBindingPattern(s),void 0,u(e.createLiteral(n))):void 0}function c(t,r,n,i){return void 0===i&&(i=2),e.createVariableStatement(void 0,e.createVariableDeclarationList([e.createVariableDeclaration(t,r,n)],i))}function u(t){return e.createCall(e.createIdentifier("require"),void 0,[t])}function l(t,r,n,i){switch(r.kind){case 253:!function(t,r,n,i){if(!r.importClause)return;var a=r.importClause,o=a.name,s=a.namedBindings,c=!o||i(o),u=!s||(255===s.kind?i(s.name):0!==s.elements.length&&s.elements.every((function(e){return i(e.name)})));if(c&&u)n.delete(t,r);else if(o&&c&&n.delete(t,o),s)if(u)n.replaceNode(t,r.importClause,e.updateImportClause(r.importClause,o,void 0));else if(256===s.kind)for(var l=0,_=s.elements;l<_.length;l++){var d=_[l];i(d.name)&&n.delete(t,d)}}(t,r,n,i);break;case 252:i(r.name)&&n.delete(t,r);break;case 241:!function(t,r,n,i){var a=r.name;switch(a.kind){case 75:i(a)&&n.delete(t,a);break;case 189:break;case 188:if(a.elements.every((function(t){return e.isIdentifier(t.name)&&i(t.name)})))n.delete(t,e.isVariableDeclarationList(r.parent)&&1===r.parent.declarations.length?r.parent.parent:r);else for(var o=0,s=a.elements;o<s.length;o++){var c=s[o];e.isIdentifier(c.name)&&i(c.name)&&n.delete(t,c.name)}}}(t,r,n,i);break;default:e.Debug.assertNever(r,"Unexpected import decl kind "+r.kind)}}function _(t){switch(t.kind){case 252:case 257:case 254:return!0;case 241:return d(t);case 190:return e.isVariableDeclaration(t.parent.parent)&&d(t.parent.parent);default:return!1}}function d(t){return e.isSourceFile(t.parent.parent.parent)&&!!t.initializer&&e.isRequireCall(t.initializer,!0)}function p(t,r,n){switch(t.kind){case 253:var i=t.importClause;if(!i)return;var a=i.name&&n(i.name)?i.name:void 0,o=i.namedBindings&&function(t,r){if(255===t.kind)return r(t.name)?t:void 0;var n=t.elements.filter((function(e){return r(e.name)}));return n.length?e.createNamedImports(n):void 0}(i.namedBindings,n);return a||o?e.createImportDeclaration(void 0,void 0,e.createImportClause(a,o),r):void 0;case 252:return n(t.name)?t:void 0;case 241:var s=function(t,r){switch(t.kind){case 75:return r(t)?t:void 0;case 189:return t;case 188:var n=t.elements.filter((function(t){return t.propertyName||!e.isIdentifier(t.name)||r(t.name)}));return n.length?e.createObjectBindingPattern(n):void 0}}(t.name,n);return s?c(s,t.type,u(r),t.parent.flags):void 0;default:return e.Debug.assertNever(t,"Unexpected import kind "+t.kind)}}function f(t,r,n){t.forEachChild((function t(i){if(e.isIdentifier(i)&&!e.isDeclarationName(i)){var a=r.getSymbolAtLocation(i);a&&n(a)}else i.forEachChild(t)}))}r.registerRefactor("Move to a new file",{getAvailableActions:function(t){if(!t.preferences.allowTextChangesInNewFiles||void 0===n(t))return e.emptyArray;var r=e.getLocaleSpecificMessage(e.Diagnostics.Move_to_a_new_file);return[{name:"Move to a new file",description:r,actions:[{name:"Move to a new file",description:r}]}]},getEditsForAction:function(r,c){e.Debug.assert("Move to a new file"===c,"Wrong refactor invoked");var d=e.Debug.assertDefined(n(r));return{edits:e.textChanges.ChangeTracker.with(r,(function(n){return function(r,n,c,d,k,N){var A=n.getTypeChecker(),F=function(t,r,n){var i=new m,a=new m,o=new m,s=function(t){if(void 0===t)return;var r=n.getJsxNamespace(t),i=n.resolveName(r,t,1920,!0);return i&&e.some(i.declarations,_)?i:void 0}(e.find(r,(function(e){return!!(2&e.transformFlags)})));s&&a.add(s);for(var c=0,u=r;c<u.length;c++){v(D=u[c],(function(t){i.add(e.Debug.assertDefined(e.isExpressionStatement(t)?n.getSymbolAtLocation(t.expression.left):t.symbol,"Need a symbol here"))}))}for(var l=0,d=r;l<d.length;l++){f(D=d[l],n,(function(e){if(e.declarations)for(var r=0,n=e.declarations;r<n.length;r++){var s=n[r];_(s)?a.add(e):g(s)&&y(s)===t&&!i.has(e)&&o.add(e)}}))}for(var p=a.clone(),h=new m,b=0,x=t.statements;b<x.length;b++){var D=x[b];e.contains(r,D)||(s&&2&D.transformFlags&&p.delete(s),f(D,n,(function(e){i.has(e)&&h.add(e),p.delete(e)})))}return{movedSymbols:i,newFileImportsFromOldFile:o,oldFileImportsFromNewFile:h,oldImportsNeededByNewFile:a,unusedImportsFromOldFile:p}}(r,c.all,A),P=e.getDirectoryPath(r.fileName),w=e.extensionFromPath(r.fileName),I=function(t,r,n,i){for(var a=t,o=1;;o++){var s=e.combinePaths(n,a+r);if(!i.fileExists(s))return a;a=t+"."+o}}((M=F.movedSymbols,M.forEachEntry(e.symbolNameNoDefault)||"newFile"),w,P,k),O=I+w;var M;d.createNewFile(r,e.combinePaths(P,O),function(r,n,c,_,d,f,m){var y=d.getTypeChecker();if(!r.externalModuleIndicator&&!r.commonJsModuleIndicator)return i(r,_.ranges,c),_.all;var k=!!r.externalModuleIndicator,N=e.getQuotePreference(r,m),A=function(t,r,n,i){var a,o=[];return t.forEach((function(t){"default"===t.escapedName?a=e.createIdentifier(e.symbolNameNoDefault(t)):o.push(t.name)})),s(a,o,r,n,i)}(n.oldFileImportsFromNewFile,f,k,N);A&&e.insertImport(c,r,A);return function(t,r,n,i,a){for(var s=0,c=t.statements;s<c.length;s++){var u=c[s];e.contains(r,u)||o(u,(function(e){return l(t,e,n,(function(e){return i.has(a.getSymbolAtLocation(e))}))}))}}(r,_.all,c,n.unusedImportsFromOldFile,y),i(r,_.ranges,c),function(t,r,n,i,s){for(var c=r.getTypeChecker(),_=function(r){if(r===n)return"continue";for(var _=function(_){o(_,(function(o){if(c.getSymbolAtLocation(a(o))===n.symbol){var d=function(t){var r=e.isBindingElement(t.parent)?e.getPropertySymbolFromBindingElement(c,t.parent):e.skipAlias(c.getSymbolAtLocation(t),c);return!!r&&i.has(r)};l(r,o,t,d);var f=e.combinePaths(e.getDirectoryPath(a(o).text),s),m=p(o,e.createLiteral(f),d);m&&t.insertNodeAfter(r,_,m);var g=function(t){switch(t.kind){case 253:return t.importClause&&t.importClause.namedBindings&&255===t.importClause.namedBindings.kind?t.importClause.namedBindings.name:void 0;case 252:return t.name;case 241:return e.tryCast(t.name,e.isIdentifier);default:return e.Debug.assertNever(t,"Unexpected node kind "+t.kind)}}(o);g&&function(t,r,n,i,a,o,s,c){var l=e.codefix.moduleSpecifierToValidIdentifier(a,99),_=!1,d=[];if(e.FindAllReferences.Core.eachSymbolReferenceInFile(s,n,r,(function(t){e.isPropertyAccessExpression(t.parent)&&(_=_||!!n.resolveName(l,t,67108863,!0),i.has(n.getSymbolAtLocation(t.parent.name))&&d.push(t))})),d.length){for(var p=_?e.getUniqueName(l,r):l,f=0,m=d;f<m.length;f++){var g=m[f];t.replaceNode(r,g,e.createIdentifier(p))}t.insertNodeAfter(r,c,function(t,r,n){var i=e.createIdentifier(r),a=e.createLiteral(n);switch(t.kind){case 253:return e.createImportDeclaration(void 0,void 0,e.createImportClause(void 0,e.createNamespaceImport(i)),a);case 252:return e.createImportEqualsDeclaration(void 0,void 0,i,e.createExternalModuleReference(a));case 241:return e.createVariableDeclaration(i,void 0,u(a));default:return e.Debug.assertNever(t,"Unexpected node kind "+t.kind)}}(c,a,o))}}(t,r,c,i,s,f,g,o)}}))},d=0,f=r.statements;d<f.length;d++){_(f[d])}},d=0,f=r.getSourceFiles();d<f.length;d++){var m=f[d];_(m)}}(c,d,r,n.movedSymbols,f),t(function(t,r,n,i,c,u,l){for(var _,d=[],f=0,m=t.statements;f<m.length;f++){o(m[f],(function(t){e.append(d,p(t,a(t),(function(e){return r.has(c.getSymbolAtLocation(e))})))}))}var y=[],h=e.nodeSeenTracker();return n.forEach((function(r){for(var n=0,a=r.declarations;n<a.length;n++){var o=a[n];if(g(o)){var s=b(o);if(s){var c=x(o);h(c)&&D(t,c,i,u),e.hasModifier(o,512)?_=s:y.push(s.text)}}}})),e.append(d,s(_,y,e.removeFileExtension(e.getBaseFileName(t.fileName)),u,l)),d}(r,n.oldImportsNeededByNewFile,n.newFileImportsFromOldFile,c,y,k,N),function(r,n,i,a){return e.flatMap(n,(function(n){if(function(t){return e.Debug.assert(e.isSourceFile(t.parent),"Node parent should be a SourceFile"),h(t)||e.isVariableStatement(t)}(n)&&!S(r,n,a)&&v(n,(function(t){return i.has(e.Debug.assertDefined(t.symbol))}))){var o=function(e,r){return r?[T(e)]:function(e){return t([e],E(e).map(C))}(e)}(n,a);if(o)return o}return n}))}(r,_.all,n.oldFileImportsFromNewFile,k))}(r,F,d,c,n,I,N)),function(t,r,n,i,a){var o=t.getCompilerOptions().configFile;if(!o)return;var s=e.normalizePath(e.combinePaths(n,"..",i)),c=e.getRelativePathFromFile(o.fileName,s,a),u=o.statements[0]&&e.tryCast(o.statements[0].expression,e.isObjectLiteralExpression),l=u&&e.find(u.properties,(function(t){return e.isPropertyAssignment(t)&&e.isStringLiteral(t.name)&&"files"===t.name.text}));l&&e.isArrayLiteralExpression(l.initializer)&&r.insertNodeInListAfter(o,e.last(l.initializer.elements),e.createLiteral(c),l.initializer.elements)}(n,d,r.fileName,O,e.hostGetCanonicalFileName(k))}(r.file,r.program,d,n,r.host,r.preferences)})),renameFilename:void 0,renameLocation:void 0}}});var m=function(){function t(){this.map=e.createMap()}return t.prototype.add=function(t){this.map.set(String(e.getSymbolId(t)),t)},t.prototype.has=function(t){return this.map.has(String(e.getSymbolId(t)))},t.prototype.delete=function(t){this.map.delete(String(e.getSymbolId(t)))},t.prototype.forEach=function(e){this.map.forEach(e)},t.prototype.forEachEntry=function(t){return e.forEachEntry(this.map,t)},t.prototype.clone=function(){var r=new t;return e.copyEntries(this.map,r.map),r},t}();function g(t){return h(t)&&e.isSourceFile(t.parent)||e.isVariableDeclaration(t)&&e.isSourceFile(t.parent.parent.parent)}function y(t){return e.isVariableDeclaration(t)?t.parent.parent.parent:t.parent}function h(e){switch(e.kind){case 243:case 244:case 248:case 247:case 246:case 245:case 252:return!0;default:return!1}}function v(t,r){switch(t.kind){case 243:case 244:case 248:case 247:case 246:case 245:case 252:return r(t);case 224:return e.firstDefined(t.declarationList.declarations,(function(t){return function t(r,n){switch(r.kind){case 75:return n(e.cast(r.parent,(function(t){return e.isVariableDeclaration(t)||e.isBindingElement(t)})));case 189:case 188:return e.firstDefined(r.elements,(function(r){return e.isOmittedExpression(r)?void 0:t(r.name,n)}));default:return e.Debug.assertNever(r,"Unexpected name kind "+r.kind)}}(t.name,r)}));case 225:var n=t.expression;return e.isBinaryExpression(n)&&1===e.getAssignmentDeclarationKind(n)?r(t):void 0}}function b(t){return e.isExpressionStatement(t)?t.expression.left.name:e.tryCast(t.name,e.isIdentifier)}function x(t){switch(t.kind){case 241:return t.parent.parent;case 190:return x(e.cast(t.parent.parent,(function(t){return e.isVariableDeclaration(t)||e.isBindingElement(t)})));default:return t}}function D(t,r,n,i){if(!S(t,r,i))if(i)e.isExpressionStatement(r)||n.insertExportModifier(t,r);else{var a=E(r);0!==a.length&&n.insertNodesAfter(t,r,a.map(C))}}function S(t,r,n){return n?!e.isExpressionStatement(r)&&e.hasModifier(r,1):E(r).some((function(r){return t.symbol.exports.has(e.escapeLeadingUnderscores(r))}))}function T(t){var r=e.concatenate([e.createModifier(88)],t.modifiers);switch(t.kind){case 243:return e.updateFunctionDeclaration(t,t.decorators,r,t.asteriskToken,t.name,t.typeParameters,t.parameters,t.type,t.body);case 244:return e.updateClassDeclaration(t,t.decorators,r,t.name,t.typeParameters,t.heritageClauses,t.members);case 224:return e.updateVariableStatement(t,r,t.declarationList);case 248:return e.updateModuleDeclaration(t,t.decorators,r,t.name,t.body);case 247:return e.updateEnumDeclaration(t,t.decorators,r,t.name,t.members);case 246:return e.updateTypeAliasDeclaration(t,t.decorators,r,t.name,t.typeParameters,t.type);case 245:return e.updateInterfaceDeclaration(t,t.decorators,r,t.name,t.typeParameters,t.heritageClauses,t.members);case 252:return e.updateImportEqualsDeclaration(t,t.decorators,r,t.name,t.moduleReference);case 225:return e.Debug.fail();default:return e.Debug.assertNever(t,"Unexpected declaration kind "+t.kind)}}function E(t){switch(t.kind){case 243:case 244:return[t.name.text];case 224:return e.mapDefined(t.declarationList.declarations,(function(t){return e.isIdentifier(t.name)?t.name.text:void 0}));case 248:case 247:case 246:case 245:case 252:return e.emptyArray;case 225:return e.Debug.fail("Can't export an ExpressionStatement");default:return e.Debug.assertNever(t,"Unexpected decl kind "+t.kind)}}function C(t){return e.createExpressionStatement(e.createBinary(e.createPropertyAccess(e.createIdentifier("exports"),e.createIdentifier(t)),62,e.createIdentifier(t)))}}(e.refactor||(e.refactor={}))}(s||(s={})),function(e){!function(t){!function(r){var n="Add or remove braces in an arrow function",i=e.Diagnostics.Add_or_remove_braces_in_an_arrow_function.message,a="Add braces to arrow function",o="Remove braces from arrow function",s=e.Diagnostics.Add_braces_to_arrow_function.message,c=e.Diagnostics.Remove_braces_from_arrow_function.message;function u(t,r){var n=e.getTokenAtPosition(t,r),i=e.getContainingFunction(n);if(i&&e.isArrowFunction(i)&&e.rangeContainsRange(i,n)&&!e.rangeContainsRange(i.body,n)){if(e.isExpression(i.body))return{func:i,addBraces:!0,expression:i.body};if(1===i.body.statements.length){var a=e.first(i.body.statements);if(e.isReturnStatement(a))return{func:i,addBraces:!1,expression:a.expression,returnStatement:a}}}}t.registerRefactor(n,{getEditsForAction:function(t,r){var n=t.file,i=t.startPosition,s=u(n,i);if(!s)return;var c,l=s.expression,_=s.returnStatement,d=s.func;if(r===a){var p=e.createReturn(l);c=e.createBlock([p],!0),e.suppressLeadingAndTrailingTrivia(c),e.copyLeadingComments(l,p,n,3,!0)}else if(r===o&&_){var f=l||e.createVoidZero();c=function(t){return e.isBinaryExpression(t)&&27===t.operatorToken.kind||e.isObjectLiteralExpression(t)}(f)?e.createParen(f):f,e.suppressLeadingAndTrailingTrivia(c),e.copyLeadingComments(_,c,n,3,!1)}else e.Debug.fail("invalid action");var m=e.textChanges.ChangeTracker.with(t,(function(e){return e.replaceNode(n,d.body,c)}));return{renameFilename:void 0,renameLocation:void 0,edits:m}},getAvailableActions:function(t){var r=t.file,l=t.startPosition,_=u(r,l);return _?[{name:n,description:i,actions:[_.addBraces?{name:a,description:s}:{name:o,description:c}]}]:e.emptyArray}})}(t.addOrRemoveBracesToArrowFunction||(t.addOrRemoveBracesToArrowFunction={}))}(e.refactor||(e.refactor={}))}(s||(s={})),function(e){!function(r){!function(n){var i="Convert parameters to destructured object",a=2;function o(t){var r=t.node;return e.isImportSpecifier(r.parent)||e.isImportClause(r.parent)||e.isImportEqualsDeclaration(r.parent)||e.isNamespaceImport(r.parent)?r:e.isExportSpecifier(r.parent)||e.isExportAssignment(r.parent)?r:void 0}function s(t){if(e.isDeclaration(t.node.parent))return t.node}function c(t){if(t.node.parent){var r=t.node,n=r.parent;switch(n.kind){case 195:case 196:var i=e.tryCast(n,e.isCallOrNewExpression);if(i&&i.expression===r)return i;break;case 193:var a=e.tryCast(n,e.isPropertyAccessExpression);if(a&&a.parent&&a.name===r){var o=e.tryCast(a.parent,e.isCallOrNewExpression);if(o&&o.expression===a)return o}break;case 194:var s=e.tryCast(n,e.isElementAccessExpression);if(s&&s.parent&&s.argumentExpression===r){var c=e.tryCast(s.parent,e.isCallOrNewExpression);if(c&&c.expression===s)return c}}}}function u(t){if(t.node.parent){var r=t.node,n=r.parent;switch(n.kind){case 193:var i=e.tryCast(n,e.isPropertyAccessExpression);if(i&&i.expression===r)return i;break;case 194:var a=e.tryCast(n,e.isElementAccessExpression);if(a&&a.expression===r)return a}}}function l(t){var r=t.node;if(2===e.getMeaningFromLocation(r)||e.isExpressionWithTypeArgumentsInClassExtendsClause(r.parent))return r}function _(t,r,n){var i=e.getTouchingToken(t,r),o=e.getContainingFunctionDeclaration(i);if(!function(t){var r=e.findAncestor(t,e.isJSDocNode);if(r){var n=e.findAncestor(r,(function(t){return!e.isJSDocNode(t)}));return!!n&&e.isFunctionLikeDeclaration(n)}return!1}(i))return!(o&&function(t,r){if(!function(t,r){return function(e){if(m(e))return e.length-1;return e.length}(t)>=a&&e.every(t,(function(t){return function(t,r){if(e.isRestParameter(t)){var n=r.getTypeAtLocation(t);if(!r.isArrayType(n)&&!r.isTupleType(n))return!1}return!t.modifiers&&!t.decorators&&e.isIdentifier(t.name)}(t,r)}))}(t.parameters,r))return!1;switch(t.kind){case 243:return p(t)&&d(t,r);case 160:return d(t,r);case 161:return e.isClassDeclaration(t.parent)?p(t.parent)&&d(t,r):f(t.parent.parent)&&d(t,r);case 200:case 201:return f(t.parent)}return!1}(o,n)&&e.rangeContainsRange(o,i))||o.body&&e.rangeContainsRange(o.body,i)?void 0:o}function d(e,t){return!!e.body&&!t.isImplementationOfOverload(e)}function p(t){return!!t.name||!!e.findModifier(t,83)}function f(t){return e.isVariableDeclaration(t)&&e.isVarConst(t)&&e.isIdentifier(t.name)&&!t.type}function m(t){return t.length>0&&e.isThis(t[0].name)}function g(t){return m(t)&&(t=e.createNodeArray(t.slice(1),t.hasTrailingComma)),t}function y(t,r){var n=g(t.parameters),i=e.isRestParameter(e.last(n)),a=i?r.slice(0,n.length-1):r,o=e.map(a,(function(t,r){var i=function(t,r){return e.isIdentifier(r)&&e.getTextOfIdentifierOrLiteral(r)===t?e.createShorthandPropertyAssignment(t):e.createPropertyAssignment(t,r)}(v(n[r]),t);return e.suppressLeadingAndTrailingTrivia(i.name),e.isPropertyAssignment(i)&&e.suppressLeadingAndTrailingTrivia(i.initializer),h(t,i),i}));if(i&&r.length>=n.length){var s=r.slice(n.length-1),c=e.createPropertyAssignment(v(e.last(n)),e.createArrayLiteral(s));o.push(c)}return e.createObjectLiteral(o,!1)}function h(t,r){var n=t.getSourceFile();!function(e,t){for(var r=e.getFullStart(),n=e.getStart(),i=r;i<n;i++)if(10===t.charCodeAt(i))return!0;return!1}(t,n.text)?e.copyTrailingAsLeadingComments(t,r,n):e.copyLeadingComments(t,r,n),e.copyTrailingComments(t,r,n)}function v(t){return e.getTextOfIdentifierOrLiteral(t.name)}r.registerRefactor(i,{getEditsForAction:function(r,n){e.Debug.assert(n===i,"Unexpected action name");var a=r.file,d=r.startPosition,p=r.program,f=r.cancellationToken,b=r.host,x=_(a,d,p.getTypeChecker());if(!x||!f)return;var D=function(r,n,i){var a=function(t){switch(t.kind){case 243:return t.name?[t.name]:[e.Debug.assertDefined(e.findModifier(t,83),"Nameless function declaration should be a default export")];case 160:return[t.name];case 161:var r=e.Debug.assertDefined(e.findChildOfKind(t,128,t.getSourceFile()),"Constructor declaration should have constructor keyword");return 213===t.parent.kind?[t.parent.parent.name,r]:[r];case 201:return[t.parent.name];case 200:return t.name?[t.name,t.parent.name]:[t.parent.name];default:return e.Debug.assertNever(t,"Unexpected function declaration kind "+t.kind)}}(r),_=e.isConstructorDeclaration(r)?function(t){switch(t.parent.kind){case 244:var r=t.parent;return r.name?[r.name]:[e.Debug.assertDefined(e.findModifier(r,83),"Nameless class declaration should be a default export")];case 213:var n=t.parent,i=t.parent.parent,a=n.name;return a?[a,i.name]:[i.name]}}(r):[],d=e.deduplicate(t(a,_),e.equateValues),p=n.getTypeChecker(),f=function(t){for(var n={accessExpressions:[],typeUsages:[]},i={functionCalls:[],declarations:[],classReferences:n,valid:!0},d=e.map(a,m),p=e.map(_,m),f=e.isConstructorDeclaration(r),g=0,y=t;g<y.length;g++){var h=y[g];if(1===h.kind){if(e.contains(d,m(h.node))||e.isNewExpressionTarget(h.node)){if(o(h))continue;if(b=s(h)){i.declarations.push(b);continue}var v=c(h);if(v){i.functionCalls.push(v);continue}}if(f&&e.contains(p,m(h.node))){var b;if(o(h))continue;if(b=s(h)){i.declarations.push(b);continue}var x=u(h);if(x){n.accessExpressions.push(x);continue}if(e.isClassDeclaration(r.parent)){var D=l(h);if(D){n.typeUsages.push(D);continue}}}i.valid=!1}else i.valid=!1}return i}(e.flatMap(d,(function(t){return e.FindAllReferences.getReferenceEntriesForNode(-1,t,n,n.getSourceFiles(),i)})));e.every(f.declarations,(function(t){return e.contains(d,t)}))||(f.valid=!1);return f;function m(t){var r=p.getSymbolAtLocation(t);return r&&e.getSymbolTarget(r,p)}}(x,p,f);if(D.valid){return{renameFilename:void 0,renameLocation:void 0,edits:e.textChanges.ChangeTracker.with(r,(function(t){return function(t,r,n,i,a,o){var s=e.map(function(t,r,n){var i,a=r.getTypeChecker(),o=g(t.parameters),s=e.map(o,(function(t){var r=e.createBindingElement(void 0,void 0,v(t),e.isRestParameter(t)&&b(t)?e.createArrayLiteral():t.initializer);e.suppressLeadingAndTrailingTrivia(r),t.initializer&&r.initializer&&h(t.initializer,r.initializer);return r})),c=e.createObjectBindingPattern(s),u=(l=o,_=e.map(l,y),e.addEmitFlags(e.createTypeLiteralNode(_),1));var l,_;e.every(o,b)&&(i=e.createObjectLiteral());var d=e.createParameter(void 0,void 0,void 0,c,void 0,u,i);if(m(t.parameters)){var p=t.parameters[0],f=e.createParameter(void 0,void 0,void 0,p.name,void 0,p.type);return e.suppressLeadingAndTrailingTrivia(f.name),h(p.name,f.name),p.type&&(e.suppressLeadingAndTrailingTrivia(f.type),h(p.type,f.type)),e.createNodeArray([f,d])}return e.createNodeArray([d]);function y(t){var i=t.type;i||!t.initializer&&!e.isRestParameter(t)||(i=function(t){var i=a.getTypeAtLocation(t);return e.getTypeNodeIfAccessible(i,t,r,n)}(t));var o=e.createPropertySignature(void 0,v(t),b(t)?e.createToken(57):t.questionToken,i,void 0);return e.suppressLeadingAndTrailingTrivia(o),h(t.name,o.name),t.type&&o.type&&h(t.type,o.type),o}function b(t){if(e.isRestParameter(t)){var r=a.getTypeAtLocation(t);return!a.isTupleType(r)}return a.isOptionalParameter(t)}}(a,r,n),(function(t){return e.getSynthesizedDeepClone(t)}));i.replaceNodeRangeWithNodes(t,e.first(a.parameters),e.last(a.parameters),s,{joiner:", ",indentation:0,leadingTriviaOption:e.textChanges.LeadingTriviaOption.IncludeAll,trailingTriviaOption:e.textChanges.TrailingTriviaOption.Include});for(var c=e.sortAndDeduplicate(o.functionCalls,(function(t,r){return e.compareValues(t.pos,r.pos)})),u=0,l=c;u<l.length;u++){var _=l[u];if(_.arguments&&_.arguments.length){var d=e.getSynthesizedDeepClone(y(a,_.arguments),!0);i.replaceNodeRange(e.getSourceFileOfNode(_),e.first(_.arguments),e.last(_.arguments),d,{leadingTriviaOption:e.textChanges.LeadingTriviaOption.IncludeAll,trailingTriviaOption:e.textChanges.TrailingTriviaOption.Include})}}}(a,p,b,t,x,D)}))}}return{edits:[]}},getAvailableActions:function(t){var r=t.file,n=t.startPosition;if(e.isSourceFileJS(r))return e.emptyArray;if(!_(r,n,t.program.getTypeChecker()))return e.emptyArray;var a=e.getLocaleSpecificMessage(e.Diagnostics.Convert_parameters_to_destructured_object);return[{name:i,description:a,actions:[{name:i,description:a}]}]}})}(r.convertParamsToDestructuredObject||(r.convertParamsToDestructuredObject={}))}(e.refactor||(e.refactor={}))}(s||(s={})),function(e){function n(t,r,n,a){var o=e.isNodeKind(t)?new i(t,r,n):75===t?new l(75,r,n):new u(t,r,n);return o.parent=a,o.flags=25358336&a.flags,o}e.servicesVersion="0.8";var i=function(){function t(e,t,r){this.pos=t,this.end=r,this.flags=0,this.modifierFlagsCache=0,this.transformFlags=0,this.parent=void 0,this.kind=e}return t.prototype.assertHasRealPosition=function(t){e.Debug.assert(!e.positionIsSynthesized(this.pos)&&!e.positionIsSynthesized(this.end),t||"Node must have a real position for this operation")},t.prototype.getSourceFile=function(){return e.getSourceFileOfNode(this)},t.prototype.getStart=function(t,r){return this.assertHasRealPosition(),e.getTokenPosOfNode(this,t,r)},t.prototype.getFullStart=function(){return this.assertHasRealPosition(),this.pos},t.prototype.getEnd=function(){return this.assertHasRealPosition(),this.end},t.prototype.getWidth=function(e){return this.assertHasRealPosition(),this.getEnd()-this.getStart(e)},t.prototype.getFullWidth=function(){return this.assertHasRealPosition(),this.end-this.pos},t.prototype.getLeadingTriviaWidth=function(e){return this.assertHasRealPosition(),this.getStart(e)-this.pos},t.prototype.getFullText=function(e){return this.assertHasRealPosition(),(e||this.getSourceFile()).text.substring(this.pos,this.end)},t.prototype.getText=function(e){return this.assertHasRealPosition(),e||(e=this.getSourceFile()),e.text.substring(this.getStart(e),this.getEnd())},t.prototype.getChildCount=function(e){return this.getChildren(e).length},t.prototype.getChildAt=function(e,t){return this.getChildren(t)[e]},t.prototype.getChildren=function(t){return this.assertHasRealPosition("Node without a real position cannot be scanned and thus has no token nodes - use forEachChild and collect the result if that's fine"),this._children||(this._children=function(t,r){if(!e.isNodeKind(t.kind))return e.emptyArray;var i=[];if(e.isJSDocCommentContainingNode(t))return t.forEachChild((function(e){i.push(e)})),i;e.scanner.setText((r||t.ge