 such that: -32099 <= code <= -32005');return o(t,e)},invalidInput:e=>o(i.errorCodes.rpc.invalidInput,e),resourceNotFound:e=>o(i.errorCodes.rpc.resourceNotFound,e),resourceUnavailable:e=>o(i.errorCodes.rpc.resourceUnavailable,e),transactionRejected:e=>o(i.errorCodes.rpc.transactionRejected,e),methodNotSupported:e=>o(i.errorCodes.rpc.methodNotSupported,e),limitExceeded:e=>o(i.errorCodes.rpc.limitExceeded,e)},r.providerErrors={userRejectedRequest:e=>a(i.errorCodes.provider.userRejectedRequest,e),unauthorized:e=>a(i.errorCodes.provider.unauthorized,e),unsupportedMethod:e=>a(i.errorCodes.provider.unsupportedMethod,e),disconnected:e=>a(i.errorCodes.provider.disconnected,e),chainDisconnected:e=>a(i.errorCodes.provider.chainDisconnected,e),custom:e=>{if(!e||"object"!=typeof e||Array.isArray(e))throw new Error("Ethereum Provider custom errors must provide single object argument.");const{code:t,message:r,data:i}=e;if(!r||"string"!=typeof r)throw new Error('"message" must be a nonempty string');return new n.EthereumProviderError(t,r,i)}}},{"./classes":144,"./error-constants":145,"./utils":148}],147:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.errorCodes=r.providerErrors=r.rpcErrors=r.getMessageFromCode=r.serializeError=r.serializeCause=r.EthereumProviderError=r.JsonRpcError=void 0;var n=e("./classes");Object.defineProperty(r,"JsonRpcError",{enumerable:!0,get:function(){return n.JsonRpcError}}),Object.defineProperty(r,"EthereumProviderError",{enumerable:!0,get:function(){return n.EthereumProviderError}});var i=e("./utils");Object.defineProperty(r,"serializeCause",{enumerable:!0,get:function(){return i.serializeCause}}),Object.defineProperty(r,"serializeError",{enumerable:!0,get:function(){return i.serializeError}}),Object.defineProperty(r,"getMessageFromCode",{enumerable:!0,get:function(){return i.getMessageFromCode}});var s=e("./errors");Object.defineProperty(r,"rpcErrors",{enumerable:!0,get:function(){return s.rpcErrors}}),Object.defineProperty(r,"providerErrors",{enumerable:!0,get:function(){return s.providerErrors}});var o=e("./error-constants");Object.defineProperty(r,"errorCodes",{enumerable:!0,get:function(){return o.errorCodes}})},{"./classes":144,"./error-constants":145,"./errors":146,"./utils":148}],148:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.serializeCause=r.serializeError=r.isValidCode=r.getMessageFromCode=r.JSON_RPC_SERVER_ERROR_MESSAGE=void 0;const n=e("@metamask/utils"),i=e("./error-constants"),s=i.errorCodes.rpc.internal,o={code:s,message:a(s)};function a(e,t="Unspecified error message. This is a bug, please report it."){if(u(e)){const t=e.toString();if((0,n.hasProperty)(i.errorValues,t))return i.errorValues[t].message;if(function(e){return e>=-32099&&e<=-32e3}(e))return r.JSON_RPC_SERVER_ERROR_MESSAGE}return t}function u(e){return Number.isInteger(e)}function c(e){return Array.isArray(e)?e.map((e=>(0,n.isValidJson)(e)?e:(0,n.isObject)(e)?l(e):null)):(0,n.isObject)(e)?l(e):(0,n.isValidJson)(e)?e:null}function l(e){return Object.getOwnPropertyNames(e).reduce(((t,r)=>{const i=e[r];return(0,n.isValidJson)(i)&&(t[r]=i),t}),{})}r.JSON_RPC_SERVER_ERROR_MESSAGE="Unspecified server error.",r.getMessageFromCode=a,r.isValidCode=u,r.serializeError=function(e,{fallbackError:t=o,shouldIncludeStack:r=!0}={}){if(!(0,n.isJsonRpcError)(t))throw new Error("Must provide fallback error with integer number code and string message.");const i=function(e,t){if(e&&"object"==typeof e&&"serialize"in e&&"function"==typeof e.serialize)return e.serialize();if((0,n.isJsonRpcError)(e))return e;const r=c(e),i={...t,data:{cause:r}};return i}(e,t);return r||delete i.stack,i},r.serializeCause=c},{"./error-constants":145,"@metamask/utils":158}],149:[function(e,t,r){arguments[4][12][0].apply(r,arguments)},{dup:12,superstruct:601}],150:[function(e,t,r){arguments[4][13][0].apply(r,arguments)},{"./assert":149,dup:13,superstruct:601}],151:[function(e,t,r){(function(t){(function(){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(r,{isBytes:function(){return c},assertIsBytes:function(){return l},bytesToHex:function(){return f},bytesToBigInt:function(){return d},bytesToSignedBigInt:function(){return h},bytesToNumber:function(){return p},bytesToString:function(){return m},hexToBytes:function(){return g},bigIntToBytes:function(){return b},signedBigIntToBytes:function(){return y},numberToBytes:function(){return v},stringToBytes:function(){return w},valueToBytes:function(){return _},concatBytes:function(){return S},createDataView:function(){return E}});const n=e("./assert"),i=e("./hex"),s=48,o=58,a=87;const u=function(){const e=[];return()=>{if(0===e.length)for(let t=0;t<256;t++)e.push(t.toString(16).padStart(2,"0"));return e}}();function c(e){return e instanceof Uint8Array}function l(e){(0,n.assert)(c(e),"Value must be a Uint8Array.")}function f(e){if(l(e),0===e.length)return"0x";const t=u(),r=new Array(e.length);for(let n=0;n<e.length;n++)r[n]=t[e[n]];return(0,i.add0x)(r.join(""))}function d(e){l(e);const t=f(e);return BigInt(t)}function h(e){l(e);let t=BigInt(0);for(const r of e)t=(t<<BigInt(8))+BigInt(r);return BigInt.asIntN(8*e.length,t)}function p(e){l(e);const t=d(e);return(0,n.assert)(t<=BigInt(Number.MAX_SAFE_INTEGER),"Number is not a safe integer. Use `bytesToBigInt` instead."),Number(t)}function m(e){return l(e),(new TextDecoder).decode(e)}function g(e){if("0x"===e?.toLowerCase?.())return new Uint8Array;(0,i.assertIsHexString)(e);const t=(0,i.remove0x)(e).toLowerCase(),r=t.length%2==0?t:`0${t}`,n=new Uint8Array(r.length/2);for(let e=0;e<n.length;e++){const t=r.charCodeAt(2*e),i=r.charCodeAt(2*e+1),u=t-(t<o?s:a),c=i-(i<o?s:a);n[e]=16*u+c}return n}function b(e){(0,n.assert)("bigint"==typeof e,"Value must be a bigint."),(0,n.assert)(e>=BigInt(0),"Value must be a non-negative bigint.");return g(e.toString(16))}function y(e,t){(0,n.assert)("bigint"==typeof e,"Value must be a bigint."),(0,n.assert)("number"==typeof t,"Byte length must be a number."),(0,n.assert)(t>0,"Byte length must be greater than 0."),(0,n.assert)(function(e,t){(0,n.assert)(t>0);const r=e>>BigInt(31);return!((~e&r)+(e&~r)>>BigInt(8*t-1))}(e,t),"Byte length is too small to represent the given value.");let r=e;const i=new Uint8Array(t);for(let e=0;e<i.length;e++)i[e]=Number(BigInt.asUintN(8,r)),r>>=BigInt(8);return i.reverse()}function v(e){(0,n.assert)("number"==typeof e,"Value must be a number."),(0,n.assert)(e>=0,"Value must be a non-negative number."),(0,n.assert)(Number.isSafeInteger(e),"Value is not a safe integer. Use `bigIntToBytes` instead.");return g(e.toString(16))}function w(e){return(0,n.assert)("string"==typeof e,"Value must be a string."),(new TextEncoder).encode(e)}function _(e){if("bigint"==typeof e)return b(e);if("number"==typeof e)return v(e);if("string"==typeof e)return e.startsWith("0x")?g(e):w(e);if(c(e))return e;throw new TypeError(`Unsupported value type: "${typeof e}".`)}function S(e){const t=new Array(e.length);let r=0;for(let n=0;n<e.length;n++){const i=_(e[n]);t[n]=i,r+=i.length}const n=new Uint8Array(r);for(let e=0,r=0;e<t.length;e++)n.set(t[e],r),r+=t[e].length;return n}function E(e){if(void 0!==t&&e instanceof t){const t=e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength);return new DataView(t)}return new DataView(e.buffer,e.byteOffset,e.byteLength)}}).call(this)}).call(this,e("buffer").Buffer)},{"./assert":149,"./hex":157,buffer:365}],152:[function(e,t,r){arguments[4][15][0].apply(r,arguments)},{dup:15,superstruct:601}],153:[function(e,t,r){arguments[4][16][0].apply(r,arguments)},{"./base64":150,dup:16,superstruct:601}],154:[function(e,t,r){arguments[4][17][0].apply(r,arguments)},{"./assert":149,"./bytes":151,"./hex":157,dup:17,superstruct:601}],155:[function(e,t,r){arguments[4][18][0].apply(r,arguments)},{dup:18}],156:[function(e,t,r){arguments[4][19][0].apply(r,arguments)},{dup:19}],157:[function(e,t,r){arguments[4][20][0].apply(r,arguments)},{"./assert":149,"./bytes":151,"@noble/hashes/sha3":321,dup:20,superstruct:601}],158:[function(e,t,r){arguments[4][21][0].apply(r,arguments)},{"./assert":149,"./base64":150,"./bytes":151,"./caip-types":152,"./checksum":153,"./coercers":154,"./collections":155,"./encryption-types":156,"./hex":157,"./json":159,"./keyring":160,"./logging":161,"./misc":162,"./number":163,"./opaque":164,"./time":165,"./transaction-types":166,"./versions":167,dup:21}],159:[function(e,t,r){arguments[4][22][0].apply(r,arguments)},{"./assert":149,dup:22,superstruct:601}],160:[function(e,t,r){arguments[4][23][0].apply(r,arguments)},{dup:23}],161:[function(e,t,r){arguments[4][24][0].apply(r,arguments)},{debug:382,dup:24}],162:[function(e,t,r){arguments[4][25][0].apply(r,arguments)},{dup:25}],163:[function(e,t,r){arguments[4][26][0].apply(r,arguments)},{"./assert":149,"./hex":157,dup:26}],164:[function(e,t,r){arguments[4][27][0].apply(r,arguments)},{dup:27}],165:[function(e,t,r){arguments[4][28][0].apply(r,arguments)},{dup:28}],166:[function(e,t,r){arguments[4][29][0].apply(r,arguments)},{dup:29}],167:[function(e,t,r){arguments[4][30][0].apply(r,arguments)},{"./assert":149,dup:30,semver:557,superstruct:601}],168:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.mnemonicToSeedSync=r.mnemonicToSeed=r.validateMnemonic=r.entropyToMnemonic=r.mnemonicToEntropy=r.generateMnemonic=void 0;
/*! scure-bip39 - MIT License (c) 2022 Patricio Palladino, Paul Miller (paulmillr.com) */
const n=e("@noble/hashes/_assert"),i=e("@noble/hashes/pbkdf2"),s=e("@noble/hashes/sha256"),o=e("@noble/hashes/sha512"),a=e("@noble/hashes/utils"),u=e("@scure/base");function c(e){if("string"!=typeof e)throw new TypeError("Invalid mnemonic type: "+typeof e);return e.normalize("NFKD")}function l(e){const t=c(e),r=t.split(" ");if(![12,15,18,21,24].includes(r.length))throw new Error("Invalid mnemonic");return{nfkd:t,words:r}}function f(e){n.default.bytes(e,16,20,24,28,32)}r.generateMnemonic=function(e,t=128){if(n.default.number(t),t%32!=0||t>256)throw new TypeError("Invalid entropy");return m((0,a.randomBytes)(t/8),e)};const d=e=>{const t=8-e.length/4;return new Uint8Array([(0,s.sha256)(e)[0]>>t<<t])};function h(e){if(!Array.isArray(e)||2048!==e.length||"string"!=typeof e[0])throw new Error("Worlist: expected array of 2048 strings");return e.forEach((e=>{if("string"!=typeof e)throw new Error(`Wordlist: non-string element: ${e}`)})),u.utils.chain(u.utils.checksum(1,d),u.utils.radix2(11,!0),u.utils.alphabet(e))}function p(e,t){let r;if("string"==typeof e){const{words:n}=l(e);r=h(t).decode(n)}else r=h(t).decode(Array.from(new Uint16Array(e.buffer)).map((e=>t[e])));return f(r),r}function m(e,t){f(e);const r=h(t).encode(e).map((e=>t.indexOf(e)));return new Uint8Array(new Uint16Array(r).buffer)}r.mnemonicToEntropy=p,r.entropyToMnemonic=m,r.validateMnemonic=function(e,t){try{p(e,t)}catch(e){return!1}return!0};const g=e=>c(`mnemonic${e}`);function b(e,t){let r;return r="string"==typeof e?(new TextEncoder).encode(l(e).nfkd):(new TextEncoder).encode(Array.from(new Uint16Array(e.buffer)).map((e=>t[e])).join(" ")),r}r.mnemonicToSeed=function(e,t,r=""){const n=b(e,t);return(0,i.pbkdf2Async)(o.sha512,n,g(r),{c:2048,dkLen:64})},r.mnemonicToSeedSync=function(e,t,r=""){const n=b(e,t);return(0,i.pbkdf2)(o.sha512,n,g(r),{c:2048,dkLen:64})}},{"@noble/hashes/_assert":170,"@noble/hashes/pbkdf2":175,"@noble/hashes/sha256":176,"@noble/hashes/sha512":177,"@noble/hashes/utils":178,"@scure/base":325}],169:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.wordlist=void 0,r.wordlist="abandon\nability\nable\nabout\nabove\nabsent\nabsorb\nabstract\nabsurd\nabuse\naccess\naccident\naccount\naccuse\nachieve\nacid\nacoustic\nacquire\nacross\nact\naction\nactor\nactress\nactual\nadapt\nadd\naddict\naddress\nadjust\nadmit\nadult\nadvance\nadvice\naerobic\naffair\nafford\nafraid\nagain\nage\nagent\nagree\nahead\naim\nair\nairport\naisle\nalarm\nalbum\nalcohol\nalert\nalien\nall\nalley\nallow\nalmost\nalone\nalpha\nalready\nalso\nalter\nalways\namateur\namazing\namong\namount\namused\nanalyst\nanchor\nancient\nanger\nangle\nangry\nanimal\nankle\nannounce\nannual\nanother\nanswer\nantenna\nantique\nanxiety\nany\napart\napology\nappear\napple\napprove\napril\narch\narctic\narea\narena\nargue\narm\narmed\narmor\narmy\naround\narrange\narrest\narrive\narrow\nart\nartefact\nartist\nartwork\nask\naspect\nassault\nasset\nassist\nassume\nasthma\nathlete\natom\nattack\nattend\nattitude\nattract\nauction\naudit\naugust\naunt\nauthor\nauto\nautumn\naverage\navocado\navoid\nawake\naware\naway\nawesome\nawful\nawkward\naxis\nbaby\nbachelor\nbacon\nbadge\nbag\nbalance\nbalcony\nball\nbamboo\nbanana\nbanner\nbar\nbarely\nbargain\nbarrel\nbase\nbasic\nbasket\nbattle\nbeach\nbean\nbeauty\nbecause\nbecome\nbeef\nbefore\nbegin\nbehave\nbehind\nbelieve\nbelow\nbelt\nbench\nbenefit\nbest\nbetray\nbetter\nbetween\nbeyond\nbicycle\nbid\nbike\nbind\nbiology\nbird\nbirth\nbitter\nblack\nblade\nblame\nblanket\nblast\nbleak\nbless\nblind\nblood\nblossom\nblouse\nblue\nblur\nblush\nboard\nboat\nbody\nboil\nbomb\nbone\nbonus\nbook\nboost\nborder\nboring\nborrow\nboss\nbottom\nbounce\nbox\nboy\nbracket\nbrain\nbrand\nbrass\nbrave\nbread\nbreeze\nbrick\nbridge\nbrief\nbright\nbring\nbrisk\nbroccoli\nbroken\nbronze\nbroom\nbrother\nbrown\nbrush\nbubble\nbuddy\nbudget\nbuffalo\nbuild\nbulb\nbulk\nbullet\nbundle\nbunker\nburden\nburger\nburst\nbus\nbusiness\nbusy\nbutter\nbuyer\nbuzz\ncabbage\ncabin\ncable\ncactus\ncage\ncake\ncall\ncalm\ncamera\ncamp\ncan\ncanal\ncancel\ncandy\ncannon\ncanoe\ncanvas\ncanyon\ncapable\ncapital\ncaptain\ncar\ncarbon\ncard\ncargo\ncarpet\ncarry\ncart\ncase\ncash\ncasino\ncastle\ncasual\ncat\ncatalog\ncatch\ncategory\ncattle\ncaught\ncause\ncaution\ncave\nceiling\ncelery\ncement\ncensus\ncentury\ncereal\ncertain\nchair\nchalk\nchampion\nchange\nchaos\nchapter\ncharge\nchase\nchat\ncheap\ncheck\ncheese\nchef\ncherry\nchest\nchicken\nchief\nchild\nchimney\nchoice\nchoose\nchronic\nchuckle\nchunk\nchurn\ncigar\ncinnamon\ncircle\ncitizen\ncity\ncivil\nclaim\nclap\nclarify\nclaw\nclay\nclean\nclerk\nclever\nclick\nclient\ncliff\nclimb\nclinic\nclip\nclock\nclog\nclose\ncloth\ncloud\nclown\nclub\nclump\ncluster\nclutch\ncoach\ncoast\ncoconut\ncode\ncoffee\ncoil\ncoin\ncollect\ncolor\ncolumn\ncombine\ncome\ncomfort\ncomic\ncommon\ncompany\nconcert\nconduct\nconfirm\ncongress\nconnect\nconsider\ncontrol\nconvince\ncook\ncool\ncopper\ncopy\ncoral\ncore\ncorn\ncorrect\ncost\ncotton\ncouch\ncountry\ncouple\ncourse\ncousin\ncover\ncoyote\ncrack\ncradle\ncraft\ncram\ncrane\ncrash\ncrater\ncrawl\ncrazy\ncream\ncredit\ncreek\ncrew\ncricket\ncrime\ncrisp\ncritic\ncrop\ncross\ncrouch\ncrowd\ncrucial\ncruel\ncruise\ncrumble\ncrunch\ncrush\ncry\ncrystal\ncube\nculture\ncup\ncupboard\ncurious\ncurrent\ncurtain\ncurve\ncushion\ncustom\ncute\ncycle\ndad\ndamage\ndamp\ndance\ndanger\ndaring\ndash\ndaughter\ndawn\nday\ndeal\ndebate\ndebris\ndecade\ndecember\ndecide\ndecline\ndecorate\ndecrease\ndeer\ndefense\ndefine\ndefy\ndegree\ndelay\ndeliver\ndemand\ndemise\ndenial\ndentist\ndeny\ndepart\ndepend\ndeposit\ndepth\ndeputy\nderive\ndescribe\ndesert\ndesign\ndesk\ndespair\ndestroy\ndetail\ndetect\ndevelop\ndevice\ndevote\ndiagram\ndial\ndiamond\ndiary\ndice\ndiesel\ndiet\ndiffer\ndigital\ndignity\ndilemma\ndinner\ndinosaur\ndirect\ndirt\ndisagree\ndiscover\ndisease\ndish\ndismiss\ndisorder\ndisplay\ndistance\ndivert\ndivide\ndivorce\ndizzy\ndoctor\ndocument\ndog\ndoll\ndolphin\ndomain\ndonate\ndonkey\ndonor\ndoor\ndose\ndouble\ndove\ndraft\ndragon\ndrama\ndrastic\ndraw\ndream\ndress\ndrift\ndrill\ndrink\ndrip\ndrive\ndrop\ndrum\ndry\nduck\ndumb\ndune\nduring\ndust\ndutch\nduty\ndwarf\ndynamic\neager\neagle\nearly\nearn\nearth\neasily\neast\neasy\necho\necology\neconomy\nedge\nedit\neducate\neffort\negg\neight\neither\nelbow\nelder\nelectric\nelegant\nelement\nelephant\nelevator\nelite\nelse\nembark\nembody\nembrace\nemerge\nemotion\nemploy\nempower\nempty\nenable\nenact\nend\nendless\nendorse\nenemy\nenergy\nenforce\nengage\nengine\nenhance\nenjoy\nenlist\nenough\nenrich\nenroll\nensure\nenter\nentire\nentry\nenvelope\nepisode\nequal\nequip\nera\nerase\nerode\nerosion\nerror\nerupt\nescape\nessay\nessence\nestate\neternal\nethics\nevidence\nevil\nevoke\nevolve\nexact\nexample\nexcess\nexchange\nexcite\nexclude\nexcuse\nexecute\nexercise\nexhaust\nexhibit\nexile\nexist\nexit\nexotic\nexpand\nexpect\nexpire\nexplain\nexpose\nexpress\nextend\nextra\neye\neyebrow\nfabric\nface\nfaculty\nfade\nfaint\nfaith\nfall\nfalse\nfame\nfamily\nfamous\nfan\nfancy\nfantasy\nfarm\nfashion\nfat\nfatal\nfather\nfatigue\nfault\nfavorite\nfeature\nfebruary\nfederal\nfee\nfeed\nfeel\nfemale\nfence\nfestival\nfetch\nfever\nfew\nfiber\nfiction\nfield\nfigure\nfile\nfilm\nfilter\nfinal\nfind\nfine\nfinger\nfinish\nfire\nfirm\nfirst\nfiscal\nfish\nfit\nfitness\nfix\nflag\nflame\nflash\nflat\nflavor\nflee\nflight\nflip\nfloat\nflock\nfloor\nflower\nfluid\nflush\nfly\nfoam\nfocus\nfog\nfoil\nfold\nfollow\nfood\nfoot\nforce\nforest\nforget\nfork\nfortune\nforum\nforward\nfossil\nfoster\nfound\nfox\nfragile\nframe\nfrequent\nfresh\nfriend\nfringe\nfrog\nfront\nfrost\nfrown\nfrozen\nfruit\nfuel\nfun\nfunny\nfurnace\nfury\nfuture\ngadget\ngain\ngalaxy\ngallery\ngame\ngap\ngarage\ngarbage\ngarden\ngarlic\ngarment\ngas\ngasp\ngate\ngather\ngauge\ngaze\ngeneral\ngenius\ngenre\ngentle\ngenuine\ngesture\nghost\ngiant\ngift\ngiggle\nginger\ngiraffe\ngirl\ngive\nglad\nglance\nglare\nglass\nglide\nglimpse\nglobe\ngloom\nglory\nglove\nglow\nglue\ngoat\ngoddess\ngold\ngood\ngoose\ngorilla\ngospel\ngossip\ngovern\ngown\ngrab\ngrace\ngrain\ngrant\ngrape\ngrass\ngravity\ngreat\ngreen\ngrid\ngrief\ngrit\ngrocery\ngroup\ngrow\ngrunt\nguard\nguess\nguide\nguilt\nguitar\ngun\ngym\nhabit\nhair\nhalf\nhammer\nhamster\nhand\nhappy\nharbor\nhard\nharsh\nharvest\nhat\nhave\nhawk\nhazard\nhead\nhealth\nheart\nheavy\nhedgehog\nheight\nhello\nhelmet\nhelp\nhen\nhero\nhidden\nhigh\nhill\nhint\nhip\nhire\nhistory\nhobby\nhockey\nhold\nhole\nholiday\nhollow\nhome\nhoney\nhood\nhope\nhorn\nhorror\nhorse\nhospital\nhost\nhotel\nhour\nhover\nhub\nhuge\nhuman\nhumble\nhumor\nhundred\nhungry\nhunt\nhurdle\nhurry\nhurt\nhusband\nhybrid\nice\nicon\nidea\nidentify\nidle\nignore\nill\nillegal\nillness\nimage\nimitate\nimmense\nimmune\nimpact\nimpose\nimprove\nimpulse\ninch\ninclude\nincome\nincrease\nindex\nindicate\nindoor\nindustry\ninfant\ninflict\ninform\ninhale\ninherit\ninitial\ninject\ninjury\ninmate\ninner\ninnocent\ninput\ninquiry\ninsane\ninsect\ninside\ninspire\ninstall\nintact\ninterest\ninto\ninvest\ninvite\ninvolve\niron\nisland\nisolate\nissue\nitem\nivory\njacket\njaguar\njar\njazz\njealous\njeans\njelly\njewel\njob\njoin\njoke\njourney\njoy\njudge\njuice\njump\njungle\njunior\njunk\njust\nkangaroo\nkeen\nkeep\nketchup\nkey\nkick\nkid\nkidney\nkind\nkingdom\nkiss\nkit\nkitchen\nkite\nkitten\nkiwi\nknee\nknife\nknock\nknow\nlab\nlabel\nlabor\nladder\nlady\nlake\nlamp\nlanguage\nlaptop\nlarge\nlater\nlatin\nlaugh\nlaundry\nlava\nlaw\nlawn\nlawsuit\nlayer\nlazy\nleader\nleaf\nlearn\nleave\nlecture\nleft\nleg\nlegal\nlegend\nleisure\nlemon\nlend\nlength\nlens\nleopard\nlesson\nletter\nlevel\nliar\nliberty\nlibrary\nlicense\nlife\nlift\nlight\nlike\nlimb\nlimit\nlink\nlion\nliquid\nlist\nlittle\nlive\nlizard\nload\nloan\nlobster\nlocal\nlock\nlogic\nlonely\nlong\nloop\nlottery\nloud\nlounge\nlove\nloyal\nlucky\nluggage\nlumber\nlunar\nlunch\nluxury\nlyrics\nmachine\nmad\nmagic\nmagnet\nmaid\nmail\nmain\nmajor\nmake\nmammal\nman\nmanage\nmandate\nmango\nmansion\nmanual\nmaple\nmarble\nmarch\nmargin\nmarine\nmarket\nmarriage\nmask\nmass\nmaster\nmatch\nmaterial\nmath\nmatrix\nmatter\nmaximum\nmaze\nmeadow\nmean\nmeasure\nmeat\nmechanic\nmedal\nmedia\nmelody\nmelt\nmember\nmemory\nmention\nmenu\nmercy\nmerge\nmerit\nmerry\nmesh\nmessage\nmetal\nmethod\nmiddle\nmidnight\nmilk\nmillion\nmimic\nmind\nminimum\nminor\nminute\nmiracle\nmirror\nmisery\nmiss\nmistake\nmix\nmixed\nmixture\nmobile\nmodel\nmodify\nmom\nmoment\nmonitor\nmonkey\nmonster\nmonth\nmoon\nmoral\nmore\nmorning\nmosquito\nmother\nmotion\nmotor\nmountain\nmouse\nmove\nmovie\nmuch\nmuffin\nmule\nmultiply\nmuscle\nmuseum\nmushroom\nmusic\nmust\nmutual\nmyself\nmystery\nmyth\nnaive\nname\nnapkin\nnarrow\nnasty\nnation\nnature\nnear\nneck\nneed\nnegative\nneglect\nneither\nnephew\nnerve\nnest\nnet\nnetwork\nneutral\nnever\nnews\nnext\nnice\nnight\nnoble\nnoise\nnominee\nnoodle\nnormal\nnorth\nnose\nnotable\nnote\nnothing\nnotice\nnovel\nnow\nnuclear\nnumber\nnurse\nnut\noak\nobey\nobject\noblige\nobscure\nobserve\nobtain\nobvious\noccur\nocean\noctober\nodor\noff\noffer\noffice\noften\noil\nokay\nold\nolive\nolympic\nomit\nonce\none\nonion\nonline\nonly\nopen\nopera\nopinion\noppose\noption\norange\norbit\norchard\norder\nordinary\norgan\norient\noriginal\norphan\nostrich\nother\noutdoor\nouter\noutput\noutside\noval\noven\nover\nown\nowner\noxygen\noyster\nozone\npact\npaddle\npage\npair\npalace\npalm\npanda\npanel\npanic\npanther\npaper\nparade\nparent\npark\nparrot\nparty\npass\npatch\npath\npatient\npatrol\npattern\npause\npave\npayment\npeace\npeanut\npear\npeasant\npelican\npen\npenalty\npencil\npeople\npepper\nperfect\npermit\nperson\npet\nphone\nphoto\nphrase\nphysical\npiano\npicnic\npicture\npiece\npig\npigeon\npill\npilot\npink\npioneer\npipe\npistol\npitch\npizza\nplace\nplanet\nplastic\nplate\nplay\nplease\npledge\npluck\nplug\nplunge\npoem\npoet\npoint\npolar\npole\npolice\npond\npony\npool\npopular\nportion\nposition\npossible\npost\npotato\npottery\npoverty\npowder\npower\npractice\npraise\npredict\nprefer\nprepare\npresent\npretty\nprevent\nprice\npride\nprimary\nprint\npriority\nprison\nprivate\nprize\nproblem\nprocess\nproduce\nprofit\nprogram\nproject\npromote\nproof\nproperty\nprosper\nprotect\nproud\nprovide\npublic\npudding\npull\npulp\npulse\npumpkin\npunch\npupil\npuppy\npurchase\npurity\npurpose\npurse\npush\nput\npuzzle\npyramid\nquality\nquantum\nquarter\nquestion\nquick\nquit\nquiz\nquote\nrabbit\nraccoon\nrace\nrack\nradar\nradio\nrail\nrain\nraise\nrally\nramp\nranch\nrandom\nrange\nrapid\nrare\nrate\nrather\nraven\nraw\nrazor\nready\nreal\nreason\nrebel\nrebuild\nrecall\nreceive\nrecipe\nrecord\nrecycle\nreduce\nreflect\nreform\nrefuse\nregion\nregret\nregular\nreject\nrelax\nrelease\nrelief\nrely\nremain\nremember\nremind\nremove\nrender\nrenew\nrent\nreopen\nrepair\nrepeat\nreplace\nreport\nrequire\nrescue\nresemble\nresist\nresource\nresponse\nresult\nretire\nretreat\nreturn\nreunion\nreveal\nreview\nreward\nrhythm\nrib\nribbon\nrice\nrich\nride\nridge\nrifle\nright\nrigid\nring\nriot\nripple\nrisk\nritual\nrival\nriver\nroad\nroast\nrobot\nrobust\nrocket\nromance\nroof\nrookie\nroom\nrose\nrotate\nrough\nround\nroute\nroyal\nrubber\nrude\nrug\nrule\nrun\nrunway\nrural\nsad\nsaddle\nsadness\nsafe\nsail\nsalad\nsalmon\nsalon\nsalt\nsalute\nsame\nsample\nsand\nsatisfy\nsatoshi\nsauce\nsausage\nsave\nsay\nscale\nscan\nscare\nscatter\nscene\nscheme\nschool\nscience\nscissors\nscorpion\nscout\nscrap\nscreen\nscript\nscrub\nsea\nsearch\nseason\nseat\nsecond\nsecret\nsection\nsecurity\nseed\nseek\nsegment\nselect\nsell\nseminar\nsenior\nsense\nsentence\nseries\nservice\nsession\nsettle\nsetup\nseven\nshadow\nshaft\nshallow\nshare\nshed\nshell\nsheriff\nshield\nshift\nshine\nship\nshiver\nshock\nshoe\nshoot\nshop\nshort\nshoulder\nshove\nshrimp\nshrug\nshuffle\nshy\nsibling\nsick\nside\nsiege\nsight\nsign\nsilent\nsilk\nsilly\nsilver\nsimilar\nsimple\nsince\nsing\nsiren\nsister\nsituate\nsix\nsize\nskate\nsketch\nski\nskill\nskin\nskirt\nskull\nslab\nslam\nsleep\nslender\nslice\nslide\nslight\nslim\nslogan\nslot\nslow\nslush\nsmall\nsmart\nsmile\nsmoke\nsmooth\nsnack\nsnake\nsnap\nsniff\nsnow\nsoap\nsoccer\nsocial\nsock\nsoda\nsoft\nsolar\nsoldier\nsolid\nsolution\nsolve\nsomeone\nsong\nsoon\nsorry\nsort\nsoul\nsound\nsoup\nsource\nsouth\nspace\nspare\nspatial\nspawn\nspeak\nspecial\nspeed\nspell\nspend\nsphere\nspice\nspider\nspike\nspin\nspirit\nsplit\nspoil\nsponsor\nspoon\nsport\nspot\nspray\nspread\nspring\nspy\nsquare\nsqueeze\nsquirrel\nstable\nstadium\nstaff\nstage\nstairs\nstamp\nstand\nstart\nstate\nstay\nsteak\nsteel\nstem\nstep\nstereo\nstick\nstill\nsting\nstock\nstomach\nstone\nstool\nstory\nstove\nstrategy\nstreet\nstrike\nstrong\nstruggle\nstudent\nstuff\nstumble\nstyle\nsubject\nsubmit\nsubway\nsuccess\nsuch\nsudden\nsuffer\nsugar\nsuggest\nsuit\nsummer\nsun\nsunny\nsunset\nsuper\nsupply\nsupreme\nsure\nsurface\nsurge\nsurprise\nsurround\nsurvey\nsuspect\nsustain\nswallow\nswamp\nswap\nswarm\nswear\nsweet\nswift\nswim\nswing\nswitch\nsword\nsymbol\nsymptom\nsyrup\nsystem\ntable\ntackle\ntag\ntail\ntalent\ntalk\ntank\ntape\ntarget\ntask\ntaste\ntattoo\ntaxi\nteach\nteam\ntell\nten\ntenant\ntennis\ntent\nterm\ntest\ntext\nthank\nthat\ntheme\nthen\ntheory\nthere\nthey\nthing\nthis\nthought\nthree\nthrive\nthrow\nthumb\nthunder\nticket\ntide\ntiger\ntilt\ntimber\ntime\ntiny\ntip\ntired\ntissue\ntitle\ntoast\ntobacco\ntoday\ntoddler\ntoe\ntogether\ntoilet\ntoken\ntomato\ntomorrow\ntone\ntongue\ntonight\ntool\ntooth\ntop\ntopic\ntopple\ntorch\ntornado\ntortoise\ntoss\ntotal\ntourist\ntoward\ntower\ntown\ntoy\ntrack\ntrade\ntraffic\ntragic\ntrain\ntransfer\ntrap\ntrash\ntravel\ntray\ntreat\ntree\ntrend\ntrial\ntribe\ntrick\ntrigger\ntrim\ntrip\ntrophy\ntrouble\ntruck\ntrue\ntruly\ntrumpet\ntrust\ntruth\ntry\ntube\ntuition\ntumble\ntuna\ntunnel\nturkey\nturn\nturtle\ntwelve\ntwenty\ntwice\ntwin\ntwist\ntwo\ntype\ntypical\nugly\numbrella\nunable\nunaware\nuncle\nuncover\nunder\nundo\nunfair\nunfold\nunhappy\nuniform\nunique\nunit\nuniverse\nunknown\nunlock\nuntil\nunusual\nunveil\nupdate\nupgrade\nuphold\nupon\nupper\nupset\nurban\nurge\nusage\nuse\nused\nuseful\nuseless\nusual\nutility\nvacant\nvacuum\nvague\nvalid\nvalley\nvalve\nvan\nvanish\nvapor\nvarious\nvast\nvault\nvehicle\nvelvet\nvendor\nventure\nvenue\nverb\nverify\nversion\nvery\nvessel\nveteran\nviable\nvibrant\nvicious\nvictory\nvideo\nview\nvillage\nvintage\nviolin\nvirtual\nvirus\nvisa\nvisit\nvisual\nvital\nvivid\nvocal\nvoice\nvoid\nvolcano\nvolume\nvote\nvoyage\nwage\nwagon\nwait\nwalk\nwall\nwalnut\nwant\nwarfare\nwarm\nwarrior\nwash\nwasp\nwaste\nwater\nwave\nway\nwealth\nweapon\nwear\nweasel\nweather\nweb\nwedding\nweekend\nweird\nwelcome\nwest\nwet\nwhale\nwhat\nwheat\nwheel\nwhen\nwhere\nwhip\nwhisper\nwide\nwidth\nwife\nwild\nwill\nwin\nwindow\nwine\nwing\nwink\nwinner\nwinter\nwire\nwisdom\nwise\nwish\nwitness\nwolf\nwoman\nwonder\nwood\nwool\nword\nwork\nworld\nworry\nworth\nwrap\nwreck\nwrestle\nwrist\nwrite\nwrong\nyard\nyear\nyellow\nyou\nyoung\nyouth\nzebra\nzero\nzone\nzoo".split("\n")},{}],170:[function(e,t,r){"use strict";function n(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`Wrong positive integer: ${e}`)}function i(e){if("boolean"!=typeof e)throw new Error(`Expected boolean, not ${e}`)}function s(e,...t){if(!(e instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(t.length>0&&!t.includes(e.length))throw new TypeError(`Expected Uint8Array of length ${t}, not of length=${e.length}`)}function o(e){if("function"!=typeof e||"function"!=typeof e.create)throw new Error("Hash should be wrapped by utils.wrapConstructor");n(e.outputLen),n(e.blockLen)}function a(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function u(e,t){s(e);const r=t.outputLen;if(e.length<r)throw new Error(`digestInto() expects output buffer of length at least ${r}`)}Object.defineProperty(r,"__esModule",{value:!0}),r.output=r.exists=r.hash=r.bytes=r.bool=r.number=void 0,r.number=n,r.bool=i,r.bytes=s,r.hash=o,r.exists=a,r.output=u;const c={number:n,bool:i,bytes:s,hash:o,exists:a,output:u};r.default=c},{}],171:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.SHA2=void 0;const n=e("./_assert.js"),i=e("./utils.js");class s extends i.Hash{constructor(e,t,r,n){super(),this.blockLen=e,this.outputLen=t,this.padOffset=r,this.isLE=n,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=(0,i.createView)(this.buffer)}update(e){n.default.exists(this);const{view:t,buffer:r,blockLen:s}=this,o=(e=(0,i.toBytes)(e)).length;for(let n=0;n<o;){const a=Math.min(s-this.pos,o-n);if(a!==s)r.set(e.subarray(n,n+a),this.pos),this.pos+=a,n+=a,this.pos===s&&(this.process(t,0),this.pos=0);else{const t=(0,i.createView)(e);for(;s<=o-n;n+=s)this.process(t,n)}}return this.length+=e.length,this.roundClean(),this}digestInto(e){n.default.exists(this),n.default.output(e,this),this.finished=!0;const{buffer:t,view:r,blockLen:s,isLE:o}=this;let{pos:a}=this;t[a++]=128,this.buffer.subarray(a).fill(0),this.padOffset>s-a&&(this.process(r,0),a=0);for(let e=a;e<s;e++)t[e]=0;!function(e,t,r,n){if("function"==typeof e.setBigUint64)return e.setBigUint64(t,r,n);const i=BigInt(32),s=BigInt(4294967295),o=Number(r>>i&s),a=Number(r&s),u=n?4:0,c=n?0:4;e.setUint32(t+u,o,n),e.setUint32(t+c,a,n)}(r,s-8,BigInt(8*this.length),o),this.process(r,0);const u=(0,i.createView)(e);this.get().forEach(((e,t)=>u.setUint32(4*t,e,o)))}digest(){const{buffer:e,outputLen:t}=this;this.digestInto(e);const r=e.slice(0,t);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:t,buffer:r,length:n,finished:i,destroyed:s,pos:o}=this;return e.length=n,e.pos=o,e.finished=i,e.destroyed=s,n%t&&e.buffer.set(r),e}}r.SHA2=s},{"./_assert.js":170,"./utils.js":178}],172:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.add=r.toBig=r.split=r.fromBig=void 0;const n=BigInt(2**32-1),i=BigInt(32);function s(e,t=!1){return t?{h:Number(e&n),l:Number(e>>i&n)}:{h:0|Number(e>>i&n),l:0|Number(e&n)}}function o(e,t=!1){let r=new Uint32Array(e.length),n=new Uint32Array(e.length);for(let i=0;i<e.length;i++){const{h:o,l:a}=s(e[i],t);[r[i],n[i]]=[o,a]}return[r,n]}r.fromBig=s,r.split=o;r.toBig=(e,t)=>BigInt(e>>>0)<<i|BigInt(t>>>0);function a(e,t,r,n){const i=(t>>>0)+(n>>>0);return{h:e+r+(i/2**32|0)|0,l:0|i}}r.add=a;const u={fromBig:s,split:o,toBig:r.toBig,shrSH:(e,t,r)=>e>>>r,shrSL:(e,t,r)=>e<<32-r|t>>>r,rotrSH:(e,t,r)=>e>>>r|t<<32-r,rotrSL:(e,t,r)=>e<<32-r|t>>>r,rotrBH:(e,t,r)=>e<<64-r|t>>>r-32,rotrBL:(e,t,r)=>e>>>r-32|t<<64-r,rotr32H:(e,t)=>t,rotr32L:(e,t)=>e,rotlSH:(e,t,r)=>e<<r|t>>>32-r,rotlSL:(e,t,r)=>t<<r|e>>>32-r,rotlBH:(e,t,r)=>t<<r-32|e>>>64-r,rotlBL:(e,t,r)=>e<<r-32|t>>>64-r,add:a,add3L:(e,t,r)=>(e>>>0)+(t>>>0)+(r>>>0),add3H:(e,t,r,n)=>t+r+n+(e/2**32|0)|0,add4L:(e,t,r,n)=>(e>>>0)+(t>>>0)+(r>>>0)+(n>>>0),add4H:(e,t,r,n,i)=>t+r+n+i+(e/2**32|0)|0,add5H:(e,t,r,n,i,s)=>t+r+n+i+s+(e/2**32|0)|0,add5L:(e,t,r,n,i)=>(e>>>0)+(t>>>0)+(r>>>0)+(n>>>0)+(i>>>0)};r.default=u},{}],173:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.crypto=void 0,r.crypto={node:void 0,web:"object"==typeof self&&"crypto"in self?self.crypto:void 0}},{}],174:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.hmac=void 0;const n=e("./_assert.js"),i=e("./utils.js");class s extends i.Hash{constructor(e,t){super(),this.finished=!1,this.destroyed=!1,n.default.hash(e);const r=(0,i.toBytes)(t);if(this.iHash=e.create(),"function"!=typeof this.iHash.update)throw new TypeError("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const s=this.blockLen,o=new Uint8Array(s);o.set(r.length>s?e.create().update(r).digest():r);for(let e=0;e<o.length;e++)o[e]^=54;this.iHash.update(o),this.oHash=e.create();for(let e=0;e<o.length;e++)o[e]^=106;this.oHash.update(o),o.fill(0)}update(e){return n.default.exists(this),this.iHash.update(e),this}digestInto(e){n.default.exists(this),n.default.bytes(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:t,iHash:r,finished:n,destroyed:i,blockLen:s,outputLen:o}=this;return e.finished=n,e.destroyed=i,e.blockLen=s,e.outputLen=o,e.oHash=t._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}r.hmac=(e,t,r)=>new s(e,t).update(r).digest(),r.hmac.create=(e,t)=>new s(e,t)},{"./_assert.js":170,"./utils.js":178}],175:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.pbkdf2Async=r.pbkdf2=void 0;const n=e("./_assert.js"),i=e("./hmac.js"),s=e("./utils.js");function o(e,t,r,o){n.default.hash(e);const a=(0,s.checkOpts)({dkLen:32,asyncTick:10},o),{c:u,dkLen:c,asyncTick:l}=a;if(n.default.number(u),n.default.number(c),n.default.number(l),u<1)throw new Error("PBKDF2: iterations (c) should be >= 1");const f=(0,s.toBytes)(t),d=(0,s.toBytes)(r),h=new Uint8Array(c),p=i.hmac.create(e,f),m=p._cloneInto().update(d);return{c:u,dkLen:c,asyncTick:l,DK:h,PRF:p,PRFSalt:m}}function a(e,t,r,n,i){return e.destroy(),t.destroy(),n&&n.destroy(),i.fill(0),r}r.pbkdf2=function(e,t,r,n){const{c:i,dkLen:u,DK:c,PRF:l,PRFSalt:f}=o(e,t,r,n);let d;const h=new Uint8Array(4),p=(0,s.createView)(h),m=new Uint8Array(l.outputLen);for(let e=1,t=0;t<u;e++,t+=l.outputLen){const r=c.subarray(t,t+l.outputLen);p.setInt32(0,e,!1),(d=f._cloneInto(d)).update(h).digestInto(m),r.set(m.subarray(0,r.length));for(let e=1;e<i;e++){l._cloneInto(d).update(m).digestInto(m);for(let e=0;e<r.length;e++)r[e]^=m[e]}}return a(l,f,c,d,m)},r.pbkdf2Async=async function(e,t,r,n){const{c:i,dkLen:u,asyncTick:c,DK:l,PRF:f,PRFSalt:d}=o(e,t,r,n);let h;const p=new Uint8Array(4),m=(0,s.createView)(p),g=new Uint8Array(f.outputLen);for(let e=1,t=0;t<u;e++,t+=f.outputLen){const r=l.subarray(t,t+f.outputLen);m.setInt32(0,e,!1),(h=d._cloneInto(h)).update(p).digestInto(g),r.set(g.subarray(0,r.length)),await(0,s.asyncLoop)(i-1,c,(e=>{f._cloneInto(h).update(g).digestInto(g);for(let e=0;e<r.length;e++)r[e]^=g[e]}))}return a(f,d,l,h,g)}},{"./_assert.js":170,"./hmac.js":174,"./utils.js":178}],176:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.sha256=void 0;const n=e("./_sha2.js"),i=e("./utils.js"),s=(e,t,r)=>e&t^e&r^t&r,o=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),a=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),u=new Uint32Array(64);class c extends n.SHA2{constructor(){super(64,32,8,!1),this.A=0|a[0],this.B=0|a[1],this.C=0|a[2],this.D=0|a[3],this.E=0|a[4],this.F=0|a[5],this.G=0|a[6],this.H=0|a[7]}get(){const{A:e,B:t,C:r,D:n,E:i,F:s,G:o,H:a}=this;return[e,t,r,n,i,s,o,a]}set(e,t,r,n,i,s,o,a){this.A=0|e,this.B=0|t,this.C=0|r,this.D=0|n,this.E=0|i,this.F=0|s,this.G=0|o,this.H=0|a}process(e,t){for(let r=0;r<16;r++,t+=4)u[r]=e.getUint32(t,!1);for(let e=16;e<64;e++){const t=u[e-15],r=u[e-2],n=(0,i.rotr)(t,7)^(0,i.rotr)(t,18)^t>>>3,s=(0,i.rotr)(r,17)^(0,i.rotr)(r,19)^r>>>10;u[e]=s+u[e-7]+n+u[e-16]|0}let{A:r,B:n,C:a,D:c,E:l,F:f,G:d,H:h}=this;for(let e=0;e<64;e++){const t=h+((0,i.rotr)(l,6)^(0,i.rotr)(l,11)^(0,i.rotr)(l,25))+((p=l)&f^~p&d)+o[e]+u[e]|0,m=((0,i.rotr)(r,2)^(0,i.rotr)(r,13)^(0,i.rotr)(r,22))+s(r,n,a)|0;h=d,d=f,f=l,l=c+t|0,c=a,a=n,n=r,r=t+m|0}var p;r=r+this.A|0,n=n+this.B|0,a=a+this.C|0,c=c+this.D|0,l=l+this.E|0,f=f+this.F|0,d=d+this.G|0,h=h+this.H|0,this.set(r,n,a,c,l,f,d,h)}roundClean(){u.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}r.sha256=(0,i.wrapConstructor)((()=>new c))},{"./_sha2.js":171,"./utils.js":178}],177:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.sha384=r.sha512_256=r.sha512=r.SHA512=void 0;const n=e("./_sha2.js"),i=e("./_u64.js"),s=e("./utils.js"),[o,a]=i.default.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map((e=>BigInt(e)))),u=new Uint32Array(80),c=new Uint32Array(80);class l extends n.SHA2{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:e,Al:t,Bh:r,Bl:n,Ch:i,Cl:s,Dh:o,Dl:a,Eh:u,El:c,Fh:l,Fl:f,Gh:d,Gl:h,Hh:p,Hl:m}=this;return[e,t,r,n,i,s,o,a,u,c,l,f,d,h,p,m]}set(e,t,r,n,i,s,o,a,u,c,l,f,d,h,p,m){this.Ah=0|e,this.Al=0|t,this.Bh=0|r,this.Bl=0|n,this.Ch=0|i,this.Cl=0|s,this.Dh=0|o,this.Dl=0|a,this.Eh=0|u,this.El=0|c,this.Fh=0|l,this.Fl=0|f,this.Gh=0|d,this.Gl=0|h,this.Hh=0|p,this.Hl=0|m}process(e,t){for(let r=0;r<16;r++,t+=4)u[r]=e.getUint32(t),c[r]=e.getUint32(t+=4);for(let e=16;e<80;e++){const t=0|u[e-15],r=0|c[e-15],n=i.default.rotrSH(t,r,1)^i.default.rotrSH(t,r,8)^i.default.shrSH(t,r,7),s=i.default.rotrSL(t,r,1)^i.default.rotrSL(t,r,8)^i.default.shrSL(t,r,7),o=0|u[e-2],a=0|c[e-2],l=i.default.rotrSH(o,a,19)^i.default.rotrBH(o,a,61)^i.default.shrSH(o,a,6),f=i.default.rotrSL(o,a,19)^i.default.rotrBL(o,a,61)^i.default.shrSL(o,a,6),d=i.default.add4L(s,f,c[e-7],c[e-16]),h=i.default.add4H(d,n,l,u[e-7],u[e-16]);u[e]=0|h,c[e]=0|d}let{Ah:r,Al:n,Bh:s,Bl:l,Ch:f,Cl:d,Dh:h,Dl:p,Eh:m,El:g,Fh:b,Fl:y,Gh:v,Gl:w,Hh:_,Hl:S}=this;for(let e=0;e<80;e++){const t=i.default.rotrSH(m,g,14)^i.default.rotrSH(m,g,18)^i.default.rotrBH(m,g,41),E=i.default.rotrSL(m,g,14)^i.default.rotrSL(m,g,18)^i.default.rotrBL(m,g,41),x=m&b^~m&v,A=g&y^~g&w,k=i.default.add5L(S,E,A,a[e],c[e]),M=i.default.add5H(k,_,t,x,o[e],u[e]),T=0|k,O=i.default.rotrSH(r,n,28)^i.default.rotrBH(r,n,34)^i.default.rotrBH(r,n,39),R=i.default.rotrSL(r,n,28)^i.default.rotrBL(r,n,34)^i.default.rotrBL(r,n,39),P=r&s^r&f^s&f,C=n&l^n&d^l&d;_=0|v,S=0|w,v=0|b,w=0|y,b=0|m,y=0|g,({h:m,l:g}=i.default.add(0|h,0|p,0|M,0|T)),h=0|f,p=0|d,f=0|s,d=0|l,s=0|r,l=0|n;const I=i.default.add3L(T,R,C);r=i.default.add3H(I,M,O,P),n=0|I}({h:r,l:n}=i.default.add(0|this.Ah,0|this.Al,0|r,0|n)),({h:s,l:l}=i.default.add(0|this.Bh,0|this.Bl,0|s,0|l)),({h:f,l:d}=i.default.add(0|this.Ch,0|this.Cl,0|f,0|d)),({h:h,l:p}=i.default.add(0|this.Dh,0|this.Dl,0|h,0|p)),({h:m,l:g}=i.default.add(0|this.Eh,0|this.El,0|m,0|g)),({h:b,l:y}=i.default.add(0|this.Fh,0|this.Fl,0|b,0|y)),({h:v,l:w}=i.default.add(0|this.Gh,0|this.Gl,0|v,0|w)),({h:_,l:S}=i.default.add(0|this.Hh,0|this.Hl,0|_,0|S)),this.set(r,n,s,l,f,d,h,p,m,g,b,y,v,w,_,S)}roundClean(){u.fill(0),c.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}r.SHA512=l;class f extends l{constructor(){super(),this.Ah=573645204,this.Al=-64227540,this.Bh=-1621794909,this.Bl=-934517566,this.Ch=596883563,this.Cl=1867755857,this.Dh=-1774684391,this.Dl=1497426621,this.Eh=-1775747358,this.El=-1467023389,this.Fh=-1101128155,this.Fl=1401305490,this.Gh=721525244,this.Gl=746961066,this.Hh=246885852,this.Hl=-2117784414,this.outputLen=32}}class d extends l{constructor(){super(),this.Ah=-876896931,this.Al=-1056596264,this.Bh=1654270250,this.Bl=914150663,this.Ch=-1856437926,this.Cl=812702999,this.Dh=355462360,this.Dl=-150054599,this.Eh=1731405415,this.El=-4191439,this.Fh=-1900787065,this.Fl=1750603025,this.Gh=-619958771,this.Gl=1694076839,this.Hh=1203062813,this.Hl=-1090891868,this.outputLen=48}}r.sha512=(0,s.wrapConstructor)((()=>new l)),r.sha512_256=(0,s.wrapConstructor)((()=>new f)),r.sha384=(0,s.wrapConstructor)((()=>new d))},{"./_sha2.js":171,"./_u64.js":172,"./utils.js":178}],178:[function(e,t,r){"use strict";
/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */Object.defineProperty(r,"__esModule",{value:!0}),r.randomBytes=r.wrapConstructorWithOpts=r.wrapConstructor=r.checkOpts=r.Hash=r.concatBytes=r.toBytes=r.utf8ToBytes=r.asyncLoop=r.nextTick=r.hexToBytes=r.bytesToHex=r.isLE=r.rotr=r.createView=r.u32=r.u8=void 0;const n=e("@noble/hashes/crypto");r.u8=e=>new Uint8Array(e.buffer,e.byteOffset,e.byteLength);r.u32=e=>new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4));r.createView=e=>new DataView(e.buffer,e.byteOffset,e.byteLength);if(r.rotr=(e,t)=>e<<32-t|e>>>t,r.isLE=68===new Uint8Array(new Uint32Array([287454020]).buffer)[0],!r.isLE)throw new Error("Non little-endian hardware is not supported");const i=Array.from({length:256},((e,t)=>t.toString(16).padStart(2,"0")));r.bytesToHex=function(e){if(!(e instanceof Uint8Array))throw new Error("Uint8Array expected");let t="";for(let r=0;r<e.length;r++)t+=i[e[r]];return t},r.hexToBytes=function(e){if("string"!=typeof e)throw new TypeError("hexToBytes: expected string, got "+typeof e);if(e.length%2)throw new Error("hexToBytes: received invalid unpadded hex");const t=new Uint8Array(e.length/2);for(let r=0;r<t.length;r++){const n=2*r,i=e.slice(n,n+2),s=Number.parseInt(i,16);if(Number.isNaN(s)||s<0)throw new Error("Invalid byte sequence");t[r]=s}return t};function s(e){if("string"!=typeof e)throw new TypeError("utf8ToBytes expected string, got "+typeof e);return(new TextEncoder).encode(e)}function o(e){if("string"==typeof e&&(e=s(e)),!(e instanceof Uint8Array))throw new TypeError(`Expected input type is Uint8Array (got ${typeof e})`);return e}r.nextTick=async()=>{},r.asyncLoop=async function(e,t,n){let i=Date.now();for(let s=0;s<e;s++){n(s);const e=Date.now()-i;e>=0&&e<t||(await(0,r.nextTick)(),i+=e)}},r.utf8ToBytes=s,r.toBytes=o,r.concatBytes=function(...e){if(!e.every((e=>e instanceof Uint8Array)))throw new Error("Uint8Array list expected");if(1===e.length)return e[0];const t=e.reduce(((e,t)=>e+t.length),0),r=new Uint8Array(t);for(let t=0,n=0;t<e.length;t++){const i=e[t];r.set(i,n),n+=i.length}return r};r.Hash=class{clone(){return this._cloneInto()}};r.checkOpts=function(e,t){if(void 0!==t&&("object"!=typeof t||(r=t,"[object Object]"!==Object.prototype.toString.call(r)||r.constructor!==Object)))throw new TypeError("Options should be object or undefined");var r;return Object.assign(e,t)},r.wrapConstructor=function(e){const t=t=>e().update(o(t)).digest(),r=e();return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=()=>e(),t},r.wrapConstructorWithOpts=function(e){const t=(t,r)=>e(r).update(o(t)).digest(),r=e({});return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=t=>e(t),t},r.randomBytes=function(e=32){if(n.crypto.web)return n.crypto.web.getRandomValues(new Uint8Array(e));if(n.crypto.node)return new Uint8Array(n.crypto.node.randomBytes(e).buffer);throw new Error("The environment doesn't have randomBytes function")}},{"@noble/hashes/crypto":173}],179:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(r,{permittedMethods:function(){return n.handlers},createSnapsMethodMiddleware:function(){return n.createSnapsMethodMiddleware},SnapCaveatType:function(){return o.SnapCaveatType},selectHooks:function(){return a.selectHooks}});const n=e("./permitted");var i,s;i=e("./restricted"),s=r,Object.keys(i).forEach((function(e){"default"===e||Object.prototype.hasOwnProperty.call(s,e)||Object.defineProperty(s,e,{enumerable:!0,get:function(){return i[e]}})}));const o=e("@metamask/snaps-utils"),a=e("./utils")},{"./permitted":184,"./restricted":199,"./utils":204,"@metamask/snaps-utils":260}],180:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"handleInstallSnaps",{enumerable:!0,get:function(){return s}});const n=e("@metamask/rpc-errors"),i=e("@metamask/utils");async function s(e,t){if(!(0,i.isObject)(e))throw n.rpcErrors.invalidParams({message:"Invalid snap installation params.",data:{requestedSnaps:e}});if(0===Object.keys(e).length)throw n.rpcErrors.invalidParams({message:"Must specify at least one snap to install.",data:{requestedSnaps:e}});return await t(e)}},{"@metamask/rpc-errors":147,"@metamask/utils":214}],181:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(r,{GetFileArgsStruct:function(){return a},getFileHandler:function(){return u}});const n=e("@metamask/rpc-errors"),i=e("@metamask/snaps-utils"),s=e("@metamask/utils"),o=e("superstruct"),a=(0,o.object)({path:(0,o.string)(),encoding:(0,o.optional)((0,o.union)([(0,i.enumValue)(i.AuxiliaryFileEncoding.Base64),(0,i.enumValue)(i.AuxiliaryFileEncoding.Hex),(0,i.enumValue)(i.AuxiliaryFileEncoding.Utf8)]))}),u={methodNames:["snap_getFile"],implementation:async function(e,t,r,o,{getSnapFile:u}){const{params:c}=e;(0,s.assertStruct)(c,a,'Invalid "snap_getFile" parameters',n.rpcErrors.invalidParams);try{t.result=await u(c.path,c.encoding??i.AuxiliaryFileEncoding.Base64)}catch(e){return o(e)}return o()},hookNames:{getSnapFile:!0}}},{"@metamask/rpc-errors":147,"@metamask/snaps-utils":260,"@metamask/utils":214,superstruct:601}],182:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"getSnapsHandler",{enumerable:!0,get:function(){return n}});const n={methodNames:["wallet_getSnaps"],implementation:async function(e,t,r,n,{getSnaps:i}){return t.result=await i(),n()},hookNames:{getSnaps:!0}}},{}],183:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(r,{methodHandlers:function(){return u},handlers:function(){return c}});const n=e("./getFile"),i=e("./getSnaps"),s=e("./invokeKeyring"),o=e("./invokeSnapSugar"),a=e("./requestSnaps"),u={wallet_getSnaps:i.getSnapsHandler,wallet_requestSnaps:a.requestSnapsHandler,wallet_invokeSnap:o.invokeSnapSugarHandler,wallet_invokeKeyring:s.invokeKeyringHandler,snap_getFile:n.getFileHandler},c=Object.values(u)},{"./getFile":181,"./getSnaps":182,"./invokeKeyring":185,"./invokeSnapSugar":186,"./requestSnaps":188}],184:[function(e,t,r){"use strict";function n(e,t){return Object.keys(e).forEach((function(r){"default"===r||Object.prototype.hasOwnProperty.call(t,r)||Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[r]}})})),e}Object.defineProperty(r,"__esModule",{value:!0}),n(e("./handlers"),r),n(e("./middleware"),r)},{"./handlers":183,"./middleware":187}],185:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"invokeKeyringHandler",{enumerable:!0,get:function(){return a}});const n=e("@metamask/rpc-errors"),i=e("@metamask/snaps-utils"),s=e("@metamask/utils"),o=e("./invokeSnapSugar"),a={methodNames:["wallet_invokeKeyring"],implementation:async function(e,t,r,a,{handleSnapRpcRequest:u,hasPermission:c,getSnap:l,getAllowedKeyringMethods:f}){let d;try{d=(0,o.getValidatedParams)(e.params)}catch(e){return a(e)}const{origin:h}=e,{snapId:p,request:m}=d;if(!h||!c(h,i.WALLET_SNAP_PERMISSION_KEY))return a(n.rpcErrors.invalidRequest({message:`The snap "${p}" is not connected to "${h}". Please connect before invoking the snap.`}));if(!l(p))return a(n.rpcErrors.invalidRequest({message:`The snap "${p}" is not installed. Please install it first, before invoking the snap.`}));if(!(0,s.hasProperty)(m,"method")||"string"!=typeof m.method)return a(n.rpcErrors.invalidRequest({message:"The request must have a method."}));if(!f(h).includes(m.method))return a(n.rpcErrors.invalidRequest({message:`The origin "${h}" is not allowed to invoke the method "${m.method}".`}));try{t.result=await u({snapId:p,origin:h,request:m,handler:i.HandlerType.OnKeyringRequest})}catch(e){return a(e)}return a()},hookNames:{hasPermission:!0,handleSnapRpcRequest:!0,getSnap:!0,getAllowedKeyringMethods:!0}}},{"./invokeSnapSugar":186,"@metamask/rpc-errors":147,"@metamask/snaps-utils":260,"@metamask/utils":214}],186:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(r,{invokeSnapSugarHandler:function(){return s},invokeSnapSugar:function(){return o},getValidatedParams:function(){return a}});const n=e("@metamask/rpc-errors"),i=e("@metamask/utils"),s={methodNames:["wallet_invokeSnap"],implementation:o,hookNames:void 0};function o(e,t,r,n){let i;try{i=a(e.params)}catch(e){return n(e)}return e.method="wallet_snap",e.params=i,r()}function a(e){if(!(0,i.isObject)(e))throw n.rpcErrors.invalidParams({message:"Expected params to be a single object."});const{snapId:t,request:r}=e;if(!t||"string"!=typeof t||""===t)throw n.rpcErrors.invalidParams({message:"Must specify a valid snap ID."});if(!(0,i.isObject)(r))throw n.rpcErrors.invalidParams({message:"Expected request to be a single object."});return e}},{"@metamask/rpc-errors":147,"@metamask/utils":214}],187:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"createSnapsMethodMiddleware",{enumerable:!0,get:function(){return a}});const n=e("@metamask/rpc-errors"),i=e("@metamask/snaps-utils"),s=e("../utils"),o=e("./handlers");function a(e,t){return async function(r,a,u,c){const l=o.methodHandlers[r.method];if(l){if(r.method.startsWith("snap_")&&!e)return c(n.rpcErrors.methodNotFound());const{implementation:o,hookNames:f}=l;try{return await o(r,a,u,c,(0,s.selectHooks)(t,f))}catch(e){return(0,i.logError)(e),c(e)}}return u()}}},{"../utils":204,"./handlers":183,"@metamask/rpc-errors":147,"@metamask/snaps-utils":260}],188:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(r,{requestSnapsHandler:function(){return u},hasRequestedSnaps:function(){return c},getSnapPermissionsRequest:function(){return l}});const n=e("@metamask/rpc-errors"),i=e("@metamask/snaps-utils"),s=e("@metamask/utils"),o=e("../restricted/invokeSnap"),a=e("./common/snapInstallation"),u={methodNames:["wallet_requestSnaps"],implementation:async function(e,t,r,u,{installSnaps:f,requestPermissions:d,getPermissions:h}){const p=e.params;if(!(0,s.isObject)(p))return u(n.rpcErrors.invalidParams({message:'"params" must be an object.'}));try{if(!Object.keys(p).length)throw new Error("Request must have at least one requested snap.");const e={[o.WALLET_SNAP_PERMISSION_KEY]:{caveats:[{type:i.SnapCaveatType.SnapIds,value:p}]}},r=await h();if(r)if(c(r,p))t.result=await(0,a.handleInstallSnaps)(p,f);else{const n=l(r,e),[,i]=await d(n);t.result=i.data[o.WALLET_SNAP_PERMISSION_KEY]}else{const[,r]=await d(e);t.result=r.data[o.WALLET_SNAP_PERMISSION_KEY]}}catch(e){t.error=e}return u()},hookNames:{installSnaps:!0,requestPermissions:!0,getPermissions:!0}};function c(e,t){const r=e[o.WALLET_SNAP_PERMISSION_KEY]?.caveats?.find((e=>e.type===i.SnapCaveatType.SnapIds)),n=r?.value;return!!(0,s.isObject)(n)&&Object.keys(t).every((e=>(0,s.hasProperty)(n,e)))}function l(e,t){if((0,i.verifyRequestedSnapPermissions)(t),!e[o.WALLET_SNAP_PERMISSION_KEY])return t;const r=e[o.WALLET_SNAP_PERMISSION_KEY].caveats?.find((e=>e.type===i.SnapCaveatType.SnapIds)),n=r?.value??{},s=t[o.WALLET_SNAP_PERMISSION_KEY].caveats[0].value,a=[...new Set([...Object.keys(n),...Object.keys(s)])].reduce(((e,t)=>(e[t]=s[t]??n[t],e)),{});return t[o.WALLET_SNAP_PERMISSION_KEY].caveats[0].value=a,t}},{"../restricted/invokeSnap":200,"./common/snapInstallation":180,"@metamask/rpc-errors":147,"@metamask/snaps-utils":260,"@metamask/utils":214}],189:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(r,{caveatSpecifications:function(){return l},caveatMappers:function(){return f}});const n=e("../getBip32Entropy"),i=e("../getBip32PublicKey"),s=e("../getBip44Entropy"),o=e("../invokeSnap"),a=e("./permittedCoinTypes"),u=e("./permittedDerivationPaths"),c=e("./snapIds"),l={...u.PermittedDerivationPathsCaveatSpecification,...a.PermittedCoinTypesCaveatSpecification,...c.SnapIdsCaveatSpecification},f={[n.getBip32EntropyBuilder.targetName]:u.permittedDerivationPathsCaveatMapper,[i.getBip32PublicKeyBuilder.targetName]:u.permittedDerivationPathsCaveatMapper,[s.getBip44EntropyBuilder.targetName]:a.permittedCoinTypesCaveatMapper,[o.invokeSnapBuilder.targetName]:c.snapIdsCaveatMapper}},{"../getBip32Entropy":194,"../getBip32PublicKey":195,"../getBip44Entropy":196,"../invokeSnap":200,"./permittedCoinTypes":190,"./permittedDerivationPaths":191,"./snapIds":192}],190:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(r,{permittedCoinTypesCaveatMapper:function(){return o},validateBIP44Params:function(){return a},validateBIP44Caveat:function(){return u},PermittedCoinTypesCaveatSpecification:function(){return c}});const n=e("@metamask/rpc-errors"),i=e("@metamask/snaps-utils"),s=e("@metamask/utils");function o(e){return{caveats:[{type:i.SnapCaveatType.PermittedCoinTypes,value:e}]}}function a(e){if(!(0,s.isPlainObject)(e)||!(0,s.hasProperty)(e,"coinType"))throw n.rpcErrors.invalidParams({message:"Expected a plain object containing a coin type."});if("number"!=typeof e.coinType||!Number.isInteger(e.coinType)||e.coinType<0||e.coinType>2147483647)throw n.rpcErrors.invalidParams({message:'Invalid "coinType" parameter. Coin type must be a non-negative integer.'});if(i.FORBIDDEN_COIN_TYPES.includes(e.coinType))throw n.rpcErrors.invalidParams({message:`Coin type ${e.coinType} is forbidden.`})}function u(e){if(!(0,s.hasProperty)(e,"value")||!Array.isArray(e.value)||0===e.value.length)throw n.rpcErrors.invalidParams({message:"Expected non-empty array of coin types."});e.value.forEach(a)}const c={[i.SnapCaveatType.PermittedCoinTypes]:Object.freeze({type:i.SnapCaveatType.PermittedCoinTypes,decorator:(e,t)=>async r=>{const{params:i}=r;a(i);if(!t.value.find((e=>e.coinType===i.coinType)))throw n.providerErrors.unauthorized({message:"The requested coin type is not permitted. Allowed coin types must be specified in the snap manifest."});return await e(r)},validator:e=>u(e)})}},{"@metamask/rpc-errors":147,"@metamask/snaps-utils":260,"@metamask/utils":214}],191:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(r,{permittedDerivationPathsCaveatMapper:function(){return a},validateBIP32Path:function(){return u},validateBIP32CaveatPaths:function(){return c},PermittedDerivationPathsCaveatSpecification:function(){return l}});const n=e("@metamask/rpc-errors"),i=e("@metamask/snaps-utils"),s=e("@metamask/utils"),o=e("superstruct");function a(e){return{caveats:[{type:i.SnapCaveatType.PermittedDerivationPaths,value:e}]}}function u(e){(0,s.assertStruct)(e,i.Bip32EntropyStruct,"Invalid BIP-32 entropy path definition",n.rpcErrors.invalidParams)}function c(e){(0,s.assertStruct)(e,(0,o.type)({value:(0,o.size)((0,o.array)(i.Bip32EntropyStruct),1,1/0)}),"Invalid BIP-32 entropy caveat",n.rpcErrors.internal)}const l={[i.SnapCaveatType.PermittedDerivationPaths]:Object.freeze({type:i.SnapCaveatType.PermittedDerivationPaths,decorator:(e,t)=>async r=>{const{params:s}=r;u(s);if(!t.value.find((e=>(0,i.isEqual)(s.path.slice(0,e.path.length),e.path)&&e.curve===s.curve)))throw n.providerErrors.unauthorized({message:"The requested path is not permitted. Allowed paths must be specified in the snap manifest."});return await e(r)},validator:e=>c(e)})}},{"@metamask/rpc-errors":147,"@metamask/snaps-utils":260,"@metamask/utils":214,superstruct:601}],192:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(r,{snapIdsCaveatMapper:function(){return a},validateSnapIdsCaveat:function(){return u},SnapIdsCaveatSpecification:function(){return c}});const n=e("@metamask/rpc-errors"),i=e("@metamask/snaps-utils"),s=e("@metamask/utils"),o=e("superstruct");function a(e){return{caveats:[{type:i.SnapCaveatType.SnapIds,value:e}]}}function u(e){(0,s.assertStruct)(e,(0,o.type)({value:i.SnapIdsStruct}),"Expected caveat to have a value property of a non-empty object of snap IDs.",n.rpcErrors.invalidParams)}const c={[i.SnapCaveatType.SnapIds]:Object.freeze({type:i.SnapCaveatType.SnapIds,validator:e=>u(e),decorator:(e,t)=>async r=>{const{params:n,context:{origin:i}}=r,o=t.value,{snapId:a}=n;if(!(0,s.hasProperty)(o,a))throw new Error(`${i} does not have permission to invoke ${a} snap.`);return await e(r)}})}},{"@metamask/rpc-errors":147,"@metamask/snaps-utils":260,"@metamask/utils":214,superstruct:601}],193:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(r,{DialogType:function(){return c},dialogBuilder:function(){return f},getDialogImplementation:function(){return b}});const n=e("@metamask/permission-controller"),i=e("@metamask/rpc-errors"),s=e("@metamask/snaps-ui"),o=e("@metamask/snaps-utils"),a=e("superstruct"),u="snap_dialog";var c;!function(e){e.Alert="alert",e.Confirmation="confirmation",e.Prompt="prompt"}(c||(c={}));const l=(0,a.optional)((0,a.size)((0,a.string)(),1,40)),f=Object.freeze({targetName:u,specificationBuilder:({allowedCaveats:e=null,methodHooks:t})=>({permissionType:n.PermissionType.RestrictedMethod,targetName:u,allowedCaveats:e,methodImplementation:b(t),subjectTypes:[n.SubjectType.Snap]}),methodHooks:{showDialog:!0}}),d=(0,a.type)({type:(0,a.enums)([c.Alert,c.Confirmation,c.Prompt])}),h=(0,a.object)({type:(0,o.enumValue)(c.Alert),content:s.ComponentStruct}),p=(0,a.object)({type:(0,o.enumValue)(c.Confirmation),content:s.ComponentStruct}),m=(0,a.object)({type:(0,o.enumValue)(c.Prompt),content:s.ComponentStruct,placeholder:l}),g=((0,a.union)([h,p,m]),{[c.Alert]:h,[c.Confirmation]:p,[c.Prompt]:m});function b({showDialog:e}){return async function(t){const{params:r,context:{origin:n}}=t,s=function(e){try{return(0,a.create)(e,d).type}catch(e){throw i.rpcErrors.invalidParams({message:`The "type" property must be one of: ${Object.values(c).join(", ")}.`})}}(r),o=function(e,t){try{return(0,a.create)(e,t)}catch(e){if(e instanceof a.StructError){const{key:t,type:r}=e;if("placeholder"===t&&"never"===r)throw i.rpcErrors.invalidParams({message:'Invalid params: Alerts or confirmations may not specify a "placeholder" field.'});throw i.rpcErrors.invalidParams({message:`Invalid params: ${e.message}.`})}throw i.rpcErrors.internal()}}(r,g[s]),{content:u}=o,l=o.type===c.Prompt?o.placeholder:void 0;return e(n,s,u,l)}}},{"@metamask/permission-controller":98,"@metamask/rpc-errors":147,"@metamask/snaps-ui":225,"@metamask/snaps-utils":260,superstruct:601}],194:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(r,{getBip32EntropyBuilder:function(){return c},getBip32EntropyImplementation:function(){return l}});const n=e("@metamask/permission-controller"),i=e("@metamask/rpc-errors"),s=e("@metamask/snaps-utils"),o=e("@metamask/utils"),a=e("../utils"),u="snap_getBip32Entropy",c=Object.freeze({targetName:u,specificationBuilder:({methodHooks:e})=>({permissionType:n.PermissionType.RestrictedMethod,targetName:u,allowedCaveats:[s.SnapCaveatType.PermittedDerivationPaths],methodImplementation:l(e),validator:({caveats:e})=>{if(1!==e?.length||e[0].type!==s.SnapCaveatType.PermittedDerivationPaths)throw i.rpcErrors.invalidParams({message:`Expected a single "${s.SnapCaveatType.PermittedDerivationPaths}" caveat.`})},subjectTypes:[n.SubjectType.Snap]}),methodHooks:{getMnemonic:!0,getUnlockPromise:!0}});function l({getMnemonic:e,getUnlockPromise:t}){return async function(r){await t(!0);const{params:n}=r;(0,o.assert)(n);return(await(0,a.getNode)({curve:n.curve,path:n.path,secretRecoveryPhrase:await e()})).toJSON()}}},{"../utils":204,"@metamask/permission-controller":98,"@metamask/rpc-errors":147,"@metamask/snaps-utils":260,"@metamask/utils":214}],195:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(r,{Bip32PublicKeyArgsStruct:function(){return l},getBip32PublicKeyBuilder:function(){return f},getBip32PublicKeyImplementation:function(){return d}});const n=e("@metamask/permission-controller"),i=e("@metamask/rpc-errors"),s=e("@metamask/snaps-utils"),o=e("@metamask/utils"),a=e("superstruct"),u=e("../utils"),c="snap_getBip32PublicKey",l=(0,s.bip32entropy)((0,a.object)({path:s.Bip32PathStruct,curve:(0,a.enums)(["ed25519","secp256k1"]),compressed:(0,a.optional)((0,a.boolean)())})),f=Object.freeze({targetName:c,specificationBuilder:({methodHooks:e})=>({permissionType:n.PermissionType.RestrictedMethod,targetName:c,allowedCaveats:[s.SnapCaveatType.PermittedDerivationPaths],methodImplementation:d(e),validator:({caveats:e})=>{if(1!==e?.length||e[0].type!==s.SnapCaveatType.PermittedDerivationPaths)throw i.rpcErrors.invalidParams({message:`Expected a single "${s.SnapCaveatType.PermittedDerivationPaths}" caveat.`})},subjectTypes:[n.SubjectType.Snap]}),methodHooks:{getMnemonic:!0,getUnlockPromise:!0}});function d({getMnemonic:e,getUnlockPromise:t}){return async function(r){await t(!0),(0,o.assertStruct)(r.params,l,"Invalid BIP-32 public key params",i.rpcErrors.invalidParams);const{params:n}=r,s=await(0,u.getNode)({curve:n.curve,path:n.path,secretRecoveryPhrase:await e()});return n.compressed?s.compressedPublicKey:s.publicKey}}},{"../utils":204,"@metamask/permission-controller":98,"@metamask/rpc-errors":147,"@metamask/snaps-utils":260,"@metamask/utils":214,superstruct:601}],196:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(r,{getBip44EntropyBuilder:function(){return u},getBip44EntropyImplementation:function(){return c}});const n=e("@metamask/key-tree"),i=e("@metamask/permission-controller"),s=e("@metamask/rpc-errors"),o=e("@metamask/snaps-utils"),a="snap_getBip44Entropy",u=Object.freeze({targetName:a,specificationBuilder:({methodHooks:e})=>({permissionType:i.PermissionType.RestrictedMethod,targetName:a,allowedCaveats:[o.SnapCaveatType.PermittedCoinTypes],methodImplementation:c(e),validator:({caveats:e})=>{if(1!==e?.length||e[0].type!==o.SnapCaveatType.PermittedCoinTypes)throw s.rpcErrors.invalidParams({message:`Expected a single "${o.SnapCaveatType.PermittedCoinTypes}" caveat.`})},subjectTypes:[i.SubjectType.Snap]}),methodHooks:{getMnemonic:!0,getUnlockPromise:!0}});function c({getMnemonic:e,getUnlockPromise:t}){return async function(r){await t(!0);const i=r.params;return(await n.BIP44CoinTypeNode.fromDerivationPath([await e(),"bip32:44'",`bip32:${i.coinType}'`])).toJSON()}}},{"@metamask/key-tree":73,"@metamask/permission-controller":98,"@metamask/rpc-errors":147,"@metamask/snaps-utils":260}],197:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(r,{GetEntropyArgsStruct:function(){return l},getEntropyBuilder:function(){return f}});const n=e("@metamask/permission-controller"),i=e("@metamask/rpc-errors"),s=e("@metamask/snaps-utils"),o=e("@metamask/utils"),a=e("superstruct"),u=e("../utils"),c="snap_getEntropy",l=(0,a.object)({version:(0,a.literal)(1),salt:(0,a.optional)((0,a.string)())}),f=Object.freeze({targetName:c,specificationBuilder:({allowedCaveats:e=null,methodHooks:t})=>({permissionType:n.PermissionType.RestrictedMethod,targetName:c,allowedCaveats:e,methodImplementation:d(t),subjectTypes:[n.SubjectType.Snap]}),methodHooks:{getMnemonic:!0,getUnlockPromise:!0}});function d({getMnemonic:e,getUnlockPromise:t}){return async function(r){const{params:n,context:{origin:a}}=r;(0,o.assertStruct)(n,l,'Invalid "snap_getEntropy" parameters',i.rpcErrors.invalidParams),await t(!0);const c=await e();return(0,u.deriveEntropy)({input:a,salt:n.salt,mnemonicPhrase:c,magic:s.SIP_6_MAGIC_VALUE})}}},{"../utils":204,"@metamask/permission-controller":98,"@metamask/rpc-errors":147,"@metamask/snaps-utils":260,"@metamask/utils":214,superstruct:601}],198:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(r,{specificationBuilder:function(){return s},getLocaleBuilder:function(){return o},getImplementation:function(){return a}});const n=e("@metamask/permission-controller"),i="snap_getLocale",s=({allowedCaveats:e=null,methodHooks:t})=>({permissionType:n.PermissionType.RestrictedMethod,targetName:i,allowedCaveats:e,methodImplementation:a(t),subjectTypes:[n.SubjectType.Snap]}),o=Object.freeze({targetName:i,specificationBuilder:s,methodHooks:{getLocale:!0}});function a({getLocale:e}){return async function(t){return e()}}},{"@metamask/permission-controller":98}],199:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(r,{DialogType:function(){return n.DialogType},ManageStateOperation:function(){return f.ManageStateOperation},WALLET_SNAP_PERMISSION_KEY:function(){return c.WALLET_SNAP_PERMISSION_KEY},NotificationType:function(){return d.NotificationType},restrictedMethodPermissionBuilders:function(){return m}});const n=e("./dialog"),i=e("./getBip32Entropy"),s=e("./getBip32PublicKey"),o=e("./getBip44Entropy"),a=e("./getEntropy"),u=e("./getLocale"),c=e("./invokeSnap"),l=e("./manageAccounts"),f=e("./manageState"),d=e("./notify");var h,p;h=e("./caveats"),p=r,Object.keys(h).forEach((function(e){"default"===e||Object.prototype.hasOwnProperty.call(p,e)||Object.defineProperty(p,e,{enumerable:!0,get:function(){return h[e]}})}));const m={[n.dialogBuilder.targetName]:n.dialogBuilder,[i.getBip32EntropyBuilder.targetName]:i.getBip32EntropyBuilder,[s.getBip32PublicKeyBuilder.targetName]:s.getBip32PublicKeyBuilder,[o.getBip44EntropyBuilder.targetName]:o.getBip44EntropyBuilder,[a.getEntropyBuilder.targetName]:a.getEntropyBuilder,[c.invokeSnapBuilder.targetName]:c.invokeSnapBuilder,[f.manageStateBuilder.targetName]:f.manageStateBuilder,[d.notifyBuilder.targetName]:d.notifyBuilder,[l.manageAccountsBuilder.targetName]:l.manageAccountsBuilder,[u.getLocaleBuilder.targetName]:u.getLocaleBuilder}},{"./caveats":189,"./dialog":193,"./getBip32Entropy":194,"./getBip32PublicKey":195,"./getBip44Entropy":196,"./getEntropy":197,"./getLocale":198,"./invokeSnap":200,"./manageAccounts":201,"./manageState":202,"./notify":203}],200:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(r,{WALLET_SNAP_PERMISSION_KEY:function(){return o},handleSnapInstall:function(){return a},invokeSnapBuilder:function(){return u},getInvokeSnapImplementation:function(){return c}});const n=e("@metamask/permission-controller"),i=e("@metamask/rpc-errors"),s=e("@metamask/snaps-utils"),o="wallet_snap",a=async({requestData:e,messagingSystem:t})=>{const r=e.permissions[o].caveats?.[0].value,n=t.call("SnapController:getPermitted",e.metadata.origin),i=Object.keys(r).reduce(((e,t)=>(n[t]||(e[t]=r[t]),e)),{});return t.call("SnapController:install",e.metadata.origin,i)},u=Object.freeze({targetName:o,specificationBuilder:({methodHooks:e})=>({permissionType:n.PermissionType.RestrictedMethod,targetName:o,allowedCaveats:[s.SnapCaveatType.SnapIds],methodImplementation:c(e),validator:({caveats:e})=>{if(1!==e?.length||e[0].type!==s.SnapCaveatType.SnapIds)throw i.rpcErrors.invalidParams({message:`Expected a single "${s.SnapCaveatType.SnapIds}" caveat.`})},sideEffect:{onPermitted:a}}),methodHooks:{getSnap:!0,handleSnapRpcRequest:!0}});function c({getSnap:e,handleSnapRpcRequest:t}){return async function(r){const{params:n={},context:o}=r,{snapId:a,request:u}=n;if(!e(a))throw i.rpcErrors.invalidRequest({message:`The snap "${a}" is not installed. Please install it first, before invoking the snap.`});const{origin:c}=o;return await t({snapId:a,origin:c,request:u,handler:s.HandlerType.OnRpcRequest})}}},{"@metamask/permission-controller":98,"@metamask/rpc-errors":147,"@metamask/snaps-utils":260}],201:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(r,{methodName:function(){return a},specificationBuilder:function(){return u},manageAccountsImplementation:function(){return c},manageAccountsBuilder:function(){return l}});const n=e("@metamask/permission-controller"),i=e("@metamask/utils"),s=e("superstruct"),o=(0,s.union)([(0,s.object)({method:(0,s.string)()}),(0,s.object)({method:(0,s.string)(),params:(0,s.union)([(0,s.array)(i.JsonStruct),(0,s.record)((0,s.string)(),i.JsonStruct)])})]),a="snap_manageAccounts",u=({allowedCaveats:e=null,methodHooks:t})=>({permissionType:n.PermissionType.RestrictedMethod,targetName:a,allowedCaveats:e,methodImplementation:c(t),subjectTypes:[n.SubjectType.Snap]});function c({getSnapKeyring:e}){return async function(t){const{context:{origin:r},params:n}=t;(0,s.assert)(n,o);const i=await e(r);return await i.handleKeyringSnapMessage(r,n)}}const l=Object.freeze({targetName:a,specificationBuilder:u,methodHooks:{getSnapKeyring:!0}})},{"@metamask/permission-controller":98,"@metamask/utils":214,superstruct:601}],202:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(r,{ManageStateOperation:function(){return d},STATE_ENCRYPTION_SALT:function(){return u},specificationBuilder:function(){return l},manageStateBuilder:function(){return f},STORAGE_SIZE_LIMIT:function(){return h},getManageStateImplementation:function(){return m},getValidatedParams:function(){return g}});const n=e("@metamask/permission-controller"),i=e("@metamask/rpc-errors"),s=e("@metamask/snaps-utils"),o=e("@metamask/utils"),a=e("../utils"),u="snap_manageState encryption",c="snap_manageState",l=({allowedCaveats:e=null,methodHooks:t})=>({permissionType:n.PermissionType.RestrictedMethod,targetName:c,allowedCaveats:e,methodImplementation:m(t),subjectTypes:[n.SubjectType.Snap]}),f=Object.freeze({targetName:c,specificationBuilder:l,methodHooks:{getMnemonic:!0,getUnlockPromise:!0,clearSnapState:!0,getSnapState:!0,updateSnapState:!0,encrypt:!0,decrypt:!0}});var d;!function(e){e.ClearState="clear",e.GetState="get",e.UpdateState="update"}(d||(d={}));const h=104857600;async function p({mnemonicPhrase:e,snapId:t}){return await(0,a.deriveEntropy)({mnemonicPhrase:e,input:t,salt:u,magic:s.STATE_ENCRYPTION_MAGIC_VALUE})}function m({getMnemonic:e,getUnlockPromise:t,clearSnapState:r,getSnapState:n,updateSnapState:s,encrypt:a,decrypt:u}){return async function(c){const{params:l={},method:f,context:{origin:h}}=c,{operation:m,newState:b}=g(l,f);await t(!0);const y=await e();switch(m){case d.ClearState:return await r(h),null;case d.GetState:{const e=await n(h);return null===e?e:await async function({state:e,decryptFunction:t,...r}){try{const n=await p(r),i=await t(n,e);return(0,o.assert)((0,o.isValidJson)(i)),i}catch{throw i.rpcErrors.internal({message:"Failed to decrypt snap state, the state must be corrupted."})}}({state:e,decryptFunction:u,mnemonicPhrase:y,snapId:h})}case d.UpdateState:{(0,o.assert)(b);const e=await async function({state:e,encryptFunction:t,...r}){const n=await p(r);return await t(n,e)}({state:b,encryptFunction:a,mnemonicPhrase:y,snapId:h});return await s(h,e),null}default:throw i.rpcErrors.invalidParams(`Invalid ${f} operation: "${m}"`)}}}function g(e,t,r=h){if(!(0,o.isObject)(e))throw i.rpcErrors.invalidParams({message:"Expected params to be a single object."});const{operation:n,newState:s}=e;if(!n||"string"!=typeof n||!Object.values(d).includes(n))throw i.rpcErrors.invalidParams({message:'Must specify a valid manage state "operation".'});if(n===d.UpdateState){if(!(0,o.isObject)(s))throw i.rpcErrors.invalidParams({message:`Invalid ${t} "updateState" parameter: The new state must be a plain object.`,data:{receivedNewState:void 0===s?"undefined":s}});let e;try{e=(0,o.getJsonSize)(s)}catch{throw i.rpcErrors.invalidParams({message:`Invalid ${t} "updateState" parameter: The new state must be JSON serializable.`,data:{receivedNewState:void 0===s?"undefined":s}})}if(e>r)throw i.rpcErrors.invalidParams({message:`Invalid ${t} "updateState" parameter: The new state must not exceed ${r} bytes in size.`,data:{receivedNewState:void 0===s?"undefined":s}})}return e}},{"../utils":204,"@metamask/permission-controller":98,"@metamask/rpc-errors":147,"@metamask/snaps-utils":260,"@metamask/utils":214}],203:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(r,{NotificationType:function(){return a},specificationBuilder:function(){return u},notifyBuilder:function(){return c},getImplementation:function(){return l},getValidatedParams:function(){return f}});const n=e("@metamask/permission-controller"),i=e("@metamask/rpc-errors"),s=e("@metamask/utils"),o="snap_notify";var a;!function(e){e.InApp="inApp",e.Native="native"}(a||(a={}));const u=({allowedCaveats:e=null,methodHooks:t})=>({permissionType:n.PermissionType.RestrictedMethod,targetName:o,allowedCaveats:e,methodImplementation:l(t),subjectTypes:[n.SubjectType.Snap]}),c=Object.freeze({targetName:o,specificationBuilder:u,methodHooks:{showNativeNotification:!0,showInAppNotification:!0}});function l({showNativeNotification:e,showInAppNotification:t}){return async function(r){const{params:n,context:{origin:s}}=r,o=f(n);switch(o.type){case a.Native:return await e(s,o);case a.InApp:return await t(s,o);default:throw i.rpcErrors.invalidParams({message:'Must specify a valid notification "type".'})}}}function f(e){if(!(0,s.isObject)(e))throw i.rpcErrors.invalidParams({message:"Expected params to be a single object."});const{type:t,message:r}=e;if(!t||"string"!=typeof t||!Object.values(a).includes(t))throw i.rpcErrors.invalidParams({message:'Must specify a valid notification "type".'});if(!r||"string"!=typeof r||r.length>=50)throw i.rpcErrors.invalidParams({message:'Must specify a non-empty string "message" less than 50 characters long.'});return e}},{"@metamask/permission-controller":98,"@metamask/rpc-errors":147,"@metamask/utils":214}],204:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(r,{selectHooks:function(){return a},deriveEntropy:function(){return u},getPathPrefix:function(){return c},getNode:function(){return l}});const n=e("@metamask/key-tree"),i=e("@metamask/utils"),s=e("@noble/hashes/sha3"),o=2147483648;function a(e,t){if(t)return Object.keys(t).reduce(((t,r)=>{const n=r;return t[n]=e[n],t}),{})}async function u({input:e,salt:t="",mnemonicPhrase:r,magic:a}){const u=(0,i.stringToBytes)(e),c=(0,i.stringToBytes)(t),l=function(e){const t=[],r=(0,i.createDataView)(e);for(let e=0;e<8;e++){const n=(r.getUint32(4*e)|o)>>>0;t.push(`bip32:${n-o}'`)}return t}((0,s.keccak_256)((0,i.concatBytes)([u,(0,s.keccak_256)(c)]))),{privateKey:f}=await n.SLIP10Node.fromDerivationPath({derivationPath:[r,`bip32:${a}`,...l],curve:"secp256k1"});return(0,i.assert)(f,"Failed to derive the entropy."),(0,i.add0x)(f)}function c(e){return"secp256k1"===e?"bip32":"slip10"}async function l({curve:e,secretRecoveryPhrase:t,path:r}){const i=c(e);return await n.SLIP10Node.fromDerivationPath({curve:e,derivationPath:[t,...r.slice(1).map((e=>`${i}:${e}`))]})}},{"@metamask/key-tree":73,"@metamask/utils":214,"@noble/hashes/sha3":321}],205:[function(e,t,r){arguments[4][12][0].apply(r,arguments)},{dup:12,superstruct:601}],206:[function(e,t,r){arguments[4][13][0].apply(r,arguments)},{"./assert":205,dup:13,superstruct:601}],207:[function(e,t,r){(function(t){(function(){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(r,{isBytes:function(){return c},assertIsBytes:function(){return l},bytesToHex:function(){return f},bytesToBigInt:function(){return d},bytesToSignedBigInt:function(){return h},bytesToNumber:function(){return p},bytesToString:function(){return m},hexToBytes:function(){return g},bigIntToBytes:function(){return b},signedBigIntToBytes:function(){return y},numberToBytes:function(){return v},stringToBytes:function(){return w},valueToBytes:function(){return _},concatBytes:function(){return S},createDataView:function(){return E}});const n=e("./assert"),i=e("./hex"),s=48,o=58,a=87;const u=function(){const e=[];return()=>{if(0===e.length)for(let t=0;t<256;t++)e.push(t.toString(16).padStart(2,"0"));return e}}();function c(e){return e instanceof Uint8Array}function l(e){(0,n.assert)(c(e),"Value must be a Uint8Array.")}function f(e){if(l(e),0===e.length)return"0x";const t=u(),r=new Array(e.length);for(let n=0;n<e.length;n++)r[n]=t[e[n]];return(0,i.add0x)(r.join(""))}function d(e){l(e);const t=f(e);return BigInt(t)}function h(e){l(e);let t=BigInt(0);for(const r of e)t=(t<<BigInt(8))+BigInt(r);return BigInt.asIntN(8*e.length,t)}function p(e){l(e);const t=d(e);return(0,n.assert)(t<=BigInt(Number.MAX_SAFE_INTEGER),"Number is not a safe integer. Use `bytesToBigInt` instead."),Number(t)}function m(e){return l(e),(new TextDecoder).decode(e)}function g(e){if("0x"===e?.toLowerCase?.())return new Uint8Array;(0,i.assertIsHexString)(e);const t=(0,i.remove0x)(e).toLowerCase(),r=t.length%2==0?t:`0${t}`,n=new Uint8Array(r.length/2);for(let e=0;e<n.length;e++){const t=r.charCodeAt(2*e),i=r.charCodeAt(2*e+1),u=t-(t<o?s:a),c=i-(i<o?s:a);n[e]=16*u+c}return n}function b(e){(0,n.assert)("bigint"==typeof e,"Value must be a bigint."),(0,n.assert)(e>=BigInt(0),"Value must be a non-negative bigint.");return g(e.toString(16))}function y(e,t){(0,n.assert)("bigint"==typeof e,"Value must be a bigint."),(0,n.assert)("number"==typeof t,"Byte length must be a number."),(0,n.assert)(t>0,"Byte length must be greater than 0."),(0,n.assert)(function(e,t){(0,n.assert)(t>0);const r=e>>BigInt(31);return!((~e&r)+(e&~r)>>BigInt(8*t-1))}(e,t),"Byte length is too small to represent the given value.");let r=e;const i=new Uint8Array(t);for(let e=0;e<i.length;e++)i[e]=Number(BigInt.asUintN(8,r)),r>>=BigInt(8);return i.reverse()}function v(e){(0,n.assert)("number"==typeof e,"Value must be a number."),(0,n.assert)(e>=0,"Value must be a non-negative number."),(0,n.assert)(Number.isSafeInteger(e),"Value is not a safe integer. Use `bigIntToBytes` instead.");return g(e.toString(16))}function w(e){return(0,n.assert)("string"==typeof e,"Value must be a string."),(new TextEncoder).encode(e)}function _(e){if("bigint"==typeof e)return b(e);if("number"==typeof e)return v(e);if("string"==typeof e)return e.startsWith("0x")?g(e):w(e);if(c(e))return e;throw new TypeError(`Unsupported value type: "${typeof e}".`)}function S(e){const t=new Array(e.length);let r=0;for(let n=0;n<e.length;n++){const i=_(e[n]);t[n]=i,r+=i.length}const n=new Uint8Array(r);for(let e=0,r=0;e<t.length;e++)n.set(t[e],r),r+=t[e].length;return n}function E(e){if(void 0!==t&&e instanceof t){const t=e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength);return new DataView(t)}return new DataView(e.buffer,e.byteOffset,e.byteLength)}}).call(this)}).call(this,e("buffer").Buffer)},{"./assert":205,"./hex":213,buffer:365}],208:[function(e,t,r){arguments[4][15][0].apply(r,arguments)},{dup:15,superstruct:601}],209:[function(e,t,r){arguments[4][16][0].apply(r,arguments)},{"./base64":206,dup:16,superstruct:601}],210:[function(e,t,r){arguments[4][17][0].apply(r,arguments)},{"./assert":205,"./bytes":207,"./hex":213,dup:17,superstruct:601}],211:[function(e,t,r){arguments[4][18][0].apply(r,arguments)},{dup:18}],212:[function(e,t,r){arguments[4][19][0].apply(r,arguments)},{dup:19}],213:[function(e,t,r){arguments[4][20][0].apply(r,arguments)},{"./assert":205,"./bytes":207,"@noble/hashes/sha3":321,dup:20,superstruct:601}],214:[function(e,t,r){arguments[4][21][0].apply(r,arguments)},{"./assert":205,"./base64":206,"./bytes":207,"./caip-types":208,"./checksum":209,"./coercers":210,"./collections":211,"./encryption-types":212,"./hex":213,"./json":215,"./keyring":216,"./logging":217,"./misc":218,"./number":219,"./opaque":220,"./time":221,"./transaction-types":222,"./versions":223,dup:21}],215:[function(e,t,r){arguments[4][22][0].apply(r,arguments)},{"./assert":205,dup:22,superstruct:601}],216:[function(e,t,r){arguments[4][23][0].apply(r,arguments)},{dup:23}],217:[function(e,t,r){arguments[4][24][0].apply(r,arguments)},{debug:382,dup:24}],218:[function(e,t,r){arguments[4][25][0].apply(r,arguments)},{dup:25}],219:[function(e,t,r){arguments[4][26][0].apply(r,arguments)},{"./assert":205,"./hex":213,dup:26}],220:[function(e,t,r){arguments[4][27][0].apply(r,arguments)},{dup:27}],221:[function(e,t,r){arguments[4][28][0].apply(r,arguments)},{dup:28}],222:[function(e,t,r){arguments[4][29][0].apply(r,arguments)},{dup:29}],223:[function(e,t,r){arguments[4][30][0].apply(r,arguments)},{"./assert":205,dup:30,semver:557,superstruct:601}],224:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(r,{copyable:function(){return o},divider:function(){return a},heading:function(){return u},panel:function(){return c},spinner:function(){return l},text:function(){return f},image:function(){return d}});const n=e("@metamask/utils"),i=e("./nodes");function s(e,t,r=[]){return(...i)=>{if(1===i.length&&(0,n.isPlainObject)(i[0])){const r={...i[0],type:e};return(0,n.assertStruct)(r,t,`Invalid ${e} component`),r}const s=r.reduce(((e,t,r)=>void 0!==i[r]?{...e,[t]:i[r]}:e),{type:e});return(0,n.assertStruct)(s,t,`Invalid ${e} component`),s}}const o=s(i.NodeType.Copyable,i.CopyableStruct,["value"]),a=s(i.NodeType.Divider,i.DividerStruct),u=s(i.NodeType.Heading,i.HeadingStruct,["value"]),c=s(i.NodeType.Panel,i.PanelStruct,["children"]),l=s(i.NodeType.Spinner,i.SpinnerStruct),f=s(i.NodeType.Text,i.TextStruct,["value","markdown"]),d=s(i.NodeType.Image,i.ImageStruct,["value"])},{"./nodes":226,"@metamask/utils":237}],225:[function(e,t,r){"use strict";function n(e,t){return Object.keys(e).forEach((function(r){"default"===r||Object.prototype.hasOwnProperty.call(t,r)||Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[r]}})})),e}Object.defineProperty(r,"__esModule",{value:!0}),n(e("./builder"),r),n(e("./nodes"),r),n(e("./validation"),r)},{"./builder":224,"./nodes":226,"./validation":227}],226:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(r,{NodeType:function(){return c},CopyableStruct:function(){return l},DividerStruct:function(){return f},HeadingStruct:function(){return d},PanelStruct:function(){return h},SpinnerStruct:function(){return p},TextStruct:function(){return m},ImageStruct:function(){return b},ComponentStruct:function(){return y}});const n=s(e("is-svg")),i=e("superstruct");function s(e){return e&&e.__esModule?e:{default:e}}const o=(0,i.object)({type:(0,i.string)()}),a=(0,i.assign)(o,(0,i.object)({children:(0,i.array)((0,i.lazy)((()=>y)))})),u=(0,i.assign)(o,(0,i.object)({value:(0,i.unknown)()}));var c;!function(e){e.Copyable="copyable",e.Divider="divider",e.Heading="heading",e.Panel="panel",e.Spinner="spinner",e.Text="text",e.Image="image"}(c||(c={}));const l=(0,i.assign)(u,(0,i.object)({type:(0,i.literal)(c.Copyable),value:(0,i.string)()})),f=(0,i.assign)(o,(0,i.object)({type:(0,i.literal)(c.Divider)})),d=(0,i.assign)(u,(0,i.object)({type:(0,i.literal)(c.Heading),value:(0,i.string)()})),h=(0,i.assign)(a,(0,i.object)({type:(0,i.literal)(c.Panel)})),p=(0,i.assign)(o,(0,i.object)({type:(0,i.literal)(c.Spinner)})),m=(0,i.assign)(u,(0,i.object)({type:(0,i.literal)(c.Text),value:(0,i.string)(),markdown:(0,i.optional)((0,i.boolean)())})),g=(0,i.refine)((0,i.string)(),"SVG",(e=>!!(0,n.default)(e)||"Value is not a valid SVG.")),b=(0,i.assign)(o,(0,i.object)({type:(0,i.literal)(c.Image),value:g})),y=(0,i.union)([l,f,d,h,p,m,b])},{"is-svg":475,superstruct:601}],227:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(r,{isComponent:function(){return o},assertIsComponent:function(){return a}});const n=e("@metamask/utils"),i=e("superstruct"),s=e("./nodes");function o(e){return(0,i.is)(e,s.ComponentStruct)}function a(e){(0,n.assertStruct)(e,s.ComponentStruct,"Invalid component")}},{"./nodes":226,"@metamask/utils":237,superstruct:601}],228:[function(e,t,r){arguments[4][12][0].apply(r,arguments)},{dup:12,superstruct:601}],229:[function(e,t,r){arguments[4][13][0].apply(r,arguments)},{"./assert":228,dup:13,superstruct:601}],230:[function(e,t,r){(function(t){(function(){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(r,{isBytes:function(){return c},assertIsBytes:function(){return l},bytesToHex:function(){return f},bytesToBigInt:function(){return d},bytesToSignedBigInt:function(){return h},bytesToNumber:function(){return p},bytesToString:function(){return m},hexToBytes:function(){return g},bigIntToBytes:function(){return b},signedBigIntToBytes:function(){return y},numberToBytes:function(){return v},stringToBytes:function(){return w},valueToBytes:function(){return _},concatBytes:function(){return S},createDataView:function(){return E}});const n=e("./assert"),i=e("./hex"),s=48,o=58,a=87;const u=function(){const e=[];return()=>{if(0===e.length)for(let t=0;t<256;t++)e.push(t.toString(16).padStart(2,"0"));return e}}();function c(e){return e instanceof Uint8Array}function l(e){(0,n.assert)(c(e),"Value must be a Uint8Array.")}function f(e){if(l(e),0===e.length)return"0x";const t=u(),r=new Array(e.length);for(let n=0;n<e.length;n++)r[n]=t[e[n]];return(0,i.add0x)(r.join(""))}function d(e){l(e);const t=f(e);return BigInt(t)}function h(e){l(e);let t=BigInt(0);for(const r of e)t=(t<<BigInt(8))+BigInt(r);return BigInt.asIntN(8*e.length,t)}function p(e){l(e);const t=d(e);return(0,n.assert)(t<=BigInt(Number.MAX_SAFE_INTEGER),"Number is not a safe integer. Use `bytesToBigInt` instead."),Number(t)}function m(e){return l(e),(new TextDecoder).decode(e)}function g(e){if("0x"===e?.toLowerCase?.())return new Uint8Array;(0,i.assertIsHexString)(e);const t=(0,i.remove0x)(e).toLowerCase(),r=t.length%2==0?t:`0${t}`,n=new Uint8Array(r.length/2);for(let e=0;e<n.length;e++){const t=r.charCodeAt(2*e),i=r.charCodeAt(2*e+1),u=t-(t<o?s:a),c=i-(i<o?s:a);n[e]=16*u+c}return n}function b(e){(0,n.assert)("bigint"==typeof e,"Value must be a bigint."),(0,n.assert)(e>=BigInt(0),"Value must be a non-negative bigint.");return g(e.toString(16))}function y(e,t){(0,n.assert)("bigint"==typeof e,"Value must be a bigint."),(0,n.assert)("number"==typeof t,"Byte length must be a number."),(0,n.assert)(t>0,"Byte length must be greater than 0."),(0,n.assert)(function(e,t){(0,n.assert)(t>0);const r=e>>BigInt(31);return!((~e&r)+(e&~r)>>BigInt(8*t-1))}(e,t),"Byte length is too small to represent the given value.");let r=e;const i=new Uint8Array(t);for(let e=0;e<i.length;e++)i[e]=Number(BigInt.asUintN(8,r)),r>>=BigInt(8);return i.reverse()}function v(e){(0,n.assert)("number"==typeof e,"Value must be a number."),(0,n.assert)(e>=0,"Value must be a non-negative number."),(0,n.assert)(Number.isSafeInteger(e),"Value is not a safe integer. Use `bigIntToBytes` instead.");return g(e.toString(16))}function w(e){return(0,n.assert)("string"==typeof e,"Value must be a string."),(new TextEncoder).encode(e)}function _(e){if("bigint"==typeof e)return b(e);if("number"==typeof e)return v(e);if("string"==typeof e)return e.startsWith("0x")?g(e):w(e);if(c(e))return e;throw new TypeError(`Unsupported value type: "${typeof e}".`)}function S(e){const t=new Array(e.length);let r=0;for(let n=0;n<e.length;n++){const i=_(e[n]);t[n]=i,r+=i.length}const n=new Uint8Array(r);for(let e=0,r=0;e<t.length;e++)n.set(t[e],r),r+=t[e].length;return n}function E(e){if(void 0!==t&&e instanceof t){const t=e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength);return new DataView(t)}return new DataView(e.buffer,e.byteOffset,e.byteLength)}}).call(this)}).call(this,e("buffer").Buffer)},{"./assert":228,"./hex":236,buffer:365}],231:[function(e,t,r){arguments[4][15][0].apply(r,arguments)},{dup:15,superstruct:601}],232:[function(e,t,r){arguments[4][16][0].apply(r,arguments)},{"./base64":229,dup:16,superstruct:601}],233:[function(e,t,r){arguments[4][17][0].apply(r,arguments)},{"./assert":228,"./bytes":230,"./hex":236,dup:17,superstruct:601}],234:[function(e,t,r){arguments[4][18][0].apply(r,arguments)},{dup:18}],235:[function(e,t,r){arguments[4][19][0].apply(r,arguments)},{dup:19}],236:[function(e,t,r){arguments[4][20][0].apply(r,arguments)},{"./assert":228,"./bytes":230,"@noble/hashes/sha3":321,dup:20,superstruct:601}],237:[function(e,t,r){arguments[4][21][0].apply(r,arguments)},{"./assert":228,"./base64":229,"./bytes":230,"./caip-types":231,"./checksum":232,"./coercers":233,"./collections":234,"./encryption-types":235,"./hex":236,"./json":238,"./keyring":239,"./logging":240,"./misc":241,"./number":242,"./opaque":243,"./time":244,"./transaction-types":245,"./versions":246,dup:21}],238:[function(e,t,r){arguments[4][22][0].apply(r,arguments)},{"./assert":228,dup:22,superstruct:601}],239:[function(e,t,r){arguments[4][23][0].apply(r,arguments)},{dup:23}],240:[function(e,t,r){arguments[4][24][0].apply(r,arguments)},{debug:382,dup:24}],241:[function(e,t,r){arguments[4][25][0].apply(r,arguments)},{dup:25}],242:[function(e,t,r){arguments[4][26][0].apply(r,arguments)},{"./assert":228,"./hex":236,dup:26}],243:[function(e,t,r){arguments[4][27][0].apply(r,arguments)},{dup:27}],244:[function(e,t,r){arguments[4][28][0].apply(r,arguments)},{dup:28}],245:[function(e,t,r){arguments[4][29][0].apply(r,arguments)},{dup:29}],246:[function(e,t,r){arguments[4][30][0].apply(r,arguments)},{"./assert":228,dup:30,semver:557,superstruct:601}],247:[function(e,t,r){"use strict";function n(e,t){return e.length===t.length&&e.every(((e,r)=>e===t[r]))}Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"isEqual",{enumerable:!0,get:function(){return n}})},{}],248:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(r,{AuxiliaryFileEncoding:function(){return s},encodeAuxiliaryFile:function(){return o}});const n=e("@metamask/utils"),i=e("@scure/base");var s;function o(e,t){if(t===s.Base64)return e;const r=i.base64.decode(e);return t===s.Utf8?(0,n.bytesToString)(r):(0,n.bytesToHex)(r)}!function(e){e.Base64="base64",e.Hex="hex",e.Utf8="utf8"}(s||(s={}))},{"@metamask/utils":285,"@scure/base":325}],249:[function(e,t,r){"use strict";var n;Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"SnapCaveatType",{enumerable:!0,get:function(){return n}}),function(e){e.PermittedDerivationPaths="permittedDerivationPaths",e.PermittedCoinTypes="permittedCoinTypes",e.SnapCronjob="snapCronjob",e.TransactionOrigin="transactionOrigin",e.RpcOrigin="rpcOrigin",e.KeyringOrigin="keyringOrigin",e.SnapIds="snapIds",e.ChainIds="chainIds"}(n||(n={}))},{}],250:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(r,{checksum:function(){return o},checksumFiles:function(){return a}});const n=e("@metamask/utils"),i=e("@noble/hashes/sha256"),s=e("./virtual-file/VirtualFile");function o(e){const t=e instanceof s.VirtualFile?e.value:e;return(0,i.sha256)(t)}function a(e){return o((0,n.concatBytes)([...e].sort(((e,t)=>((0,n.assert)(e.path!==t.path,"Tried to sort files with non-unique paths."),e.path<t.path?-1:1))).map((e=>o(e)))))}},{"./virtual-file/VirtualFile":274,"@metamask/utils":285,"@noble/hashes/sha256":320}],251:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(r,{CronjobRpcRequestStruct:function(){return o},CronExpressionStruct:function(){return a},parseCronExpression:function(){return u},CronjobSpecificationStruct:function(){return c},isCronjobSpecification:function(){return l},CronjobSpecificationArrayStruct:function(){return f},isCronjobSpecificationArray:function(){return d}});const n=e("@metamask/utils"),i=e("cron-parser"),s=e("superstruct"),o=(0,s.assign)((0,s.partial)((0,s.pick)(n.JsonRpcRequestStruct,["id","jsonrpc"])),(0,s.omit)(n.JsonRpcRequestStruct,["id","jsonrpc"])),a=(0,s.refine)((0,s.coerce)((0,s.string)(),(0,s.object)({minute:(0,s.optional)((0,s.string)()),hour:(0,s.optional)((0,s.string)()),dayOfMonth:(0,s.optional)((0,s.string)()),month:(0,s.optional)((0,s.string)()),dayOfWeek:(0,s.optional)((0,s.string)())}),(e=>`${e.minute??"*"} ${e.hour??"*"} ${e.dayOfMonth??"*"} ${e.month??"*"} ${e.dayOfWeek??"*"}`)),"CronExpression",(e=>{try{return(0,i.parseExpression)(e),!0}catch{return!1}}));function u(e){const t=(0,s.create)(e,a);return(0,i.parseExpression)(t)}const c=(0,s.object)({expression:a,request:o});function l(e){try{return(0,s.create)(e,c),!0}catch{return!1}}const f=(0,s.array)(c);function d(e){try{return(0,s.create)(e,f),!0}catch{return!1}}},{"@metamask/utils":285,"cron-parser":380,superstruct:601}],252:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"deepClone",{enumerable:!0,get:function(){return i}});function n(e){return e&&e.__esModule?e:{default:e}}const i=(0,n(e("rfdc")).default)({proto:!1,circles:!1})},{rfdc:523}],253:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"DEFAULT_ENDOWMENTS",{enumerable:!0,get:function(){return n}});const n=Object.freeze(["atob","btoa","BigInt","console","crypto","Date","Math","setTimeout","clearTimeout","SubtleCrypto","TextDecoder","TextEncoder","URL","setInterval","clearInterval","Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array","BigInt64Array","BigUint64Array","DataView","ArrayBuffer","AbortController","AbortSignal"])},{}],254:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(r,{SIP_6_MAGIC_VALUE:function(){return n},STATE_ENCRYPTION_MAGIC_VALUE:function(){return i}});const n="1399742832'",i="572232532'"},{}],255:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"enumValue",{enumerable:!0,get:function(){return i}});const n=e("./structs");function i(e){return(0,n.literal)(e)}},{"./structs":270}],256:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(r,{getErrorMessage:function(){return c},getErrorStack:function(){return l},getErrorCode:function(){return f},getErrorData:function(){return d},SNAP_ERROR_WRAPPER_CODE:function(){return h},SNAP_ERROR_WRAPPER_MESSAGE:function(){return p},SNAP_ERROR_CODE:function(){return m},SNAP_ERROR_MESSAGE:function(){return g},WrappedSnapError:function(){return w},SnapError:function(){return A},isSnapError:function(){return k},isSerializedSnapError:function(){return M},isWrappedSnapError:function(){return T},unwrapError:function(){return R}});const n=e("@metamask/rpc-errors"),i=e("@metamask/utils");function s(e,t,r){if(!t.has(e))throw new TypeError("attempted to "+r+" private field on non-instance");return t.get(e)}function o(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,s(e,t,"get"))}function a(e,t,r){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.set(e,r)}function u(e,t,r){return function(e,t,r){if(t.set)t.set.call(e,r);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=r}}(e,s(e,t,"set"),r),r}function c(e){return(0,i.isObject)(e)&&(0,i.hasProperty)(e,"message")&&"string"==typeof e.message?e.message:String(e)}function l(e){if((0,i.isObject)(e)&&(0,i.hasProperty)(e,"stack")&&"string"==typeof e.stack)return e.stack}function f(e){return(0,i.isObject)(e)&&(0,i.hasProperty)(e,"code")&&"number"==typeof e.code&&Number.isInteger(e.code)?e.code:n.errorCodes.rpc.internal}function d(e){return(0,i.isObject)(e)&&(0,i.hasProperty)(e,"data")&&"object"==typeof e.data&&null!==e.data&&(0,i.isValidJson)(e.data)&&!Array.isArray(e.data)?e.data:{}}const h=-31001,p="Wrapped Snap Error",m=-31002,g="Snap Error";var b=new WeakMap,y=new WeakMap,v=new WeakMap;class w extends Error{get name(){return"WrappedSnapError"}get message(){return o(this,y)}get stack(){return o(this,v)}toJSON(){const e=k(o(this,b))?o(this,b).serialize():(0,n.serializeCause)(o(this,b));return{code:h,message:p,data:{cause:e}}}serialize(){return this.toJSON()}constructor(e){const t=c(e);super(t),a(this,b,{writable:!0,value:void 0}),a(this,y,{writable:!0,value:void 0}),a(this,v,{writable:!0,value:void 0}),u(this,b,e),u(this,y,t),u(this,v,l(e))}}var _=new WeakMap,S=new WeakMap,E=new WeakMap,x=new WeakMap;class A extends Error{get name(){return"SnapError"}get code(){return o(this,_)}get message(){return o(this,S)}get data(){return o(this,E)}get stack(){return o(this,x)}toJSON(){return{code:m,message:g,data:{cause:{code:this.code,message:this.message,stack:this.stack,data:this.data}}}}serialize(){return this.toJSON()}constructor(e,t={}){const r=c(e);super(r),a(this,_,{writable:!0,value:void 0}),a(this,S,{writable:!0,value:void 0}),a(this,E,{writable:!0,value:void 0}),a(this,x,{writable:!0,value:void 0}),u(this,S,r),u(this,_,f(e)),u(this,E,{...d(e),...t}),u(this,x,super.stack)}}function k(e){if((0,i.isObject)(e)&&"serialize"in e&&"function"==typeof e.serialize){const t=e.serialize();return(0,i.isJsonRpcError)(t)&&M(t)}return!1}function M(e){return e.code===m&&e.message===g}function T(e){return(0,i.isJsonRpcError)(e)&&e.code===h&&e.message===p}function O(e,t,r,i){const s=new n.JsonRpcError(e,t,i);return s.stack=r,s}function R(e){if(T(e)){if((0,i.isJsonRpcError)(e.data.cause)){if(M(e.data.cause)){const{code:t,message:r,stack:n,data:i}=e.data.cause.data.cause;return[O(t,r,n,i),!0]}const{code:t,message:r,stack:n,data:i}=e.data.cause;return[O(t,r,n,i),!1]}return[O(n.errorCodes.rpc.internal,c(e.data.cause),l(e.data.cause)),!1]}if((0,i.isJsonRpcError)(e)){const{code:t,message:r,stack:n,data:i}=e;return[O(t,r,n,i),!1]}return[O(n.errorCodes.rpc.internal,c(e),l(e)),!1]}},{"@metamask/rpc-errors":147,"@metamask/utils":285}],257:[function(e,t,r){"use strict";var n;Object.defineProperty(r,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(r,{HandlerType:function(){return n},SeverityLevel:function(){return s},SNAP_EXPORTS:function(){return i}}),function(e){e.OnRpcRequest="onRpcRequest",e.OnTransaction="onTransaction",e.OnCronjob="onCronjob",e.OnInstall="onInstall",e.OnUpdate="onUpdate",e.OnNameLookup="onNameLookup",e.OnKeyringRequest="onKeyringRequest"}(n||(n={}));const i={[n.OnRpcRequest]:{type:n.OnRpcRequest,required:!0,validator:e=>"function"==typeof e},[n.OnTransaction]:{type:n.OnTransaction,required:!0,validator:e=>"function"==typeof e},[n.OnCronjob]:{type:n.OnCronjob,required:!0,validator:e=>"function"==typeof e},[n.OnNameLookup]:{type:n.OnNameLookup,required:!0,validator:e=>"function"==typeof e},[n.OnInstall]:{type:n.OnInstall,required:!1,validator:e=>"function"==typeof e},[n.OnUpdate]:{type:n.OnUpdate,required:!1,validator:e=>"function"==typeof e},[n.OnKeyringRequest]:{type:n.OnKeyringRequest,required:!0,validator:e=>"function"==typeof e}};var s;!function(e){e.Critical="critical"}(s||(s={}))},{}],258:[function(e,t,r){(function(t){(function(){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(r,{SVG_MAX_BYTE_SIZE:function(){return o},SVG_MAX_BYTE_SIZE_TEXT:function(){return a},assertIsSnapIcon:function(){return u}});const n=e("@metamask/utils"),i=s(e("is-svg"));function s(e){return e&&e.__esModule?e:{default:e}}const o=1e5,a=`${Math.floor(o/1e3)}kb`,u=e=>{(0,n.assert)(e.path.endsWith(".svg"),'Expected snap icon to end in ".svg".'),(0,n.assert)(t.byteLength(e.value,"utf8")<=o,`The specified SVG icon exceeds the maximum size of ${a}.`),(0,n.assert)((0,i.default)(e.toString()),"Snap icon must be a valid SVG.")}}).call(this)}).call(this,e("buffer").Buffer)},{"@metamask/utils":285,buffer:365,"is-svg":475}],259:[function(e,t,r){"use strict";async function n(e,t,r=!0){return await new Promise(((n,i)=>{const s=document.createElement("iframe");s.setAttribute("id",t),s.setAttribute("data-testid","snaps-iframe"),r&&s.setAttribute("sandbox","allow-scripts"),s.setAttribute("src",e),document.body.appendChild(s),s.addEventListener("load",(()=>{s.contentWindow?n(s.contentWindow):i(new Error(`iframe.contentWindow not present on load for job "${t}".`))}))}))}Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"createWindow",{enumerable:!0,get:function(){return n}})},{}],260:[function(e,t,r){"use strict";function n(e,t){return Object.keys(e).forEach((function(r){"default"===r||Object.prototype.hasOwnProperty.call(t,r)||Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[r]}})})),e}Object.defineProperty(r,"__esModule",{value:!0}),n(e("./array"),r),n(e("./auxiliary-files"),r),n(e("./caveats"),r),n(e("./checksum"),r),n(e("./cronjob"),r),n(e("./deep-clone"),r),n(e("./default-endowments"),r),n(e("./entropy"),r),n(e("./enum"),r),n(e("./errors"),r),n(e("./handlers"),r),n(e("./iframe"),r),n(e("./json"),r),n(e("./json-rpc"),r),n(e("./logging"),r),n(e("./manifest/index.browser"),r),n(e("./namespace"),r),n(e("./path"),r),n(e("./snaps"),r),n(e("./strings"),r),n(e("./structs"),r),n(e("./types"),r),n(e("./validation"),r),n(e("./versions"),r),n(e("./virtual-file/index.browser"),r)},{"./array":247,"./auxiliary-files":248,"./caveats":249,"./checksum":250,"./cronjob":251,"./deep-clone":252,"./default-endowments":253,"./entropy":254,"./enum":255,"./errors":256,"./handlers":257,"./iframe":259,"./json":262,"./json-rpc":261,"./logging":263,"./manifest/index.browser":264,"./namespace":266,"./path":267,"./snaps":268,"./strings":269,"./structs":270,"./types":271,"./validation":272,"./versions":273,"./virtual-file/index.browser":275}],261:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(r,{RpcOriginsStruct:function(){return o},assertIsRpcOrigins:function(){return a},KeyringOriginsStruct:function(){return u},assertIsKeyringOrigins:function(){return c},isOriginAllowed:function(){return l},assertIsJsonRpcSuccess:function(){return f}});const n=e("@metamask/permission-controller"),i=e("@metamask/utils"),s=e("superstruct"),o=(0,s.refine)((0,s.object)({dapps:(0,s.optional)((0,s.boolean)()),snaps:(0,s.optional)((0,s.boolean)()),allowedOrigins:(0,s.optional)((0,s.array)((0,s.string)()))}),"RPC origins",(e=>!!Boolean(!0===e.snaps||!0===e.dapps||e.allowedOrigins&&e.allowedOrigins.length>0)||"Must specify at least one JSON-RPC origin."));function a(e,t){(0,i.assertStruct)(e,o,"Invalid JSON-RPC origins",t)}const u=(0,s.object)({allowedOrigins:(0,s.optional)((0,s.array)((0,s.string)()))});function c(e,t){(0,i.assertStruct)(e,u,"Invalid keyring origins",t)}function l(e,t,r){return"metamask"===r||(!!e.allowedOrigins?.includes(r)||(!(t!==n.SubjectType.Website||!e.dapps)||Boolean(t===n.SubjectType.Snap&&e.snaps)))}function f(e){if(!(0,i.isJsonRpcSuccess)(e)){if((0,i.isJsonRpcFailure)(e))throw new Error(`JSON-RPC request failed: ${e.error.message}`);throw new Error("Invalid JSON-RPC response.")}}},{"@metamask/permission-controller":98,"@metamask/utils":285,superstruct:601}],262:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"parseJson",{enumerable:!0,get:function(){return i}});const n=e("@metamask/utils");function i(e){return(0,n.getSafeJson)(JSON.parse(e))}},{"@metamask/utils":285}],263:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(r,{snapsLogger:function(){return n},logInfo:function(){return i},logError:function(){return s},logWarning:function(){return o}});const n=(0,e("@metamask/utils").createProjectLogger)("snaps");function i(e,...t){console.log(e,...t)}function s(e,...t){console.error(e,...t)}function o(e,...t){console.warn(e,...t)}},{"@metamask/utils":285}],264:[function(e,t,r){"use strict";var n,i;Object.defineProperty(r,"__esModule",{value:!0}),n=e("./validation"),i=r,Object.keys(n).forEach((function(e){"default"===e||Object.prototype.hasOwnProperty.call(i,e)||Object.defineProperty(i,e,{enumerable:!0,get:function(){return n[e]}})}))},{"./validation":265}],265:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(r,{FORBIDDEN_COIN_TYPES:function(){return p},Bip32PathStruct:function(){return g},bip32entropy:function(){return b},Bip32EntropyStruct:function(){return y},SnapGetBip32EntropyPermissionsStruct:function(){return v},SemVerRangeStruct:function(){return w},SnapIdsStruct:function(){return _},ChainIdsStruct:function(){return S},PermissionsStruct:function(){return E},SnapAuxilaryFilesStruct:function(){return x},SnapManifestStruct:function(){return A},isSnapManifest:function(){return k},assertIsSnapManifest:function(){return M},createSnapManifest:function(){return T}});const n=e("@metamask/key-tree"),i=e("@metamask/utils"),s=e("superstruct"),o=e("../array"),a=e("../cronjob"),u=e("../entropy"),c=e("../json-rpc"),l=e("../namespace"),f=e("../snaps"),d=e("../types"),h=[u.SIP_6_MAGIC_VALUE,u.STATE_ENCRYPTION_MAGIC_VALUE],p=[60],m=p.map((e=>["m","44'",`${e}'`])),g=(0,s.refine)((0,s.array)((0,s.string)()),"BIP-32 path",(e=>0===e.length?"Path must be a non-empty BIP-32 derivation path array":"m"!==e[0]?'Path must start with "m".':e.length<3?"Paths must have a length of at least three.":e.slice(1).some((e=>!(0,n.isValidBIP32PathSegment)(e)))?"Path must be a valid BIP-32 derivation path array.":h.includes(e[1])?`The purpose "${e[1]}" is not allowed for entropy derivation.`:!m.some((t=>(0,o.isEqual)(e.slice(0,t.length),t)))||`The path "${e.join("/")}" is not allowed for entropy derivation.`)),b=e=>(0,s.refine)(e,"BIP-32 entropy",(e=>"ed25519"!==e.curve||!e.path.slice(1).some((e=>!e.endsWith("'")))||"Ed25519 does not support unhardened paths.")),y=b((0,s.type)({path:g,curve:(0,s.enums)(["ed25519","secp256k1"])})),v=(0,s.size)((0,s.array)(y),1,1/0),w=(0,s.refine)((0,s.string)(),"SemVer range",(e=>!!(0,i.isValidSemVerRange)(e)||"Expected a valid SemVer range.")),_=(0,s.refine)((0,s.record)(f.SnapIdStruct,(0,s.object)({version:(0,s.optional)(w)})),"SnapIds",(e=>0!==Object.keys(e).length)),S=(0,s.array)(l.ChainIdStruct),E=(0,s.type)({"endowment:network-access":(0,s.optional)((0,s.object)({})),"endowment:webassembly":(0,s.optional)((0,s.object)({})),"endowment:transaction-insight":(0,s.optional)((0,s.object)({allowTransactionOrigin:(0,s.optional)((0,s.boolean)())})),"endowment:cronjob":(0,s.optional)((0,s.object)({jobs:a.CronjobSpecificationArrayStruct})),"endowment:rpc":(0,s.optional)(c.RpcOriginsStruct),"endowment:name-lookup":(0,s.optional)(S),"endowment:keyring":(0,s.optional)(c.KeyringOriginsStruct),snap_dialog:(0,s.optional)((0,s.object)({})),snap_confirm:(0,s.optional)((0,s.object)({})),snap_manageState:(0,s.optional)((0,s.object)({})),snap_manageAccounts:(0,s.optional)((0,s.object)({})),snap_notify:(0,s.optional)((0,s.object)({})),snap_getBip32Entropy:(0,s.optional)(v),snap_getBip32PublicKey:(0,s.optional)(v),snap_getBip44Entropy:(0,s.optional)((0,s.size)((0,s.array)((0,s.object)({coinType:(0,s.size)((0,s.integer)(),0,2**32-1)})),1,1/0)),snap_getEntropy:(0,s.optional)((0,s.object)({})),wallet_snap:(0,s.optional)(_)}),x=(0,s.array)((0,s.string)()),A=(0,s.object)({version:i.VersionStruct,description:(0,s.size)((0,s.string)(),1,280),proposedName:(0,s.size)((0,s.pattern)((0,s.string)(),/^(?:[A-Za-z0-9-_]+( [A-Za-z0-9-_]+)*)|(?:(?:@[A-Za-z0-9-*~][A-Za-z0-9-*._~]*\/)?[A-Za-z0-9-~][A-Za-z0-9-._~]*)$/u),1,214),repository:(0,s.optional)((0,s.object)({type:(0,s.size)((0,s.string)(),1,1/0),url:(0,s.size)((0,s.string)(),1,1/0)})),source:(0,s.object)({shasum:i.ChecksumStruct,location:(0,s.object)({npm:(0,s.object)({filePath:(0,s.size)((0,s.string)(),1,1/0),iconPath:(0,s.optional)((0,s.size)((0,s.string)(),1,1/0)),packageName:d.NameStruct,registry:(0,s.union)([(0,s.literal)("https://registry.npmjs.org"),(0,s.literal)("https://registry.npmjs.org/")])})}),files:(0,s.optional)(x)}),initialPermissions:E,manifestVersion:(0,s.literal)("0.1"),$schema:(0,s.optional)((0,s.string)())});function k(e){return(0,s.is)(e,A)}function M(e){(0,i.assertStruct)(e,A,`"${d.NpmSnapFileNames.Manifest}" is invalid`)}function T(e){return(0,s.create)(e,A)}},{"../array":247,"../cronjob":251,"../entropy":254,"../json-rpc":261,"../namespace":266,"../snaps":268,"../types":271,"@metamask/key-tree":73,"@metamask/utils":285,superstruct:601}],266:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(r,{CHAIN_ID_REGEX:function(){return i},ACCOUNT_ID_REGEX:function(){return s},ACCOUNT_ADDRESS_REGEX:function(){return o},parseChainId:function(){return a},parseAccountId:function(){return u},LimitedString:function(){return c},ChainIdStruct:function(){return l},AccountIdStruct:function(){return f},AccountIdArrayStruct:function(){return d},AccountAddressStruct:function(){return h},ChainStruct:function(){return p},NamespaceStruct:function(){return m},NamespaceIdStruct:function(){return g},isNamespaceId:function(){return b},isChainId:function(){return y},isAccountId:function(){return v},isAccountIdArray:function(){return w},isNamespace:function(){return _}});const n=e("superstruct"),i=RegExp("^(?<namespace>[-a-z0-9]{3,8}):(?<reference>[-a-zA-Z0-9]{1,32})$","u"),s=RegExp("^(?<chainId>(?<namespace>[-a-z0-9]{3,8}):(?<reference>[-a-zA-Z0-9]{1,32})):(?<accountAddress>[a-zA-Z0-9]{1,64})$","u"),o=RegExp("^(?<accountAddress>[a-zA-Z0-9]{1,64})$","u");function a(e){const t=i.exec(e);if(!t?.groups)throw new Error("Invalid chain ID.");return{namespace:t.groups.namespace,reference:t.groups.reference}}function u(e){const t=s.exec(e);if(!t?.groups)throw new Error("Invalid account ID.");return{address:t.groups.accountAddress,chainId:t.groups.chainId,chain:{namespace:t.groups.namespace,reference:t.groups.reference}}}const c=(0,n.size)((0,n.string)(),1,40),l=(0,n.pattern)((0,n.string)(),i),f=(0,n.pattern)((0,n.string)(),s),d=(0,n.array)(f),h=(0,n.pattern)((0,n.string)(),o),p=(0,n.object)({id:l,name:c}),m=(0,n.object)({chains:(0,n.array)(p),methods:(0,n.optional)((0,n.array)(c)),events:(0,n.optional)((0,n.array)(c))}),g=(0,n.pattern)((0,n.string)(),/^[-a-z0-9]{3,8}$/u);function b(e){return(0,n.is)(e,g)}function y(e){return(0,n.is)(e,l)}function v(e){return(0,n.is)(e,f)}function w(e){return(0,n.is)(e,d)}function _(e){return(0,n.is)(e,m)}},{superstruct:601}],267:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"normalizeRelative",{enumerable:!0,get:function(){return i}});const n=e("@metamask/utils");function i(e){return(0,n.assert)(!e.startsWith("/")),(0,n.assert)(-1===e.search(/:|\/\//u),`Path "${e}" potentially an URI instead of local relative`),e.startsWith("./")?e.slice(2):e}},{"@metamask/utils":285}],268:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(r,{SnapStatus:function(){return h},SnapStatusEvents:function(){return p},PROPOSED_NAME_REGEX:function(){return d},ProgrammaticallyFixableSnapError:function(){return m},getSnapChecksum:function(){return b},validateSnapShasum:function(){return y},LOCALHOST_HOSTNAMES:function(){return v},BaseSnapIdStruct:function(){return w},LocalSnapIdStruct:function(){return S},NpmSnapIdStruct:function(){return E},HttpSnapIdStruct:function(){return x},SnapIdStruct:function(){return A},getSnapPrefix:function(){return k},stripSnapPrefix:function(){return M},assertIsValidSnapId:function(){return T},isCaipChainId:function(){return O},isSnapPermitted:function(){return R},verifyRequestedSnapPermissions:function(){return P}});const n=e("@metamask/utils"),i=e("@scure/base"),s=f(e("fast-json-stable-stringify")),o=e("superstruct"),a=f(e("validate-npm-package-name")),u=e("./caveats"),c=e("./checksum"),l=e("./types");function f(e){return e&&e.__esModule?e:{default:e}}const d=/^(?:[A-Za-z0-9-_]+( [A-Za-z0-9-_]+)*)|(?:(?:@[A-Za-z0-9-*~][A-Za-z0-9-*._~]*\/)?[A-Za-z0-9-~][A-Za-z0-9-._~]*)$/u;var h,p;!function(e){e.Installing="installing",e.Updating="updating",e.Running="running",e.Stopped="stopped",e.Crashed="crashed"}(h||(h={})),function(e){e.Start="START",e.Stop="STOP",e.Crash="CRASH",e.Update="UPDATE"}(p||(p={}));class m extends Error{constructor(e,t){var r,n,i;super(e),i=void 0,(n="reason")in(r=this)?Object.defineProperty(r,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):r[n]=i,this.reason=t}}function g(e){const t=e.clone();return delete t.result.source.shasum,t.value=(0,s.default)(t.result),t}function b(e){const{manifest:t,sourceCode:r,svgIcon:n,auxiliaryFiles:s}=e,o=[g(t),r,n,...s].filter((e=>void 0!==e));return i.base64.encode((0,c.checksumFiles)(o))}function y(e,t="Invalid Snap manifest: manifest shasum does not match computed shasum."){if(e.manifest.result.source.shasum!==b(e))throw new m(t,l.SnapValidationFailureReason.ShasumMismatch)}const v=["localhost","127.0.0.1","[::1]"],w=(0,o.pattern)((0,o.string)(),/^[\x21-\x7E]*$/u),_=(0,l.uri)({protocol:(0,o.enums)(["http:","https:"]),hostname:(0,o.enums)(v),hash:(0,o.empty)((0,o.string)()),search:(0,o.empty)((0,o.string)())}),S=(0,o.refine)(w,"local Snap Id",(e=>{if(!e.startsWith(l.SnapIdPrefixes.local))return`Expected local snap ID, got "${e}".`;const[t]=(0,o.validate)(e.slice(l.SnapIdPrefixes.local.length),_);return t??!0})),E=(0,o.intersection)([w,(0,l.uri)({protocol:(0,o.literal)(l.SnapIdPrefixes.npm),pathname:(0,o.refine)((0,o.string)(),"package name",(function*(e){const t=e.startsWith("/")?e.slice(1):e,{errors:r,validForNewPackages:i,warnings:s}=(0,a.default)(t);return i||(void 0===r?((0,n.assert)(void 0!==s),yield*s):yield*r),!0})),search:(0,o.empty)((0,o.string)()),hash:(0,o.empty)((0,o.string)())})]),x=(0,o.intersection)([w,(0,l.uri)({protocol:(0,o.enums)(["http:","https:"]),search:(0,o.empty)((0,o.string)()),hash:(0,o.empty)((0,o.string)())})]),A=(0,o.union)([E,S]);function k(e){const t=Object.values(l.SnapIdPrefixes).find((t=>e.startsWith(t)));if(void 0!==t)return t;throw new Error(`Invalid or no prefix found for "${e}"`)}function M(e){return e.replace(k(e),"")}function T(e){(0,n.assertStruct)(e,A,"Invalid snap ID")}function O(e){return"string"==typeof e&&RegExp("^(?<namespace>[-a-z0-9]{3,8}):(?<reference>[-a-zA-Z0-9]{1,32})$","u").test(e)}function R(e,t){return Boolean((e?.wallet_snap?.caveats?.find((e=>e.type===u.SnapCaveatType.SnapIds))??{}).value?.[t])}function P(e){(0,n.assert)((0,n.isObject)(e),"Requested permissions must be an object.");const{wallet_snap:t}=e;(0,n.assert)((0,n.isObject)(t),"wallet_snap is missing from the requested permissions.");const{caveats:r}=t;(0,n.assert)(Array.isArray(r)&&1===r.length,"wallet_snap must have a caveat property with a single-item array value.");const[i]=r;(0,n.assert)((0,n.isObject)(i)&&i.type===u.SnapCaveatType.SnapIds&&(0,n.isObject)(i.value),`The requested permissions do not have a valid ${u.SnapCaveatType.SnapIds} caveat.`)}},{"./caveats":249,"./checksum":250,"./types":271,"@metamask/utils":285,"@scure/base":325,"fast-json-stable-stringify":424,superstruct:601,"validate-npm-package-name":620}],269:[function(e,t,r){"use strict";function n(e,t=2){return e.replace(/^/gmu," ".repeat(t))}Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"indent",{enumerable:!0,get:function(){return n}})},{}],270:[function(e,t,r){(function(t){(function(){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(r,{literal:function(){return u},union:function(){return c},file:function(){return l},named:function(){return f},SnapsStructError:function(){return d},arrayToGenerator:function(){return h},getError:function(){return p},createFromStruct:function(){return m},getStructFromPath:function(){return g},getUnionStructNames:function(){return b},getStructErrorPrefix:function(){return y},getStructFailureMessage:function(){return v},getStructErrorMessage:function(){return w}});const n=e("@metamask/utils"),i=e("chalk"),s=e("path"),o=e("superstruct"),a=e("./strings");function u(e){return(0,o.define)(JSON.stringify(e),(0,o.literal)(e).validator)}function c([e,...t]){const r=(0,o.union)([e,...t]);return new o.Struct({...r,schema:[e,...t]})}function l(){return(0,o.coerce)((0,o.string)(),(0,o.string)(),(e=>(0,s.resolve)(t.cwd(),e)))}function f(e,t){return new o.Struct({...t,type:e})}class d extends o.StructError{constructor(e,t,r,n,i){super(n,i),this.name="SnapsStructError",this.message=`${t}.\n\n${w(e,[...i()])}${r?`\n\n${r}`:""}`}}function*h(e){for(const t of e)yield t}function p({struct:e,prefix:t,suffix:r="",error:n}){return new d(e,t,r,n,(()=>h(n.failures())))}function m(e,t,r,n=""){try{return(0,o.create)(e,t)}catch(e){if(e instanceof o.StructError)throw p({struct:t,prefix:r,suffix:n,error:e});throw e}}function g(e,t){return t.reduce(((t,r)=>(0,n.isObject)(e.schema)&&e.schema[r]?e.schema[r]:t),e)}function b(e){return Array.isArray(e.schema)?e.schema.map((({type:e})=>(0,i.green)(e))):null}function y(e){return"never"===e.type||0===e.path.length?"":`At path: ${(0,i.bold)(e.path.join("."))}  `}function v(e,t){const r=(0,i.red)(JSON.stringify(t.value)),n=y(t);if("union"===t.type){const i=b(g(e,t.path));return i?`${n}Expected the value to be one of: ${i.join(", ")}, but received: ${r}.`:`${n}${t.message}.`}if("literal"===t.type){return`${n}${t.message.replace(/the literal `(.+)`,/u,`the value to be \`${(0,i.green)("$1")}\`,`).replace(/, but received: (.+)/u,`, but received: ${(0,i.red)("$1")}`)}.`}return"never"===t.type?`Unknown key: ${(0,i.bold)(t.path.join("."))}, received: ${r}.`:`${n}Expected a value of type ${(0,i.green)(t.type)}, but received: ${r}.`}function w(e,t){return t.map((t=>(0,a.indent)(` ${v(e,t)}`))).join("\n")}}).call(this)}).call(this,e("_process"))},{"./strings":269,"@metamask/utils":285,_process:509,chalk:369,path:507,superstruct:601}],271:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(r,{NpmSnapFileNames:function(){return o},SnapIdPrefixes:function(){return f},SnapValidationFailureReason:function(){return d},SNAP_STREAM_NAMES:function(){return h},NameStruct:function(){return a},NpmSnapPackageJsonStruct:function(){return u},isNpmSnapPackageJson:function(){return c},assertIsNpmSnapPackageJson:function(){return l},SNAP_EXPORT_NAMES:function(){return p},uri:function(){return m},isValidUrl:function(){return g},WALLET_SNAP_PERMISSION_KEY:function(){return b}});const n=e("@metamask/utils"),i=e("superstruct"),s=e("./handlers");var o;!function(e){e.PackageJson="package.json",e.Manifest="snap.manifest.json"}(o||(o={}));const a=(0,i.size)((0,i.pattern)((0,i.string)(),/^(?:@[a-z0-9-*~][a-z0-9-*._~]*\/)?[a-z0-9-~][a-z0-9-._~]*$/u),1,214),u=(0,i.type)({version:n.VersionStruct,name:a,main:(0,i.optional)((0,i.size)((0,i.string)(),1,1/0)),repository:(0,i.optional)((0,i.object)({type:(0,i.size)((0,i.string)(),1,1/0),url:(0,i.size)((0,i.string)(),1,1/0)}))});function c(e){return(0,i.is)(e,u)}function l(e){(0,n.assertStruct)(e,u,`"${o.PackageJson}" is invalid`)}var f,d,h;!function(e){e.npm="npm:",e.local="local:"}(f||(f={})),function(e){e.NameMismatch='"name" field mismatch',e.VersionMismatch='"version" field mismatch',e.RepositoryMismatch='"repository" field mismatch',e.ShasumMismatch='"shasum" field mismatch'}(d||(d={})),function(e){e.JSON_RPC="jsonRpc",e.COMMAND="command"}(h||(h={}));const p=Object.values(s.HandlerType),m=(e={})=>(0,i.refine)((0,i.union)([(0,i.string)(),(0,i.instance)(URL)]),"uri",(t=>{try{const r=new URL(t),n=(0,i.type)(e);return(0,i.assert)(r,n),!0}catch{return`Expected URL, got "${t.toString()}".`}}));function g(e,t={}){return(0,i.is)(e,m(t))}const b="wallet_snap"},{"./handlers":257,"@metamask/utils":285,superstruct:601}],272:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"validateFetchedSnap",{enumerable:!0,get:function(){return o}});const n=e("./icon"),i=e("./manifest/validation"),s=e("./snaps");function o(e){(0,i.assertIsSnapManifest)(e.manifest.result),(0,s.validateSnapShasum)(e),e.svgIcon&&(0,n.assertIsSnapIcon)(e.svgIcon)}},{"./icon":258,"./manifest/validation":265,"./snaps":268}],273:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(r,{DEFAULT_REQUESTED_SNAP_VERSION:function(){return o},getTargetVersion:function(){return a},resolveVersionRange:function(){return u}});const n=e("@metamask/utils"),i=e("semver"),s=e("superstruct"),o="*";function a(e,t){const r=(0,i.maxSatisfying)(e,t);return r||(0,i.maxSatisfying)(e,t,{includePrerelease:!0})}function u(e){return void 0===e||"latest"===e?[void 0,o]:(0,s.validate)(e,n.VersionRangeStruct)}},{"@metamask/utils":285,semver:557,superstruct:601}],274:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"VirtualFile",{enumerable:!0,get:function(){return a}});const n=e("@metamask/utils"),i=e("@scure/base"),s=e("../deep-clone");function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class a{toString(e){if("string"==typeof this.value)return(0,n.assert)(void 0===e,"Tried to encode string."),this.value;if(this.value instanceof Uint8Array&&"hex"===e)return(0,n.bytesToHex)(this.value);if(this.value instanceof Uint8Array&&"base64"===e)return i.base64.encode(this.value);return new TextDecoder(e).decode(this.value)}clone(){const e=new a;return"string"==typeof this.value?e.value=this.value:e.value=this.value.slice(0),e.result=(0,s.deepClone)(this.result),e.data=(0,s.deepClone)(this.data),e.path=this.path,e}constructor(e){let t;o(this,"value",void 0),o(this,"result",void 0),o(this,"data",void 0),o(this,"path",void 0),t="string"==typeof e||e instanceof Uint8Array?{value:e}:e,this.value=t?.value??"",this.result=t?.result??void 0,this.data=t?.data??{},this.path=t?.path??"/"}}},{"../deep-clone":252,"@metamask/utils":285,"@scure/base":325}],275:[function(e,t,r){"use strict";var n,i;Object.defineProperty(r,"__esModule",{value:!0}),n=e("./VirtualFile"),i=r,Object.keys(n).forEach((function(e){"default"===e||Object.prototype.hasOwnProperty.call(i,e)||Object.defineProperty(i,e,{enumerable:!0,get:function(){return n[e]}})}))},{"./VirtualFile":274}],276:[function(e,t,r){arguments[4][12][0].apply(r,arguments)},{dup:12,superstruct:601}],277:[function(e,t,r){arguments[4][13][0].apply(r,arguments)},{"./assert":276,dup:13,superstruct:601}],278:[function(e,t,r){(function(t){(function(){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(r,{isBytes:function(){return c},assertIsBytes:function(){return l},bytesToHex:function(){return f},bytesToBigInt:function(){return d},bytesToSignedBigInt:function(){return h},bytesToNumber:function(){return p},bytesToString:function(){return m},hexToBytes:function(){return g},bigIntToBytes:function(){return b},signedBigIntToBytes:function(){return y},numberToBytes:function(){return v},stringToBytes:function(){return w},valueToBytes:function(){return _},concatBytes:function(){return S},createDataView:function(){return E}});const n=e("./assert"),i=e("./hex"),s=48,o=58,a=87;const u=function(){const e=[];return()=>{if(0===e.length)for(let t=0;t<256;t++)e.push(t.toString(16).padStart(2,"0"));return e}}();function c(e){return e instanceof Uint8Array}function l(e){(0,n.assert)(c(e),"Value must be a Uint8Array.")}function f(e){if(l(e),0===e.length)return"0x";const t=u(),r=new Array(e.length);for(let n=0;n<e.length;n++)r[n]=t[e[n]];return(0,i.add0x)(r.join(""))}function d(e){l(e);const t=f(e);return BigInt(t)}function h(e){l(e);let t=BigInt(0);for(const r of e)t=(t<<BigInt(8))+BigInt(r);return BigInt.asIntN(8*e.length,t)}function p(e){l(e);const t=d(e);return(0,n.assert)(t<=BigInt(Number.MAX_SAFE_INTEGER),"Number is not a safe integer. Use `bytesToBigInt` instead."),Number(t)}function m(e){return l(e),(new TextDecoder).decode(e)}function g(e){if("0x"===e?.toLowerCase?.())return new Uint8Array;(0,i.assertIsHexString)(e);const t=(0,i.remove0x)(e).toLowerCase(),r=t.length%2==0?t:`0${t}`,n=new Uint8Array(r.length/2);for(let e=0;e<n.length;e++){const t=r.charCodeAt(2*e),i=r.charCodeAt(2*e+1),u=t-(t<o?s:a),c=i-(i<o?s:a);n[e]=16*u+c}return n}function b(e){(0,n.assert)("bigint"==typeof e,"Value must be a bigint."),(0,n.assert)(e>=BigInt(0),"Value must be a non-negative bigint.");return g(e.toString(16))}function y(e,t){(0,n.assert)("bigint"==typeof e,"Value must be a bigint."),(0,n.assert)("number"==typeof t,"Byte length must be a number."),(0,n.assert)(t>0,"Byte length must be greater than 0."),(0,n.assert)(function(e,t){(0,n.assert)(t>0);const r=e>>BigInt(31);return!((~e&r)+(e&~r)>>BigInt(8*t-1))}(e,t),"Byte length is too small to represent the given value.");let r=e;const i=new Uint8Array(t);for(let e=0;e<i.length;e++)i[e]=Number(BigInt.asUintN(8,r)),r>>=BigInt(8);return i.reverse()}function v(e){(0,n.assert)("number"==typeof e,"Value must be a number."),(0,n.assert)(e>=0,"Value must be a non-negative number."),(0,n.assert)(Number.isSafeInteger(e),"Value is not a safe integer. Use `bigIntToBytes` instead.");return g(e.toString(16))}function w(e){return(0,n.assert)("string"==typeof e,"Value must be a string."),(new TextEncoder).encode(e)}function _(e){if("bigint"==typeof e)return b(e);if("number"==typeof e)return v(e);if("string"==typeof e)return e.startsWith("0x")?g(e):w(e);if(c(e))return e;throw new TypeError(`Unsupported value type: "${typeof e}".`)}function S(e){const t=new Array(e.length);let r=0;for(let n=0;n<e.length;n++){const i=_(e[n]);t[n]=i,r+=i.length}const n=new Uint8Array(r);for(let e=0,r=0;e<t.length;e++)n.set(t[e],r),r+=t[e].length;return n}function E(e){if(void 0!==t&&e instanceof t){const t=e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength);return new DataView(t)}return new DataView(e.buffer,e.byteOffset,e.byteLength)}}).call(this)}).call(this,e("buffer").Buffer)},{"./assert":276,"./hex":284,buffer:365}],279:[function(e,t,r){arguments[4][15][0].apply(r,arguments)},{dup:15,superstruct:601}],280:[function(e,t,r){arguments[4][16][0].apply(r,arguments)},{"./base64":277,dup:16,superstruct:601}],281:[function(e,t,r){arguments[4][17][0].apply(r,arguments)},{"./assert":276,"./bytes":278,"./hex":284,dup:17,superstruct:601}],282:[function(e,t,r){arguments[4][18][0].apply(r,arguments)},{dup:18}],283:[function(e,t,r){arguments[4][19][0].apply(r,arguments)},{dup:19}],284:[function(e,t,r){arguments[4][20][0].apply(r,arguments)},{"./assert":276,"./bytes":278,"@noble/hashes/sha3":321,dup:20,superstruct:601}],285:[function(e,t,r){arguments[4][21][0].apply(r,arguments)},{"./assert":276,"./base64":277,"./bytes":278,"./caip-types":279,"./checksum":280,"./coercers":281,"./collections":282,"./encryption-types":283,"./hex":284,"./json":286,"./keyring":287,"./logging":288,"./misc":289,"./number":290,"./opaque":291,"./time":292,"./transaction-types":293,"./versions":294,dup:21}],286:[function(e,t,r){arguments[4][22][0].apply(r,arguments)},{"./assert":276,dup:22,superstruct:601}],287:[function(e,t,r){arguments[4][23][0].apply(r,arguments)},{dup:23}],288:[function(e,t,r){arguments[4][24][0].apply(r,arguments)},{debug:382,dup:24}],289:[function(e,t,r){arguments[4][25][0].apply(r,arguments)},{dup:25}],290:[function(e,t,r){arguments[4][26][0].apply(r,arguments)},{"./assert":276,"./hex":284,dup:26}],291:[function(e,t,r){arguments[4][27][0].apply(r,arguments)},{dup:27}],292:[function(e,t,r){arguments[4][28][0].apply(r,arguments)},{dup:28}],293:[function(e,t,r){arguments[4][29][0].apply(r,arguments)},{dup:29}],294:[function(e,t,r){arguments[4][30][0].apply(r,arguments)},{"./assert":276,dup:30,semver:557,superstruct:601}],295:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.assertExhaustive=r.assertStruct=r.assert=r.AssertionError=void 0;const n=e("superstruct");function i(e,t){return r=e,Boolean("string"==typeof(null===(i=null===(n=null==r?void 0:r.prototype)||void 0===n?void 0:n.constructor)||void 0===i?void 0:i.name))?new e({message:t}):e({message:t});var r,n,i}class s extends Error{constructor(e){super(e.message),this.code="ERR_ASSERTION"}}r.AssertionError=s,r.assert=function(e,t="Assertion failed.",r=s){if(!e){if(t instanceof Error)throw t;throw i(r,t)}},r.assertStruct=function(e,t,r="Assertion failed",o=s){try{(0,n.assert)(e,t)}catch(e){throw i(o,`${r}: ${function(e){const t=function(e){return"object"==typeof e&&null!==e&&"message"in e}(e)?e.message:String(e);return t.endsWith(".")?t.slice(0,-1):t}(e)}.`)}},r.assertExhaustive=function(e){throw new Error("Invalid branch reached. Should be detected during compilation.")}},{superstruct:601}],296:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.base64=void 0;const n=e("superstruct"),i=e("./assert");r.base64=(e,t={})=>{var r,s;const o=null!==(r=t.paddingRequired)&&void 0!==r&&r,a=null!==(s=t.characterSet)&&void 0!==s?s:"base64";let u,c;return"base64"===a?u=String.raw`[A-Za-z0-9+\/]`:((0,i.assert)("base64url"===a),u=String.raw`[-_A-Za-z0-9]`),c=o?new RegExp(`^(?:${u}{4})*(?:${u}{3}=|${u}{2}==)?$`,"u"):new RegExp(`^(?:${u}{4})*(?:${u}{2,3}|${u}{3}=|${u}{2}==)?$`,"u"),(0,n.pattern)(e,c)}},{"./assert":295,superstruct:601}],297:[function(e,t,r){(function(t){(function(){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.createDataView=r.concatBytes=r.valueToBytes=r.stringToBytes=r.numberToBytes=r.signedBigIntToBytes=r.bigIntToBytes=r.hexToBytes=r.bytesToString=r.bytesToNumber=r.bytesToSignedBigInt=r.bytesToBigInt=r.bytesToHex=r.assertIsBytes=r.isBytes=void 0;const n=e("./assert"),i=e("./hex"),s=48,o=58,a=87;const u=function(){const e=[];return()=>{if(0===e.length)for(let t=0;t<256;t++)e.push(t.toString(16).padStart(2,"0"));return e}}();function c(e){return e instanceof Uint8Array}function l(e){(0,n.assert)(c(e),"Value must be a Uint8Array.")}function f(e){if(l(e),0===e.length)return"0x";const t=u(),r=new Array(e.length);for(let n=0;n<e.length;n++)r[n]=t[e[n]];return(0,i.add0x)(r.join(""))}function d(e){l(e);const t=f(e);return BigInt(t)}function h(e){var t;if("0x"===(null===(t=null==e?void 0:e.toLowerCase)||void 0===t?void 0:t.call(e)))return new Uint8Array;(0,i.assertIsHexString)(e);const r=(0,i.remove0x)(e).toLowerCase(),n=r.length%2==0?r:`0${r}`,u=new Uint8Array(n.length/2);for(let e=0;e<u.length;e++){const t=n.charCodeAt(2*e),r=n.charCodeAt(2*e+1),i=t-(t<o?s:a),c=r-(r<o?s:a);u[e]=16*i+c}return u}function p(e){(0,n.assert)("bigint"==typeof e,"Value must be a bigint."),(0,n.assert)(e>=BigInt(0),"Value must be a non-negative bigint.");return h(e.toString(16))}function m(e){(0,n.assert)("number"==typeof e,"Value must be a number."),(0,n.assert)(e>=0,"Value must be a non-negative number."),(0,n.assert)(Number.isSafeInteger(e),"Value is not a safe integer. Use `bigIntToBytes` instead.");return h(e.toString(16))}function g(e){return(0,n.assert)("string"==typeof e,"Value must be a string."),(new TextEncoder).encode(e)}function b(e){if("bigint"==typeof e)return p(e);if("number"==typeof e)return m(e);if("string"==typeof e)return e.startsWith("0x")?h(e):g(e);if(c(e))return e;throw new TypeError(`Unsupported value type: "${typeof e}".`)}r.isBytes=c,r.assertIsBytes=l,r.bytesToHex=f,r.bytesToBigInt=d,r.bytesToSignedBigInt=function(e){l(e);let t=BigInt(0);for(const r of e)t=(t<<BigInt(8))+BigInt(r);return BigInt.asIntN(8*e.length,t)},r.bytesToNumber=function(e){l(e);const t=d(e);return(0,n.assert)(t<=BigInt(Number.MAX_SAFE_INTEGER),"Number is not a safe integer. Use `bytesToBigInt` instead."),Number(t)},r.bytesToString=function(e){return l(e),(new TextDecoder).decode(e)},r.hexToBytes=h,r.bigIntToBytes=p,r.signedBigIntToBytes=function(e,t){(0,n.assert)("bigint"==typeof e,"Value must be a bigint."),(0,n.assert)("number"==typeof t,"Byte length must be a number."),(0,n.assert)(t>0,"Byte length must be greater than 0."),(0,n.assert)(function(e,t){(0,n.assert)(t>0);const r=e>>BigInt(31);return!((~e&r)+(e&~r)>>BigInt(8*t-1))}(e,t),"Byte length is too small to represent the given value.");let r=e;const i=new Uint8Array(t);for(let e=0;e<i.length;e++)i[e]=Number(BigInt.asUintN(8,r)),r>>=BigInt(8);return i.reverse()},r.numberToBytes=m,r.stringToBytes=g,r.valueToBytes=b,r.concatBytes=function(e){const t=new Array(e.length);let r=0;for(let n=0;n<e.length;n++){const i=b(e[n]);t[n]=i,r+=i.length}const n=new Uint8Array(r);for(let e=0,r=0;e<t.length;e++)n.set(t[e],r),r+=t[e].length;return n},r.createDataView=function(e){if(void 0!==t&&e instanceof t){const t=e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength);return new DataView(t)}return new DataView(e.buffer,e.byteOffset,e.byteLength)}}).call(this)}).call(this,e("buffer").Buffer)},{"./assert":295,"./hex":302,buffer:365}],298:[function(e,t,r){arguments[4][78][0].apply(r,arguments)},{"./base64":296,dup:78,superstruct:601}],299:[function(e,t,r){arguments[4][79][0].apply(r,arguments)},{"./assert":295,"./bytes":297,"./hex":302,dup:79,superstruct:601}],300:[function(e,t,r){arguments[4][80][0].apply(r,arguments)},{dup:80}],301:[function(e,t,r){arguments[4][81][0].apply(r,arguments)},{dup:81}],302:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.remove0x=r.add0x=r.assertIsStrictHexString=r.assertIsHexString=r.isStrictHexString=r.isHexString=r.StrictHexStruct=r.HexStruct=void 0;const n=e("superstruct"),i=e("./assert");function s(e){return(0,n.is)(e,r.HexStruct)}function o(e){return(0,n.is)(e,r.StrictHexStruct)}r.HexStruct=(0,n.pattern)((0,n.string)(),/^(?:0x)?[0-9a-f]+$/iu),r.StrictHexStruct=(0,n.pattern)((0,n.string)(),/^0x[0-9a-f]+$/iu),r.isHexString=s,r.isStrictHexString=o,r.assertIsHexString=function(e){(0,i.assert)(s(e),"Value must be a hexadecimal string.")},r.assertIsStrictHexString=function(e){(0,i.assert)(o(e),'Value must be a hexadecimal string, starting with "0x".')},r.add0x=function(e){return e.startsWith("0x")?e:e.startsWith("0X")?`0x${e.substring(2)}`:`0x${e}`},r.remove0x=function(e){return e.startsWith("0x")||e.startsWith("0X")?e.substring(2):e}},{"./assert":295,superstruct:601}],303:[function(e,t,r){arguments[4][83][0].apply(r,arguments)},{"./assert":295,"./base64":296,"./bytes":297,"./checksum":298,"./coercers":299,"./collections":300,"./encryption-types":301,"./hex":302,"./json":304,"./keyring":305,"./logging":306,"./misc":307,"./number":308,"./opaque":309,"./time":310,"./transaction-types":311,"./versions":312,dup:83}],304:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.getJsonRpcIdValidator=r.assertIsJsonRpcError=r.isJsonRpcError=r.assertIsJsonRpcFailure=r.isJsonRpcFailure=r.assertIsJsonRpcSuccess=r.isJsonRpcSuccess=r.assertIsJsonRpcResponse=r.isJsonRpcResponse=r.assertIsPendingJsonRpcResponse=r.isPendingJsonRpcResponse=r.JsonRpcResponseStruct=r.JsonRpcFailureStruct=r.JsonRpcSuccessStruct=r.PendingJsonRpcResponseStruct=r.assertIsJsonRpcRequest=r.isJsonRpcRequest=r.assertIsJsonRpcNotification=r.isJsonRpcNotification=r.JsonRpcNotificationStruct=r.JsonRpcRequestStruct=r.JsonRpcParamsStruct=r.JsonRpcErrorStruct=r.JsonRpcIdStruct=r.JsonRpcVersionStruct=r.jsonrpc2=r.getJsonSize=r.isValidJson=r.JsonStruct=r.UnsafeJsonStruct=void 0;const n=e("superstruct"),i=e("./assert");r.UnsafeJsonStruct=(0,n.union)([(0,n.literal)(null),(0,n.boolean)(),(0,n.define)("finite number",(e=>(0,n.is)(e,(0,n.number)())&&Number.isFinite(e))),(0,n.string)(),(0,n.array)((0,n.lazy)((()=>r.UnsafeJsonStruct))),(0,n.record)((0,n.string)(),(0,n.lazy)((()=>r.UnsafeJsonStruct)))]),r.JsonStruct=(0,n.define)("Json",((e,t)=>{function n(e,r){const n=[...r.validator(e,t)];return!(n.length>0)||n}try{const t=n(e,r.UnsafeJsonStruct);return!0!==t?t:n(JSON.parse(JSON.stringify(e)),r.UnsafeJsonStruct)}catch(e){return e instanceof RangeError&&"Circular reference detected"}})),r.isValidJson=function(e){return(0,n.is)(e,r.JsonStruct)},r.getJsonSize=function(e){(0,i.assertStruct)(e,r.JsonStruct,"Invalid JSON value");const t=JSON.stringify(e);return(new TextEncoder).encode(t).byteLength},r.jsonrpc2="2.0",r.JsonRpcVersionStruct=(0,n.literal)(r.jsonrpc2),r.JsonRpcIdStruct=(0,n.nullable)((0,n.union)([(0,n.number)(),(0,n.string)()])),r.JsonRpcErrorStruct=(0,n.object)({code:(0,n.integer)(),message:(0,n.string)(),data:(0,n.optional)(r.JsonStruct),stack:(0,n.optional)((0,n.string)())}),r.JsonRpcParamsStruct=(0,n.optional)((0,n.union)([(0,n.record)((0,n.string)(),r.JsonStruct),(0,n.array)(r.JsonStruct)])),r.JsonRpcRequestStruct=(0,n.object)({id:r.JsonRpcIdStruct,jsonrpc:r.JsonRpcVersionStruct,method:(0,n.string)(),params:r.JsonRpcParamsStruct}),r.JsonRpcNotificationStruct=(0,n.omit)(r.JsonRpcRequestStruct,["id"]),r.isJsonRpcNotification=function(e){return(0,n.is)(e,r.JsonRpcNotificationStruct)},r.assertIsJsonRpcNotification=function(e,t){(0,i.assertStruct)(e,r.JsonRpcNotificationStruct,"Invalid JSON-RPC notification",t)},r.isJsonRpcRequest=function(e){return(0,n.is)(e,r.JsonRpcRequestStruct)},r.assertIsJsonRpcRequest=function(e,t){(0,i.assertStruct)(e,r.JsonRpcRequestStruct,"Invalid JSON-RPC request",t)},r.PendingJsonRpcResponseStruct=(0,n.object)({id:r.JsonRpcIdStruct,jsonrpc:r.JsonRpcVersionStruct,result:(0,n.optional)((0,n.unknown)()),error:(0,n.optional)(r.JsonRpcErrorStruct)}),r.JsonRpcSuccessStruct=(0,n.object)({id:r.JsonRpcIdStruct,jsonrpc:r.JsonRpcVersionStruct,result:r.JsonStruct}),r.JsonRpcFailureStruct=(0,n.object)({id:r.JsonRpcIdStruct,jsonrpc:r.JsonRpcVersionStruct,error:r.JsonRpcErrorStruct}),r.JsonRpcResponseStruct=(0,n.union)([r.JsonRpcSuccessStruct,r.JsonRpcFailureStruct]),r.isPendingJsonRpcResponse=function(e){return(0,n.is)(e,r.PendingJsonRpcResponseStruct)},r.assertIsPendingJsonRpcResponse=function(e,t){(0,i.assertStruct)(e,r.PendingJsonRpcResponseStruct,"Invalid pending JSON-RPC response",t)},r.isJsonRpcResponse=function(e){return(0,n.is)(e,r.JsonRpcResponseStruct)},r.assertIsJsonRpcResponse=function(e,t){(0,i.assertStruct)(e,r.JsonRpcResponseStruct,"Invalid JSON-RPC response",t)},r.isJsonRpcSuccess=function(e){return(0,n.is)(e,r.JsonRpcSuccessStruct)},r.assertIsJsonRpcSuccess=function(e,t){(0,i.assertStruct)(e,r.JsonRpcSuccessStruct,"Invalid JSON-RPC success response",t)},r.isJsonRpcFailure=function(e){return(0,n.is)(e,r.JsonRpcFailureStruct)},r.assertIsJsonRpcFailure=function(e,t){(0,i.assertStruct)(e,r.JsonRpcFailureStruct,"Invalid JSON-RPC failure response",t)},r.isJsonRpcError=function(e){return(0,n.is)(e,r.JsonRpcErrorStruct)},r.assertIsJsonRpcError=function(e,t){(0,i.assertStruct)(e,r.JsonRpcErrorStruct,"Invalid JSON-RPC error",t)},r.getJsonRpcIdValidator=function(e){const{permitEmptyString:t,permitFractions:r,permitNull:n}=Object.assign({permitEmptyString:!0,permitFractions:!1,permitNull:!0},e);return e=>Boolean("number"==typeof e&&(r||Number.isInteger(e))||"string"==typeof e&&(t||e.length>0)||n&&null===e)}},{"./assert":295,superstruct:601}],305:[function(e,t,r){arguments[4][85][0].apply(r,arguments)},{dup:85}],306:[function(e,t,r){arguments[4][86][0].apply(r,arguments)},{debug:382,dup:86}],307:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.calculateNumberSize=r.calculateStringSize=r.isASCII=r.isPlainObject=r.ESCAPE_CHARACTERS_REGEXP=r.JsonSize=r.hasProperty=r.isObject=r.isNullOrUndefined=r.isNonEmptyArray=void 0,r.isNonEmptyArray=function(e){return Array.isArray(e)&&e.length>0},r.isNullOrUndefined=function(e){return null==e},r.isObject=function(e){return Boolean(e)&&"object"==typeof e&&!Array.isArray(e)};function n(e){return e.charCodeAt(0)<=127}r.hasProperty=(e,t)=>Object.hasOwnProperty.call(e,t),function(e){e[e.Null=4]="Null",e[e.Comma=1]="Comma",e[e.Wrapper=1]="Wrapper",e[e.True=4]="True",e[e.False=5]="False",e[e.Quote=1]="Quote",e[e.Colon=1]="Colon",e[e.Date=24]="Date"}(r.JsonSize||(r.JsonSize={})),r.ESCAPE_CHARACTERS_REGEXP=/"|\\|\n|\r|\t/gu,r.isPlainObject=function(e){if("object"!=typeof e||null===e)return!1;try{let t=e;for(;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}catch(e){return!1}},r.isASCII=n,r.calculateStringSize=function(e){var t;return e.split("").reduce(((e,t)=>n(t)?e+1:e+2),0)+(null!==(t=e.match(r.ESCAPE_CHARACTERS_REGEXP))&&void 0!==t?t:[]).length},r.calculateNumberSize=function(e){return e.toString().length}},{}],308:[function(e,t,r){arguments[4][88][0].apply(r,arguments)},{"./assert":295,"./hex":302,dup:88}],309:[function(e,t,r){arguments[4][89][0].apply(r,arguments)},{dup:89}],310:[function(e,t,r){arguments[4][90][0].apply(r,arguments)},{dup:90}],311:[function(e,t,r){arguments[4][91][0].apply(r,arguments)},{dup:91}],312:[function(e,t,r){arguments[4][92][0].apply(r,arguments)},{"./assert":295,dup:92,semver:557,superstruct:601}],313:[function(e,t,r){"use strict";
/*! noble-ed25519 - MIT License (c) 2019 Paul Miller (paulmillr.com) */var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.utils=r.curve25519=r.getSharedSecret=r.verify=r.sign=r.getPublicKey=r.Signature=r.Point=r.RistrettoPoint=r.ExtendedPoint=r.CURVE=void 0;const i=n(e("crypto")),s=BigInt(0),o=BigInt(1),a=BigInt(2),u=BigInt(255),c=a**BigInt(252)+BigInt("27742317777372353535851937790883648493"),l={a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),P:a**u-BigInt(19),l:c,n:c,h:BigInt(8),Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960")};r.CURVE=l;const f=a**BigInt(256),d=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752"),h=(BigInt("6853475219497561581579357271197624642482790079785650197046958215289687604742"),BigInt("25063068953384623474111414158702152701244531502492656460079210482610430750235")),p=BigInt("54469307008909316920995813868745141605393597292927456921205312896311721017578"),m=BigInt("1159843021668779879193775521855586647937357759715417654439879720876111806838"),g=BigInt("40440834346308536858101042469323190826248399146238708352240133220865137265952");class b{constructor(e,t,r,n){this.x=e,this.y=t,this.z=r,this.t=n}static fromAffine(e){if(!(e instanceof E))throw new TypeError("ExtendedPoint#fromAffine: expected Point");return e.equals(E.ZERO)?b.ZERO:new b(e.x,e.y,o,I(e.x*e.y))}static toAffineBatch(e){const t=function(e,t=l.P){const r=new Array(e.length),n=j(e.reduce(((e,n,i)=>n===s?e:(r[i]=e,I(e*n,t))),o),t);return e.reduceRight(((e,n,i)=>n===s?e:(r[i]=I(e*r[i],t),I(e*n,t))),n),r}(e.map((e=>e.z)));return e.map(((e,r)=>e.toAffine(t[r])))}static normalizeZ(e){return this.toAffineBatch(e).map(this.fromAffine)}equals(e){y(e);const{x:t,y:r,z:n}=this,{x:i,y:s,z:o}=e,a=I(t*o),u=I(i*n),c=I(r*o),l=I(s*n);return a===u&&c===l}negate(){return new b(I(-this.x),this.y,this.z,I(-this.t))}double(){const{x:e,y:t,z:r}=this,{a:n}=l,i=I(e**a),s=I(t**a),o=I(a*I(r**a)),u=I(n*i),c=I(I((e+t)**a)-i-s),f=u+s,d=f-o,h=u-s,p=I(c*d),m=I(f*h),g=I(c*h),y=I(d*f);return new b(p,m,y,g)}add(e){y(e);const{x:t,y:r,z:n,t:i}=this,{x:o,y:u,z:c,t:l}=e,f=I((r-t)*(u+o)),d=I((r+t)*(u-o)),h=I(d-f);if(h===s)return this.double();const p=I(n*a*l),m=I(i*a*c),g=m+p,v=d+f,w=m-p,_=I(g*h),S=I(v*w),E=I(g*w),x=I(h*v);return new b(_,S,x,E)}subtract(e){return this.add(e.negate())}precomputeWindow(e){const t=1+256/e,r=[];let n=this,i=n;for(let s=0;s<t;s++){i=n,r.push(i);for(let t=1;t<2**(e-1);t++)i=i.add(n),r.push(i);n=i.double()}return r}wNAF(e,t){!t&&this.equals(b.BASE)&&(t=E.BASE);const r=t&&t._WINDOW_SIZE||1;if(256%r)throw new Error("Point#wNAF: Invalid precomputation window, must be power of 2");let n=t&&S.get(t);n||(n=this.precomputeWindow(r),t&&1!==r&&(n=b.normalizeZ(n),S.set(t,n)));let i=b.ZERO,s=b.ZERO;const a=1+256/r,u=2**(r-1),c=BigInt(2**r-1),l=2**r,f=BigInt(r);for(let t=0;t<a;t++){const r=t*u;let a=Number(e&c);if(e>>=f,a>u&&(a-=l,e+=o),0===a){let e=n[r];t%2&&(e=e.negate()),s=s.add(e)}else{let e=n[r+Math.abs(a)-1];a<0&&(e=e.negate()),i=i.add(e)}}return b.normalizeZ([i,s])[0]}multiply(e,t){return this.wNAF(F(e,l.l),t)}multiplyUnsafe(e){let t=F(e,l.l,!1);const r=b.BASE,n=b.ZERO;if(t===s)return n;if(this.equals(n)||t===o)return this;if(this.equals(r))return this.wNAF(t);let i=n,a=this;for(;t>s;)t&o&&(i=i.add(a)),a=a.double(),t>>=o;return i}isSmallOrder(){return this.multiplyUnsafe(l.h).equals(b.ZERO)}isTorsionFree(){return this.multiplyUnsafe(l.l).equals(b.ZERO)}toAffine(e=j(this.z)){const{x:t,y:r,z:n}=this,i=I(t*e),s=I(r*e);if(I(n*e)!==o)throw new Error("invZ was invalid");return new E(i,s)}fromRistrettoBytes(){w()}toRistrettoBytes(){w()}fromRistrettoHash(){w()}}function y(e){if(!(e instanceof b))throw new TypeError("ExtendedPoint expected")}function v(e){if(!(e instanceof _))throw new TypeError("RistrettoPoint expected")}function w(){throw new Error("Legacy method: switch to RistrettoPoint")}r.ExtendedPoint=b,b.BASE=new b(l.Gx,l.Gy,o,I(l.Gx*l.Gy)),b.ZERO=new b(s,o,o,s);class _{constructor(e){this.ep=e}static calcElligatorRistrettoMap(e){const{d:t}=l,r=I(d*e*e),n=I((r+o)*m);let i=BigInt(-1);const s=I((i-t*r)*I(r+t));let{isValid:a,value:u}=L(n,s),c=I(u*e);R(c)||(c=I(-c)),a||(u=c),a||(i=r);const f=I(i*(r-o)*g-s),p=u*u,y=I((u+u)*s),v=I(f*h),w=I(o-p),_=I(o+p);return new b(I(y*_),I(w*v),I(v*_),I(y*w))}static hashToCurve(e){const t=C((e=$(e,64)).slice(0,32)),r=this.calcElligatorRistrettoMap(t),n=C(e.slice(32,64)),i=this.calcElligatorRistrettoMap(n);return new _(r.add(i))}static fromHex(e){e=$(e,32);const{a:t,d:r}=l,n="RistrettoPoint.fromHex: the hex is not valid encoding of RistrettoPoint",i=C(e);if(!function(e,t){if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}(O(i),e)||R(i))throw new Error(n);const a=I(i*i),u=I(o+t*a),c=I(o-t*a),f=I(u*u),d=I(c*c),h=I(t*r*f-d),{isValid:p,value:m}=U(I(h*d)),g=I(m*c),y=I(m*g*h);let v=I((i+i)*g);R(v)&&(v=I(-v));const w=I(u*y),S=I(v*w);if(!p||R(S)||w===s)throw new Error(n);return new _(new b(v,w,o,S))}toRawBytes(){let{x:e,y:t,z:r,t:n}=this.ep;const i=I(I(r+t)*I(r-t)),s=I(e*t),{value:o}=U(I(i*s**a)),u=I(o*i),c=I(o*s),l=I(u*c*n);let f;if(R(n*l)){let r=I(t*d),n=I(e*d);e=r,t=n,f=I(u*p)}else f=c;R(e*l)&&(t=I(-t));let h=I((r-t)*f);return R(h)&&(h=I(-h)),O(h)}toHex(){return k(this.toRawBytes())}toString(){return this.toHex()}equals(e){v(e);const t=this.ep,r=e.ep,n=I(t.x*r.y)===I(t.y*r.x),i=I(t.y*r.y)===I(t.x*r.x);return n||i}add(e){return v(e),new _(this.ep.add(e.ep))}subtract(e){return v(e),new _(this.ep.subtract(e.ep))}multiply(e){return new _(this.ep.multiply(e))}multiplyUnsafe(e){return new _(this.ep.multiplyUnsafe(e))}}r.RistrettoPoint=_,_.BASE=new _(b.BASE),_.ZERO=new _(b.ZERO);const S=new WeakMap;class E{constructor(e,t){this.x=e,this.y=t}_setWindowSize(e){this._WINDOW_SIZE=e,S.delete(this)}static fromHex(e,t=!0){const{d:r,P:n}=l,i=(e=$(e,32)).slice();i[31]=-129&e[31];const s=P(i);if(t&&s>=n)throw new Error("Expected 0 < hex < P");if(!t&&s>=f)throw new Error("Expected 0 < hex < 2**256");const a=I(s*s),u=I(a-o),c=I(r*a+o);let{isValid:d,value:h}=L(u,c);if(!d)throw new Error("Point.fromHex: invalid y coordinate");const p=(h&o)===o;return 0!=(128&e[31])!==p&&(h=I(-h)),new E(h,s)}static async fromPrivateKey(e){return(await z(e)).point}toRawBytes(){const e=O(this.y);return e[31]|=this.x&o?128:0,e}toHex(){return k(this.toRawBytes())}toX25519(){const{y:e}=this;return O(I((o+e)*j(o-e)))}isTorsionFree(){return b.fromAffine(this).isTorsionFree()}equals(e){return this.x===e.x&&this.y===e.y}negate(){return new E(I(-this.x),this.y)}add(e){return b.fromAffine(this).add(b.fromAffine(e)).toAffine()}subtract(e){return this.add(e.negate())}multiply(e){return b.fromAffine(this).multiply(e,this).toAffine()}}r.Point=E,E.BASE=new E(l.Gx,l.Gy),E.ZERO=new E(s,o);class x{constructor(e,t){this.r=e,this.s=t,this.assertValidity()}static fromHex(e){const t=$(e,64),r=E.fromHex(t.slice(0,32),!1),n=P(t.slice(32,64));return new x(r,n)}assertValidity(){const{r:e,s:t}=this;if(!(e instanceof E))throw new Error("Expected Point instance");return F(t,l.l,!1),this}toRawBytes(){const e=new Uint8Array(64);return e.set(this.r.toRawBytes()),e.set(O(this.s),32),e}toHex(){return k(this.toRawBytes())}}r.Signature=x;const A=Array.from({length:256},((e,t)=>t.toString(16).padStart(2,"0")));function k(e){if(!(e instanceof Uint8Array))throw new Error("Uint8Array expected");let t="";for(let r=0;r<e.length;r++)t+=A[e[r]];return t}function M(e){if("string"!=typeof e)throw new TypeError("hexToBytes: expected string, got "+typeof e);if(e.length%2)throw new Error("hexToBytes: received invalid unpadded hex");const t=new Uint8Array(e.length/2);for(let r=0;r<t.length;r++){const n=2*r,i=e.slice(n,n+2),s=Number.parseInt(i,16);if(Number.isNaN(s)||s<0)throw new Error("Invalid byte sequence");t[r]=s}return t}function T(e){return M(e.toString(16).padStart(64,"0"))}function O(e){return T(e).reverse()}function R(e){return(I(e)&o)===o}function P(e){if(!(e instanceof Uint8Array))throw new Error("Expected Uint8Array");return BigInt("0x"+k(Uint8Array.from(e).reverse()))}function C(e){return I(P(e)&a**u-o)}function I(e,t=l.P){const r=e%t;return r>=s?r:t+r}function j(e,t=l.P){if(e===s||t<=s)throw new Error(`invert: expected positive integers, got n=${e} mod=${t}`);let r=I(e,t),n=t,i=s,a=o,u=o,c=s;for(;r!==s;){const e=n/r,t=n%r,s=i-u*e,o=a-c*e;n=r,r=t,i=u,a=c,u=s,c=o}if(n!==o)throw new Error("invert: does not exist");return I(i,t)}function N(e,t){const{P:r}=l;let n=e;for(;t-- >s;)n*=n,n%=r;return n}function B(e){const{P:t}=l,r=BigInt(5),n=BigInt(10),i=BigInt(20),s=BigInt(40),u=BigInt(80),c=e*e%t*e%t,f=N(c,a)*c%t,d=N(f,o)*e%t,h=N(d,r)*d%t,p=N(h,n)*h%t,m=N(p,i)*p%t,g=N(m,s)*m%t,b=N(g,u)*g%t,y=N(b,u)*g%t,v=N(y,n)*h%t;return{pow_p_5_8:N(v,a)*e%t,b2:c}}function L(e,t){const r=I(t*t*t),n=I(r*r*t);let i=I(e*r*B(e*n).pow_p_5_8);const s=I(t*i*i),o=i,a=I(i*d),u=s===e,c=s===I(-e),l=s===I(-e*d);return u&&(i=o),(c||l)&&(i=a),R(i)&&(i=I(-i)),{isValid:u||c,value:i}}function U(e){return L(o,e)}async function D(...e){return I(P(await r.utils.sha512(function(...e){if(!e.every((e=>e instanceof Uint8Array)))throw new Error("Expected Uint8Array list");if(1===e.length)return e[0];const t=e.reduce(((e,t)=>e+t.length),0),r=new Uint8Array(t);for(let t=0,n=0;t<e.length;t++){const i=e[t];r.set(i,n),n+=i.length}return r}(...e))),l.l)}function $(e,t){const r=e instanceof Uint8Array?Uint8Array.from(e):M(e);if("number"==typeof t&&r.length!==t)throw new Error(`Expected ${t} bytes`);return r}function F(e,t,r=!0){if(!t)throw new TypeError("Specify max value");if("number"==typeof e&&Number.isSafeInteger(e)&&(e=BigInt(e)),"bigint"==typeof e&&e<t)if(r){if(s<e)return e}else if(s<=e)return e;throw new TypeError("Expected valid scalar: 0 < scalar < max")}function H(e){return e[0]&=248,e[31]&=127,e[31]|=64,e}async function z(e){if(32!==(e="bigint"==typeof e||"number"==typeof e?T(F(e,f)):$(e)).length)throw new Error("Expected 32 bytes");const t=await r.utils.sha512(e),n=H(t.slice(0,32)),i=t.slice(32,64),s=I(P(n),l.l),o=E.BASE.multiply(s),a=o.toRawBytes();return{head:n,prefix:i,scalar:s,point:o,pointBytes:a}}function V(e,t,r){const n=I(e*(t-r));return[t=I(t-n),r=I(r+n)]}r.getPublicKey=async function(e){return(await z(e)).pointBytes},r.sign=async function(e,t){e=$(e);const{prefix:r,scalar:n,pointBytes:i}=await z(t),s=await D(r,e),o=E.BASE.multiply(s),a=I(s+await D(o.toRawBytes(),i,e)*n,l.l);return new x(o,a).toRawBytes()},r.verify=async function(e,t,r){t=$(t),r instanceof E||(r=E.fromHex(r,!1));const{r:n,s:i}=e instanceof x?e.assertValidity():x.fromHex(e),s=b.BASE.multiplyUnsafe(i),o=await D(n.toRawBytes(),r.toRawBytes(),t),a=b.fromAffine(r).multiplyUnsafe(o);return b.fromAffine(n).add(a).subtract(s).multiplyUnsafe(l.h).equals(b.ZERO)},r.getSharedSecret=async function(e,t){const{head:n}=await z(e),i=E.fromHex(t).toX25519();return r.curve25519.scalarMult(n,i)},E.BASE._setWindowSize(8),r.curve25519={BASE_POINT_U:"0900000000000000000000000000000000000000000000000000000000000000",scalarMult(e,t){const r=function(e,t){const{P:r}=l,n=F(e,r),i=F(t,r),u=BigInt(121665),c=n;let f,d=o,h=s,p=n,m=o,g=s;for(let e=BigInt(254);e>=s;e--){const t=i>>e&o;g^=t,f=V(g,d,p),d=f[0],p=f[1],f=V(g,h,m),h=f[0],m=f[1],g=t;const r=d+h,n=I(r*r),s=d-h,l=I(s*s),b=n-l,y=p+m,v=I((p-m)*r),w=I(y*s);p=I((v+w)**a),m=I(c*(v-w)**a),d=I(n*l),h=I(b*(n+I(u*b)))}f=V(g,d,p),d=f[0],p=f[1],f=V(g,h,m),h=f[0],m=f[1];const{pow_p_5_8:b,b2:y}=B(h),v=I(N(b,BigInt(3))*y);return I(d*v)}(function(e){const t=$(e,32);return t[31]&=127,P(t)}(t),P(H($(e,32))));if(r===s)throw new Error("Invalid private or public key received");return function(e){return O(I(e,l.P))}(r)},scalarMultBase:e=>r.curve25519.scalarMult(e,r.curve25519.BASE_POINT_U)};const q={node:i.default,web:"object"==typeof self&&"crypto"in self?self.crypto:void 0};r.utils={TORSION_SUBGROUP:["0100000000000000000000000000000000000000000000000000000000000000","c7176a703d4dd84fba3c0b760d10670f2a2053fa2c39ccc64ec7fd7792ac037a","0000000000000000000000000000000000000000000000000000000000000080","26e8958fc2b227b045c3f489f2ef98f0d5dfac05d3c63339b13802886d53fc05","ecffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff7f","26e8958fc2b227b045c3f489f2ef98f0d5dfac05d3c63339b13802886d53fc85","0000000000000000000000000000000000000000000000000000000000000000","c7176a703d4dd84fba3c0b760d10670f2a2053fa2c39ccc64ec7fd7792ac03fa"],bytesToHex:k,getExtendedPublicKey:z,mod:I,invert:j,hashToPrivateScalar:e=>{if((e=$(e)).length<40||e.length>1024)throw new Error("Expected 40-1024 bytes of private key as per FIPS 186");const t=I(P(e),l.l);if(t===s||t===o)throw new Error("Invalid private key");return t},randomBytes:(e=32)=>{if(q.web)return q.web.getRandomValues(new Uint8Array(e));if(q.node){const{randomBytes:t}=q.node;return new Uint8Array(t(e).buffer)}throw new Error("The environment doesn't have randomBytes function")},randomPrivateKey:()=>r.utils.randomBytes(32),sha512:async e=>{if(q.web){const t=await q.web.subtle.digest("SHA-512",e.buffer);return new Uint8Array(t)}if(q.node)return Uint8Array.from(q.node.createHash("sha512").update(e).digest());throw new Error("The environment doesn't have sha512 function")},precompute(e=8,t=E.BASE){const r=t.equals(E.BASE)?t:new E(t.x,t.y);return r._setWindowSize(e),r.multiply(a),r}}},{crypto:360}],314:[function(e,t,r){"use strict";function n(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`Wrong positive integer: ${e}`)}function i(e){if("boolean"!=typeof e)throw new Error(`Expected boolean, not ${e}`)}function s(e,...t){if(!(e instanceof Uint8Array))throw new Error("Expected Uint8Array");if(t.length>0&&!t.includes(e.length))throw new Error(`Expected Uint8Array of length ${t}, not of length=${e.length}`)}function o(e){if("function"!=typeof e||"function"!=typeof e.create)throw new Error("Hash should be wrapped by utils.wrapConstructor");n(e.outputLen),n(e.blockLen)}function a(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function u(e,t){s(e);const r=t.outputLen;if(e.length<r)throw new Error(`digestInto() expects output buffer of length at least ${r}`)}Object.defineProperty(r,"__esModule",{value:!0}),r.output=r.exists=r.hash=r.bytes=r.bool=r.number=void 0,r.number=n,r.bool=i,r.bytes=s,r.hash=o,r.exists=a,r.output=u;const c={number:n,bool:i,bytes:s,hash:o,exists:a,output:u};r.default=c},{}],315:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.SHA2=void 0;const n=e("./_assert.js"),i=e("./utils.js");class s extends i.Hash{constructor(e,t,r,n){super(),this.blockLen=e,this.outputLen=t,this.padOffset=r,this.isLE=n,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=(0,i.createView)(this.buffer)}update(e){(0,n.exists)(this);const{view:t,buffer:r,blockLen:s}=this,o=(e=(0,i.toBytes)(e)).length;for(let n=0;n<o;){const a=Math.min(s-this.pos,o-n);if(a!==s)r.set(e.subarray(n,n+a),this.pos),this.pos+=a,n+=a,this.pos===s&&(this.process(t,0),this.pos=0);else{const t=(0,i.createView)(e);for(;s<=o-n;n+=s)this.process(t,n)}}return this.length+=e.length,this.roundClean(),this}digestInto(e){(0,n.exists)(this),(0,n.output)(e,this),this.finished=!0;const{buffer:t,view:r,blockLen:s,isLE:o}=this;let{pos:a}=this;t[a++]=128,this.buffer.subarray(a).fill(0),this.padOffset>s-a&&(this.process(r,0),a=0);for(let e=a;e<s;e++)t[e]=0;!function(e,t,r,n){if("function"==typeof e.setBigUint64)return e.setBigUint64(t,r,n);const i=BigInt(32),s=BigInt(4294967295),o=Number(r>>i&s),a=Number(r&s),u=n?4:0,c=n?0:4;e.setUint32(t+u,o,n),e.setUint32(t+c,a,n)}(r,s-8,BigInt(8*this.length),o),this.process(r,0);const u=(0,i.createView)(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=c/4,f=this.get();if(l>f.length)throw new Error("_sha2: outputLen bigger than state");for(let e=0;e<l;e++)u.setUint32(4*e,f[e],o)}digest(){const{buffer:e,outputLen:t}=this;this.digestInto(e);const r=e.slice(0,t);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:t,buffer:r,length:n,finished:i,destroyed:s,pos:o}=this;return e.length=n,e.pos=o,e.finished=i,e.destroyed=s,n%t&&e.buffer.set(r),e}}r.SHA2=s},{"./_assert.js":314,"./utils.js":323}],316:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.add5L=r.add5H=r.add4H=r.add4L=r.add3H=r.add3L=r.add=r.rotlBL=r.rotlBH=r.rotlSL=r.rotlSH=r.rotr32L=r.rotr32H=r.rotrBL=r.rotrBH=r.rotrSL=r.rotrSH=r.shrSL=r.shrSH=r.toBig=r.split=r.fromBig=void 0;const n=BigInt(2**32-1),i=BigInt(32);function s(e,t=!1){return t?{h:Number(e&n),l:Number(e>>i&n)}:{h:0|Number(e>>i&n),l:0|Number(e&n)}}function o(e,t=!1){let r=new Uint32Array(e.length),n=new Uint32Array(e.length);for(let i=0;i<e.length;i++){const{h:o,l:a}=s(e[i],t);[r[i],n[i]]=[o,a]}return[r,n]}r.fromBig=s,r.split=o;const a=(e,t)=>BigInt(e>>>0)<<i|BigInt(t>>>0);r.toBig=a;const u=(e,t,r)=>e>>>r;r.shrSH=u;const c=(e,t,r)=>e<<32-r|t>>>r;r.shrSL=c;const l=(e,t,r)=>e>>>r|t<<32-r;r.rotrSH=l;const f=(e,t,r)=>e<<32-r|t>>>r;r.rotrSL=f;const d=(e,t,r)=>e<<64-r|t>>>r-32;r.rotrBH=d;const h=(e,t,r)=>e>>>r-32|t<<64-r;r.rotrBL=h;const p=(e,t)=>t;r.rotr32H=p;const m=(e,t)=>e;r.rotr32L=m;const g=(e,t,r)=>e<<r|t>>>32-r;r.rotlSH=g;const b=(e,t,r)=>t<<r|e>>>32-r;r.rotlSL=b;const y=(e,t,r)=>t<<r-32|e>>>64-r;r.rotlBH=y;const v=(e,t,r)=>e<<r-32|t>>>64-r;function w(e,t,r,n){const i=(t>>>0)+(n>>>0);return{h:e+r+(i/2**32|0)|0,l:0|i}}r.rotlBL=v,r.add=w;const _=(e,t,r)=>(e>>>0)+(t>>>0)+(r>>>0);r.add3L=_;const S=(e,t,r,n)=>t+r+n+(e/2**32|0)|0;r.add3H=S;const E=(e,t,r,n)=>(e>>>0)+(t>>>0)+(r>>>0)+(n>>>0);r.add4L=E;const x=(e,t,r,n,i)=>t+r+n+i+(e/2**32|0)|0;r.add4H=x;const A=(e,t,r,n,i)=>(e>>>0)+(t>>>0)+(r>>>0)+(n>>>0)+(i>>>0);r.add5L=A;const k=(e,t,r,n,i,s)=>t+r+n+i+s+(e/2**32|0)|0;r.add5H=k;const M={fromBig:s,split:o,toBig:a,shrSH:u,shrSL:c,rotrSH:l,rotrSL:f,rotrBH:d,rotrBL:h,rotr32H:p,rotr32L:m,rotlSH:g,rotlSL:b,rotlBH:y,rotlBL:v,add:w,add3L:_,add3H:S,add4L:E,add4H:x,add5H:k,add5L:A};r.default=M},{}],317:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.crypto=void 0,r.crypto="object"==typeof globalThis&&"crypto"in globalThis?globalThis.crypto:void 0},{}],318:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.hmac=r.HMAC=void 0;const n=e("./_assert.js"),i=e("./utils.js");class s extends i.Hash{constructor(e,t){super(),this.finished=!1,this.destroyed=!1,(0,n.hash)(e);const r=(0,i.toBytes)(t);if(this.iHash=e.create(),"function"!=typeof this.iHash.update)throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const s=this.blockLen,o=new Uint8Array(s);o.set(r.length>s?e.create().update(r).digest():r);for(let e=0;e<o.length;e++)o[e]^=54;this.iHash.update(o),this.oHash=e.create();for(let e=0;e<o.length;e++)o[e]^=106;this.oHash.update(o),o.fill(0)}update(e){return(0,n.exists)(this),this.iHash.update(e),this}digestInto(e){(0,n.exists)(this),(0,n.bytes)(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:t,iHash:r,finished:n,destroyed:i,blockLen:s,outputLen:o}=this;return e.finished=n,e.destroyed=i,e.blockLen=s,e.outputLen=o,e.oHash=t._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}r.HMAC=s;r.hmac=(e,t,r)=>new s(e,t).update(r).digest(),r.hmac.create=(e,t)=>new s(e,t)},{"./_assert.js":314,"./utils.js":323}],319:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.ripemd160=r.RIPEMD160=void 0;const n=e("./_sha2.js"),i=e("./utils.js"),s=new Uint8Array([7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8]),o=Uint8Array.from({length:16},((e,t)=>t));let a=[o],u=[o.map((e=>(9*e+5)%16))];for(let e=0;e<4;e++)for(let t of[a,u])t.push(t[e].map((e=>s[e])));const c=[[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8],[12,13,11,15,6,9,9,7,12,15,11,13,7,8,7,7],[13,15,14,11,7,7,6,8,13,14,13,12,5,5,6,9],[14,11,12,14,8,6,5,5,15,12,15,14,9,9,8,6],[15,12,13,13,9,5,8,6,14,11,12,11,8,6,5,5]].map((e=>new Uint8Array(e))),l=a.map(((e,t)=>e.map((e=>c[t][e])))),f=u.map(((e,t)=>e.map((e=>c[t][e])))),d=new Uint32Array([0,1518500249,1859775393,2400959708,2840853838]),h=new Uint32Array([1352829926,1548603684,1836072691,2053994217,0]),p=(e,t)=>e<<t|e>>>32-t;function m(e,t,r,n){return 0===e?t^r^n:1===e?t&r|~t&n:2===e?(t|~r)^n:3===e?t&n|r&~n:t^(r|~n)}const g=new Uint32Array(16);class b extends n.SHA2{constructor(){super(64,20,8,!0),this.h0=1732584193,this.h1=-271733879,this.h2=-1732584194,this.h3=271733878,this.h4=-1009589776}get(){const{h0:e,h1:t,h2:r,h3:n,h4:i}=this;return[e,t,r,n,i]}set(e,t,r,n,i){this.h0=0|e,this.h1=0|t,this.h2=0|r,this.h3=0|n,this.h4=0|i}process(e,t){for(let r=0;r<16;r++,t+=4)g[r]=e.getUint32(t,!0);let r=0|this.h0,n=r,i=0|this.h1,s=i,o=0|this.h2,c=o,b=0|this.h3,y=b,v=0|this.h4,w=v;for(let e=0;e<5;e++){const t=4-e,_=d[e],S=h[e],E=a[e],x=u[e],A=l[e],k=f[e];for(let t=0;t<16;t++){const n=p(r+m(e,i,o,b)+g[E[t]]+_,A[t])+v|0;r=v,v=b,b=0|p(o,10),o=i,i=n}for(let e=0;e<16;e++){const r=p(n+m(t,s,c,y)+g[x[e]]+S,k[e])+w|0;n=w,w=y,y=0|p(c,10),c=s,s=r}}this.set(this.h1+o+y|0,this.h2+b+w|0,this.h3+v+n|0,this.h4+r+s|0,this.h0+i+c|0)}roundClean(){g.fill(0)}destroy(){this.destroyed=!0,this.buffer.fill(0),this.set(0,0,0,0,0)}}r.RIPEMD160=b,r.ripemd160=(0,i.wrapConstructor)((()=>new b))},{"./_sha2.js":315,"./utils.js":323}],320:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.sha224=r.sha256=void 0;const n=e("./_sha2.js"),i=e("./utils.js"),s=(e,t,r)=>e&t^e&r^t&r,o=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),a=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),u=new Uint32Array(64);class c extends n.SHA2{constructor(){super(64,32,8,!1),this.A=0|a[0],this.B=0|a[1],this.C=0|a[2],this.D=0|a[3],this.E=0|a[4],this.F=0|a[5],this.G=0|a[6],this.H=0|a[7]}get(){const{A:e,B:t,C:r,D:n,E:i,F:s,G:o,H:a}=this;return[e,t,r,n,i,s,o,a]}set(e,t,r,n,i,s,o,a){this.A=0|e,this.B=0|t,this.C=0|r,this.D=0|n,this.E=0|i,this.F=0|s,this.G=0|o,this.H=0|a}process(e,t){for(let r=0;r<16;r++,t+=4)u[r]=e.getUint32(t,!1);for(let e=16;e<64;e++){const t=u[e-15],r=u[e-2],n=(0,i.rotr)(t,7)^(0,i.rotr)(t,18)^t>>>3,s=(0,i.rotr)(r,17)^(0,i.rotr)(r,19)^r>>>10;u[e]=s+u[e-7]+n+u[e-16]|0}let{A:r,B:n,C:a,D:c,E:l,F:f,G:d,H:h}=this;for(let e=0;e<64;e++){const t=h+((0,i.rotr)(l,6)^(0,i.rotr)(l,11)^(0,i.rotr)(l,25))+((p=l)&f^~p&d)+o[e]+u[e]|0,m=((0,i.rotr)(r,2)^(0,i.rotr)(r,13)^(0,i.rotr)(r,22))+s(r,n,a)|0;h=d,d=f,f=l,l=c+t|0,c=a,a=n,n=r,r=t+m|0}var p;r=r+this.A|0,n=n+this.B|0,a=a+this.C|0,c=c+this.D|0,l=l+this.E|0,f=f+this.F|0,d=d+this.G|0,h=h+this.H|0,this.set(r,n,a,c,l,f,d,h)}roundClean(){u.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}class l extends c{constructor(){super(),this.A=-1056596264,this.B=914150663,this.C=812702999,this.D=-150054599,this.E=-4191439,this.F=1750603025,this.G=1694076839,this.H=-1090891868,this.outputLen=28}}r.sha256=(0,i.wrapConstructor)((()=>new c)),r.sha224=(0,i.wrapConstructor)((()=>new l))},{"./_sha2.js":315,"./utils.js":323}],321:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.shake256=r.shake128=r.keccak_512=r.keccak_384=r.keccak_256=r.keccak_224=r.sha3_512=r.sha3_384=r.sha3_256=r.sha3_224=r.Keccak=r.keccakP=void 0;const n=e("./_assert.js"),i=e("./_u64.js"),s=e("./utils.js"),[o,a,u]=[[],[],[]],c=BigInt(0),l=BigInt(1),f=BigInt(2),d=BigInt(7),h=BigInt(256),p=BigInt(113);for(let e=0,t=l,r=1,n=0;e<24;e++){[r,n]=[n,(2*r+3*n)%5],o.push(2*(5*n+r)),a.push((e+1)*(e+2)/2%64);let i=c;for(let e=0;e<7;e++)t=(t<<l^(t>>d)*p)%h,t&f&&(i^=l<<(l<<BigInt(e))-l);u.push(i)}const[m,g]=(0,i.split)(u,!0),b=(e,t,r)=>r>32?(0,i.rotlBH)(e,t,r):(0,i.rotlSH)(e,t,r),y=(e,t,r)=>r>32?(0,i.rotlBL)(e,t,r):(0,i.rotlSL)(e,t,r);function v(e,t=24){const r=new Uint32Array(10);for(let n=24-t;n<24;n++){for(let t=0;t<10;t++)r[t]=e[t]^e[t+10]^e[t+20]^e[t+30]^e[t+40];for(let t=0;t<10;t+=2){const n=(t+8)%10,i=(t+2)%10,s=r[i],o=r[i+1],a=b(s,o,1)^r[n],u=y(s,o,1)^r[n+1];for(let r=0;r<50;r+=10)e[t+r]^=a,e[t+r+1]^=u}let t=e[2],i=e[3];for(let r=0;r<24;r++){const n=a[r],s=b(t,i,n),u=y(t,i,n),c=o[r];t=e[c],i=e[c+1],e[c]=s,e[c+1]=u}for(let t=0;t<50;t+=10){for(let n=0;n<10;n++)r[n]=e[t+n];for(let n=0;n<10;n++)e[t+n]^=~r[(n+2)%10]&r[(n+4)%10]}e[0]^=m[n],e[1]^=g[n]}r.fill(0)}r.keccakP=v;class w extends s.Hash{constructor(e,t,r,i=!1,o=24){if(super(),this.blockLen=e,this.suffix=t,this.outputLen=r,this.enableXOF=i,this.rounds=o,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,(0,n.number)(r),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=(0,s.u32)(this.state)}keccak(){v(this.state32,this.rounds),this.posOut=0,this.pos=0}update(e){(0,n.exists)(this);const{blockLen:t,state:r}=this,i=(e=(0,s.toBytes)(e)).length;for(let n=0;n<i;){const s=Math.min(t-this.pos,i-n);for(let t=0;t<s;t++)r[this.pos++]^=e[n++];this.pos===t&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:t,pos:r,blockLen:n}=this;e[r]^=t,0!=(128&t)&&r===n-1&&this.keccak(),e[n-1]^=128,this.keccak()}writeInto(e){(0,n.exists)(this,!1),(0,n.bytes)(e),this.finish();const t=this.state,{blockLen:r}=this;for(let n=0,i=e.length;n<i;){this.posOut>=r&&this.keccak();const s=Math.min(r-this.posOut,i-n);e.set(t.subarray(this.posOut,this.posOut+s),n),this.posOut+=s,n+=s}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return(0,n.number)(e),this.xofInto(new Uint8Array(e))}digestInto(e){if((0,n.output)(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){const{blockLen:t,suffix:r,outputLen:n,rounds:i,enableXOF:s}=this;return e||(e=new w(t,r,n,s,i)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=i,e.suffix=r,e.outputLen=n,e.enableXOF=s,e.destroyed=this.destroyed,e}}r.Keccak=w;const _=(e,t,r)=>(0,s.wrapConstructor)((()=>new w(t,e,r)));r.sha3_224=_(6,144,28),r.sha3_256=_(6,136,32),r.sha3_384=_(6,104,48),r.sha3_512=_(6,72,64),r.keccak_224=_(1,144,28),r.keccak_256=_(1,136,32),r.keccak_384=_(1,104,48),r.keccak_512=_(1,72,64);const S=(e,t,r)=>(0,s.wrapXOFConstructorWithOpts)(((n={})=>new w(t,e,void 0===n.dkLen?r:n.dkLen,!0)));r.shake128=S(31,168,16),r.shake256=S(31,136,32)},{"./_assert.js":314,"./_u64.js":316,"./utils.js":323}],322:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.sha384=r.sha512_256=r.sha512_224=r.sha512=r.SHA512=void 0;const n=e("./_sha2.js"),i=e("./_u64.js"),s=e("./utils.js"),[o,a]=(()=>i.default.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map((e=>BigInt(e)))))(),u=new Uint32Array(80),c=new Uint32Array(80);class l extends n.SHA2{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:e,Al:t,Bh:r,Bl:n,Ch:i,Cl:s,Dh:o,Dl:a,Eh:u,El:c,Fh:l,Fl:f,Gh:d,Gl:h,Hh:p,Hl:m}=this;return[e,t,r,n,i,s,o,a,u,c,l,f,d,h,p,m]}set(e,t,r,n,i,s,o,a,u,c,l,f,d,h,p,m){this.Ah=0|e,this.Al=0|t,this.Bh=0|r,this.Bl=0|n,this.Ch=0|i,this.Cl=0|s,this.Dh=0|o,this.Dl=0|a,this.Eh=0|u,this.El=0|c,this.Fh=0|l,this.Fl=0|f,this.Gh=0|d,this.Gl=0|h,this.Hh=0|p,this.Hl=0|m}process(e,t){for(let r=0;r<16;r++,t+=4)u[r]=e.getUint32(t),c[r]=e.getUint32(t+=4);for(let e=16;e<80;e++){const t=0|u[e-15],r=0|c[e-15],n=i.default.rotrSH(t,r,1)^i.default.rotrSH(t,r,8)^i.default.shrSH(t,r,7),s=i.default.rotrSL(t,r,1)^i.default.rotrSL(t,r,8)^i.default.shrSL(t,r,7),o=0|u[e-2],a=0|c[e-2],l=i.default.rotrSH(o,a,19)^i.default.rotrBH(o,a,61)^i.default.shrSH(o,a,6),f=i.default.rotrSL(o,a,19)^i.default.rotrBL(o,a,61)^i.default.shrSL(o,a,6),d=i.default.add4L(s,f,c[e-7],c[e-16]),h=i.default.add4H(d,n,l,u[e-7],u[e-16]);u[e]=0|h,c[e]=0|d}let{Ah:r,Al:n,Bh:s,Bl:l,Ch:f,Cl:d,Dh:h,Dl:p,Eh:m,El:g,Fh:b,Fl:y,Gh:v,Gl:w,Hh:_,Hl:S}=this;for(let e=0;e<80;e++){const t=i.default.rotrSH(m,g,14)^i.default.rotrSH(m,g,18)^i.default.rotrBH(m,g,41),E=i.default.rotrSL(m,g,14)^i.default.rotrSL(m,g,18)^i.default.rotrBL(m,g,41),x=m&b^~m&v,A=g&y^~g&w,k=i.default.add5L(S,E,A,a[e],c[e]),M=i.default.add5H(k,_,t,x,o[e],u[e]),T=0|k,O=i.default.rotrSH(r,n,28)^i.default.rotrBH(r,n,34)^i.default.rotrBH(r,n,39),R=i.default.rotrSL(r,n,28)^i.default.rotrBL(r,n,34)^i.default.rotrBL(r,n,39),P=r&s^r&f^s&f,C=n&l^n&d^l&d;_=0|v,S=0|w,v=0|b,w=0|y,b=0|m,y=0|g,({h:m,l:g}=i.default.add(0|h,0|p,0|M,0|T)),h=0|f,p=0|d,f=0|s,d=0|l,s=0|r,l=0|n;const I=i.default.add3L(T,R,C);r=i.default.add3H(I,M,O,P),n=0|I}({h:r,l:n}=i.default.add(0|this.Ah,0|this.Al,0|r,0|n)),({h:s,l:l}=i.default.add(0|this.Bh,0|this.Bl,0|s,0|l)),({h:f,l:d}=i.default.add(0|this.Ch,0|this.Cl,0|f,0|d)),({h:h,l:p}=i.default.add(0|this.Dh,0|this.Dl,0|h,0|p)),({h:m,l:g}=i.default.add(0|this.Eh,0|this.El,0|m,0|g)),({h:b,l:y}=i.default.add(0|this.Fh,0|this.Fl,0|b,0|y)),({h:v,l:w}=i.default.add(0|this.Gh,0|this.Gl,0|v,0|w)),({h:_,l:S}=i.default.add(0|this.Hh,0|this.Hl,0|_,0|S)),this.set(r,n,s,l,f,d,h,p,m,g,b,y,v,w,_,S)}roundClean(){u.fill(0),c.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}r.SHA512=l;class f extends l{constructor(){super(),this.Ah=-1942145080,this.Al=424955298,this.Bh=1944164710,this.Bl=-1982016298,this.Ch=502970286,this.Cl=855612546,this.Dh=1738396948,this.Dl=1479516111,this.Eh=258812777,this.El=2077511080,this.Fh=2011393907,this.Fl=79989058,this.Gh=1067287976,this.Gl=1780299464,this.Hh=286451373,this.Hl=-1848208735,this.outputLen=28}}class d extends l{constructor(){super(),this.Ah=573645204,this.Al=-64227540,this.Bh=-1621794909,this.Bl=-934517566,this.Ch=596883563,this.Cl=1867755857,this.Dh=-1774684391,this.Dl=1497426621,this.Eh=-1775747358,this.El=-1467023389,this.Fh=-1101128155,this.Fl=1401305490,this.Gh=721525244,this.Gl=746961066,this.Hh=246885852,this.Hl=-2117784414,this.outputLen=32}}class h extends l{constructor(){super(),this.Ah=-876896931,this.Al=-1056596264,this.Bh=1654270250,this.Bl=914150663,this.Ch=-1856437926,this.Cl=812702999,this.Dh=355462360,this.Dl=-150054599,this.Eh=1731405415,this.El=-4191439,this.Fh=-1900787065,this.Fl=1750603025,this.Gh=-619958771,this.Gl=1694076839,this.Hh=1203062813,this.Hl=-1090891868,this.outputLen=48}}r.sha512=(0,s.wrapConstructor)((()=>new l)),r.sha512_224=(0,s.wrapConstructor)((()=>new f)),r.sha512_256=(0,s.wrapConstructor)((()=>new d)),r.sha384=(0,s.wrapConstructor)((()=>new h))},{"./_sha2.js":315,"./_u64.js":316,"./utils.js":323}],323:[function(e,t,r){"use strict";
/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */Object.defineProperty(r,"__esModule",{value:!0}),r.randomBytes=r.wrapXOFConstructorWithOpts=r.wrapConstructorWithOpts=r.wrapConstructor=r.checkOpts=r.Hash=r.concatBytes=r.toBytes=r.utf8ToBytes=r.asyncLoop=r.nextTick=r.hexToBytes=r.bytesToHex=r.isLE=r.rotr=r.createView=r.u32=r.u8=void 0;const n=e("@noble/hashes/crypto"),i=e=>e instanceof Uint8Array;r.u8=e=>new Uint8Array(e.buffer,e.byteOffset,e.byteLength);r.u32=e=>new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4));r.createView=e=>new DataView(e.buffer,e.byteOffset,e.byteLength);if(r.rotr=(e,t)=>e<<32-t|e>>>t,r.isLE=68===new Uint8Array(new Uint32Array([287454020]).buffer)[0],!r.isLE)throw new Error("Non little-endian hardware is not supported");const s=Array.from({length:256},((e,t)=>t.toString(16).padStart(2,"0")));r.bytesToHex=function(e){if(!i(e))throw new Error("Uint8Array expected");let t="";for(let r=0;r<e.length;r++)t+=s[e[r]];return t},r.hexToBytes=function(e){if("string"!=typeof e)throw new Error("hex string expected, got "+typeof e);const t=e.length;if(t%2)throw new Error("padded hex string expected, got unpadded hex of length "+t);const r=new Uint8Array(t/2);for(let t=0;t<r.length;t++){const n=2*t,i=e.slice(n,n+2),s=Number.parseInt(i,16);if(Number.isNaN(s)||s<0)throw new Error("Invalid byte sequence");r[t]=s}return r};function o(e){if("string"!=typeof e)throw new Error("utf8ToBytes expected string, got "+typeof e);return new Uint8Array((new TextEncoder).encode(e))}function a(e){if("string"==typeof e&&(e=o(e)),!i(e))throw new Error("expected Uint8Array, got "+typeof e);return e}r.nextTick=async()=>{},r.asyncLoop=async function(e,t,n){let i=Date.now();for(let s=0;s<e;s++){n(s);const e=Date.now()-i;e>=0&&e<t||(await(0,r.nextTick)(),i+=e)}},r.utf8ToBytes=o,r.toBytes=a,r.concatBytes=function(...e){const t=new Uint8Array(e.reduce(((e,t)=>e+t.length),0));let r=0;return e.forEach((e=>{if(!i(e))throw new Error("Uint8Array expected");t.set(e,r),r+=e.length})),t};r.Hash=class{clone(){return this._cloneInto()}};const u={}.toString;r.checkOpts=function(e,t){if(void 0!==t&&"[object Object]"!==u.call(t))throw new Error("Options should be object or undefined");return Object.assign(e,t)},r.wrapConstructor=function(e){const t=t=>e().update(a(t)).digest(),r=e();return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=()=>e(),t},r.wrapConstructorWithOpts=function(e){const t=(t,r)=>e(r).update(a(t)).digest(),r=e({});return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=t=>e(t),t},r.wrapXOFConstructorWithOpts=function(e){const t=(t,r)=>e(r).update(a(t)).digest(),r=e({});return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=t=>e(t),t},r.randomBytes=function(e=32){if(n.crypto&&"function"==typeof n.crypto.getRandomValues)return n.crypto.getRandomValues(new Uint8Array(e));throw new Error("crypto.getRandomValues must be defined")}},{"@noble/hashes/crypto":317}],324:[function(e,t,r){"use strict";
/*! noble-secp256k1 - MIT License (c) 2019 Paul Miller (paulmillr.com) */Object.defineProperty(r,"__esModule",{value:!0}),r.utils=r.schnorr=r.verify=r.signSync=r.sign=r.getSharedSecret=r.recoverPublicKey=r.getPublicKey=r.Signature=r.Point=r.CURVE=void 0;const n=e("crypto"),i=BigInt(0),s=BigInt(1),o=BigInt(2),a=BigInt(3),u=BigInt(8),c=Object.freeze({a:i,b:BigInt(7),P:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),n:BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),h:s,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee")});r.CURVE=c;const l=(e,t)=>(e+t/o)/t,f={beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar(e){const{n:t}=c,r=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),n=-s*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),i=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),o=r,a=BigInt("0x100000000000000000000000000000000"),u=l(o*e,t),f=l(-n*e,t);let d=D(e-u*r-f*i,t),h=D(-u*n-f*o,t);const p=d>a,m=h>a;if(p&&(d=t-d),m&&(h=t-h),d>a||h>a)throw new Error("splitScalarEndo: Endomorphism failed, k="+e);return{k1neg:p,k1:d,k2neg:m,k2:h}}},d=32,h=32,p=d+1,m=2*d+1;function g(e){const{a:t,b:r}=c,n=D(e*e),i=D(n*e);return D(i+t*e+r)}const b=c.a===i;class y extends Error{constructor(e){super(e)}}function v(e){if(!(e instanceof w))throw new TypeError("JacobianPoint expected")}class w{constructor(e,t,r){this.x=e,this.y=t,this.z=r}static fromAffine(e){if(!(e instanceof E))throw new TypeError("JacobianPoint#fromAffine: expected Point");return e.equals(E.ZERO)?w.ZERO:new w(e.x,e.y,s)}static toAffineBatch(e){const t=function(e,t=c.P){const r=new Array(e.length),n=F(e.reduce(((e,n,s)=>n===i?e:(r[s]=e,D(e*n,t))),s),t);return e.reduceRight(((e,n,s)=>n===i?e:(r[s]=D(e*r[s],t),D(e*n,t))),n),r}(e.map((e=>e.z)));return e.map(((e,r)=>e.toAffine(t[r])))}static normalizeZ(e){return w.toAffineBatch(e).map(w.fromAffine)}equals(e){v(e);const{x:t,y:r,z:n}=this,{x:i,y:s,z:o}=e,a=D(n*n),u=D(o*o),c=D(t*u),l=D(i*a),f=D(D(r*o)*u),d=D(D(s*n)*a);return c===l&&f===d}negate(){return new w(this.x,D(-this.y),this.z)}double(){const{x:e,y:t,z:r}=this,n=D(e*e),i=D(t*t),s=D(i*i),c=e+i,l=D(o*(D(c*c)-n-s)),f=D(a*n),d=D(f*f),h=D(d-o*l),p=D(f*(l-h)-u*s),m=D(o*t*r);return new w(h,p,m)}add(e){v(e);const{x:t,y:r,z:n}=this,{x:s,y:a,z:u}=e;if(s===i||a===i)return this;if(t===i||r===i)return e;const c=D(n*n),l=D(u*u),f=D(t*l),d=D(s*c),h=D(D(r*u)*l),p=D(D(a*n)*c),m=D(d-f),g=D(p-h);if(m===i)return g===i?this.double():w.ZERO;const b=D(m*m),y=D(m*b),_=D(f*b),S=D(g*g-y-o*_),E=D(g*(_-S)-h*y),x=D(n*u*m);return new w(S,E,x)}subtract(e){return this.add(e.negate())}multiplyUnsafe(e){const t=w.ZERO;if("bigint"==typeof e&&e===i)return t;let r=U(e);if(r===s)return this;if(!b){let e=t,n=this;for(;r>i;)r&s&&(e=e.add(n)),n=n.double(),r>>=s;return e}let{k1neg:n,k1:o,k2neg:a,k2:u}=f.splitScalar(r),c=t,l=t,d=this;for(;o>i||u>i;)o&s&&(c=c.add(d)),u&s&&(l=l.add(d)),d=d.double(),o>>=s,u>>=s;return n&&(c=c.negate()),a&&(l=l.negate()),l=new w(D(l.x*f.beta),l.y,l.z),c.add(l)}precomputeWindow(e){const t=b?128/e+1:256/e+1,r=[];let n=this,i=n;for(let s=0;s<t;s++){i=n,r.push(i);for(let t=1;t<2**(e-1);t++)i=i.add(n),r.push(i);n=i.double()}return r}wNAF(e,t){!t&&this.equals(w.BASE)&&(t=E.BASE);const r=t&&t._WINDOW_SIZE||1;if(256%r)throw new Error("Point#wNAF: Invalid precomputation window, must be power of 2");let n=t&&S.get(t);n||(n=this.precomputeWindow(r),t&&1!==r&&(n=w.normalizeZ(n),S.set(t,n)));let i=w.ZERO,o=w.BASE;const a=1+(b?128/r:256/r),u=2**(r-1),c=BigInt(2**r-1),l=2**r,f=BigInt(r);for(let t=0;t<a;t++){const r=t*u;let a=Number(e&c);e>>=f,a>u&&(a-=l,e+=s);const d=r,h=r+Math.abs(a)-1,p=t%2!=0,m=a<0;0===a?o=o.add(_(p,n[d])):i=i.add(_(m,n[h]))}return{p:i,f:o}}multiply(e,t){let r,n,i=U(e);if(b){const{k1neg:e,k1:s,k2neg:o,k2:a}=f.splitScalar(i);let{p:u,f:c}=this.wNAF(s,t),{p:l,f:d}=this.wNAF(a,t);u=_(e,u),l=_(o,l),l=new w(D(l.x*f.beta),l.y,l.z),r=u.add(l),n=c.add(d)}else{const{p:e,f:s}=this.wNAF(i,t);r=e,n=s}return w.normalizeZ([r,n])[0]}toAffine(e){const{x:t,y:r,z:n}=this,i=this.equals(w.ZERO);null==e&&(e=i?u:F(n));const o=e,a=D(o*o),c=D(a*o),l=D(t*a),f=D(r*c),d=D(n*o);if(i)return E.ZERO;if(d!==s)throw new Error("invZ was invalid");return new E(l,f)}}function _(e,t){const r=t.negate();return e?r:t}w.BASE=new w(c.Gx,c.Gy,s),w.ZERO=new w(i,s,i);const S=new WeakMap;class E{constructor(e,t){this.x=e,this.y=t}_setWindowSize(e){this._WINDOW_SIZE=e,S.delete(this)}hasEvenY(){return this.y%o===i}static fromCompressedHex(e){const t=32===e.length,r=B(t?e:e.subarray(1));if(!J(r))throw new Error("Point is not on curve");let n=function(e){const{P:t}=c,r=BigInt(6),n=BigInt(11),i=BigInt(22),s=BigInt(23),u=BigInt(44),l=BigInt(88),f=e*e*e%t,d=f*f*e%t,h=$(d,a)*d%t,p=$(h,a)*d%t,m=$(p,o)*f%t,g=$(m,n)*m%t,b=$(g,i)*g%t,y=$(b,u)*b%t,v=$(y,l)*y%t,w=$(v,u)*b%t,_=$(w,a)*d%t,S=$(_,s)*g%t,E=$(S,r)*f%t,x=$(E,o);if(x*x%t!==e)throw new Error("Cannot find square root");return x}(g(r));const i=(n&s)===s;if(t)i&&(n=D(-n));else{1==(1&e[0])!==i&&(n=D(-n))}const u=new E(r,n);return u.assertValidity(),u}static fromUncompressedHex(e){const t=B(e.subarray(1,d+1)),r=B(e.subarray(d+1,2*d+1)),n=new E(t,r);return n.assertValidity(),n}static fromHex(e){const t=L(e),r=t.length,n=t[0];if(r===d)return this.fromCompressedHex(t);if(r===p&&(2===n||3===n))return this.fromCompressedHex(t);if(r===m&&4===n)return this.fromUncompressedHex(t);throw new Error(`Point.fromHex: received invalid point. Expected 32-${p} compressed bytes or ${m} uncompressed bytes, not ${r}`)}static fromPrivateKey(e){return E.BASE.multiply(G(e))}static fromSignature(e,t,r){const{r:n,s:i}=X(t);if(![0,1,2,3].includes(r))throw new Error("Cannot recover: invalid recovery bit");const s=H(L(e)),{n:o}=c,a=2===r||3===r?n+o:n,u=F(a,o),l=D(-s*u,o),f=D(i*u,o),d=1&r?"03":"02",h=E.fromHex(d+P(a)),p=E.BASE.multiplyAndAddUnsafe(h,l,f);if(!p)throw new Error("Cannot recover signature: point at infinify");return p.assertValidity(),p}toRawBytes(e=!1){return N(this.toHex(e))}toHex(e=!1){const t=P(this.x);if(e){return`${this.hasEvenY()?"02":"03"}${t}`}return`04${t}${P(this.y)}`}toHexX(){return this.toHex(!0).slice(2)}toRawX(){return this.toRawBytes(!0).slice(1)}assertValidity(){const e="Point is not on elliptic curve",{x:t,y:r}=this;if(!J(t)||!J(r))throw new Error(e);const n=D(r*r);if(D(n-g(t))!==i)throw new Error(e)}equals(e){return this.x===e.x&&this.y===e.y}negate(){return new E(this.x,D(-this.y))}double(){return w.fromAffine(this).double().toAffine()}add(e){return w.fromAffine(this).add(w.fromAffine(e)).toAffine()}subtract(e){return this.add(e.negate())}multiply(e){return w.fromAffine(this).multiply(e,this).toAffine()}multiplyAndAddUnsafe(e,t,r){const n=w.fromAffine(this),o=t===i||t===s||this!==E.BASE?n.multiplyUnsafe(t):n.multiply(t),a=w.fromAffine(e).multiplyUnsafe(r),u=o.add(a);return u.equals(w.ZERO)?void 0:u.toAffine()}}function x(e){return Number.parseInt(e[0],16)>=8?"00"+e:e}function A(e){if(e.length<2||2!==e[0])throw new Error(`Invalid signature integer tag: ${O(e)}`);const t=e[1],r=e.subarray(2,t+2);if(!t||r.length!==t)throw new Error("Invalid signature integer: wrong length");if(0===r[0]&&r[1]<=127)throw new Error("Invalid signature integer: trailing length");return{data:B(r),left:e.subarray(t+2)}}r.Point=E,E.BASE=new E(c.Gx,c.Gy),E.ZERO=new E(i,i);class k{constructor(e,t){this.r=e,this.s=t,this.assertValidity()}static fromCompact(e){const t=e instanceof Uint8Array,r="Signature.fromCompact";if("string"!=typeof e&&!t)throw new TypeError(`${r}: Expected string or Uint8Array`);const n=t?O(e):e;if(128!==n.length)throw new Error(`${r}: Expected 64-byte hex`);return new k(j(n.slice(0,64)),j(n.slice(64,128)))}static fromDER(e){const t=e instanceof Uint8Array;if("string"!=typeof e&&!t)throw new TypeError("Signature.fromDER: Expected string or Uint8Array");const{r:r,s:n}=function(e){if(e.length<2||48!=e[0])throw new Error(`Invalid signature tag: ${O(e)}`);if(e[1]!==e.length-2)throw new Error("Invalid signature: incorrect length");const{data:t,left:r}=A(e.subarray(2)),{data:n,left:i}=A(r);if(i.length)throw new Error(`Invalid signature: left bytes after parsing: ${O(i)}`);return{r:t,s:n}}(t?e:N(e));return new k(r,n)}static fromHex(e){return this.fromDER(e)}assertValidity(){const{r:e,s:t}=this;if(!W(e))throw new Error("Invalid Signature: r must be 0 < r < n");if(!W(t))throw new Error("Invalid Signature: s must be 0 < s < n")}hasHighS(){const e=c.n>>s;return this.s>e}normalizeS(){return this.hasHighS()?new k(this.r,D(-this.s,c.n)):this}toDERRawBytes(){return N(this.toDERHex())}toDERHex(){const e=x(I(this.s)),t=x(I(this.r)),r=e.length/2,n=t.length/2,i=I(r),s=I(n);return`30${I(n+r+4)}02${s}${t}02${i}${e}`}toRawBytes(){return this.toDERRawBytes()}toHex(){return this.toDERHex()}toCompactRawBytes(){return N(this.toCompactHex())}toCompactHex(){return P(this.r)+P(this.s)}}function M(...e){if(!e.every((e=>e instanceof Uint8Array)))throw new Error("Uint8Array list expected");if(1===e.length)return e[0];const t=e.reduce(((e,t)=>e+t.length),0),r=new Uint8Array(t);for(let t=0,n=0;t<e.length;t++){const i=e[t];r.set(i,n),n+=i.length}return r}r.Signature=k;const T=Array.from({length:256},((e,t)=>t.toString(16).padStart(2,"0")));function O(e){if(!(e instanceof Uint8Array))throw new Error("Expected Uint8Array");let t="";for(let r=0;r<e.length;r++)t+=T[e[r]];return t}const R=BigInt("0x10000000000000000000000000000000000000000000000000000000000000000");function P(e){if("bigint"!=typeof e)throw new Error("Expected bigint");if(!(i<=e&&e<R))throw new Error("Expected number 0 <= n < 2^256");return e.toString(16).padStart(64,"0")}function C(e){const t=N(P(e));if(32!==t.length)throw new Error("Error: expected 32 bytes");return t}function I(e){const t=e.toString(16);return 1&t.length?`0${t}`:t}function j(e){if("string"!=typeof e)throw new TypeError("hexToNumber: expected string, got "+typeof e);return BigInt(`0x${e}`)}function N(e){if("string"!=typeof e)throw new TypeError("hexToBytes: expected string, got "+typeof e);if(e.length%2)throw new Error("hexToBytes: received invalid unpadded hex"+e.length);const t=new Uint8Array(e.length/2);for(let r=0;r<t.length;r++){const n=2*r,i=e.slice(n,n+2),s=Number.parseInt(i,16);if(Number.isNaN(s)||s<0)throw new Error("Invalid byte sequence");t[r]=s}return t}function B(e){return j(O(e))}function L(e){return e instanceof Uint8Array?Uint8Array.from(e):N(e)}function U(e){if("number"==typeof e&&Number.isSafeInteger(e)&&e>0)return BigInt(e);if("bigint"==typeof e&&W(e))return e;throw new TypeError("Expected valid private scalar: 0 < scalar < curve.n")}function D(e,t=c.P){const r=e%t;return r>=i?r:t+r}function $(e,t){const{P:r}=c;let n=e;for(;t-- >i;)n*=n,n%=r;return n}function F(e,t=c.P){if(e===i||t<=i)throw new Error(`invert: expected positive integers, got n=${e} mod=${t}`);let r=D(e,t),n=t,o=i,a=s,u=s,l=i;for(;r!==i;){const e=n/r,t=n%r,i=o-u*e,s=a-l*e;n=r,r=t,o=u,a=l,u=i,l=s}if(n!==s)throw new Error("invert: does not exist");return D(o,t)}function H(e,t=!1){const r=function(e){const t=8*e.length-8*h,r=B(e);return t>0?r>>BigInt(t):r}(e);if(t)return r;const{n:n}=c;return r>=n?r-n:r}let z,V;class q{constructor(e,t){if(this.hashLen=e,this.qByteLen=t,"number"!=typeof e||e<2)throw new Error("hashLen must be a number");if("number"!=typeof t||t<2)throw new Error("qByteLen must be a number");this.v=new Uint8Array(e).fill(1),this.k=new Uint8Array(e).fill(0),this.counter=0}hmac(...e){return r.utils.hmacSha256(this.k,...e)}hmacSync(...e){return V(this.k,...e)}checkSync(){if("function"!=typeof V)throw new y("hmacSha256Sync needs to be set")}incr(){if(this.counter>=1e3)throw new Error("Tried 1,000 k values for sign(), all were invalid");this.counter+=1}async reseed(e=new Uint8Array){this.k=await this.hmac(this.v,Uint8Array.from([0]),e),this.v=await this.hmac(this.v),0!==e.length&&(this.k=await this.hmac(this.v,Uint8Array.from([1]),e),this.v=await this.hmac(this.v))}reseedSync(e=new Uint8Array){this.checkSync(),this.k=this.hmacSync(this.v,Uint8Array.from([0]),e),this.v=this.hmacSync(this.v),0!==e.length&&(this.k=this.hmacSync(this.v,Uint8Array.from([1]),e),this.v=this.hmacSync(this.v))}async generate(){this.incr();let e=0;const t=[];for(;e<this.qByteLen;){this.v=await this.hmac(this.v);const r=this.v.slice();t.push(r),e+=this.v.length}return M(...t)}generateSync(){this.checkSync(),this.incr();let e=0;const t=[];for(;e<this.qByteLen;){this.v=this.hmacSync(this.v);const r=this.v.slice();t.push(r),e+=this.v.length}return M(...t)}}function W(e){return i<e&&e<c.n}function J(e){return i<e&&e<c.P}function K(e,t,r,n=!0){const{n:o}=c,a=H(e,!0);if(!W(a))return;const u=F(a,o),l=E.BASE.multiply(a),f=D(l.x,o);if(f===i)return;const d=D(u*D(t+r*f,o),o);if(d===i)return;let h=new k(f,d),p=(l.x===h.r?0:2)|Number(l.y&s);return n&&h.hasHighS()&&(h=h.normalizeS(),p^=1),{sig:h,recovery:p}}function G(e){let t;if("bigint"==typeof e)t=e;else if("number"==typeof e&&Number.isSafeInteger(e)&&e>0)t=BigInt(e);else if("string"==typeof e){if(e.length!==2*h)throw new Error("Expected 32 bytes of private key");t=j(e)}else{if(!(e instanceof Uint8Array))throw new TypeError("Expected valid private key");if(e.length!==h)throw new Error("Expected 32 bytes of private key");t=B(e)}if(!W(t))throw new Error("Expected private key: 0 < key < n");return t}function Y(e){return e instanceof E?(e.assertValidity(),e):E.fromHex(e)}function X(e){if(e instanceof k)return e.assertValidity(),e;try{return k.fromDER(e)}catch(t){return k.fromCompact(e)}}function Z(e){const t=e instanceof Uint8Array,r="string"==typeof e,n=(t||r)&&e.length;return t?n===p||n===m:r?n===2*p||n===2*m:e instanceof E}function Q(e){return B(e.length>d?e.slice(0,d):e)}function ee(e){const t=Q(e),r=D(t,c.n);return te(r<i?t:r)}function te(e){return C(e)}function re(e,t,n){if(null==e)throw new Error(`sign: expected valid message hash, not "${e}"`);const i=L(e),s=G(t),o=[te(s),ee(i)];if(null!=n){!0===n&&(n=r.utils.randomBytes(d));const e=L(n);if(e.length!==d)throw new Error(`sign: Expected ${d} bytes of extra data`);o.push(e)}return{seed:M(...o),m:Q(i),d:s}}function ne(e,t){const{sig:r,recovery:n}=e,{der:i,recovered:s}=Object.assign({canonical:!0,der:!0},t),o=i?r.toDERRawBytes():r.toCompactRawBytes();return s?[o,n]:o}r.getPublicKey=function(e,t=!1){return E.fromPrivateKey(e).toRawBytes(t)},r.recoverPublicKey=function(e,t,r,n=!1){return E.fromSignature(e,t,r).toRawBytes(n)},r.getSharedSecret=function(e,t,r=!1){if(Z(e))throw new TypeError("getSharedSecret: first arg must be private key");if(!Z(t))throw new TypeError("getSharedSecret: second arg must be public key");const n=Y(t);return n.assertValidity(),n.multiply(G(e)).toRawBytes(r)},r.sign=async function(e,t,r={}){const{seed:n,m:i,d:s}=re(e,t,r.extraEntropy),o=new q(32,h);let a;for(await o.reseed(n);!(a=K(await o.generate(),i,s,r.canonical));)await o.reseed();return ne(a,r)},r.signSync=function(e,t,r={}){const{seed:n,m:i,d:s}=re(e,t,r.extraEntropy),o=new q(32,h);let a;for(o.reseedSync(n);!(a=K(o.generateSync(),i,s,r.canonical));)o.reseedSync();return ne(a,r)};const ie={strict:!0};function se(e){return D(B(e),c.n)}r.verify=function(e,t,r,n=ie){let i;try{i=X(e),t=L(t)}catch(e){return!1}const{r:s,s:o}=i;if(n.strict&&i.hasHighS())return!1;const a=H(t);let u;try{u=Y(r)}catch(e){return!1}const{n:l}=c,f=F(o,l),d=D(a*f,l),h=D(s*f,l),p=E.BASE.multiplyAndAddUnsafe(u,d,h);return!!p&&D(p.x,l)===s};class oe{constructor(e,t){this.r=e,this.s=t,this.assertValidity()}static fromHex(e){const t=L(e);if(64!==t.length)throw new TypeError(`SchnorrSignature.fromHex: expected 64 bytes, not ${t.length}`);const r=B(t.subarray(0,32)),n=B(t.subarray(32,64));return new oe(r,n)}assertValidity(){const{r:e,s:t}=this;if(!J(e)||!W(t))throw new Error("Invalid signature")}toHex(){return P(this.r)+P(this.s)}toRawBytes(){return N(this.toHex())}}class ae{constructor(e,t,n=r.utils.randomBytes()){if(null==e)throw new TypeError(`sign: Expected valid message, not "${e}"`);this.m=L(e);const{x:i,scalar:s}=this.getScalar(G(t));if(this.px=i,this.d=s,this.rand=L(n),32!==this.rand.length)throw new TypeError("sign: Expected 32 bytes of aux randomness")}getScalar(e){const t=E.fromPrivateKey(e),r=t.hasEvenY()?e:c.n-e;return{point:t,scalar:r,x:t.toRawX()}}initNonce(e,t){return C(e^B(t))}finalizeNonce(e){const t=D(B(e),c.n);if(t===i)throw new Error("sign: Creation of signature failed. k is zero");const{point:r,x:n,scalar:s}=this.getScalar(t);return{R:r,rx:n,k:s}}finalizeSig(e,t,r,n){return new oe(e.x,D(t+r*n,c.n)).toRawBytes()}error(){throw new Error("sign: Invalid signature produced")}async calc(){const{m:e,d:t,px:n,rand:i}=this,s=r.utils.taggedHash,o=this.initNonce(t,await s(he.aux,i)),{R:a,rx:u,k:c}=this.finalizeNonce(await s(he.nonce,o,n,e)),l=se(await s(he.challenge,u,n,e)),f=this.finalizeSig(a,c,l,t);return await le(f,e,n)||this.error(),f}calcSync(){const{m:e,d:t,px:n,rand:i}=this,s=r.utils.taggedHashSync,o=this.initNonce(t,s(he.aux,i)),{R:a,rx:u,k:c}=this.finalizeNonce(s(he.nonce,o,n,e)),l=se(s(he.challenge,u,n,e)),f=this.finalizeSig(a,c,l,t);return fe(f,e,n)||this.error(),f}}function ue(e,t,r){const n=e instanceof oe,i=n?e:oe.fromHex(e);return n&&i.assertValidity(),{...i,m:L(t),P:Y(r)}}function ce(e,t,r,n){const i=E.BASE.multiplyAndAddUnsafe(t,G(r),D(-n,c.n));return!(!i||!i.hasEvenY()||i.x!==e)}async function le(e,t,n){try{const{r:i,s:s,m:o,P:a}=ue(e,t,n),u=se(await r.utils.taggedHash(he.challenge,C(i),a.toRawX(),o));return ce(i,a,s,u)}catch(e){return!1}}function fe(e,t,n){try{const{r:i,s:s,m:o,P:a}=ue(e,t,n),u=se(r.utils.taggedHashSync(he.challenge,C(i),a.toRawX(),o));return ce(i,a,s,u)}catch(e){if(e instanceof y)throw e;return!1}}r.schnorr={Signature:oe,getPublicKey:function(e){return E.fromPrivateKey(e).toRawX()},sign:async function(e,t,r){return new ae(e,t,r).calc()},verify:le,signSync:function(e,t,r){return new ae(e,t,r).calcSync()},verifySync:fe},E.BASE._setWindowSize(8);const de={node:n,web:"object"==typeof self&&"crypto"in self?self.crypto:void 0},he={challenge:"BIP0340/challenge",aux:"BIP0340/aux",nonce:"BIP0340/nonce"},pe={};r.utils={bytesToHex:O,hexToBytes:N,concatBytes:M,mod:D,invert:F,isValidPrivateKey(e){try{return G(e),!0}catch(e){return!1}},_bigintTo32Bytes:C,_normalizePrivateKey:G,hashToPrivateKey:e=>{e=L(e);const t=h+8;if(e.length<t||e.length>1024)throw new Error("Expected valid bytes of private key as per FIPS 186");return C(D(B(e),c.n-s)+s)},randomBytes:(e=32)=>{if(de.web)return de.web.getRandomValues(new Uint8Array(e));if(de.node){const{randomBytes:t}=de.node;return Uint8Array.from(t(e))}throw new Error("The environment doesn't have randomBytes function")},randomPrivateKey:()=>r.utils.hashToPrivateKey(r.utils.randomBytes(h+8)),precompute(e=8,t=E.BASE){const r=t===E.BASE?t:new E(t.x,t.y);return r._setWindowSize(e),r.multiply(a),r},sha256:async(...e)=>{if(de.web){const t=await de.web.subtle.digest("SHA-256",M(...e));return new Uint8Array(t)}if(de.node){const{createHash:t}=de.node,r=t("sha256");return e.forEach((e=>r.update(e))),Uint8Array.from(r.digest())}throw new Error("The environment doesn't have sha256 function")},hmacSha256:async(e,...t)=>{if(de.web){const r=await de.web.subtle.importKey("raw",e,{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign"]),n=M(...t),i=await de.web.subtle.sign("HMAC",r,n);return new Uint8Array(i)}if(de.node){const{createHmac:r}=de.node,n=r("sha256",e);return t.forEach((e=>n.update(e))),Uint8Array.from(n.digest())}throw new Error("The environment doesn't have hmac-sha256 function")},sha256Sync:void 0,hmacSha256Sync:void 0,taggedHash:async(e,...t)=>{let n=pe[e];if(void 0===n){const t=await r.utils.sha256(Uint8Array.from(e,(e=>e.charCodeAt(0))));n=M(t,t),pe[e]=n}return r.utils.sha256(n,...t)},taggedHashSync:(e,...t)=>{if("function"!=typeof z)throw new y("sha256Sync is undefined, you need to set it");let r=pe[e];if(void 0===r){const t=z(Uint8Array.from(e,(e=>e.charCodeAt(0))));r=M(t,t),pe[e]=r}return z(r,...t)},_JacobianPoint:w},Object.defineProperties(r.utils,{sha256Sync:{configurable:!1,get:()=>z,set(e){z||(z=e)}},hmacSha256Sync:{configurable:!1,get:()=>V,set(e){V||(V=e)}}})},{crypto:360}],325:[function(e,t,r){"use strict";
/*! scure-base - MIT License (c) 2022 Paul Miller (paulmillr.com) */function n(e){if(!Number.isSafeInteger(e))throw new Error(`Wrong integer: ${e}`)}function i(...e){const t=(e,t)=>r=>e(t(r));return{encode:Array.from(e).reverse().reduce(((e,r)=>e?t(e,r.encode):r.encode),void 0),decode:e.reduce(((e,r)=>e?t(e,r.decode):r.decode),void 0)}}function s(e){return{encode:t=>{if(!Array.isArray(t)||t.length&&"number"!=typeof t[0])throw new Error("alphabet.encode input should be an array of numbers");return t.map((t=>{if(n(t),t<0||t>=e.length)throw new Error(`Digit index outside alphabet: ${t} (alphabet: ${e.length})`);return e[t]}))},decode:t=>{if(!Array.isArray(t)||t.length&&"string"!=typeof t[0])throw new Error("alphabet.decode input should be array of strings");return t.map((t=>{if("string"!=typeof t)throw new Error(`alphabet.decode: not string element=${t}`);const r=e.indexOf(t);if(-1===r)throw new Error(`Unknown letter: "${t}". Allowed: ${e}`);return r}))}}}function o(e=""){if("string"!=typeof e)throw new Error("join separator should be string");return{encode:t=>{if(!Array.isArray(t)||t.length&&"string"!=typeof t[0])throw new Error("join.encode input should be array of strings");for(let e of t)if("string"!=typeof e)throw new Error(`join.encode: non-string input=${e}`);return t.join(e)},decode:t=>{if("string"!=typeof t)throw new Error("join.decode input should be string");return t.split(e)}}}function a(e,t="="){if(n(e),"string"!=typeof t)throw new Error("padding chr should be string");return{encode(r){if(!Array.isArray(r)||r.length&&"string"!=typeof r[0])throw new Error("padding.encode input should be array of strings");for(let e of r)if("string"!=typeof e)throw new Error(`padding.encode: non-string input=${e}`);for(;r.length*e%8;)r.push(t);return r},decode(r){if(!Array.isArray(r)||r.length&&"string"!=typeof r[0])throw new Error("padding.encode input should be array of strings");for(let e of r)if("string"!=typeof e)throw new Error(`padding.decode: non-string input=${e}`);let n=r.length;if(n*e%8)throw new Error("Invalid padding: string should have whole number of bytes");for(;n>0&&r[n-1]===t;n--)if(!((n-1)*e%8))throw new Error("Invalid padding: string has too much padding");return r.slice(0,n)}}}function u(e){if("function"!=typeof e)throw new Error("normalize fn should be function");return{encode:e=>e,decode:t=>e(t)}}function c(e,t,r){if(t<2)throw new Error(`convertRadix: wrong from=${t}, base cannot be less than 2`);if(r<2)throw new Error(`convertRadix: wrong to=${r}, base cannot be less than 2`);if(!Array.isArray(e))throw new Error("convertRadix: data should be array");if(!e.length)return[];let i=0;const s=[],o=Array.from(e);for(o.forEach((e=>{if(n(e),e<0||e>=t)throw new Error(`Wrong integer: ${e}`)}));;){let e=0,n=!0;for(let s=i;s<o.length;s++){const a=o[s],u=t*e+a;if(!Number.isSafeInteger(u)||t*e/t!==e||u-a!=t*e)throw new Error("convertRadix: carry overflow");if(e=u%r,o[s]=Math.floor(u/r),!Number.isSafeInteger(o[s])||o[s]*r+e!==u)throw new Error("convertRadix: carry overflow");n&&(o[s]?n=!1:i=s)}if(s.push(e),n)break}for(let t=0;t<e.length-1&&0===e[t];t++)s.push(0);return s.reverse()}Object.defineProperty(r,"__esModule",{value:!0}),r.bytes=r.stringToBytes=r.str=r.bytesToString=r.hex=r.utf8=r.bech32m=r.bech32=r.base58check=r.base58xmr=r.base58xrp=r.base58flickr=r.base58=r.base64url=r.base64=r.base32crockford=r.base32hex=r.base32=r.base16=r.utils=r.assertNumber=void 0,r.assertNumber=n;const l=(e,t)=>t?l(t,e%t):e,f=(e,t)=>e+(t-l(e,t));function d(e,t,r,i){if(!Array.isArray(e))throw new Error("convertRadix2: data should be array");if(t<=0||t>32)throw new Error(`convertRadix2: wrong from=${t}`);if(r<=0||r>32)throw new Error(`convertRadix2: wrong to=${r}`);if(f(t,r)>32)throw new Error(`convertRadix2: carry overflow from=${t} to=${r} carryBits=${f(t,r)}`);let s=0,o=0;const a=2**r-1,u=[];for(const i of e){if(n(i),i>=2**t)throw new Error(`convertRadix2: invalid data word=${i} from=${t}`);if(s=s<<t|i,o+t>32)throw new Error(`convertRadix2: carry overflow pos=${o} from=${t}`);for(o+=t;o>=r;o-=r)u.push((s>>o-r&a)>>>0);s&=2**o-1}if(s=s<<r-o&a,!i&&o>=t)throw new Error("Excess padding");if(!i&&s)throw new Error(`Non-zero padding: ${s}`);return i&&o>0&&u.push(s>>>0),u}function h(e){return n(e),{encode:t=>{if(!(t instanceof Uint8Array))throw new Error("radix.encode input should be Uint8Array");return c(Array.from(t),256,e)},decode:t=>{if(!Array.isArray(t)||t.length&&"number"!=typeof t[0])throw new Error("radix.decode input should be array of strings");return Uint8Array.from(c(t,e,256))}}}function p(e,t=!1){if(n(e),e<=0||e>32)throw new Error("radix2: bits should be in (0..32]");if(f(8,e)>32||f(e,8)>32)throw new Error("radix2: carry overflow");return{encode:r=>{if(!(r instanceof Uint8Array))throw new Error("radix2.encode input should be Uint8Array");return d(Array.from(r),8,e,!t)},decode:r=>{if(!Array.isArray(r)||r.length&&"number"!=typeof r[0])throw new Error("radix2.decode input should be array of strings");return Uint8Array.from(d(r,e,8,t))}}}function m(e){if("function"!=typeof e)throw new Error("unsafeWrapper fn should be function");return function(...t){try{return e.apply(null,t)}catch(e){}}}function g(e,t){if(n(e),"function"!=typeof t)throw new Error("checksum fn should be function");return{encode(r){if(!(r instanceof Uint8Array))throw new Error("checksum.encode: input should be Uint8Array");const n=t(r).slice(0,e),i=new Uint8Array(r.length+e);return i.set(r),i.set(n,r.length),i},decode(r){if(!(r instanceof Uint8Array))throw new Error("checksum.decode: input should be Uint8Array");const n=r.slice(0,-e),i=t(n).slice(0,e),s=r.slice(-e);for(let t=0;t<e;t++)if(i[t]!==s[t])throw new Error("Invalid checksum");return n}}}r.utils={alphabet:s,chain:i,checksum:g,radix:h,radix2:p,join:o,padding:a},r.base16=i(p(4),s("0123456789ABCDEF"),o("")),r.base32=i(p(5),s("ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"),a(5),o("")),r.base32hex=i(p(5),s("0123456789ABCDEFGHIJKLMNOPQRSTUV"),a(5),o("")),r.base32crockford=i(p(5),s("0123456789ABCDEFGHJKMNPQRSTVWXYZ"),o(""),u((e=>e.toUpperCase().replace(/O/g,"0").replace(/[IL]/g,"1")))),r.base64=i(p(6),s("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),a(6),o("")),r.base64url=i(p(6),s("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"),a(6),o(""));const b=e=>i(h(58),s(e),o(""));r.base58=b("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"),r.base58flickr=b("123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"),r.base58xrp=b("rpshnaf39wBUDNEGHJKLM4PQRST7VWXYZ2bcdeCg65jkm8oFqi1tuvAxyz");const y=[0,2,3,5,6,7,9,10,11];r.base58xmr={encode(e){let t="";for(let n=0;n<e.length;n+=8){const i=e.subarray(n,n+8);t+=r.base58.encode(i).padStart(y[i.length],"1")}return t},decode(e){let t=[];for(let n=0;n<e.length;n+=11){const i=e.slice(n,n+11),s=y.indexOf(i.length),o=r.base58.decode(i);for(let e=0;e<o.length-s;e++)if(0!==o[e])throw new Error("base58xmr: wrong padding");t=t.concat(Array.from(o.slice(o.length-s)))}return Uint8Array.from(t)}};r.base58check=e=>i(g(4,(t=>e(e(t)))),r.base58);const v=i(s("qpzry9x8gf2tvdw0s3jn54khce6mua7l"),o("")),w=[996825010,642813549,513874426,1027748829,705979059];function _(e){const t=e>>25;let r=(33554431&e)<<5;for(let e=0;e<w.length;e++)1==(t>>e&1)&&(r^=w[e]);return r}function S(e,t,r=1){const n=e.length;let i=1;for(let t=0;t<n;t++){const r=e.charCodeAt(t);if(r<33||r>126)throw new Error(`Invalid prefix (${e})`);i=_(i)^r>>5}i=_(i);for(let t=0;t<n;t++)i=_(i)^31&e.charCodeAt(t);for(let e of t)i=_(i)^e;for(let e=0;e<6;e++)i=_(i);return i^=r,v.encode(d([i%2**30],30,5,!1))}function E(e){const t="bech32"===e?1:734539939,r=p(5),n=r.decode,i=r.encode,s=m(n);function o(e,r=90){if("string"!=typeof e)throw new Error("bech32.decode input should be string, not "+typeof e);if(e.length<8||!1!==r&&e.length>r)throw new TypeError(`Wrong string length: ${e.length} (${e}). Expected (8..${r})`);const n=e.toLowerCase();if(e!==n&&e!==e.toUpperCase())throw new Error("String must be lowercase or uppercase");const i=(e=n).lastIndexOf("1");if(0===i||-1===i)throw new Error('Letter "1" must be present between prefix and data only');const s=e.slice(0,i),o=e.slice(i+1);if(o.length<6)throw new Error("Data must be at least 6 characters long");const a=v.decode(o).slice(0,-6),u=S(s,a,t);if(!o.endsWith(u))throw new Error(`Invalid checksum in ${e}: expected "${u}"`);return{prefix:s,words:a}}return{encode:function(e,r,n=90){if("string"!=typeof e)throw new Error("bech32.encode prefix should be string, not "+typeof e);if(!Array.isArray(r)||r.length&&"number"!=typeof r[0])throw new Error("bech32.encode words should be array of numbers, not "+typeof r);const i=e.length+7+r.length;if(!1!==n&&i>n)throw new TypeError(`Length ${i} exceeds limit ${n}`);return`${e=e.toLowerCase()}1${v.encode(r)}${S(e,r,t)}`},decode:o,decodeToBytes:function(e){const{prefix:t,words:r}=o(e,!1);return{prefix:t,words:r,bytes:n(r)}},decodeUnsafe:m(o),fromWords:n,fromWordsUnsafe:s,toWords:i}}r.bech32=E("bech32"),r.bech32m=E("bech32m"),r.utf8={encode:e=>(new TextDecoder).decode(e),decode:e=>(new TextEncoder).encode(e)},r.hex=i(p(4),s("0123456789abcdef"),o(""),u((e=>{if("string"!=typeof e||e.length%2)throw new TypeError(`hex.decode: expected string, got ${typeof e} with length ${e.length}`);return e.toLowerCase()})));const x={utf8:r.utf8,hex:r.hex,base16:r.base16,base32:r.base32,base64:r.base64,base64url:r.base64url,base58:r.base58,base58xmr:r.base58xmr},A=`Invalid encoding type. Available types: ${Object.keys(x).join(", ")}`;r.bytesToString=(e,t)=>{if("string"!=typeof e||!x.hasOwnProperty(e))throw new TypeError(A);if(!(t instanceof Uint8Array))throw new TypeError("bytesToString() expects Uint8Array");return x[e].encode(t)},r.str=r.bytesToString;r.stringToBytes=(e,t)=>{if(!x.hasOwnProperty(e))throw new TypeError(A);if("string"!=typeof t)throw new TypeError("stringToBytes() expects string");return x[e].decode(t)},r.bytes=r.stringToBytes},{}],326:[function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.ParsedMessage=void 0;const i=n(e("apg-js/src/apg-api/api")),s=n(e("apg-js/src/apg-lib/node-exports"));r.ParsedMessage=class{constructor(e){const t=new i.default('\nsign-in-with-ethereum =\n    domain %s" wants you to sign in with your Ethereum account:" LF\n    address LF\n    LF\n    [ statement LF ]\n    LF\n    %s"URI: " URI LF\n    %s"Version: " version LF\n    %s"Chain ID: " chain-id LF\n    %s"Nonce: " nonce LF\n    %s"Issued At: " issued-at\n    [ LF %s"Expiration Time: " expiration-time ]\n    [ LF %s"Not Before: " not-before ]\n    [ LF %s"Request ID: " request-id ]\n    [ LF %s"Resources:"\n    resources ]\n\ndomain = authority\n\naddress = "0x" 40*40HEXDIG\n    ; Must also conform to captilization\n    ; checksum encoding specified in EIP-55\n    ; where applicable (EOAs).\n\nstatement = 1*( reserved / unreserved / " " )\n    ; The purpose is to exclude LF (line breaks).\n\nversion = "1"\n\nnonce = 8*( ALPHA / DIGIT )\n\nissued-at = date-time\nexpiration-time = date-time\nnot-before = date-time\n\nrequest-id = *pchar\n\nchain-id = 1*DIGIT\n    ; See EIP-155 for valid CHAIN_IDs.\n\nresources = *( LF resource )\n\nresource = "- " URI\n\n; ------------------------------------------------------------------------------\n; RFC 3986\n\nURI           = scheme ":" hier-part [ "?" query ] [ "#" fragment ]\n\nhier-part     = "//" authority path-abempty\n              / path-absolute\n              / path-rootless\n              / path-empty\n\nscheme        = ALPHA *( ALPHA / DIGIT / "+" / "-" / "." )\n\nauthority     = [ userinfo "@" ] host [ ":" port ]\nuserinfo      = *( unreserved / pct-encoded / sub-delims / ":" )\nhost          = IP-literal / IPv4address / reg-name\nport          = *DIGIT\n\nIP-literal    = "[" ( IPv6address / IPvFuture  ) "]"\n\nIPvFuture     = "v" 1*HEXDIG "." 1*( unreserved / sub-delims / ":" )\n\nIPv6address   =                            6( h16 ":" ) ls32\n              /                       "::" 5( h16 ":" ) ls32\n              / [               h16 ] "::" 4( h16 ":" ) ls32\n              / [ *1( h16 ":" ) h16 ] "::" 3( h16 ":" ) ls32\n              / [ *2( h16 ":" ) h16 ] "::" 2( h16 ":" ) ls32\n              / [ *3( h16 ":" ) h16 ] "::"    h16 ":"   ls32\n              / [ *4( h16 ":" ) h16 ] "::"              ls32\n              / [ *5( h16 ":" ) h16 ] "::"              h16\n              / [ *6( h16 ":" ) h16 ] "::"\n\nh16           = 1*4HEXDIG\nls32          = ( h16 ":" h16 ) / IPv4address\nIPv4address   = dec-octet "." dec-octet "." dec-octet "." dec-octet\ndec-octet     = DIGIT                 ; 0-9\n                 / %x31-39 DIGIT         ; 10-99\n                 / "1" 2DIGIT            ; 100-199\n                 / "2" %x30-34 DIGIT     ; 200-249\n                 / "25" %x30-35          ; 250-255\n\nreg-name      = *( unreserved / pct-encoded / sub-delims )\n\npath-abempty  = *( "/" segment )\npath-absolute = "/" [ segment-nz *( "/" segment ) ]\npath-rootless = segment-nz *( "/" segment )\npath-empty    = 0pchar\n\nsegment       = *pchar\nsegment-nz    = 1*pchar\n\npchar         = unreserved / pct-encoded / sub-delims / ":" / "@"\n\nquery         = *( pchar / "/" / "?" )\n\nfragment      = *( pchar / "/" / "?" )\n\npct-encoded   = "%" HEXDIG HEXDIG\n\nunreserved    = ALPHA / DIGIT / "-" / "." / "_" / "~"\nreserved      = gen-delims / sub-delims\ngen-delims    = ":" / "/" / "?" / "#" / "[" / "]" / "@"\nsub-delims    = "!" / "$" / "&" / "\'" / "(" / ")"\n              / "*" / "+" / "," / ";" / "="\n\n; ------------------------------------------------------------------------------\n; RFC 3339\n\ndate-fullyear   = 4DIGIT\ndate-month      = 2DIGIT  ; 01-12\ndate-mday       = 2DIGIT  ; 01-28, 01-29, 01-30, 01-31 based on\n                          ; month/year\ntime-hour       = 2DIGIT  ; 00-23\ntime-minute     = 2DIGIT  ; 00-59\ntime-second     = 2DIGIT  ; 00-58, 00-59, 00-60 based on leap second\n                          ; rules\ntime-secfrac    = "." 1*DIGIT\ntime-numoffset  = ("+" / "-") time-hour ":" time-minute\ntime-offset     = "Z" / time-numoffset\n\npartial-time    = time-hour ":" time-minute ":" time-second\n                  [time-secfrac]\nfull-date       = date-fullyear "-" date-month "-" date-mday\nfull-time       = partial-time time-offset\n\ndate-time       = full-date "T" full-time\n\n; ------------------------------------------------------------------------------\n; RFC 5234\n\nALPHA          =  %x41-5A / %x61-7A   ; A-Z / a-z\nLF             =  %x0A\n                  ; linefeed\nDIGIT          =  %x30-39\n                  ; 0-9\nHEXDIG         =  DIGIT / "A" / "B" / "C" / "D" / "E" / "F"\n');if(t.generate(),t.errors.length)throw console.error(t.errorsToAscii()),console.error(t.linesToAscii()),console.log(t.displayAttributeErrors()),new Error("ABNF grammar has errors");const r=t.toObject(),n=new s.default.parser;n.ast=new s.default.ast;const o=s.default.ids;n.ast.callbacks.domain=function(e,t,r,n,i){const a=o.SEM_OK;return e===o.SEM_PRE&&(i.domain=s.default.utils.charsToString(t,r,n)),a};n.ast.callbacks.address=function(e,t,r,n,i){const a=o.SEM_OK;return e===o.SEM_PRE&&(i.address=s.default.utils.charsToString(t,r,n)),a};n.ast.callbacks.statement=function(e,t,r,n,i){const a=o.SEM_OK;return e===o.SEM_PRE&&(i.statement=s.default.utils.charsToString(t,r,n)),a};n.ast.callbacks.uri=function(e,t,r,n,i){const a=o.SEM_OK;return e===o.SEM_PRE&&(i.uri||(i.uri=s.default.utils.charsToString(t,r,n))),a};n.ast.callbacks.version=function(e,t,r,n,i){const a=o.SEM_OK;return e===o.SEM_PRE&&(i.version=s.default.utils.charsToString(t,r,n)),a};n.ast.callbacks["chain-id"]=function(e,t,r,n,i){const a=o.SEM_OK;return e===o.SEM_PRE&&(i.chainId=parseInt(s.default.utils.charsToString(t,r,n))),a};n.ast.callbacks.nonce=function(e,t,r,n,i){const a=o.SEM_OK;return e===o.SEM_PRE&&(i.nonce=s.default.utils.charsToString(t,r,n)),a};n.ast.callbacks["issued-at"]=function(e,t,r,n,i){const a=o.SEM_OK;return e===o.SEM_PRE&&(i.issuedAt=s.default.utils.charsToString(t,r,n)),a};n.ast.callbacks["expiration-time"]=function(e,t,r,n,i){const a=o.SEM_OK;return e===o.SEM_PRE&&(i.expirationTime=s.default.utils.charsToString(t,r,n)),a};n.ast.callbacks["not-before"]=function(e,t,r,n,i){const a=o.SEM_OK;return e===o.SEM_PRE&&(i.notBefore=s.default.utils.charsToString(t,r,n)),a};n.ast.callbacks["request-id"]=function(e,t,r,n,i){const a=o.SEM_OK;return e===o.SEM_PRE&&(i.requestId=s.default.utils.charsToString(t,r,n)),a};n.ast.callbacks.resources=function(e,t,r,n,i){const a=o.SEM_OK;return e===o.SEM_PRE&&(i.resources=s.default.utils.charsToString(t,r,n).slice(3).split("\n- ")),a};const a=n.parse(r,"sign-in-with-ethereum",e);if(!a.success)throw new Error(`Invalid message: ${JSON.stringify(a)}`);const u={};n.ast.translate(u);for(const[e,t]of Object.entries(u))this[e]=t}}},{"apg-js/src/apg-api/api":333,"apg-js/src/apg-lib/node-exports":351}],327:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.ParsedMessageRegExp=r.ParsedMessage=void 0;const n=e("./abnf");Object.defineProperty(r,"ParsedMessage",{enumerable:!0,get:function(){return n.ParsedMessage}});const i=e("./regex");Object.defineProperty(r,"ParsedMessageRegExp",{enumerable:!0,get:function(){return i.ParsedMessage}})},{"./abnf":326,"./regex":328}],328:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.ParsedMessage=void 0;const n="(([^:?#]+):)?(([^?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))",i="([0-9]+)-(0[1-9]|1[012])-(0[1-9]|[12][0-9]|3[01])[Tt]([01][0-9]|2[0-3]):([0-5][0-9]):([0-5][0-9]|60)(.[0-9]+)?(([Zz])|([+|-]([01][0-9]|2[0-3]):[0-5][0-9]))",s=`^(?<domain>([^?#]*)) wants you to sign in with your Ethereum account:\\n(?<address>0x[a-zA-Z0-9]{40})\\n\\n((?<statement>[^\\n]+)\\n)?${`\\nURI: (?<uri>${n}?)`}\\nVersion: (?<version>1)\\nChain ID: (?<chainId>[0-9]+)\\nNonce: (?<nonce>[a-zA-Z0-9]{8,})${`\\nIssued At: (?<issuedAt>${i})`}${`(\\nExpiration Time: (?<expirationTime>${i}))?`}${`(\\nNot Before: (?<notBefore>${i}))?`}(\\nRequest ID: (?<requestId>[-._~!$&'()*+,;=:@%a-zA-Z0-9]*))?${`(\\nResources:(?<resources>(\\n- ${n}?)+))?`}$`;r.ParsedMessage=class{constructor(e){var t,r,n,i,o,a,u,c,l,f,d,h,p;let m=new RegExp(s,"g").exec(e);if(!m)throw new Error("Message did not match the regular expression.");this.match=m,this.domain=null===(t=null==m?void 0:m.groups)||void 0===t?void 0:t.domain,this.address=null===(r=null==m?void 0:m.groups)||void 0===r?void 0:r.address,this.statement=null===(n=null==m?void 0:m.groups)||void 0===n?void 0:n.statement,this.uri=null===(i=null==m?void 0:m.groups)||void 0===i?void 0:i.uri,this.version=null===(o=null==m?void 0:m.groups)||void 0===o?void 0:o.version,this.nonce=null===(a=null==m?void 0:m.groups)||void 0===a?void 0:a.nonce,this.chainId=parseInt(null===(u=null==m?void 0:m.groups)||void 0===u?void 0:u.chainId),this.issuedAt=null===(c=null==m?void 0:m.groups)||void 0===c?void 0:c.issuedAt,this.expirationTime=null===(l=null==m?void 0:m.groups)||void 0===l?void 0:l.expirationTime,this.notBefore=null===(f=null==m?void 0:m.groups)||void 0===f?void 0:f.notBefore,this.requestId=null===(d=null==m?void 0:m.groups)||void 0===d?void 0:d.requestId,this.resources=null===(p=null===(h=null==m?void 0:m.groups)||void 0===h?void 0:h.resources)||void 0===p?void 0:p.split("\n- ").slice(1)}}},{}],329:[function(e,t,r){"use strict";const n=(e,t)=>(...r)=>`[${e(...r)+t}m`,i=(e,t)=>(...r)=>{const n=e(...r);return`[${38+t};5;${n}m`},s=(e,t)=>(...r)=>{const n=e(...r);return`[${38+t};2;${n[0]};${n[1]};${n[2]}m`},o=e=>e,a=(e,t,r)=>[e,t,r],u=(e,t,r)=>{Object.defineProperty(e,t,{get:()=>{const n=r();return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0}),n},enumerable:!0,configurable:!0})};let c;const l=(t,r,n,i)=>{void 0===c&&(c=e("color-convert"));const s=i?10:0,o={};for(const[e,i]of Object.entries(c)){const a="ansi16"===e?"ansi":e;e===r?o[a]=t(n,s):"object"==typeof i&&(o[a]=t(i[r],s))}return o};Object.defineProperty(t,"exports",{enumerable:!0,get:function(){const e=new Map,t={modifier:{reset:[0,0],bold:[1,22],dim:[2,22],italic:[3,23],underline:[4,24],inverse:[7,27],hidden:[8,28],strikethrough:[9,29]},color:{black:[30,39],red:[31,39],green:[32,39],yellow:[33,39],blue:[34,39],magenta:[35,39],cyan:[36,39],white:[37,39],blackBright:[90,39],redBright:[91,39],greenBright:[92,39],yellowBright:[93,39],blueBright:[94,39],magentaBright:[95,39],cyanBright:[96,39],whiteBright:[97,39]},bgColor:{bgBlack:[40,49],bgRed:[41,49],bgGreen:[42,49],bgYellow:[43,49],bgBlue:[44,49],bgMagenta:[45,49],bgCyan:[46,49],bgWhite:[47,49],bgBlackBright:[100,49],bgRedBright:[101,49],bgGreenBright:[102,49],bgYellowBright:[103,49],bgBlueBright:[104,49],bgMagentaBright:[105,49],bgCyanBright:[106,49],bgWhiteBright:[107,49]}};t.color.gray=t.color.blackBright,t.bgColor.bgGray=t.bgColor.bgBlackBright,t.color.grey=t.color.blackBright,t.bgColor.bgGrey=t.bgColor.bgBlackBright;for(const[r,n]of Object.entries(t)){for(const[r,i]of Object.entries(n))t[r]={open:`[${i[0]}m`,close:`[${i[1]}m`},n[r]=t[r],e.set(i[0],i[1]);Object.defineProperty(t,r,{value:n,enumerable:!1})}return Object.defineProperty(t,"codes",{value:e,enumerable:!1}),t.color.close="[39m",t.bgColor.close="[49m",u(t.color,"ansi",(()=>l(n,"ansi16",o,!1))),u(t.color,"ansi256",(()=>l(i,"ansi256",o,!1))),u(t.color,"ansi16m",(()=>l(s,"rgb",a,!1))),u(t.bgColor,"ansi",(()=>l(n,"ansi16",o,!0))),u(t.bgColor,"ansi256",(()=>l(i,"ansi256",o,!0))),u(t.bgColor,"ansi16m",(()=>l(s,"rgb",a,!0))),t}})},{"color-convert":331}],330:[function(e,t,r){const n=e("color-name"),i={};for(const e of Object.keys(n))i[n[e]]=e;const s={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},lch:{channels:3,labels:"lch"},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}};t.exports=s;for(const e of Object.keys(s)){if(!("channels"in s[e]))throw new Error("missing channels property: "+e);if(!("labels"in s[e]))throw new Error("missing channel labels property: "+e);if(s[e].labels.length!==s[e].channels)throw new Error("channel and label counts mismatch: "+e);const{channels:t,labels:r}=s[e];delete s[e].channels,delete s[e].labels,Object.defineProperty(s[e],"channels",{value:t}),Object.defineProperty(s[e],"labels",{value:r})}s.rgb.hsl=function(e){const t=e[0]/255,r=e[1]/255,n=e[2]/255,i=Math.min(t,r,n),s=Math.max(t,r,n),o=s-i;let a,u;s===i?a=0:t===s?a=(r-n)/o:r===s?a=2+(n-t)/o:n===s&&(a=4+(t-r)/o),a=Math.min(60*a,360),a<0&&(a+=360);const c=(i+s)/2;return u=s===i?0:c<=.5?o/(s+i):o/(2-s-i),[a,100*u,100*c]},s.rgb.hsv=function(e){let t,r,n,i,s;const o=e[0]/255,a=e[1]/255,u=e[2]/255,c=Math.max(o,a,u),l=c-Math.min(o,a,u),f=function(e){return(c-e)/6/l+.5};return 0===l?(i=0,s=0):(s=l/c,t=f(o),r=f(a),n=f(u),o===c?i=n-r:a===c?i=1/3+t-n:u===c&&(i=2/3+r-t),i<0?i+=1:i>1&&(i-=1)),[360*i,100*s,100*c]},s.rgb.hwb=function(e){const t=e[0],r=e[1];let n=e[2];const i=s.rgb.hsl(e)[0],o=1/255*Math.min(t,Math.min(r,n));return n=1-1/255*Math.max(t,Math.max(r,n)),[i,100*o,100*n]},s.rgb.cmyk=function(e){const t=e[0]/255,r=e[1]/255,n=e[2]/255,i=Math.min(1-t,1-r,1-n);return[100*((1-t-i)/(1-i)||0),100*((1-r-i)/(1-i)||0),100*((1-n-i)/(1-i)||0),100*i]},s.rgb.keyword=function(e){const t=i[e];if(t)return t;let r,s=1/0;for(const t of Object.keys(n)){const i=n[t],u=(a=i,((o=e)[0]-a[0])**2+(o[1]-a[1])**2+(o[2]-a[2])**2);u<s&&(s=u,r=t)}var o,a;return r},s.keyword.rgb=function(e){return n[e]},s.rgb.xyz=function(e){let t=e[0]/255,r=e[1]/255,n=e[2]/255;t=t>.04045?((t+.055)/1.055)**2.4:t/12.92,r=r>.04045?((r+.055)/1.055)**2.4:r/12.92,n=n>.04045?((n+.055)/1.055)**2.4:n/12.92;return[100*(.4124*t+.3576*r+.1805*n),100*(.2126*t+.7152*r+.0722*n),100*(.0193*t+.1192*r+.9505*n)]},s.rgb.lab=function(e){const t=s.rgb.xyz(e);let r=t[0],n=t[1],i=t[2];r/=95.047,n/=100,i/=108.883,r=r>.008856?r**(1/3):7.787*r+16/116,n=n>.008856?n**(1/3):7.787*n+16/116,i=i>.008856?i**(1/3):7.787*i+16/116;return[116*n-16,500*(r-n),200*(n-i)]},s.hsl.rgb=function(e){const t=e[0]/360,r=e[1]/100,n=e[2]/100;let i,s,o;if(0===r)return o=255*n,[o,o,o];i=n<.5?n*(1+r):n+r-n*r;const a=2*n-i,u=[0,0,0];for(let e=0;e<3;e++)s=t+1/3*-(e-1),s<0&&s++,s>1&&s--,o=6*s<1?a+6*(i-a)*s:2*s<1?i:3*s<2?a+(i-a)*(2/3-s)*6:a,u[e]=255*o;return u},s.hsl.hsv=function(e){const t=e[0];let r=e[1]/100,n=e[2]/100,i=r;const s=Math.max(n,.01);n*=2,r*=n<=1?n:2-n,i*=s<=1?s:2-s;return[t,100*(0===n?2*i/(s+i):2*r/(n+r)),100*((n+r)/2)]},s.hsv.rgb=function(e){const t=e[0]/60,r=e[1]/100;let n=e[2]/100;const i=Math.floor(t)%6,s=t-Math.floor(t),o=255*n*(1-r),a=255*n*(1-r*s),u=255*n*(1-r*(1-s));switch(n*=255,i){case 0:return[n,u,o];case 1:return[a,n,o];case 2:return[o,n,u];case 3:return[o,a,n];case 4:return[u,o,n];case 5:return[n,o,a]}},s.hsv.hsl=function(e){const t=e[0],r=e[1]/100,n=e[2]/100,i=Math.max(n,.01);let s,o;o=(2-r)*n;const a=(2-r)*i;return s=r*i,s/=a<=1?a:2-a,s=s||0,o/=2,[t,100*s,100*o]},s.hwb.rgb=function(e){const t=e[0]/360;let r=e[1]/100,n=e[2]/100;const i=r+n;let s;i>1&&(r/=i,n/=i);const o=Math.floor(6*t),a=1-n;s=6*t-o,0!=(1&o)&&(s=1-s);const u=r+s*(a-r);let c,l,f;switch(o){default:case 6:case 0:c=a,l=u,f=r;break;case 1:c=u,l=a,f=r;break;case 2:c=r,l=a,f=u;break;case 3:c=r,l=u,f=a;break;case 4:c=u,l=r,f=a;break;case 5:c=a,l=r,f=u}return[255*c,255*l,255*f]},s.cmyk.rgb=function(e){const t=e[0]/100,r=e[1]/100,n=e[2]/100,i=e[3]/100;return[255*(1-Math.min(1,t*(1-i)+i)),255*(1-Math.min(1,r*(1-i)+i)),255*(1-Math.min(1,n*(1-i)+i))]},s.xyz.rgb=function(e){const t=e[0]/100,r=e[1]/100,n=e[2]/100;let i,s,o;return i=3.2406*t+-1.5372*r+-.4986*n,s=-.9689*t+1.8758*r+.0415*n,o=.0557*t+-.204*r+1.057*n,i=i>.0031308?1.055*i**(1/2.4)-.055:12.92*i,s=s>.0031308?1.055*s**(1/2.4)-.055:12.92*s,o=o>.0031308?1.055*o**(1/2.4)-.055:12.92*o,i=Math.min(Math.max(0,i),1),s=Math.min(Math.max(0,s),1),o=Math.min(Math.max(0,o),1),[255*i,255*s,255*o]},s.xyz.lab=function(e){let t=e[0],r=e[1],n=e[2];t/=95.047,r/=100,n/=108.883,t=t>.008856?t**(1/3):7.787*t+16/116,r=r>.008856?r**(1/3):7.787*r+16/116,n=n>.008856?n**(1/3):7.787*n+16/116;return[116*r-16,500*(t-r),200*(r-n)]},s.lab.xyz=function(e){let t,r,n;r=(e[0]+16)/116,t=e[1]/500+r,n=r-e[2]/200;const i=r**3,s=t**3,o=n**3;return r=i>.008856?i:(r-16/116)/7.787,t=s>.008856?s:(t-16/116)/7.787,n=o>.008856?o:(n-16/116)/7.787,t*=95.047,r*=100,n*=108.883,[t,r,n]},s.lab.lch=function(e){const t=e[0],r=e[1],n=e[2];let i;i=360*Math.atan2(n,r)/2/Math.PI,i<0&&(i+=360);return[t,Math.sqrt(r*r+n*n),i]},s.lch.lab=function(e){const t=e[0],r=e[1],n=e[2]/360*2*Math.PI;return[t,r*Math.cos(n),r*Math.sin(n)]},s.rgb.ansi16=function(e,t=null){const[r,n,i]=e;let o=null===t?s.rgb.hsv(e)[2]:t;if(o=Math.round(o/50),0===o)return 30;let a=30+(Math.round(i/255)<<2|Math.round(n/255)<<1|Math.round(r/255));return 2===o&&(a+=60),a},s.hsv.ansi16=function(e){return s.rgb.ansi16(s.hsv.rgb(e),e[2])},s.rgb.ansi256=function(e){const t=e[0],r=e[1],n=e[2];if(t===r&&r===n)return t<8?16:t>248?231:Math.round((t-8)/247*24)+232;return 16+36*Math.round(t/255*5)+6*Math.round(r/255*5)+Math.round(n/255*5)},s.ansi16.rgb=function(e){let t=e%10;if(0===t||7===t)return e>50&&(t+=3.5),t=t/10.5*255,[t,t,t];const r=.5*(1+~~(e>50));return[(1&t)*r*255,(t>>1&1)*r*255,(t>>2&1)*r*255]},s.ansi256.rgb=function(e){if(e>=232){const t=10*(e-232)+8;return[t,t,t]}let t;e-=16;return[Math.floor(e/36)/5*255,Math.floor((t=e%36)/6)/5*255,t%6/5*255]},s.rgb.hex=function(e){const t=(((255&Math.round(e[0]))<<16)+((255&Math.round(e[1]))<<8)+(255&Math.round(e[2]))).toString(16).toUpperCase();return"000000".substring(t.length)+t},s.hex.rgb=function(e){const t=e.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i);if(!t)return[0,0,0];let r=t[0];3===t[0].length&&(r=r.split("").map((e=>e+e)).join(""));const n=parseInt(r,16);return[n>>16&255,n>>8&255,255&n]},s.rgb.hcg=function(e){const t=e[0]/255,r=e[1]/255,n=e[2]/255,i=Math.max(Math.max(t,r),n),s=Math.min(Math.min(t,r),n),o=i-s;let a,u;return a=o<1?s/(1-o):0,u=o<=0?0:i===t?(r-n)/o%6:i===r?2+(n-t)/o:4+(t-r)/o,u/=6,u%=1,[360*u,100*o,100*a]},s.hsl.hcg=function(e){const t=e[1]/100,r=e[2]/100,n=r<.5?2*t*r:2*t*(1-r);let i=0;return n<1&&(i=(r-.5*n)/(1-n)),[e[0],100*n,100*i]},s.hsv.hcg=function(e){const t=e[1]/100,r=e[2]/100,n=t*r;let i=0;return n<1&&(i=(r-n)/(1-n)),[e[0],100*n,100*i]},s.hcg.rgb=function(e){const t=e[0]/360,r=e[1]/100,n=e[2]/100;if(0===r)return[255*n,255*n,255*n];const i=[0,0,0],s=t%1*6,o=s%1,a=1-o;let u=0;switch(Math.floor(s)){case 0:i[0]=1,i[1]=o,i[2]=0;break;case 1:i[0]=a,i[1]=1,i[2]=0;break;case 2:i[0]=0,i[1]=1,i[2]=o;break;case 3:i[0]=0,i[1]=a,i[2]=1;break;case 4:i[0]=o,i[1]=0,i[2]=1;break;default:i[0]=1,i[1]=0,i[2]=a}return u=(1-r)*n,[255*(r*i[0]+u),255*(r*i[1]+u),255*(r*i[2]+u)]},s.hcg.hsv=function(e){const t=e[1]/100,r=t+e[2]/100*(1-t);let n=0;return r>0&&(n=t/r),[e[0],100*n,100*r]},s.hcg.hsl=function(e){const t=e[1]/100,r=e[2]/100*(1-t)+.5*t;let n=0;return r>0&&r<.5?n=t/(2*r):r>=.5&&r<1&&(n=t/(2*(1-r))),[e[0],100*n,100*r]},s.hcg.hwb=function(e){const t=e[1]/100,r=t+e[2]/100*(1-t);return[e[0],100*(r-t),100*(1-r)]},s.hwb.hcg=function(e){const t=e[1]/100,r=1-e[2]/100,n=r-t;let i=0;return n<1&&(i=(r-n)/(1-n)),[e[0],100*n,100*i]},s.apple.rgb=function(e){return[e[0]/65535*255,e[1]/65535*255,e[2]/65535*255]},s.rgb.apple=function(e){return[e[0]/255*65535,e[1]/255*65535,e[2]/255*65535]},s.gray.rgb=function(e){return[e[0]/100*255,e[0]/100*255,e[0]/100*255]},s.gray.hsl=function(e){return[0,0,e[0]]},s.gray.hsv=s.gray.hsl,s.gray.hwb=function(e){return[0,100,e[0]]},s.gray.cmyk=function(e){return[0,0,0,e[0]]},s.gray.lab=function(e){return[e[0],0,0]},s.gray.hex=function(e){const t=255&Math.round(e[0]/100*255),r=((t<<16)+(t<<8)+t).toString(16).toUpperCase();return"000000".substring(r.length)+r},s.rgb.gray=function(e){return[(e[0]+e[1]+e[2])/3/255*100]}},{"color-name":373}],331:[function(e,t,r){const n=e("./conversions"),i=e("./route"),s={};Object.keys(n).forEach((e=>{s[e]={},Object.defineProperty(s[e],"channels",{value:n[e].channels}),Object.defineProperty(s[e],"labels",{value:n[e].labels});const t=i(e);Object.keys(t).forEach((r=>{const n=t[r];s[e][r]=function(e){const t=function(...t){const r=t[0];if(null==r)return r;r.length>1&&(t=r);const n=e(t);if("object"==typeof n)for(let e=n.length,t=0;t<e;t++)n[t]=Math.round(n[t]);return n};return"conversion"in e&&(t.conversion=e.conversion),t}(n),s[e][r].raw=function(e){const t=function(...t){const r=t[0];return null==r?r:(r.length>1&&(t=r),e(t))};return"conversion"in e&&(t.conversion=e.conversion),t}(n)}))})),t.exports=s},{"./conversions":330,"./route":332}],332:[function(e,t,r){const n=e("./conversions");function i(e){const t=function(){const e={},t=Object.keys(n);for(let r=t.length,n=0;n<r;n++)e[t[n]]={distance:-1,parent:null};return e}(),r=[e];for(t[e].distance=0;r.length;){const e=r.pop(),i=Object.keys(n[e]);for(let n=i.length,s=0;s<n;s++){const n=i[s],o=t[n];-1===o.distance&&(o.distance=t[e].distance+1,o.parent=e,r.unshift(n))}}return t}function s(e,t){return function(r){return t(e(r))}}function o(e,t){const r=[t[e].parent,e];let i=n[t[e].parent][e],o=t[e].parent;for(;t[o].parent;)r.unshift(t[o].parent),i=s(n[t[o].parent][o],i),o=t[o].parent;return i.conversion=r,i}t.exports=function(e){const t=i(e),r={},n=Object.keys(t);for(let e=n.length,i=0;i<e;i++){const e=n[i];null!==t[e].parent&&(r[e]=o(e,t))}return r}},{"./conversions":330}],333:[function(e,t,r){(function(r){(function(){t.exports=function(t){const n="api.js: ",i=this,s=e("../apg-lib/node-exports"),o=e("../apg-conv-api/converter"),a=e("./scanner"),u=new(e("./parser")),{attributes:c,showAttributes:l,showAttributeErrors:f,showRuleDependencies:d}=e("./attributes"),h=e("./show-rules"),p=function(e,t,r){const n=`<span class="${s.style.CLASS_CTRLCHAR}">`,i="</span>",o=`<span class="${s.style.CLASS_NOMATCH}">`,a="</span>";let u,c="";for(;Array.isArray(e)&&0!==e.length;){if("number"!=typeof t)throw new Error("abnfToHtml: beg must be type number");if(t>=e.length)break;u="number"!=typeof r||t+r>=e.length?e.length:t+r;let l=0;for(let r=t;r<u;r+=1){const t=e[r];if(t>=32&&t<=126)switch(1===l?(c+=i,l=0):2===l&&(c+=a,l=0),t){case 32:c+="&nbsp;";break;case 60:c+="&lt;";break;case 62:c+="&gt;";break;case 38:c+="&amp;";break;case 34:c+="&quot;";break;case 39:c+="&#039;";break;case 92:c+="&#092;";break;default:c+=String.fromCharCode(t)}else 9===t||10===t||13===t?(0===l?(c+=n,l=1):2===l&&(c+=a+n,l=1),9===t&&(c+="TAB"),10===t&&(c+="LF"),13===t&&(c+="CR")):(0===l?(c+=o,l=2):1===l&&(c+=i+o,l=2),c+=`\\x${s.utils.charToHex(t)}`)}2===l&&(c+=a),1===l&&(c+=i);break}return c},m=function(e,t,r){let n="";for(let i=t;i<t+r;i+=1){const t=e[i];if(t>=32&&t<=126)n+=String.fromCharCode(t);else switch(t){case 9:n+="\\t";break;case 10:n+="\\n";break;case 13:n+="\\r";break;default:n+="\\unknown"}}return n};let g,b=!1,y=!1,v=!1,w=!1,_=0;if(this.errors=[],r.isBuffer(t))this.chars=o.decode("BINARY",t);else if(Array.isArray(t))this.chars=t.slice();else{if("string"!=typeof t)throw new Error(`${n}input source is not a string, byte Buffer or character array`);this.chars=o.decode("STRING",t)}this.sabnf=o.encode("STRING",this.chars),this.scan=function(e,t){this.lines=a(this.chars,this.errors,e,t),b=!0},this.parse=function(e,t){if(!b)throw new Error(`${n}grammar not scanned`);u.syntax(this.chars,this.lines,this.errors,e,t),y=!0},this.translate=function(){if(!y)throw new Error(`${n}grammar not scanned and parsed`);const e=u.semantic(this.chars,this.lines,this.errors);0===this.errors.length&&(this.rules=e.rules,this.udts=e.udts,g=e.lineMap,v=!0)},this.attributes=function(){if(!v)throw new Error(`${n}grammar not scanned, parsed and translated`);return _=c(this.rules,this.udts,g,this.errors),w=!0,_},this.generate=function(e){if(this.lines=a(this.chars,this.errors,e),this.errors.length)return;if(u.syntax(this.chars,this.lines,this.errors,e),this.errors.length)return;const t=u.semantic(this.chars,this.lines,this.errors);this.errors.length||(this.rules=t.rules,this.udts=t.udts,g=t.lineMap,_=c(this.rules,this.udts,g,this.errors),w=!0)},this.displayRules=function(e="index"){if(!v)throw new Error(`${n}grammar not scanned, parsed and translated`);return h(this.rules,this.udts,e)},this.displayRuleDependencies=function(e="index"){if(!w)throw new Error(`${n}no attributes - must be preceeded by call to attributes()`);return d(e)},this.displayAttributes=function(e="index"){if(!w)throw new Error(`${n}no attributes - must be preceeded by call to attributes()`);return _&&f(e),l(e)},this.displayAttributeErrors=function(){if(!w)throw new Error(`${n}no attributes - must be preceeded by call to attributes()`);return f()},this.toSource=function(e){if(!w)throw new Error(`${n}can't generate parser source - must be preceeded by call to attributes()`);if(_)throw new Error(`${n}can't generate parser source - attributes have ${_} errors`);return u.generateSource(this.chars,this.lines,this.rules,this.udts,e)},this.toObject=function(){if(!w)throw new Error(`${n}can't generate parser source - must be preceeded by call to attributes()`);if(_)throw new Error(`${n}can't generate parser source - attributes have ${_} errors`);return u.generateObject(this.sabnf,this.rules,this.udts)},this.errorsToAscii=function(){return function(e,t,r){let n,i,s,o;return n="",e.forEach((e=>{i=t[e.line],n+=`${i.lineNo}: `,n+=`${i.beginChar}: `,n+=e.char-i.beginChar+": ",s=i.beginChar,o=e.char-i.beginChar,n+=m(r,s,o),n+=" >> ",s=e.char,o=i.beginChar+i.length-e.char,n+=m(r,s,o),n+="\n",n+=`${i.lineNo}: `,n+=`${i.beginChar}: `,n+=e.char-i.beginChar+": ",n+="error: ",n+=e.msg,n+="\n"})),n}(this.errors,this.lines,this.chars)},this.errorsToHtml=function(e){return function(e,t,r,n){const[i]=s;let o="";const a=`<span class="${i.CLASS_NOMATCH}">&raquo;</span>`;return o+=`<p><table class="${i.CLASS_GRAMMAR}">\n`,n&&"string"==typeof n&&(o+=`<caption>${n}</caption>\n`),o+="<tr><th>line<br>no.</th><th>line<br>offset</th><th>error<br>offset</th><th><br>text</th></tr>\n",e.forEach((e=>{let n,i,u,c,l,f="",d="";0===t.length?(l=a,i=0):(n=t[e.line],u=n.beginChar,e.char>u&&(f=p(r,u,e.char-u)),u=e.char,c=n.beginChar+n.length,u<c&&(d=p(r,u,c-u)),l=f+a+d,i=e.char-n.beginChar,o+="<tr>",o+=`<td>${e.line}</td><td>${n.beginChar}</td><td>${i}</td><td>${l}</td>`,o+="</tr>\n",o+="<tr>",o+=`<td colspan="3"></td><td>&uarr;:&nbsp;${s.utils.stringToAsciiHtml(e.msg)}</td>`,o+="</tr>\n")})),o+="</table></p>\n",o}(this.errors,this.lines,this.chars,e)},this.linesToAscii=function(){return function(e){let t="Annotated Input Grammar";return e.forEach((e=>{t+="\n",t+=`line no: ${e.lineNo}`,t+=` : char index: ${e.beginChar}`,t+=` : length: ${e.length}`,t+=` : abnf: ${m(i.chars,e.beginChar,e.length)}`})),t+="\n",t}(this.lines)},this.linesToHtml=function(){return function(e){let t="";return t+=`<table class="${s.style.CLASS_GRAMMAR}">\n`,t+="<caption>Annotated Input Grammar</caption>\n",t+="<tr>",t+="<th>line<br>no.</th><th>first<br>char</th><th><br>length</th><th><br>text</th>",t+="</tr>\n",e.forEach((e=>{t+="<tr>",t+=`<td>${e.lineNo}`,t+=`</td><td>${e.beginChar}`,t+=`</td><td>${e.length}`,t+=`</td><td>${p(i.chars,e.beginChar,e.length)}`,t+="</td>",t+="</tr>\n"})),t+="</table>\n",t}(this.lines)}}}).call(this)}).call(this,{isBuffer:e("../../../is-buffer/index.js")})},{"../../../is-buffer/index.js":473,"../apg-conv-api/converter":345,"../apg-lib/node-exports":351,"./attributes":334,"./parser":335,"./scanner":341,"./show-rules":343}],334:[function(e,t,r){t.exports=function(){const t=e("../apg-lib/identifiers"),{ruleAttributes:r,showAttributes:n,showAttributeErrors:i}=e("./rule-attributes"),{ruleDependencies:s,showRuleDependencies:o}=e("./rule-dependencies");class a{constructor(e,t){this.rules=e,this.udts=t,this.ruleCount=e.length,this.udtCount=t.length,this.startRule=0,this.dependenciesComplete=!1,this.attributesComplete=!1,this.isMutuallyRecursive=!1,this.ruleIndexes=this.indexArray(this.ruleCount),this.ruleAlphaIndexes=this.indexArray(this.ruleCount),this.ruleTypeIndexes=this.indexArray(this.ruleCount),this.udtIndexes=this.indexArray(this.udtCount),this.udtAlphaIndexes=this.indexArray(this.udtCount),this.attrsErrorCount=0,this.attrs=[],this.attrsErrors=[],this.attrsWorking=[],this.ruleDeps=[];for(let t=0;t<this.ruleCount;t+=1)this.attrs.push(this.attrGen(this.rules[t])),this.attrsWorking.push(this.attrGen(this.rules[t])),this.ruleDeps.push(this.rdGen(e[t],this.ruleCount,this.udtCount));this.compRulesAlpha=this.compRulesAlpha.bind(this),this.compUdtsAlpha=this.compUdtsAlpha.bind(this),this.compRulesType=this.compRulesType.bind(this),this.compRulesGroup=this.compRulesGroup.bind(this)}attrGen(e){return{left:!1,nested:!1,right:!1,empty:!1,finite:!1,cyclic:!1,leaf:!1,isOpen:!1,isComplete:!1,rule:e}}attrInit(e){e.left=!1,e.nested=!1,e.right=!1,e.empty=!1,e.finite=!1,e.cyclic=!1,e.leaf=!1,e.isOpen=!1,e.isComplete=!1}attrCopy(e,t){e.left=t.left,e.nested=t.nested,e.right=t.right,e.empty=t.empty,e.finite=t.finite,e.cyclic=t.cyclic,e.leaf=t.leaf,e.isOpen=t.isOpen,e.isComplete=t.isComplete,e.rule=t.rule}rdGen(e,r,n){return{rule:e,recursiveType:t.ATTR_N,groupNumber:-1,refersTo:this.falseArray(r),refersToUdt:this.falseArray(n),referencedBy:this.falseArray(r)}}typeToString(e){switch(e){case t.ATTR_N:return" N";case t.ATTR_R:return" R";case t.ATTR_MR:return"MR";default:return"UNKNOWN"}}falseArray(e){const t=[];if(e>0)for(let r=0;r<e;r+=1)t.push(!1);return t}falsifyArray(e){for(let t=0;t<e.length;t+=1)e[t]=!1}indexArray(e){const t=[];if(e>0)for(let r=0;r<e;r+=1)t.push(r);return t}compRulesAlpha(e,t){return this.rules[e].lower<this.rules[t].lower?-1:this.rules[e].lower>this.rules[t].lower?1:0}compUdtsAlpha(e,t){return this.udts[e].lower<this.udts[t].lower?-1:this.udts[e].lower>this.udts[t].lower?1:0}compRulesType(e,t){return this.ruleDeps[e].recursiveType<this.ruleDeps[t].recursiveType?-1:this.ruleDeps[e].recursiveType>this.ruleDeps[t].recursiveType?1:0}compRulesGroup(e,r){if(this.ruleDeps[e].recursiveType===t.ATTR_MR&&this.ruleDeps[r].recursiveType===t.ATTR_MR){if(this.ruleDeps[e].groupNumber<this.ruleDeps[r].groupNumber)return-1;if(this.ruleDeps[e].groupNumber>this.ruleDeps[r].groupNumber)return 1}return 0}}return{attributes:function(e=[],t=[],n=[],i=[]){const o=new a(e,t);return s(o),r(o),o.attrsErrorCount&&i.push({line:0,char:0,msg:`${o.attrsErrorCount} attribute errors`}),o.attrsErrorCount},showAttributes:n,showAttributeErrors:i,showRuleDependencies:o}}()},{"../apg-lib/identifiers":350,"./rule-attributes":336,"./rule-dependencies":337}],335:[function(e,t,r){t.exports=function(){const t=e("../apg-lib/node-exports"),r=t.ids,n=new(e("./syntax-callbacks")),i=new(e("./semantic-callbacks")),s=new(e("./sabnf-grammar")),o=new t.parser;o.ast=new t.ast,o.callbacks=n.callbacks,o.ast.callbacks=i.callbacks;const a=function(e,t,r){if(t<0||t>=r)return-1;for(let r=0;r<e.length;r+=1)if(t>=e[r].beginChar&&t<e[r].beginChar+e[r].length)return r;return-1},u=function(e,t){let r=-1;if(t<e.length)for(let n=t;n<e.length;n+=1)if(null!==e[n]){r=e[n];break}return r};this.syntax=function(e,t,r,n,i){if(i){if("traceObject"!==i.traceObject)throw new TypeError("parser: trace argument is not a trace object");o.trace=i}const u={};u.errors=r,u.strict=!!n,u.lines=t,u.findLine=a,u.charsLength=e.length,u.ruleCount=0;o.parse(s,"file",e,u).success||r.push({line:0,char:0,msg:"syntax analysis of input grammar failed"})},this.semantic=function(e,t,n){const i={};return i.errors=n,i.lines=t,i.findLine=a,i.charsLength=e.length,o.ast.translate(i),n.length?null:(i.rules.forEach((e=>{const t=[],n=[];let i=0;e.opcodes.forEach((e=>{e.type===r.ALT&&1===e.children.length||e.type===r.CAT&&1===e.children.length||e.type===r.REP&&1===e.min&&1===e.max?n.push(null):(n.push(i),t.push(e),i+=1)})),n.push(i),t.forEach((e=>{if(e.type===r.ALT||e.type===r.CAT)for(let t=0;t<e.children.length;t+=1)e.children[t]=u(n,e.children[t])})),e.opcodes=t})),{rules:i.rules,udts:i.udts,lineMap:i.rulesLineMap})},this.generateSource=function(e,t,n,i,s){let o,a,u,c="",l=0,f=1/0,d=0;const h=[],p=[];let m=0,g=0,b=0,y=0,v=0,w=0,_=0,S=0,E=0,x=0,A=0,k=0,M=0,T=0,O=0;n.forEach((e=>{h.push(e.lower),l+=e.opcodes.length,e.opcodes.forEach((e=>{switch(e.type){case r.ALT:m+=1;break;case r.CAT:g+=1;break;case r.RNM:b+=1;break;case r.UDT:y+=1;break;case r.REP:v+=1;break;case r.AND:w+=1;break;case r.NOT:_+=1;break;case r.BKA:k+=1;break;case r.BKN:M+=1;break;case r.BKR:A+=1;break;case r.ABG:T+=1;break;case r.AEN:O+=1;break;case r.TLS:for(S+=1,o=0;o<e.string.length;o+=1)e.string[o]<f&&(f=e.string[o]),e.string[o]>d&&(d=e.string[o]);break;case r.TBS:for(E+=1,o=0;o<e.string.length;o+=1)e.string[o]<f&&(f=e.string[o]),e.string[o]>d&&(d=e.string[o]);break;case r.TRG:x+=1,e.min<f&&(f=e.min),e.max>d&&(d=e.max);break;default:throw new Error("generateSource: unrecognized opcode")}}))})),h.sort(),i.length>0&&(i.forEach((e=>{p.push(e.lower)})),p.sort());let R,P="module.exports";return s&&"string"==typeof s&&(P=`let ${s}`),c+="// copyright: Copyright (c) 2021 Lowell D. Thomas, all rights reserved<br>\n",c+="//   license: BSD-2-Clause (https://opensource.org/licenses/BSD-2-Clause)<br>\n",c+="//\n",c+="// Generated by apg-js, Version 4.0.0 [apg-js](https://github.com/ldthomas/apg-js)\n",c+=`${P} = function grammar(){\n`,c+="  // ```\n",c+="  // SUMMARY\n",c+=`  //      rules = ${n.length}\n`,c+=`  //       udts = ${i.length}\n`,c+=`  //    opcodes = ${l}\n`,c+="  //        ---   ABNF original opcodes\n",c+=`  //        ALT = ${m}\n`,c+=`  //        CAT = ${g}\n`,c+=`  //        REP = ${v}\n`,c+=`  //        RNM = ${b}\n`,c+=`  //        TLS = ${S}\n`,c+=`  //        TBS = ${E}\n`,c+=`  //        TRG = ${x}\n`,c+="  //        ---   SABNF superset opcodes\n",c+=`  //        UDT = ${y}\n`,c+=`  //        AND = ${w}\n`,c+=`  //        NOT = ${_}\n`,c+=`  //        BKA = ${k}\n`,c+=`  //        BKN = ${M}\n`,c+=`  //        BKR = ${A}\n`,c+=`  //        ABG = ${T}\n`,c+=`  //        AEN = ${O}\n`,c+="  // characters = [",c+=S+E+x===0?" none defined ]":`${f} - ${d}]`,y>0&&(c+=" + user defined"),c+="\n",c+="  // ```\n",c+="  /* OBJECT IDENTIFIER (for internal parser use) */\n",c+="  this.grammarObject = 'grammarObject';\n",c+="\n",c+="  /* RULES */\n",c+="  this.rules = [];\n",n.forEach(((e,t)=>{let r="  this.rules[";r+=t,r+="] = {name: '",r+=e.name,r+="', lower: '",r+=e.lower,r+="', index: ",r+=e.index,r+=", isBkr: ",r+=e.isBkr,r+="};\n",c+=r})),c+="\n",c+="  /* UDTS */\n",c+="  this.udts = [];\n",i.length>0&&i.forEach(((e,t)=>{let r="  this.udts[";r+=t,r+="] = {name: '",r+=e.name,r+="', lower: '",r+=e.lower,r+="', index: ",r+=e.index,r+=", empty: ",r+=e.empty,r+=", isBkr: ",r+=e.isBkr,r+="};\n",c+=r})),c+="\n",c+="  /* OPCODES */\n",n.forEach(((e,t)=>{t>0&&(c+="\n"),c+=`  /* ${e.name} */\n`,c+=`  this.rules[${t}].opcodes = [];\n`,e.opcodes.forEach(((e,s)=>{let o;switch(e.type){case r.ALT:c+=`  this.rules[${t}].opcodes[${s}] = {type: ${e.type}, children: [${e.children.toString()}]};// ALT\n`;break;case r.CAT:c+=`  this.rules[${t}].opcodes[${s}] = {type: ${e.type}, children: [${e.children.toString()}]};// CAT\n`;break;case r.RNM:c+=`  this.rules[${t}].opcodes[${s}] = {type: ${e.type}, index: ${e.index}};// RNM(${n[e.index].name})\n`;break;case r.BKR:e.index>=n.length?(a=i[e.index-n.length].name,u=i[e.index-n.length].lower):(a=n[e.index].name,u=n[e.index].lower),o="%i",e.bkrCase===r.BKR_MODE_CS&&(o="%s"),e.bkrMode===r.BKR_MODE_UM?o+="%u":o+="%p",a=o+a,c+=`  this.rules[${t}].opcodes[${s}] = {type: ${e.type}, index: ${e.index}, lower: '${u}', bkrCase: ${e.bkrCase}, bkrMode: ${e.bkrMode}};// BKR(\\${a})\n`;break;case r.UDT:c+=`  this.rules[${t}].opcodes[${s}] = {type: ${e.type}, empty: ${e.empty}, index: ${e.index}};// UDT(${i[e.index].name})\n`;break;case r.REP:c+=`  this.rules[${t}].opcodes[${s}] = {type: ${e.type}, min: ${e.min}, max: ${e.max}};// REP\n`;break;case r.AND:c+=`  this.rules[${t}].opcodes[${s}] = {type: ${e.type}};// AND\n`;break;case r.NOT:c+=`  this.rules[${t}].opcodes[${s}] = {type: ${e.type}};// NOT\n`;break;case r.ABG:c+=`  this.rules[${t}].opcodes[${s}] = {type: ${e.type}};// ABG(%^)\n`;break;case r.AEN:c+=`  this.rules[${t}].opcodes[${s}] = {type: ${e.type}};// AEN(%$)\n`;break;case r.BKA:c+=`  this.rules[${t}].opcodes[${s}] = {type: ${e.type}};// BKA\n`;break;case r.BKN:c+=`  this.rules[${t}].opcodes[${s}] = {type: ${e.type}};// BKN\n`;break;case r.TLS:c+=`  this.rules[${t}].opcodes[${s}] = {type: ${e.type}, string: [${e.string.toString()}]};// TLS\n`;break;case r.TBS:c+=`  this.rules[${t}].opcodes[${s}] = {type: ${e.type}, string: [${e.string.toString()}]};// TBS\n`;break;case r.TRG:c+=`  this.rules[${t}].opcodes[${s}] = {type: ${e.type}, min: ${e.min}, max: ${e.max}};// TRG\n`;break;default:throw new Error("parser.js: ~143: unrecognized opcode")}}))})),c+="\n",c+="  // The `toString()` function will display the original grammar file(s) that produced these opcodes.\n",c+="  this.toString = function toString(){\n",c+='    let str = "";\n',t.forEach((t=>{const r=t.beginChar+t.length;R="",c+='    str += "';for(let n=t.beginChar;n<r;n+=1){switch(e[n]){case 9:R=" ";break;case 10:R="\\n";break;case 13:R="\\r";break;case 34:R='\\"';break;case 92:R="\\\\";break;default:R=String.fromCharCode(e[n])}c+=R}c+='";\n'})),c+="    return str;\n",c+="  }\n",c+="}\n",c},this.generateObject=function(e,t,r){const n={},i=[],s=[],o=e.slice(0);return n.grammarObject="grammarObject",t.forEach((e=>{i.push(e.lower)})),i.sort(),r.length>0&&(r.forEach((e=>{s.push(e.lower)})),s.sort()),n.callbacks=[],i.forEach((e=>{n.callbacks[e]=!1})),r.length>0&&s.forEach((e=>{n.callbacks[e]=!1})),n.rules=t,n.udts=r,n.toString=function(){return o},n}}},{"../apg-lib/node-exports":351,"./sabnf-grammar":338,"./semantic-callbacks":342,"./syntax-callbacks":344}],336:[function(e,t,r){t.exports=function(){const t=e("../apg-lib/identifiers");let r=null;function n(e){return!(e.left||e.nested||e.right||e.cyclic)&&e.empty}function i(e){return!!(e.left||e.nested||e.right||e.cyclic)}function s(e,t,r,s){let a=0;const u=t[r],c=u.children.length,l=[];for(a=0;a<c;a+=1)l.push(e.attrGen());for(a=0;a<c;a+=1)o(e,t,u.children[a],l[a]);s.left=function(e,t){for(let r=0;r<t;r+=1){if(e[r].left)return!0;if(!e[r].empty)return!1}return!1}(l,c),s.right=function(e,t){for(let r=t-1;r>=0;r-=1){if(e[r].right)return!0;if(!e[r].empty)return!1}return!1}(l,c),s.nested=function(e,t){let r=0,s=0,o=0;for(r=0;r<t;r+=1)if(e[r].nested)return!0;for(r=0;r<t;r+=1)if(e[r].right&&!e[r].leaf)for(s=r+1;s<t;s+=1)if(!n(e[s]))return!0;for(r=t-1;r>=0;r-=1)if(e[r].left&&!e[r].leaf)for(s=r-1;s>=0;s-=1)if(!n(e[s]))return!0;for(r=0;r<t;r+=1)if(!e[r].empty&&!i(e[r]))for(s=r+1;s<t;s+=1)if(i(e[s]))for(o=s+1;o<t;o+=1)if(!e[o].empty&&!i(e[o]))return!0;return!1}(l,c),s.empty=function(e,t){for(let r=0;r<t;r+=1)if(!e[r].empty)return!1;return!0}(l,c),s.finite=function(e,t){for(let r=0;r<t;r+=1)if(!e[r].finite)return!1;return!0}(l,c),s.cyclic=function(e,t){for(let r=0;r<t;r+=1)if(!e[r].cyclic)return!1;return!0}(l,c)}function o(e,r,n,i){e.attrInit(i);const u=r[n];switch(u.type){case t.ALT:!function(e,t,r,n){let i=0;const s=t[r],a=s.children.length,u=[];for(i=0;i<a;i+=1)u.push(e.attrGen());for(i=0;i<a;i+=1)o(e,t,s.children[i],u[i]);for(n.left=!1,n.right=!1,n.nested=!1,n.empty=!1,n.finite=!1,n.cyclic=!1,i=0;i<a;i+=1)u[i].left&&(n.left=!0),u[i].nested&&(n.nested=!0),u[i].right&&(n.right=!0),u[i].empty&&(n.empty=!0),u[i].finite&&(n.finite=!0),u[i].cyclic&&(n.cyclic=!0)}(e,r,n,i);break;case t.CAT:s(e,r,n,i);break;case t.REP:o(e,r,n+1,i),0===u.min&&(i.empty=!0,i.finite=!0);break;case t.RNM:a(e,r[n].index,i);break;case t.BKR:!function(e,t,r,n){const i=t[r];i.index>=e.ruleCount?(n.empty=e.udts[i.index-e.ruleCount].empty,n.finite=!0):(a(e,i.index,n),n.left=!1,n.nested=!1,n.right=!1,n.cyclic=!1)}(e,r,n,i);break;case t.AND:case t.NOT:case t.BKA:case t.BKN:o(e,r,n+1,i),i.empty=!0;break;case t.TLS:i.empty=!r[n].string.length,i.finite=!0,i.cyclic=!1;break;case t.TBS:case t.TRG:i.empty=!1,i.finite=!0,i.cyclic=!1;break;case t.UDT:i.empty=u.empty,i.finite=!0,i.cyclic=!1;break;case t.ABG:case t.AEN:i.empty=!0,i.finite=!0,i.cyclic=!1;break;default:throw new Error(`unknown opcode type: ${u}`)}}function a(e,t,r){const n=e.attrsWorking[t];n.isComplete?e.attrCopy(r,n):n.isOpen?t===e.startRule?t===e.startRule&&(r.left=!0,r.right=!0,r.cyclic=!0,r.leaf=!0):r.finite=!0:(n.isOpen=!0,o(e,n.rule.opcodes,0,r),n.left=r.left,n.right=r.right,n.nested=r.nested,n.empty=r.empty,n.finite=r.finite,n.cyclic=r.cyclic,n.leaf=!1,n.isOpen=!1,n.isComplete=!0)}const u=e=>e?"t":"f",c=e=>e?"e":"f",l=(e,n,i,s)=>{let o=`${e}:${n}:`;return o+=`${c(i.left)} `,o+=`${u(i.nested)} `,o+=`${u(i.right)} `,o+=`${c(i.cyclic)} `,o+=`${(e=>e?"t":"e")(i.finite)} `,o+=`${u(i.empty)}:`,o+=`${r.typeToString(s.recursiveType)}:`,o+=s.recursiveType===t.ATTR_MR?s.groupNumber:"-",o+=`:${i.rule.name}\n`,o},f=()=>{let e="LEGEND - t=true, f=false, e=error\n";return e+="sequence:rule index:left nested right cyclic finite empty:type:group number:rule name\n","LEGEND - t=true, f=false, e=error\nsequence:rule index:left nested right cyclic finite empty:type:group number:rule name\n"},d=e=>{let t=0,n=0,i=null,s=null,o="",{ruleIndexes:a}=r;for(97===e?a=r.ruleAlphaIndexes:116===e&&(a=r.ruleTypeIndexes),t=0;t<r.ruleCount;t+=1)n=a[t],i=r.attrs[n],s=r.ruleDeps[n],o+=l(t,n,i,s);return o};return{ruleAttributes:e=>{r=e;let t=0,n=0;const i=r.attrGen();for(t=0;t<r.ruleCount;t+=1){for(n=0;n<r.ruleCount;n+=1)r.attrInit(r.attrsWorking[n]);r.startRule=t,a(r,t,i),r.attrCopy(r.attrs[t],r.attrsWorking[t])}r.attributesComplete=!0;let s=null;for(t=0;t<r.ruleCount;t+=1)if(s=r.attrs[t],s.left||!s.finite||s.cyclic){const e=r.attrGen(s.rule);r.attrCopy(e,s),r.attrsErrors.push(e),r.attrsErrorCount+=1}},showAttributes:(e="index")=>{if(!r.attributesComplete)throw new Error("rule-attributes.js:showAttributes: attributes not available");let t="";const n="RULE ATTRIBUTES\n";return 97===e.charCodeAt(0)?(t+="alphabetical by rule name\n",t+=n,t+=f(),t+=d(97)):116===e.charCodeAt(0)?(t+="ordered by rule type\n",t+=n,t+=f(),t+=d(116)):(t+="ordered by rule index\n",t+=n,t+=f(),t+=d()),t},showAttributeErrors:()=>{let e=null,t=null,n="";if(n+="RULE ATTRIBUTES WITH ERRORS\n",n+=f(),r.attrsErrorCount)for(let i=0;i<r.attrsErrorCount;i+=1)e=r.attrsErrors[i],t=r.ruleDeps[e.rule.index],n+=l(i,e.rule.index,e,t);else n+="<none>\n";return n}}}()},{"../apg-lib/identifiers":350}],337:[function(e,t,r){t.exports=(()=>{const t=e("../apg-lib/identifiers");let r=null;const n=(e,r,i,s)=>{let o=0,a=0;const u=r[i];s[i]=!0;const c=u.rule.opcodes;for(o=0;o<c.length;o+=1){const i=c[o];if(i.type===t.RNM)for(u.refersTo[i.index]=!0,s[i.index]||n(e,r,i.index,s),a=0;a<e;a+=1)r[i.index].refersTo[a]&&(u.refersTo[a]=!0);else i.type===t.UDT?u.refersToUdt[i.index]=!0:i.type===t.BKR&&(i.index<e?(u.refersTo[i.index]=!0,s[i.index]||n(e,r,i.index,s)):u.refersToUdt[e-i.index]=!0)}},i=(e=null)=>{let t=0,n=0,i=0,s=0;const o=r.ruleCount-1,a=r.udtCount-1;let u="",c="";const l="=> ";let f=!1,d=null,{ruleIndexes:h}=r,{udtIndexes:p}=r;for(97===e?(h=r.ruleAlphaIndexes,p=r.udtAlphaIndexes):116===e&&(h=r.ruleTypeIndexes,p=r.udtAlphaIndexes),t=0;t<r.ruleCount;t+=1){for(d=r.ruleDeps[h[t]],c=`${h[t]}:${r.typeToString(d.recursiveType)}:`,r.isMutuallyRecursive&&(c+=d.groupNumber>-1?d.groupNumber:"-",c+=":"),c+=" ",u+=`${c+r.rules[h[t]].name}\n`,f=!0,i=0,s=u.length,u+=c,n=0;n<r.ruleCount;n+=1)d.refersTo[h[n]]&&(f?(u+=l,f=!1,u+=r.ruleDeps[h[n]].rule.name):u+=`, ${r.ruleDeps[h[n]].rule.name}`,i+=1),u.length-s>100&&n!==o&&(u+=`\n${c}${l}`,s=u.length);if(r.udtCount)for(n=0;n<r.udtCount;n+=1)d.refersToUdt[p[n]]&&(f?(u+=l,f=!1,u+=r.udts[p[n]].name):u+=`, ${r.udts[p[n]].name}`,i+=1),u.length-s>100&&n!==a&&(u+=`\n${c}${l}`,s=u.length);for(0===i&&(u+="=> <none>\n"),!1===f&&(u+="\n"),f=!0,i=0,s=u.length,u+=c,n=0;n<r.ruleCount;n+=1)d.referencedBy[h[n]]&&(f?(u+="<= ",f=!1,u+=r.ruleDeps[h[n]].rule.name):u+=`, ${r.ruleDeps[h[n]].rule.name}`,i+=1),u.length-s>100&&n!==o&&(u+=`\n${c}${l}`,s=u.length);0===i&&(u+="<= <none>\n"),!1===f&&(u+="\n"),u+="\n"}return u};return{ruleDependencies:e=>{r=e;let i=0,s=0,o=0,a=null,u=null,c=!1;r.dependenciesComplete=!1;const l=r.falseArray(r.ruleCount);for(i=0;i<r.ruleCount;i+=1)r.falsifyArray(l),n(r.ruleCount,r.ruleDeps,i,l);for(i=0;i<r.ruleCount;i+=1)for(s=0;s<r.ruleCount;s+=1)i!==s&&r.ruleDeps[s].refersTo[i]&&(r.ruleDeps[i].referencedBy[s]=!0);for(i=0;i<r.ruleCount;i+=1)r.ruleDeps[i].recursiveType=t.ATTR_N,r.ruleDeps[i].refersTo[i]&&(r.ruleDeps[i].recursiveType=t.ATTR_R);for(o=-1,i=0;i<r.ruleCount;i+=1)if(a=r.ruleDeps[i],a.recursiveType===t.ATTR_R)for(c=!0,s=0;s<r.ruleCount;s+=1)i!==s&&(u=r.ruleDeps[s],u.recursiveType===t.ATTR_R&&a.refersTo[s]&&u.refersTo[i]&&(c&&(o+=1,a.recursiveType=t.ATTR_MR,a.groupNumber=o,c=!1),u.recursiveType=t.ATTR_MR,u.groupNumber=o));r.isMutuallyRecursive=o>-1,r.ruleAlphaIndexes.sort(r.compRulesAlpha),r.ruleTypeIndexes.sort(r.compRulesAlpha),r.ruleTypeIndexes.sort(r.compRulesType),r.isMutuallyRecursive&&r.ruleTypeIndexes.sort(r.compRulesGroup),r.udtCount&&r.udtAlphaIndexes.sort(r.compUdtsAlpha),r.dependenciesComplete=!0},showRuleDependencies:(e="index")=>{let t="RULE DEPENDENCIES(index:type:[group number:])\n";return t+="=> refers to rule names\n",t+="<= referenced by rule names\n",r.dependenciesComplete?(97===e.charCodeAt(0)?(t+="alphabetical by rule name\n",t+=i(97)):116===e.charCodeAt(0)?(t+="ordered by rule type\n",t+=i(116)):(t+="ordered by rule index\n",t+=i(null)),t):t}}})()},{"../apg-lib/identifiers":350}],338:[function(e,t,r){t.exports=function(){this.grammarObject="grammarObject",this.rules=[],this.rules[0]={name:"File",lower:"file",index:0,isBkr:!1},this.rules[1]={name:"BlankLine",lower:"blankline",index:1,isBkr:!1},this.rules[2]={name:"Rule",lower:"rule",index:2,isBkr:!1},this.rules[3]={name:"RuleLookup",lower:"rulelookup",index:3,isBkr:!1},this.rules[4]={name:"RuleNameTest",lower:"rulenametest",index:4,isBkr:!1},this.rules[5]={name:"RuleName",lower:"rulename",index:5,isBkr:!1},this.rules[6]={name:"RuleNameError",lower:"rulenameerror",index:6,isBkr:!1},this.rules[7]={name:"DefinedAsTest",lower:"definedastest",index:7,isBkr:!1},this.rules[8]={name:"DefinedAsError",lower:"definedaserror",index:8,isBkr:!1},this.rules[9]={name:"DefinedAs",lower:"definedas",index:9,isBkr:!1},this.rules[10]={name:"Defined",lower:"defined",index:10,isBkr:!1},this.rules[11]={name:"IncAlt",lower:"incalt",index:11,isBkr:!1},this.rules[12]={name:"RuleError",lower:"ruleerror",index:12,isBkr:!1},this.rules[13]={name:"LineEndError",lower:"lineenderror",index:13,isBkr:!1},this.rules[14]={name:"Alternation",lower:"alternation",index:14,isBkr:!1},this.rules[15]={name:"Concatenation",lower:"concatenation",index:15,isBkr:!1},this.rules[16]={name:"Repetition",lower:"repetition",index:16,isBkr:!1},this.rules[17]={name:"Modifier",lower:"modifier",index:17,isBkr:!1},this.rules[18]={name:"Predicate",lower:"predicate",index:18,isBkr:!1},this.rules[19]={name:"BasicElement",lower:"basicelement",index:19,isBkr:!1},this.rules[20]={name:"BasicElementErr",lower:"basicelementerr",index:20,isBkr:!1},this.rules[21]={name:"Group",lower:"group",index:21,isBkr:!1},this.rules[22]={name:"GroupError",lower:"grouperror",index:22,isBkr:!1},this.rules[23]={name:"GroupOpen",lower:"groupopen",index:23,isBkr:!1},this.rules[24]={name:"GroupClose",lower:"groupclose",index:24,isBkr:!1},this.rules[25]={name:"Option",lower:"option",index:25,isBkr:!1},this.rules[26]={name:"OptionError",lower:"optionerror",index:26,isBkr:!1},this.rules[27]={name:"OptionOpen",lower:"optionopen",index:27,isBkr:!1},this.rules[28]={name:"OptionClose",lower:"optionclose",index:28,isBkr:!1},this.rules[29]={name:"RnmOp",lower:"rnmop",index:29,isBkr:!1},this.rules[30]={name:"BkrOp",lower:"bkrop",index:30,isBkr:!1},this.rules[31]={name:"bkrModifier",lower:"bkrmodifier",index:31,isBkr:!1},this.rules[32]={name:"cs",lower:"cs",index:32,isBkr:!1},this.rules[33]={name:"ci",lower:"ci",index:33,isBkr:!1},this.rules[34]={name:"um",lower:"um",index:34,isBkr:!1},this.rules[35]={name:"pm",lower:"pm",index:35,isBkr:!1},this.rules[36]={name:"bkr-name",lower:"bkr-name",index:36,isBkr:!1},this.rules[37]={name:"rname",lower:"rname",index:37,isBkr:!1},this.rules[38]={name:"uname",lower:"uname",index:38,isBkr:!1},this.rules[39]={name:"ename",lower:"ename",index:39,isBkr:!1},this.rules[40]={name:"UdtOp",lower:"udtop",index:40,isBkr:!1},this.rules[41]={name:"udt-non-empty",lower:"udt-non-empty",index:41,isBkr:!1},this.rules[42]={name:"udt-empty",lower:"udt-empty",index:42,isBkr:!1},this.rules[43]={name:"RepOp",lower:"repop",index:43,isBkr:!1},this.rules[44]={name:"AltOp",lower:"altop",index:44,isBkr:!1},this.rules[45]={name:"CatOp",lower:"catop",index:45,isBkr:!1},this.rules[46]={name:"StarOp",lower:"starop",index:46,isBkr:!1},this.rules[47]={name:"AndOp",lower:"andop",index:47,isBkr:!1},this.rules[48]={name:"NotOp",lower:"notop",index:48,isBkr:!1},this.rules[49]={name:"BkaOp",lower:"bkaop",index:49,isBkr:!1},this.rules[50]={name:"BknOp",lower:"bknop",index:50,isBkr:!1},this.rules[51]={name:"AbgOp",lower:"abgop",index:51,isBkr:!1},this.rules[52]={name:"AenOp",lower:"aenop",index:52,isBkr:!1},this.rules[53]={name:"TrgOp",lower:"trgop",index:53,isBkr:!1},this.rules[54]={name:"TbsOp",lower:"tbsop",index:54,isBkr:!1},this.rules[55]={name:"TlsOp",lower:"tlsop",index:55,isBkr:!1},this.rules[56]={name:"TlsCase",lower:"tlscase",index:56,isBkr:!1},this.rules[57]={name:"TlsOpen",lower:"tlsopen",index:57,isBkr:!1},this.rules[58]={name:"TlsClose",lower:"tlsclose",index:58,isBkr:!1},this.rules[59]={name:"TlsString",lower:"tlsstring",index:59,isBkr:!1},this.rules[60]={name:"StringTab",lower:"stringtab",index:60,isBkr:!1},this.rules[61]={name:"ClsOp",lower:"clsop",index:61,isBkr:!1},this.rules[62]={name:"ClsOpen",lower:"clsopen",index:62,isBkr:!1},this.rules[63]={name:"ClsClose",lower:"clsclose",index:63,isBkr:!1},this.rules[64]={name:"ClsString",lower:"clsstring",index:64,isBkr:!1},this.rules[65]={name:"ProsVal",lower:"prosval",index:65,isBkr:!1},this.rules[66]={name:"ProsValOpen",lower:"prosvalopen",index:66,isBkr:!1},this.rules[67]={name:"ProsValString",lower:"prosvalstring",index:67,isBkr:!1},this.rules[68]={name:"ProsValClose",lower:"prosvalclose",index:68,isBkr:!1},this.rules[69]={name:"rep-min",lower:"rep-min",index:69,isBkr:!1},this.rules[70]={name:"rep-min-max",lower:"rep-min-max",index:70,isBkr:!1},this.rules[71]={name:"rep-max",lower:"rep-max",index:71,isBkr:!1},this.rules[72]={name:"rep-num",lower:"rep-num",index:72,isBkr:!1},this.rules[73]={name:"dString",lower:"dstring",index:73,isBkr:!1},this.rules[74]={name:"xString",lower:"xstring",index:74,isBkr:!1},this.rules[75]={name:"bString",lower:"bstring",index:75,isBkr:!1},this.rules[76]={n